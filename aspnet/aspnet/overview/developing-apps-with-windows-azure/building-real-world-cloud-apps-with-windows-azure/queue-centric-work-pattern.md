---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
title: キューを中心とした作業のパターン (Azure と実際のクラウド アプリのビルド) |Microsoft ドキュメント
author: MikeWasson
description: Azure の電子書籍と構築実世界クラウド アプリは、Scott Guthrie が開発したプレゼンテーションに基づいています。 13 のパターンと彼をできるベスト プラクティスについて説明しています.
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/12/2014
ms.topic: article
ms.assetid: cc1ad51b-40c3-4c68-8620-9aaa0fd1f6cf
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
msc.type: authoredcontent
ms.openlocfilehash: 124e673206ecea2eac5efb8c2802a32a690fa104
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/06/2018
---
<a name="queue-centric-work-pattern-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="85b67-104">キューを中心とした作業のパターン (Azure と実際のクラウド アプリのビルド)</span><span class="sxs-lookup"><span data-stu-id="85b67-104">Queue-Centric Work Pattern (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="85b67-105">によって[Mike Wasson](https://github.com/MikeWasson)、 [Rick Anderson](https://github.com/Rick-Anderson)、 [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="85b67-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="85b67-106">[ダウンロード修正プロジェクト](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4)または[電子書籍をダウンロード](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="85b67-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="85b67-107">**現実世界クラウド アプリのビルドと Azure**電子書籍は Scott Guthrie が開発したプレゼンテーションに基づいています。</span><span class="sxs-lookup"><span data-stu-id="85b67-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="85b67-108">13 パターンについて説明します、プラクティスするのに役立つ、クラウドの web アプリの開発が成功します。</span><span class="sxs-lookup"><span data-stu-id="85b67-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="85b67-109">電子書籍の詳細については、次を参照してください。[第 1 章](introduction.md)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="85b67-110">複数のサービスを使用することになる、アプリの有効な SLA がここでは、「複合」SLA 見た以前、*製品*個々 の Sla のです。</span><span class="sxs-lookup"><span data-stu-id="85b67-110">Earlier, we saw that using multiple services can result in a "composite" SLA, where the app's effective SLA is the *product* of the individual SLAs.</span></span> <span data-ttu-id="85b67-111">たとえば、修正、アプリは、Web サイト、ストレージ、および SQL データベースを使用します。</span><span class="sxs-lookup"><span data-stu-id="85b67-111">For example, the Fix It app uses Web Sites, Storage, and SQL Database.</span></span> <span data-ttu-id="85b67-112">これらのサービスのいずれかに失敗した場合、アプリはユーザーにエラーを返します。</span><span class="sxs-lookup"><span data-stu-id="85b67-112">If any one of these services fails, the app will return an error to the user.</span></span>

<span data-ttu-id="85b67-113">キャッシュは、読み取り専用のコンテンツの一時的なエラーを処理することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="85b67-113">Caching is a good way to handle transient failures for read-only content.</span></span> <span data-ttu-id="85b67-114">アプリが作業を実行する必要がある場合ですか。</span><span class="sxs-lookup"><span data-stu-id="85b67-114">But what if your application needs to do work?</span></span> <span data-ttu-id="85b67-115">たとえば、ユーザーが新しい解決、タスクを送信したときに、アプリことはできませんだけタスク キャッシュに格納します。</span><span class="sxs-lookup"><span data-stu-id="85b67-115">For example, when the user submits a new Fix It task, the app can't just put the task into the cache.</span></span> <span data-ttu-id="85b67-116">アプリは、処理できるように、永続データ ストアに、解決、タスクを書き込む必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-116">The app needs to write the Fix It task into a persistent data store, so it can be processed.</span></span>

<span data-ttu-id="85b67-117">キューを中心とした作業のパターンの出番です。</span><span class="sxs-lookup"><span data-stu-id="85b67-117">That's where the queue-centric work pattern comes in.</span></span> <span data-ttu-id="85b67-118">このパターンは、web 層およびバックエンド サービス間の疎結合を使用できます。</span><span class="sxs-lookup"><span data-stu-id="85b67-118">This pattern enables loose coupling between a web tier and a backend service.</span></span>

<span data-ttu-id="85b67-119">次に、パターンの動作方法を示します。</span><span class="sxs-lookup"><span data-stu-id="85b67-119">Here's how the pattern works.</span></span> <span data-ttu-id="85b67-120">アプリケーションでは、要求を取得と、が作業項目をキューに配置され、すぐに、応答を返します。</span><span class="sxs-lookup"><span data-stu-id="85b67-120">When the application gets a request, it puts a work item onto a queue and immediately returns the response.</span></span> <span data-ttu-id="85b67-121">個別のバックエンド プロセス キューから作業項目を取得し、処理します。</span><span class="sxs-lookup"><span data-stu-id="85b67-121">Then a separate backend process pulls work items from the queue and does the work.</span></span>

<span data-ttu-id="85b67-122">キューを中心とした作業のパターンは次に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="85b67-122">The queue-centric work pattern is useful for:</span></span>

- <span data-ttu-id="85b67-123">時間のかかる (待機時間が高い) である作業します。</span><span class="sxs-lookup"><span data-stu-id="85b67-123">Work that is time consuming (high latency).</span></span>
- <span data-ttu-id="85b67-124">常に使用できない外部のサービスが必要な作業です。</span><span class="sxs-lookup"><span data-stu-id="85b67-124">Work that requires an external service that might not always be available.</span></span>
- <span data-ttu-id="85b67-125">れた作業 (高い cpu 使用率) のリソースを消費します。</span><span class="sxs-lookup"><span data-stu-id="85b67-125">Work that is resource-intensive (high CPU).</span></span>
- <span data-ttu-id="85b67-126">速度 (負荷の急激なバースト) に従います平準化からメリットを得られる作業します。</span><span class="sxs-lookup"><span data-stu-id="85b67-126">Work that would benefit from rate leveling (subject to sudden load bursts).</span></span>

## <a name="reduced-latency"></a><span data-ttu-id="85b67-127">待機時間の削減</span><span class="sxs-lookup"><span data-stu-id="85b67-127">Reduced Latency</span></span>

<span data-ttu-id="85b67-128">キューは、時間のかかる作業を実行して、いつでも便利です。</span><span class="sxs-lookup"><span data-stu-id="85b67-128">Queues are useful any time you are doing time-consuming work.</span></span> <span data-ttu-id="85b67-129">タスクを受け取る場合は、数秒またはそれ以上、ブロックする代わりに、エンドユーザー、作業項目キューに配置します。</span><span class="sxs-lookup"><span data-stu-id="85b67-129">If a task takes a few seconds or longer, instead of blocking the end user, put the work item into a queue.</span></span> <span data-ttu-id="85b67-130">「に取り組んでいますが、」に、ユーザーに通知し、キュー リスナーを使用して、バック グラウンドでタスクを実行します。</span><span class="sxs-lookup"><span data-stu-id="85b67-130">Tell the user "We're working on it," and then use a queue listener to process the task in the background.</span></span>

<span data-ttu-id="85b67-131">たとえば、オンラインの小売店舗で商品を購入するときに、web サイト、注文を確認すぐにします。</span><span class="sxs-lookup"><span data-stu-id="85b67-131">For example, when you purchase something at an online retailer, the web site confirms your order immediately.</span></span> <span data-ttu-id="85b67-132">あなたの情報が配信される、トラック内に既にことを意味します。</span><span class="sxs-lookup"><span data-stu-id="85b67-132">But that doesn't mean your stuff is already in a truck being delivered.</span></span> <span data-ttu-id="85b67-133">タスクが、キューに配置して、バック グラウンドは与信審査、出荷、アイテムの準備を行うなどです。</span><span class="sxs-lookup"><span data-stu-id="85b67-133">They put a task in a queue, and in the background they are doing the credit check, preparing your items for shipping, and so forth.</span></span>

<span data-ttu-id="85b67-134">短い待機時間シナリオでは、エンド ツー エンド時間の合計が長いタスクを同期的に行うと比較して、キューを使用する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-134">For scenarios with short latency, the total end-to-end time might be longer using a queue, compared with doing the task synchronously.</span></span> <span data-ttu-id="85b67-135">その場合でも、その他の利点がありますがその欠点を上回ることができます。</span><span class="sxs-lookup"><span data-stu-id="85b67-135">But even then, the other benefits can outweigh that disadvantage.</span></span>

## <a name="increased-reliability"></a><span data-ttu-id="85b67-136">信頼性の向上</span><span class="sxs-lookup"><span data-stu-id="85b67-136">Increased Reliability</span></span>

<span data-ttu-id="85b67-137">バージョンでは、修正、これまで見てきたでこれまでの web フロント エンドは、SQL データベースのバック エンドと密接に関連します。</span><span class="sxs-lookup"><span data-stu-id="85b67-137">In the version of Fix It that we've been looking at so far, the web front-end is tightly coupled with the SQL Database back-end.</span></span> <span data-ttu-id="85b67-138">SQL データベース サービスが利用できない場合、ユーザーはエラーを取得します。</span><span class="sxs-lookup"><span data-stu-id="85b67-138">If the SQL database service is unavailable, the user gets an error.</span></span> <span data-ttu-id="85b67-139">再試行が機能しない場合 (つまり、失敗、複数の一時的な) ことだけを行うことができますが、エラーを表示するようにユーザーが後でもう一度やり直してくださいを依頼してください。</span><span class="sxs-lookup"><span data-stu-id="85b67-139">If retries don't work (that is, the failure is more than transient), the only thing you can do is show an error and ask the user to try again later.</span></span>

![SQL データベースのバック エンドに失敗すると失敗したフロント エンドのダイアグラムを示す web](queue-centric-work-pattern/_static/image1.png)

<span data-ttu-id="85b67-141">ユーザーは、解決、タスクを送信するときに、キューを使用して、アプリは、キューにメッセージを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="85b67-141">Using queues, when a user submits a Fix It task, the app writes a message to the queue.</span></span> <span data-ttu-id="85b67-142">メッセージのペイロードが、 [JSON](http://json.org/)タスクの表現。</span><span class="sxs-lookup"><span data-stu-id="85b67-142">The message payload is a [JSON](http://json.org/) representation of the task.</span></span> <span data-ttu-id="85b67-143">メッセージをキューに書き込むとすぐにアプリを返し、成功メッセージをユーザーにすぐに表示します。</span><span class="sxs-lookup"><span data-stu-id="85b67-143">As soon as the message is written to the queue, the app returns and immediately shows a success message to the user.</span></span>

<span data-ttu-id="85b67-144">オフライン – SQL データベースや、キュー リスナー--などのバックエンド サービスの場合、ユーザーは新しいの解決、タスクを送信できます。</span><span class="sxs-lookup"><span data-stu-id="85b67-144">If any of the backend services – such as the SQL database or the queue listener -- go offline, users can still submit new Fix It tasks.</span></span> <span data-ttu-id="85b67-145">バックエンド サービスは、再利用するまで、メッセージはキューのみ。</span><span class="sxs-lookup"><span data-stu-id="85b67-145">The messages will just queue up until the backend services are available again.</span></span> <span data-ttu-id="85b67-146">その時点では、バックエンド サービスは、バックログ キャッチします。</span><span class="sxs-lookup"><span data-stu-id="85b67-146">At that point, the backend services will catch up on the backlog.</span></span>

![SQL データベースのエラーがある場合に機能する web フロント エンドの続行を示す図](queue-centric-work-pattern/_static/image2.png)

<span data-ttu-id="85b67-148">さらに、今すぐフロント エンドの回復性を心配せずより多くのバックエンド ロジックを追加することができます。</span><span class="sxs-lookup"><span data-stu-id="85b67-148">Moreover, now you can add more backend logic without worrying about the resiliency of the front end.</span></span> <span data-ttu-id="85b67-149">たとえばの新しい修正が割り当てられている場合に、所有者に電子メールや SMS メッセージを送信することができます。</span><span class="sxs-lookup"><span data-stu-id="85b67-149">For example, you might want to send an email or SMS message to the owner whenever a new Fix It is assigned.</span></span> <span data-ttu-id="85b67-150">できなくなった場合、電子メールや SMS サービスを他のすべてを処理および電子メール/SMS メッセージを送信するための別のキューにメッセージを格納します。</span><span class="sxs-lookup"><span data-stu-id="85b67-150">If the email or SMS service becomes unavailable, you can process everything else, and then put a message into a separate queue for sending email/SMS messages.</span></span>

<span data-ttu-id="85b67-151">以前は、Web アプリが効果的な SLA&times;ストレージ&times;SQL データベース 99.7% を = です。</span><span class="sxs-lookup"><span data-stu-id="85b67-151">Previously, our effective SLA was Web Apps &times; Storage &times; SQL Database = 99.7%.</span></span> <span data-ttu-id="85b67-152">(を参照してください[障害にも対処デザイン](design-to-survive-failures.md))。</span><span class="sxs-lookup"><span data-stu-id="85b67-152">(See [Design to Survive Failures](design-to-survive-failures.md).)</span></span>

<span data-ttu-id="85b67-153">キューを使用するアプリを変更する場合、web フロント エンドは、複合 99.8% の SLA の Web アプリおよび記憶域、のみに依存します。</span><span class="sxs-lookup"><span data-stu-id="85b67-153">When we change the app to use a queue, the web front end depends only on Web Apps and Storage, for a composite SLA of 99.8%.</span></span> <span data-ttu-id="85b67-154">(キューは、blob ストレージと同じ SLA に含まれているように、Azure ストレージ サービスの一部に注意してください)。</span><span class="sxs-lookup"><span data-stu-id="85b67-154">(Note that queues are part of the Azure storage service, so they are included in the same SLA as blob storage.)</span></span>

<span data-ttu-id="85b67-155">99.8% よりも必要がある場合は、次の 2 つの異なる地域に 2 つのキューを作成できます。</span><span class="sxs-lookup"><span data-stu-id="85b67-155">If you need even better than 99.8%, you can create two queues in two different regions.</span></span> <span data-ttu-id="85b67-156">として、プライマリ、もう 1 つをセカンダリとして指定します。</span><span class="sxs-lookup"><span data-stu-id="85b67-156">Designate one as the primary, and the other as the secondary.</span></span> <span data-ttu-id="85b67-157">アプリでは、フェールオーバーをセカンダリ キューにプライマリ キューが使用できない場合。</span><span class="sxs-lookup"><span data-stu-id="85b67-157">In your app, fail over to the secondary queue if the primary queue is not available.</span></span> <span data-ttu-id="85b67-158">両方が利用できなくなる、同時に発生する可能性は非常に小さいです。</span><span class="sxs-lookup"><span data-stu-id="85b67-158">The chance of both being unavailable at the same time is very small.</span></span>

## <a name="rate-leveling-and-independent-scaling"></a><span data-ttu-id="85b67-159">レートの平準化し、個別に拡張</span><span class="sxs-lookup"><span data-stu-id="85b67-159">Rate Leveling and Independent Scaling</span></span>

<span data-ttu-id="85b67-160">キューと呼ばれるものに役立ちますも*転送率の平準化*または*負荷平準化*です。</span><span class="sxs-lookup"><span data-stu-id="85b67-160">Queues are also useful for something called *rate leveling* or *load leveling*.</span></span>

<span data-ttu-id="85b67-161">Web アプリは、突発トラフィックを受けやすくなりますが多くの場合です。</span><span class="sxs-lookup"><span data-stu-id="85b67-161">Web apps are often susceptible to sudden bursts in traffic.</span></span> <span data-ttu-id="85b67-162">自動的に増加した web トラフィックを処理する web サーバーを追加する自動スケーリングを使用できますが、自動スケーリングできないことがありますに反応するため十分速く処理負荷の急激なスパイクです。</span><span class="sxs-lookup"><span data-stu-id="85b67-162">While you can use autoscaling to automatically add web servers to handle increased web traffic, autoscaling might not be able to react quickly enough to handle abrupt spikes in load.</span></span> <span data-ttu-id="85b67-163">Web サーバーは、キューにメッセージを書き込むことによって行う必要がある、作業の一部にオフロードできるより多くのトラフィックを処理できます。</span><span class="sxs-lookup"><span data-stu-id="85b67-163">If the web servers can offload some of the work they have to do by writing a message to a queue, they can handle more traffic.</span></span> <span data-ttu-id="85b67-164">バックエンド サービスは、キューからメッセージを読み取るし、それらを処理します。</span><span class="sxs-lookup"><span data-stu-id="85b67-164">A backend service can then read messages from the queue and process them.</span></span> <span data-ttu-id="85b67-165">キューの深さを拡張または圧縮受信の負荷が変化します。</span><span class="sxs-lookup"><span data-stu-id="85b67-165">The depth of the queue will grow or shrink as the incoming load varies.</span></span>

<span data-ttu-id="85b67-166">バックエンド サービスに負荷のかかる作業の多くで、web 層は、トラフィックの急増に対応より簡単にできます。</span><span class="sxs-lookup"><span data-stu-id="85b67-166">With much of its time-consuming work off-loaded to a backend service, the web tier can more easily respond to sudden spikes in traffic.</span></span> <span data-ttu-id="85b67-167">Web サーバーの数が少ないで指定したトラフィック量を処理できるため、コストの節約します。</span><span class="sxs-lookup"><span data-stu-id="85b67-167">And you save money because any given amount of traffic can be handled by fewer web servers.</span></span>

<span data-ttu-id="85b67-168">ことができます、web 層およびバックエンド サービスを個別に拡張します。</span><span class="sxs-lookup"><span data-stu-id="85b67-168">You can scale the web tier and backend service independently.</span></span> <span data-ttu-id="85b67-169">たとえば、1 つだけのサーバーの処理キューのメッセージが、次の 3 つの web サーバーを必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-169">For example, you might need three web servers but only one server processing queue messages.</span></span> <span data-ttu-id="85b67-170">または、バック グラウンドでコンピューティング集中型のタスクを実行している場合より多くのバックエンド サーバーを必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-170">Or if you're running a compute-intensive task in the background, you might need more backend servers.</span></span>

![](queue-centric-work-pattern/_static/image3.png)

<span data-ttu-id="85b67-171">自動スケーリングは、web 層とバックエンド サービスと共に動作します。</span><span class="sxs-lookup"><span data-stu-id="85b67-171">Autoscaling works with backend services as well as with the web tier.</span></span> <span data-ttu-id="85b67-172">スケール アップまたはバックエンド Vm の CPU 使用率に基づいて、キュー内のタスクを処理している Vm の数をスケール ダウンできます。</span><span class="sxs-lookup"><span data-stu-id="85b67-172">You can scale up or scale down the number of VMs that are processing the tasks in the queue, based on the CPU usage of the backend VMs.</span></span> <span data-ttu-id="85b67-173">または、項目の数は、キュー内に基づく自動スケールすることができます。</span><span class="sxs-lookup"><span data-stu-id="85b67-173">Or, you can autoscale based on how many items are in a queue.</span></span> <span data-ttu-id="85b67-174">たとえば、10 個の項目をキューに保持しようとする自動スケールがわかります。</span><span class="sxs-lookup"><span data-stu-id="85b67-174">For example, you can tell autoscale to try to keep no more than 10 items in the queue.</span></span> <span data-ttu-id="85b67-175">キューに 10 個より多くの項目がある場合は、自動スケールは Vm を追加します。</span><span class="sxs-lookup"><span data-stu-id="85b67-175">If the queue has more than 10 items, autoscale will add VMs.</span></span> <span data-ttu-id="85b67-176">見つけられるときに、自動スケールは追加の Vm を終了します。</span><span class="sxs-lookup"><span data-stu-id="85b67-176">When they catch up, autoscale will tear down the extra VMs.</span></span>

## <a name="adding-queues-to-the-fix-it-application"></a><span data-ttu-id="85b67-177">追加するキューに修正プログラムにそれをアプリケーション</span><span class="sxs-lookup"><span data-stu-id="85b67-177">Adding Queues to the Fix It Application</span></span>

<span data-ttu-id="85b67-178">キュー パターンを実装するのには、修正、アプリに 2 つの変更を加える必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-178">To implement the queue pattern, we need to make two changes to the Fix It app.</span></span>

- <span data-ttu-id="85b67-179">ユーザーが新しい解決、タスクを送信したときに、データベースへの書き込みではなく、キューにタスクを配置します。</span><span class="sxs-lookup"><span data-stu-id="85b67-179">When a user submits a new Fix It task, put the task in the queue, instead of writing it to the database.</span></span>
- <span data-ttu-id="85b67-180">キューにメッセージを処理するバックエンド サービスを作成します。</span><span class="sxs-lookup"><span data-stu-id="85b67-180">Create a back-end service that processes messages in the queue.</span></span>

<span data-ttu-id="85b67-181">使用して、キュー、 [Azure キュー ストレージ サービス](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-181">For the queue, we'll use the [Azure Queue Storage Service](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span></span> <span data-ttu-id="85b67-182">別のオプションは、使用する[Azure Service Bus](https://docs.microsoft.com/azure/service-bus/)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-182">Another option is to use [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span></span>

<span data-ttu-id="85b67-183">使用するキュー サービスを決定するには、キューにメッセージを送受信する、アプリが必要な方法を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="85b67-183">To decide which queue service to use, consider how your app needs to send and receive the messages in the queue:</span></span>

- <span data-ttu-id="85b67-184">協調プロデューサーと競合するコンシューマーがあれば、Azure キュー ストレージ サービスの使用を検討してください。</span><span class="sxs-lookup"><span data-stu-id="85b67-184">If you have cooperating producers and competing consumers, consider using Azure Queue Storage Service.</span></span> <span data-ttu-id="85b67-185">「協力プロデューサー」では、複数のプロセスは、キューにメッセージを追加することを意味します。</span><span class="sxs-lookup"><span data-stu-id="85b67-185">"Cooperating producers" means multiple processes are adding messages to a queue.</span></span> <span data-ttu-id="85b67-186">「競合コンシューマー」は複数のプロセスは、それらを処理する、キューからメッセージがプルされますが、特定のメッセージは 1 つ「のコンシューマーです」でしか処理できません。</span><span class="sxs-lookup"><span data-stu-id="85b67-186">"Competing consumers" means multiple processes are pulling messages off the queue to process them, but any given message can only be processed by one "consumer."</span></span> <span data-ttu-id="85b67-187">スループットでは 1 つのキューを使用することも、必要な場合は、追加のキューや追加のストレージ アカウントを使用します。</span><span class="sxs-lookup"><span data-stu-id="85b67-187">If you need more throughput than you can get with a single queue, use additional queues and/or additional storage accounts.</span></span>
- <span data-ttu-id="85b67-188">必要がある場合、[パブリッシュ/サブスクライブ モデル](http://en.wikipedia.org/wiki/Publish/subscribe)、Azure Service Bus キューの使用を検討します。</span><span class="sxs-lookup"><span data-stu-id="85b67-188">If you need a [publish/subscribe model](http://en.wikipedia.org/wiki/Publish/subscribe), consider using Azure Service Bus Queues.</span></span>

<span data-ttu-id="85b67-189">修正がアプリには、協調動作するプロデューサーと競合するコンシューマー モデルが収まるようにします。</span><span class="sxs-lookup"><span data-stu-id="85b67-189">The Fix It app fits the cooperating producers and competing consumers model.</span></span>

<span data-ttu-id="85b67-190">他の考慮事項は、アプリケーションの可用性です。</span><span class="sxs-lookup"><span data-stu-id="85b67-190">Another consideration is application availability.</span></span> <span data-ttu-id="85b67-191">キュー ストレージ サービスは、「使用している blob ストレージのため、これを使用して何も起こりません弊社の SLA で同じサービスの一部です。</span><span class="sxs-lookup"><span data-stu-id="85b67-191">The Queue Storage Service is part of the same service that we're using for blob storage, so using it has no effect on our SLA.</span></span> <span data-ttu-id="85b67-192">Azure Service Bus は、独自の SLA で別のサービスです。</span><span class="sxs-lookup"><span data-stu-id="85b67-192">Azure Service Bus is a separate service with its own SLA.</span></span> <span data-ttu-id="85b67-193">Service Bus のキューを使用した場合は、追加の SLA の割合を考慮する必要がおよび複合 SLA は少なくなります。</span><span class="sxs-lookup"><span data-stu-id="85b67-193">If we used Service Bus Queues, we would have to factor in an additional SLA percentage, and our composite SLA would be lower.</span></span> <span data-ttu-id="85b67-194">キュー サービスを選択する場合は、アプリケーションの可用性の選択の影響を理解して、確認します。</span><span class="sxs-lookup"><span data-stu-id="85b67-194">When you're choosing a queue service, make sure you understand the impact of your choice on application availability.</span></span> <span data-ttu-id="85b67-195">詳細については、次を参照してください。、[リソース](#resources)セクションです。</span><span class="sxs-lookup"><span data-stu-id="85b67-195">For more information, see the [Resources](#resources) section.</span></span>

## <a name="creating-queue-messages"></a><span data-ttu-id="85b67-196">メッセージ キューを作成します。</span><span class="sxs-lookup"><span data-stu-id="85b67-196">Creating Queue Messages</span></span>

<span data-ttu-id="85b67-197">修正作業をキューに入れますには、web フロント エンドは、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="85b67-197">To put a Fix It task on the queue, the web front end performs the following steps:</span></span>

1. <span data-ttu-id="85b67-198">作成、 [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx)インスタンス。</span><span class="sxs-lookup"><span data-stu-id="85b67-198">Create a [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instance.</span></span> <span data-ttu-id="85b67-199">`CloudQueueClient`インスタンスを使用してキュー サービスに対する要求を実行します。</span><span class="sxs-lookup"><span data-stu-id="85b67-199">The `CloudQueueClient` instance is used to execute requests against the Queue Service.</span></span>
2. <span data-ttu-id="85b67-200">まだ存在しない場合は、キューを作成します。</span><span class="sxs-lookup"><span data-stu-id="85b67-200">Create the queue, if it doesn't exist yet.</span></span>
3. <span data-ttu-id="85b67-201">修正タスクのシリアル化します。</span><span class="sxs-lookup"><span data-stu-id="85b67-201">Serialize the Fix It task.</span></span>
4. <span data-ttu-id="85b67-202">呼び出す[CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx)メッセージをキューに配置します。</span><span class="sxs-lookup"><span data-stu-id="85b67-202">Call [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) to put the message onto the queue.</span></span>

<span data-ttu-id="85b67-203">コンス トラクターでは、この作業をやってと`SendMessageAsync`の新しいメソッド`FixItQueueManager`クラスです。</span><span class="sxs-lookup"><span data-stu-id="85b67-203">We'll do this work in the constructor and `SendMessageAsync` method of a new `FixItQueueManager` class.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample1.cs?highlight=11-12,16,18-25)]

<span data-ttu-id="85b67-204">使用して次に、 [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) fixit を JSON 形式にシリアル化するライブラリ。</span><span class="sxs-lookup"><span data-stu-id="85b67-204">Here we are using the [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library to serialize the fixit to JSON format.</span></span> <span data-ttu-id="85b67-205">必要に応じてどのようなシリアル化のアプローチを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="85b67-205">You can use whatever serialization approach you prefer.</span></span> <span data-ttu-id="85b67-206">JSON では、XML よりも、人間が判読できるという利点があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-206">JSON has the advantage of being human-readable, while being less verbose than XML.</span></span>

<span data-ttu-id="85b67-207">実稼働品質のコードは、エラー処理ロジックを追加、一時停止、データベースが使用できなくなった場合、復旧をより正確に処理、アプリケーションの起動時にキューを作成および管理"[有害"メッセージ](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-207">Production-quality code would add error handling logic, pause if the database became unavailable, handle recovery more cleanly, create the queue on application start-up, and manage "[poison" messages](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span></span> <span data-ttu-id="85b67-208">(有害メッセージは、何らかの理由は処理できないメッセージです。</span><span class="sxs-lookup"><span data-stu-id="85b67-208">(A poison message is a message that cannot be processed for some reason.</span></span> <span data-ttu-id="85b67-209">たくない場所、ワーカー ロールは継続的にしようと処理が失敗する、もう一度やり直して、失敗するに表示され、キューに留まるように有害なメッセージです。)</span><span class="sxs-lookup"><span data-stu-id="85b67-209">You don't want poison messages to sit in the queue, where the worker role will continually try to process them, fail, try again, fail, and so on.)</span></span>

<span data-ttu-id="85b67-210">フロント エンドの MVC アプリケーションでは、新しいタスクを作成するコードを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-210">In the front-end MVC application, we need to update the code that creates a new task.</span></span> <span data-ttu-id="85b67-211">リポジトリにタスクを設定する代わりに呼び出して、`SendMessageAsync`上記の方法です。</span><span class="sxs-lookup"><span data-stu-id="85b67-211">Instead of putting the task into the repository, call the `SendMessageAsync` method shown above.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample2.cs?highlight=10)]

## <a name="processing-queue-messages"></a><span data-ttu-id="85b67-212">キュー メッセージの処理</span><span class="sxs-lookup"><span data-stu-id="85b67-212">Processing Queue Messages</span></span>

<span data-ttu-id="85b67-213">キュー内のメッセージを処理するには、バックエンド サービスが作成されます。</span><span class="sxs-lookup"><span data-stu-id="85b67-213">To process messages in the queue, we'll create a backend service.</span></span> <span data-ttu-id="85b67-214">バックエンド サービスは、次の手順を実行する無限ループを実行します。</span><span class="sxs-lookup"><span data-stu-id="85b67-214">The backend service will run an infinite loop that performs the following steps:</span></span>

1. <span data-ttu-id="85b67-215">キューから次のメッセージを取得します。</span><span class="sxs-lookup"><span data-stu-id="85b67-215">Get the next message from the queue.</span></span>
2. <span data-ttu-id="85b67-216">修正タスクにメッセージを逆シリアル化します。</span><span class="sxs-lookup"><span data-stu-id="85b67-216">Deserialize the message to a Fix It task.</span></span>
3. <span data-ttu-id="85b67-217">データベースに修正作業を記述します。</span><span class="sxs-lookup"><span data-stu-id="85b67-217">Write the Fix It task to the database.</span></span>

<span data-ttu-id="85b67-218">バックエンド サービスをホストするを含む Azure クラウド サービスを作成、*ワーカー ロール*です。</span><span class="sxs-lookup"><span data-stu-id="85b67-218">To host the backend service, we'll create an Azure Cloud Service that contains a *worker role*.</span></span> <span data-ttu-id="85b67-219">ワーカー ロールは、バックエンドの処理を実行できる 1 つまたは複数の Vm で構成されます。</span><span class="sxs-lookup"><span data-stu-id="85b67-219">A worker role consists of one or more VMs that can do backend processing.</span></span> <span data-ttu-id="85b67-220">これらの Vm で実行されるコードでは、使用可能になったときに、そのキューからメッセージをプルします。</span><span class="sxs-lookup"><span data-stu-id="85b67-220">The code that runs in these VMs will pull messages from the queue as they become available.</span></span> <span data-ttu-id="85b67-221">各メッセージのおを JSON ペイロードを逆シリアル化し、web 層で以前使用した同じリポジトリを使用するのには、データベースを修正、タスクのエンティティのインスタンスを記述します。</span><span class="sxs-lookup"><span data-stu-id="85b67-221">For each message, we'll deserialize the JSON payload and write an instance of the Fix It Task entity to the database, using the same repository that we used earlier in the web tier.</span></span>

<span data-ttu-id="85b67-222">次の手順では、ロールのプロジェクトを標準的な web プロジェクトを含むソリューションに、ワーカーを追加する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="85b67-222">The following steps show how to add a worker role project to a solution that has a standard web project.</span></span> <span data-ttu-id="85b67-223">修正したプロジェクトをダウンロードすることができます、これらの手順は既に実行されています。</span><span class="sxs-lookup"><span data-stu-id="85b67-223">These steps have already been done in the Fix It project that you can download.</span></span>

<span data-ttu-id="85b67-224">最初にクラウド サービス プロジェクトを Visual Studio ソリューションに追加します。</span><span class="sxs-lookup"><span data-stu-id="85b67-224">First add a Cloud Service project to the Visual Studio solution.</span></span> <span data-ttu-id="85b67-225">ソリューションを右クリックし **追加**、し**新しいプロジェクト**です。</span><span class="sxs-lookup"><span data-stu-id="85b67-225">Right-click the solution and select **Add**, then **New Project**.</span></span> <span data-ttu-id="85b67-226">左側のウィンドウで展開**Visual c#**選択**クラウド**です。</span><span class="sxs-lookup"><span data-stu-id="85b67-226">In the left pane, expand **Visual C#** and select **Cloud**.</span></span>

[![](queue-centric-work-pattern/_static/image5.png)](queue-centric-work-pattern/_static/image4.png)

<span data-ttu-id="85b67-227">**新しい Azure クラウド サービス**ダイアログ ボックスで、展開、 **Visual c#**左側のウィンドウでノード。</span><span class="sxs-lookup"><span data-stu-id="85b67-227">In the **New Azure Cloud Service** dialog, expand the **Visual C#** node on the left pane.</span></span> <span data-ttu-id="85b67-228">選択**ワーカー ロール**右矢印アイコンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="85b67-228">Select **Worker Role** and click the right-arrow icon.</span></span>

![](queue-centric-work-pattern/_static/image6.png)

<span data-ttu-id="85b67-229">(追加することも通知、 *web ロール*です。</span><span class="sxs-lookup"><span data-stu-id="85b67-229">(Notice that you can also add a *web role*.</span></span> <span data-ttu-id="85b67-230">修正、Azure Web サイトでを実行することがなく、同じクラウド サービスのフロント エンド実行可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-230">We could run the Fix It front-end in the same Cloud Service instead of running it in an Azure Web Site.</span></span> <span data-ttu-id="85b67-231">フロント エンドとバック エンド間の接続をより簡単に調整する際にいくつかの利点があります。</span><span class="sxs-lookup"><span data-stu-id="85b67-231">That has some advantages in making connections between front-end and back-end easier to coordinate.</span></span> <span data-ttu-id="85b67-232">しかし、このデモをシンプルにするをしている Azure App Service Web アプリにフロント エンドを保持してクラウド サービスのバック エンドを実行しているのみです。)</span><span class="sxs-lookup"><span data-stu-id="85b67-232">However, to keep this demo simple, we're keeping the front-end in an Azure App Service Web App and only running the back-end in a Cloud Service.)</span></span>

<span data-ttu-id="85b67-233">既定の名前は、ワーカー ロールに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="85b67-233">A default name is assigned to the worker role.</span></span> <span data-ttu-id="85b67-234">名前を変更するには、右側のウィンドウで、ワーカー ロール上にマウスを移動し、鉛筆アイコンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="85b67-234">To change the name, hover the mouse over the worker role in the right pane, then click the pencil icon.</span></span>

![](queue-centric-work-pattern/_static/image7.png)

<span data-ttu-id="85b67-235">をクリックして**OK**ダイアログを完了します。</span><span class="sxs-lookup"><span data-stu-id="85b67-235">Click **OK** to complete the dialog.</span></span> <span data-ttu-id="85b67-236">これにより、2 つのプロジェクトが Visual Studio ソリューションに追加されます。</span><span class="sxs-lookup"><span data-stu-id="85b67-236">This adds two projects to the Visual Studio solution.</span></span>

- <span data-ttu-id="85b67-237">構成情報を含む、クラウド サービスを定義する Azure のプロジェクトです。</span><span class="sxs-lookup"><span data-stu-id="85b67-237">an Azure project that defines the cloud service, including configuration information.</span></span>
- <span data-ttu-id="85b67-238">ワーカー ロールが定義されているワーカー ロール プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="85b67-238">A worker role project that defines the worker role.</span></span>

![](queue-centric-work-pattern/_static/image8.png)

<span data-ttu-id="85b67-239">詳細については、次を参照してください。 [Visual Studio で Azure プロジェクトを作成します。](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span><span class="sxs-lookup"><span data-stu-id="85b67-239">For more information, see [Creating an Azure Project with Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span></span>

<span data-ttu-id="85b67-240">ワーカー ロールの内部をポーリング メッセージを呼び出すことによって、`ProcessMessageAsync`のメソッド、`FixItQueueManager`先ほど見たクラスです。</span><span class="sxs-lookup"><span data-stu-id="85b67-240">Inside the worker role, we poll for messages by calling the `ProcessMessageAsync` method of the `FixItQueueManager` class that we saw earlier.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample3.cs?highlight=25)]

<span data-ttu-id="85b67-241">`ProcessMessagesAsync`メソッドでは、メッセージの待機があるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="85b67-241">The `ProcessMessagesAsync` method checks if there's a message waiting.</span></span> <span data-ttu-id="85b67-242">存在する場合、メッセージに逆シリアル化、`FixItTask`エンティティとエンティティがデータベースに保存します。</span><span class="sxs-lookup"><span data-stu-id="85b67-242">If there is one, it deserializes the message into a `FixItTask` entity and saves the entity in the database.</span></span> <span data-ttu-id="85b67-243">これは、キューが空になるまでループします。</span><span class="sxs-lookup"><span data-stu-id="85b67-243">It loops until the queue is empty.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample4.cs)]

<span data-ttu-id="85b67-244">キューのメッセージが小さいトランザクションを生じますポーリング充電、処理するを待機しているメッセージが表示されない場合、ワーカー ロールの`RunAsync`メソッド、秒間待ちますポーリングする前にもう一度呼び出すことによって`Task.Delay(1000)`です。</span><span class="sxs-lookup"><span data-stu-id="85b67-244">Polling for queue messages incurs a small transaction charge, so when there's no message waiting to be processed, the worker role's `RunAsync` method waits a second before polling again by calling `Task.Delay(1000)`.</span></span>

<span data-ttu-id="85b67-245">Web プロジェクトでは、非同期コードを追加することができますに自動的にパフォーマンスを向上させる IIS が限られたスレッド プールを管理するためです。</span><span class="sxs-lookup"><span data-stu-id="85b67-245">In a web project, adding asynchronous code can automatically improve performance because IIS manages a limited thread pool.</span></span> <span data-ttu-id="85b67-246">ワーカー ロール プロジェクト内のケースではありません。</span><span class="sxs-lookup"><span data-stu-id="85b67-246">That is not the case in a worker role project.</span></span> <span data-ttu-id="85b67-247">ワーカー ロールのスケーラビリティを高めるためには、マルチ スレッド コードを記述または非同期コードを使用して実装する[並列プログラミング](https://msdn.microsoft.com/library/ff963553.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-247">To improve scalability of the worker role, you can write multi-threaded code or use asynchronous code to implement [parallel programming](https://msdn.microsoft.com/library/ff963553.aspx).</span></span> <span data-ttu-id="85b67-248">サンプルは、並列プログラミングを実装していませんが、ほどの並列プログラミングを実装するコードを非同期に作成する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="85b67-248">The sample doesn't implement parallel programming but shows how to make the code asynchronous so you can implement parallel programming.</span></span>

## <a name="summary"></a><span data-ttu-id="85b67-249">まとめ</span><span class="sxs-lookup"><span data-stu-id="85b67-249">Summary</span></span>

<span data-ttu-id="85b67-250">この章では、キューを中心とした作業のパターンを実装することでアプリケーションの応答性、信頼性、およびスケーラビリティを向上させる方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="85b67-250">In this chapter you've seen how to improve application responsiveness, reliability, and scalability by implementing the queue-centric work pattern.</span></span>

<span data-ttu-id="85b67-251">これは、この電子ブックで説明した 13 パターンの最後のタスクは当然のことながら、他の多くのパターンがあるとするのに役立つプラクティスが成功したクラウド アプリをビルドします。</span><span class="sxs-lookup"><span data-stu-id="85b67-251">This is the last of the 13 patterns covered in this e-book, but there are of course many other patterns and practices that can help you build successful cloud apps.</span></span> <span data-ttu-id="85b67-252">[最終章](more-patterns-and-guidance.md)これら 13 のパターンで説明されていないトピックのリソースへのリンクを提供します。</span><span class="sxs-lookup"><span data-stu-id="85b67-252">The [final chapter](more-patterns-and-guidance.md) provides links to resources for topics that haven't been covered in these 13 patterns.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="85b67-253">リソース</span><span class="sxs-lookup"><span data-stu-id="85b67-253">Resources</span></span>

<span data-ttu-id="85b67-254">キューの詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b67-254">For more information about queues, see the following resources.</span></span>

<span data-ttu-id="85b67-255">ドキュメント:</span><span class="sxs-lookup"><span data-stu-id="85b67-255">Documentation:</span></span>

- <span data-ttu-id="85b67-256">[Microsoft Azure ストレージ キュー パート 1: 作業の開始](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-256">[Microsoft Azure Storage Queues Part 1: Getting Started](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span></span> <span data-ttu-id="85b67-257">ローマ Schacherl による記事です。</span><span class="sxs-lookup"><span data-stu-id="85b67-257">Article by Roman Schacherl.</span></span>
- <span data-ttu-id="85b67-258">[バック グラウンド タスクを実行して](https://msdn.microsoft.com/library/ff803365.aspx)の第 5 章[クラウド、第 3 版へのアプリケーションの移行](https://msdn.microsoft.com/library/ff728592.aspx)Microsoft Patterns and Practices からです。</span><span class="sxs-lookup"><span data-stu-id="85b67-258">[Executing Background Tasks](https://msdn.microsoft.com/library/ff803365.aspx), chapter 5 of [Moving Applications to the Cloud, 3rd Edition](https://msdn.microsoft.com/library/ff728592.aspx) from Microsoft Patterns and Practices.</span></span> <span data-ttu-id="85b67-259">(特に、セクション[「を使用して Azure ストレージ キュー」](https://msdn.microsoft.com/library/ff803365.aspx#sec7))。</span><span class="sxs-lookup"><span data-stu-id="85b67-259">(In particular, the section ["Using Azure Storage Queues"](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span></span>
- <span data-ttu-id="85b67-260">[スケーラビリティと Azure のキュー ベースのメッセージング ソリューションのコスト効果を最大化するためのベスト プラクティス](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-260">[Best Practices for Maximizing Scalability and Cost Effectiveness of Queue-Based Messaging Solutions on Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span></span> <span data-ttu-id="85b67-261">Valery Mizonov、ホワイト ペーパー。</span><span class="sxs-lookup"><span data-stu-id="85b67-261">White paper by Valery Mizonov.</span></span>
- <span data-ttu-id="85b67-262">[Azure キューと Service Bus のキューを比較する](https://msdn.microsoft.com/magazine/jj159884.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-262">[Comparing Azure Queues and Service Bus Queues](https://msdn.microsoft.com/magazine/jj159884.aspx).</span></span> <span data-ttu-id="85b67-263">MSDN マガジンの記事では、使用するキュー サービスを選択するのに役立つ追加情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="85b67-263">MSDN Magazine article, provides additional information that can help you choose which queue service to use.</span></span> <span data-ttu-id="85b67-264">アーティクルは、Service Bus は、認証、SB キューが利用できない ACS が使用できないことを意味する ACS に依存することを示しています。</span><span class="sxs-lookup"><span data-stu-id="85b67-264">The article mentions that Service Bus is dependent on ACS for authentication, which means your SB queues would be unavailable when ACS is unavailable.</span></span> <span data-ttu-id="85b67-265">ただし、アーティクルが書き込まれるため、SB が使用するために変更されました[SAS トークン](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx)ACS する代わりにします。</span><span class="sxs-lookup"><span data-stu-id="85b67-265">However, since the article was written, SB was changed to enable you to use [SAS tokens](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) as an alternative to ACS.</span></span>
- <span data-ttu-id="85b67-266">[Microsoft Patterns and Practices - Azure ガイダンス](https://msdn.microsoft.com/library/dn568099.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-266">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="85b67-267">非同期メッセージング入門、パイプとフィルター パターン、トランザクションの補正パターン、競合コンシューマー パターン、CQRS パターンを参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b67-267">See Asynchronous Messaging primer, Pipes and Filters pattern, Compensating Transaction pattern, Competing Consumers pattern, CQRS pattern.</span></span>
- <span data-ttu-id="85b67-268">[CQRS の概要](https://msdn.microsoft.com/library/jj554200)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-268">[CQRS Journey](https://msdn.microsoft.com/library/jj554200).</span></span> <span data-ttu-id="85b67-269">Microsoft Patterns and Practices によって CQRS については、電子書籍します。</span><span class="sxs-lookup"><span data-stu-id="85b67-269">E-book about CQRS by Microsoft Patterns and Practices.</span></span>

<span data-ttu-id="85b67-270">ビデオ:</span><span class="sxs-lookup"><span data-stu-id="85b67-270">Video:</span></span>

- <span data-ttu-id="85b67-271">[フェール セーフ: スケーラブル、かつ回復力のクラウド サービスの構築](https://channel9.msdn.com/Series/FailSafe)です。</span><span class="sxs-lookup"><span data-stu-id="85b67-271">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="85b67-272">Ulrich Homann、Marc Mercuri、Mark Simms、ビデオ シリーズを 9 つの部分で構成します。</span><span class="sxs-lookup"><span data-stu-id="85b67-272">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="85b67-273">実際のお客様と Microsoft Customer ・ Advisory Team (CAT) エクスペリエンスから抽出されたストーリーで非常にアクセス可能な興味深い方法で高度な概念とアーキテクチャの原則を説明します。</span><span class="sxs-lookup"><span data-stu-id="85b67-273">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="85b67-274">Azure ストレージ サービスとキューの概要については、35:13 始まるエピソード 5 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b67-274">For an introduction to the Azure Storage service and queues, see episode 5 starting at 35:13.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="85b67-275">[前へ](distributed-caching.md)
> [次へ](more-patterns-and-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="85b67-275">[Previous](distributed-caching.md)
[Next](more-patterns-and-guidance.md)</span></span>
