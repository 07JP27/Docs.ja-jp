---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application
title: "Entity Framework 6 の Code First MVC 5 を使用すると作業の開始 |Microsoft ドキュメント"
author: tdykstra
description: "このチュートリアル シリーズの新しいバージョンを使用できます。 ASP.NET Core と Visual Studio 2015 を使用して Entity Framework のコアで作業を開始します。 Contoso Universi しています."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/22/2015
ms.topic: article
ms.assetid: 00bc8b51-32ed-4fd3-9745-be4c2a9c1eaf
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 46f53279e2e6daa4266c06feb4ba544e14b68a03
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2018
---
<a name="getting-started-with-entity-framework-6-code-first-using-mvc-5"></a><span data-ttu-id="32eb5-104">MVC 5 を使用する Entity Framework 6 Code First の概要</span><span class="sxs-lookup"><span data-stu-id="32eb5-104">Getting Started with Entity Framework 6 Code First using MVC 5</span></span>
====================
<span data-ttu-id="32eb5-105">によって[Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="32eb5-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="32eb5-106">[完成したプロジェクトをダウンロード](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8)または[PDF のダウンロード](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="32eb5-106">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> > [!NOTE] 
> > 
> > <span data-ttu-id="32eb5-107">このチュートリアル シリーズの新しいバージョンが利用可能な: [ASP.NET Core と Visual Studio 2015 を使用して Entity Framework Core 使い方](https://docs.asp.net/en/latest/data/ef-mvc/intro.html)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-107">A newer version of this tutorial series is available: [Get started with ASP.NET Core and Entity Framework Core using Visual Studio 2015](https://docs.asp.net/en/latest/data/ef-mvc/intro.html).</span></span>
> 
> 
> <span data-ttu-id="32eb5-108">Contoso 大学でサンプル web アプリケーションでは、Entity Framework 6 および Visual Studio 2013 を使用して ASP.NET MVC 5 アプリケーションを作成する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-108">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 and Visual Studio 2013.</span></span> <span data-ttu-id="32eb5-109">このチュートリアルでは、コードの最初のワークフローを使用します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-109">This tutorial uses the Code First workflow.</span></span> <span data-ttu-id="32eb5-110">Code First、Database First または Model First を選択する方法については、次を参照してください。 [Entity Framework 開発ワークフロー](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-110">For information about how to choose between Code First, Database First, and Model First, see [Entity Framework Development Workflows](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).</span></span>
> 
> <span data-ttu-id="32eb5-111">サンプル アプリケーションは、架空の Contoso 大学の web サイトです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-111">The sample application is a web site for a fictional Contoso University.</span></span> <span data-ttu-id="32eb5-112">学生受付、コースの作成、およびインストラクター割り当てなどの機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="32eb5-112">It includes functionality such as student admission, course creation, and instructor assignments.</span></span> <span data-ttu-id="32eb5-113">このチュートリアルの系列では、Contoso 大学サンプル アプリケーションをビルドする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-113">This tutorial series explains how to build the Contoso University sample application.</span></span> <span data-ttu-id="32eb5-114">実行できます[完成したアプリケーションをダウンロード](https://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-114">You can [download the completed application](https://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8).</span></span>
> 
> <span data-ttu-id="32eb5-115">Mike Brind によって変換 Visual Basic バージョンを利用できます: [Visual Basic での EF 6 を使用して MVC 5](http://www.mikesdotnetting.com/Article/241/MVC-5-with-EF-6-in-Visual-Basic-Creating-an-Entity-Framework-Data-Model) Mikesdotnetting サイトです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-115">A Visual Basic version translated by Mike Brind is available: [MVC 5 with EF 6 in Visual Basic](http://www.mikesdotnetting.com/Article/241/MVC-5-with-EF-6-in-Visual-Basic-Creating-an-Entity-Framework-Data-Model) on the Mikesdotnetting site.</span></span>
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="32eb5-116">このチュートリアルで使用されているソフトウェアのバージョン</span><span class="sxs-lookup"><span data-stu-id="32eb5-116">Software versions used in the tutorial</span></span>
> 
> 
> - [<span data-ttu-id="32eb5-117">Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="32eb5-117">Visual Studio 2013</span></span>](https://www.microsoft.com/visualstudio/eng/2013-downloads)
> - <span data-ttu-id="32eb5-118">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="32eb5-118">.NET 4.5</span></span>
> - <span data-ttu-id="32eb5-119">Entity Framework 6 (EntityFramework 6.1.0 NuGet パッケージ)</span><span class="sxs-lookup"><span data-stu-id="32eb5-119">Entity Framework 6 (EntityFramework 6.1.0 NuGet package)</span></span>
> - <span data-ttu-id="32eb5-120">[Windows Azure SDK 2.2](https://go.microsoft.com/fwlink/p/?linkid=323510) (省略可能)</span><span class="sxs-lookup"><span data-stu-id="32eb5-120">[Windows Azure SDK 2.2](https://go.microsoft.com/fwlink/p/?linkid=323510) (optional)</span></span>
>   
> 
> <span data-ttu-id="32eb5-121">このチュートリアルを使用する必要がありますも[Visual Studio 2013 の Express for Web](https://www.microsoft.com/visualstudio/eng/2013-downloads#d-2013-express)または Visual Studio 2012。</span><span class="sxs-lookup"><span data-stu-id="32eb5-121">The tutorial should also work with [Visual Studio 2013 Express for Web](https://www.microsoft.com/visualstudio/eng/2013-downloads#d-2013-express) or Visual Studio 2012.</span></span> <span data-ttu-id="32eb5-122">[VS 2012 バージョンの Windows Azure SDK](https://go.microsoft.com/fwlink/p/?linkid=323511)の Visual Studio 2012 の Windows Azure 展開が必要です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-122">The [VS 2012 version of the Windows Azure SDK](https://go.microsoft.com/fwlink/p/?linkid=323511) is required for Windows Azure deployment with Visual Studio 2012.</span></span>
> 
> 
> ## <a name="tutorial-versions"></a><span data-ttu-id="32eb5-123">チュートリアルのバージョン</span><span class="sxs-lookup"><span data-stu-id="32eb5-123">Tutorial versions</span></span>
> 
> <span data-ttu-id="32eb5-124">以前のバージョンのこのチュートリアルでは、次を参照してください。 [EF 4.1/MVC 3 の電子書籍](https://social.technet.microsoft.com/wiki/contents/articles/11608.e-book-gallery-for-microsoft-technologies.aspx#GettingStartedwiththeEntityFramework4.1usingASP.NETMVC)と[MVC 4 を使用する EF 5 の概要](../../older-versions/getting-started-with-ef-5-using-mvc-4/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-124">For previous versions of this tutorial, see [the EF 4.1 / MVC 3 e-book](https://social.technet.microsoft.com/wiki/contents/articles/11608.e-book-gallery-for-microsoft-technologies.aspx#GettingStartedwiththeEntityFramework4.1usingASP.NETMVC) and [Getting Started with EF 5 using MVC 4](../../older-versions/getting-started-with-ef-5-using-mvc-4/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>
> 
> ## <a name="questions-and-comments"></a><span data-ttu-id="32eb5-125">質問やコメント</span><span class="sxs-lookup"><span data-stu-id="32eb5-125">Questions and comments</span></span>
> 
> <span data-ttu-id="32eb5-126">このチュートリアルをリンクする方法と、ページの下部にあるコメントで改善新機能にフィードバックを送信してください。</span><span class="sxs-lookup"><span data-stu-id="32eb5-126">Please leave feedback on how you liked this tutorial and what we could improve in the comments at the bottom of the page.</span></span> <span data-ttu-id="32eb5-127">チュートリアルに直接関連付けられていない質問がある場合を投稿、 [ASP.NET Entity Framework フォーラム](https://forums.asp.net/1227.aspx)、 [Entity Framework でも LINQ to Entities フォーラム](https://social.msdn.microsoft.com/forums/adodotnetentityframework/threads/)、または[StackOverflow.com](http://stackoverflow.com/)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-127">If you have questions that are not directly related to the tutorial, you can post them to the [ASP.NET Entity Framework forum](https://forums.asp.net/1227.aspx), the [Entity Framework and LINQ to Entities forum](https://social.msdn.microsoft.com/forums/adodotnetentityframework/threads/), or [StackOverflow.com](http://stackoverflow.com/).</span></span>
> 
> <span data-ttu-id="32eb5-128">問題を解決できない場合に発生した場合は、ダウンロードできる完成したプロジェクトにコードを比較することによって一般的に、問題の解決策を検索できます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-128">If you run into a problem you can't resolve, you can generally find the solution to the problem by comparing your code to the completed project that you can download.</span></span> <span data-ttu-id="32eb5-129">一般的なエラーとそれらを解決する方法は、次を参照してください。[の一般的なエラーと解決方法またはそれらの回避策です。](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#errors)</span><span class="sxs-lookup"><span data-stu-id="32eb5-129">For some common errors and how to solve them, see [Common errors, and solutions or workarounds for them.](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#errors)</span></span>


## <a name="the-contoso-university-web-application"></a><span data-ttu-id="32eb5-130">Contoso 大学 Web アプリケーション</span><span class="sxs-lookup"><span data-stu-id="32eb5-130">The Contoso University Web Application</span></span>

<span data-ttu-id="32eb5-131">これらのチュートリアルで構築するアプリケーションは、単純な大学 web サイトです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-131">The application you'll be building in these tutorials is a simple university web site.</span></span>

<span data-ttu-id="32eb5-132">ユーザーでは、表示でき、学生、コース、インストラクターの情報を更新することができます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-132">Users can view and update student, course, and instructor information.</span></span> <span data-ttu-id="32eb5-133">ここでは、いくつかの画面を作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-133">Here are a few of the screens you'll create.</span></span>

![Students_Index_page](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image1.png)

![学生を編集します。](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="32eb5-136">このサイトの UI スタイルを維持して組み込みのテンプレートによって生成されたものに近いチュートリアルは、Entity Framework を使用する方法の主に集中することです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-136">The UI style of this site has been kept close to what's generated by the built-in templates, so that the tutorial can focus mainly on how to use the Entity Framework.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="32eb5-137">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="32eb5-137">Prerequisites</span></span>

<span data-ttu-id="32eb5-138">参照してください**ソフトウェア バージョン**ページの上部にあります。</span><span class="sxs-lookup"><span data-stu-id="32eb5-138">See **Software Versions** at the top of the page.</span></span> <span data-ttu-id="32eb5-139">Entity Framework 6 は、このチュートリアルの一部として、EF NuGet パッケージをインストールするための前提条件ではありません。</span><span class="sxs-lookup"><span data-stu-id="32eb5-139">Entity Framework 6 is not a prerequisite because you install the EF NuGet package as part of the tutorial.</span></span>

## <a name="create-an-mvc-web-application"></a><span data-ttu-id="32eb5-140">MVC Web アプリケーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-140">Create an MVC Web Application</span></span>

<span data-ttu-id="32eb5-141">Visual Studio を開き、"ContosoUniversity"をという名前の新しい c# Web プロジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-141">Open Visual Studio and create a new C# Web project named "ContosoUniversity".</span></span>

![New_project_dialog_box](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image3.png)

<span data-ttu-id="32eb5-143">**新しい ASP.NET プロジェクト**ダイアログ ボックスの 、 **MVC**テンプレート。</span><span class="sxs-lookup"><span data-stu-id="32eb5-143">In the **New ASP.NET Project** dialog box select the **MVC** template.</span></span>

<span data-ttu-id="32eb5-144">場合、**クラウド内のホスト** チェック ボックス、 **Microsoft Azure**セクションが選択されている、オフにします。</span><span class="sxs-lookup"><span data-stu-id="32eb5-144">If the **Host in the cloud** check box in the **Microsoft Azure** section is selected, clear it.</span></span>

<span data-ttu-id="32eb5-145">をクリックして**認証変更**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-145">Click **Change Authentication**.</span></span>

![New_project_dialog_box](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="32eb5-147">**認証の変更**ダイアログ ボックスで、**認証なし**、順にクリック**OK**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-147">In the **Change Authentication** dialog box, select **No Authentication**, and then click **OK**.</span></span> <span data-ttu-id="32eb5-148">このチュートリアルではありませんするユーザーのログオンを必要とするかログインしているユーザーに基づいてアクセスを制限することです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-148">For this tutorial you won't be requiring users to log on or restricting access based on who's logged on.</span></span>

![New_project_dialog_box](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image5.png)

<span data-ttu-id="32eb5-150">新しい ASP.NET プロジェクト ダイアログ ボックスで、戻る をクリックして**OK**プロジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-150">Back in the New ASP.NET Project dialog box, click **OK** to create the project.</span></span>

## <a name="set-up-the-site-style"></a><span data-ttu-id="32eb5-151">サイトのスタイルを設定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-151">Set Up the Site Style</span></span>

<span data-ttu-id="32eb5-152">いくつかの簡単な変更は、[サイト] メニューのレイアウト、およびホーム ページを設定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-152">A few simple changes will set up the site menu, layout, and home page.</span></span>

<span data-ttu-id="32eb5-153">開いている*\shared\\_Layout.cshtml*、次の変更を行います。</span><span class="sxs-lookup"><span data-stu-id="32eb5-153">Open *Views\Shared\\_Layout.cshtml*, and make the following changes:</span></span>

- <span data-ttu-id="32eb5-154">「Contoso 大学」に"My ASP.NET Application"と「アプリケーション名」の各出現する位置を変更します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-154">Change each occurrence of "My ASP.NET Application" and "Application name" to "Contoso University".</span></span>
- <span data-ttu-id="32eb5-155">学生、コース、インストラクター、部門、およびメニュー エントリを追加し、連絡先のエントリを削除します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-155">Add menu entries for Students, Courses, Instructors, and Departments, and delete the Contact entry.</span></span>

<span data-ttu-id="32eb5-156">変更が強調表示されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-156">The changes are highlighted.</span></span>

[!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample1.cshtml?highlight=6,19,24-27,38)]

<span data-ttu-id="32eb5-157">*Views\Home\Index.cshtml*ファイルの内容をこのアプリケーションについてのテキストで ASP.NET と MVC に関するテキストを置き換える次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-157">In *Views\Home\Index.cshtml*, replace the contents of the file with the following code to replace the text about ASP.NET and MVC with text about this application:</span></span>

[!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample2.cshtml)]

<span data-ttu-id="32eb5-158">サイトを実行するには、CTRL + F5 キーを押します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-158">Press CTRL+F5 to run the site.</span></span> <span data-ttu-id="32eb5-159">メイン メニューで、ホーム ページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="32eb5-159">You see the home page with the main menu.</span></span>

![Contoso_University_home_page](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image6.png)

## <a name="install-entity-framework-6"></a><span data-ttu-id="32eb5-161">Entity Framework 6 をインストールします。</span><span class="sxs-lookup"><span data-stu-id="32eb5-161">Install Entity Framework 6</span></span>

<span data-ttu-id="32eb5-162">**ツール**ボタンをクリックし**NuGet Package Manager**  をクリックし、 **Package Manager Console**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-162">From the **Tools** menu click **NuGet Package Manager** and then click **Package Manager Console**.</span></span>

<span data-ttu-id="32eb5-163">**Package Manager Console**ウィンドウには、次のコマンドを入力してください。</span><span class="sxs-lookup"><span data-stu-id="32eb5-163">In the **Package Manager Console** window enter the following command:</span></span>

`Install-Package EntityFramework`

![インストールされている EF](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image7.png)

<span data-ttu-id="32eb5-165">NuGet はインストール (プレリリース版を除く)、Entity Framework の最新バージョンのチュートリアルへの最新の更新プログラムの時点では 6.1.1 がイメージがインストールされている 6.0.0 が表示されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-165">The image shows 6.0.0 being installed, but NuGet will install the latest version of Entity Framework (excluding pre-release versions), which as of the most recent update to the tutorial is 6.1.1.</span></span>

<span data-ttu-id="32eb5-166">この手順は、このチュートリアルでは、手動で行うを実現できます自動的に ASP.NET MVC のスキャフォールディング機能によって、いくつかの手順のいずれかです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-166">This step is one of a few steps that this tutorial has you do manually, but which could have been done automatically by the ASP.NET MVC scaffolding feature.</span></span> <span data-ttu-id="32eb5-167">Entity Framework を使用するための手順を認識できるようにそれらを手動で実行しています。</span><span class="sxs-lookup"><span data-stu-id="32eb5-167">You're doing them manually so that you can see the steps required to use the Entity Framework.</span></span> <span data-ttu-id="32eb5-168">MVC コント ローラーとビューを作成するのに、スキャフォールディングを後で使用します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-168">You'll use scaffolding later to create the MVC controller and views.</span></span> <span data-ttu-id="32eb5-169">代わりにはスキャフォールディングを自動的に EF NuGet パッケージのインストールし、データベース コンテキスト クラスを作成し、接続文字列を作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-169">An alternative is to let scaffolding automatically install the EF NuGet package, create the database context class, and create the connection string.</span></span> <span data-ttu-id="32eb5-170">方法で実行する準備ができたら、行う必要があるはこれらの手順をスキップし、エンティティ クラスを作成した後に、MVC コント ローラーをスキャフォールディングです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-170">When you're ready to do it that way, all you have to do is skip those steps and scaffold your MVC controller after you create your entity classes.</span></span>

## <a name="create-the-data-model"></a><span data-ttu-id="32eb5-171">データ モデルを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-171">Create the Data Model</span></span>

<span data-ttu-id="32eb5-172">次に、Contoso 大学アプリケーション用にエンティティ クラスを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-172">Next you'll create entity classes for the Contoso University application.</span></span> <span data-ttu-id="32eb5-173">次の 3 つのエンティティを開始します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-173">You'll start with the following three entities:</span></span>

![Class_diagram](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image8.png)

<span data-ttu-id="32eb5-175">一対多の関係がある`Student`と`Enrollment`エンティティ、一対多の関係があると`Course`と`Enrollment`エンティティです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-175">There's a one-to-many relationship between `Student` and `Enrollment` entities, and there's a one-to-many relationship between `Course` and `Enrollment` entities.</span></span> <span data-ttu-id="32eb5-176">つまり、任意の数に、コースの受講者を登録して、コースに受講者に、登録の任意の数を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-176">In other words, a student can be enrolled in any number of courses, and a course can have any number of students enrolled in it.</span></span>

<span data-ttu-id="32eb5-177">次のセクションでは、これらのエンティティのいずれかのクラスを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-177">In the following sections you'll create a class for each one of these entities.</span></span>

> [!NOTE]
> <span data-ttu-id="32eb5-178">すべてのエンティティ クラスを作成する前に、プロジェクトをコンパイルしようとすると、コンパイラ エラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-178">If you try to compile the project before you finish creating all of these entity classes, you'll get compiler errors.</span></span>


### <a name="the-student-entity"></a><span data-ttu-id="32eb5-179">学生エンティティ</span><span class="sxs-lookup"><span data-stu-id="32eb5-179">The Student Entity</span></span>

![Student_entity](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image9.png)

<span data-ttu-id="32eb5-181">*モデル*フォルダー、という名前のクラス ファイルを作成する*Student.cs*テンプレート コードを次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-181">In the *Models* folder, create a class file named *Student.cs* and replace the template code with the following code:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample3.cs)]

<span data-ttu-id="32eb5-182">`ID`プロパティは、このクラスに対応するデータベース テーブルの主キー列になります。</span><span class="sxs-lookup"><span data-stu-id="32eb5-182">The `ID` property will become the primary key column of the database table that corresponds to this class.</span></span> <span data-ttu-id="32eb5-183">既定では、Entity Framework では、解釈というプロパティ`ID`または*classname* `ID`主キーとして。</span><span class="sxs-lookup"><span data-stu-id="32eb5-183">By default, the Entity Framework interprets a property that's named `ID` or *classname* `ID` as the primary key.</span></span>

<span data-ttu-id="32eb5-184">`Enrollments`プロパティは、*ナビゲーション プロパティ*です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-184">The `Enrollments` property is a *navigation property*.</span></span> <span data-ttu-id="32eb5-185">ナビゲーション プロパティは、このエンティティに関連するその他のエンティティを保持します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-185">Navigation properties hold other entities that are related to this entity.</span></span> <span data-ttu-id="32eb5-186">ここで、`Enrollments`のプロパティ、`Student`のすべてのエンティティを保持する、`Enrollment`に関連付けられているエンティティ`Student`エンティティです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-186">In this case, the `Enrollments` property of a `Student` entity will hold all of the `Enrollment` entities that are related to that `Student` entity.</span></span> <span data-ttu-id="32eb5-187">つまり場合、指定された`Student`データベース内の行が 2 つの関連`Enrollment`行 (そのスチューデントの主キーが含まれている行の値で、`StudentID`外部キー列)、その`Student`エンティティの`Enrollments`ナビゲーション プロパティこれら 2 つが含まれます`Enrollment`エンティティです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-187">In other words, if a given `Student` row in the database has two related `Enrollment` rows (rows that contain that student's primary key value in their `StudentID` foreign key column), that `Student` entity's `Enrollments` navigation property will contain those two `Enrollment` entities.</span></span>

<span data-ttu-id="32eb5-188">ナビゲーション プロパティは、通常、として定義`virtual`などの特定の Entity Framework 機能を利用を行うことができるように*遅延読み込み*です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-188">Navigation properties are typically defined as `virtual` so that they can take advantage of certain Entity Framework functionality such as *lazy loading*.</span></span> <span data-ttu-id="32eb5-189">(遅延読み込みについては説明後の「、[関連のデータの読み取り](reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md)このシリーズ後でチュートリアルです。)</span><span class="sxs-lookup"><span data-stu-id="32eb5-189">(Lazy loading will be explained later, in the [Reading Related Data](reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md) tutorial later in this series.)</span></span>

<span data-ttu-id="32eb5-190">その型が一覧にエントリを追加、削除すると、更新できるなどをする必要があります、ナビゲーション プロパティ (多対多または一対多のリレーションシップ) のように複数のエンティティに保持できる場合`ICollection`です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-190">If a navigation property can hold multiple entities (as in many-to-many or one-to-many relationships), its type must be a list in which entries can be added, deleted, and updated, such as `ICollection`.</span></span>

### <a name="the-enrollment-entity"></a><span data-ttu-id="32eb5-191">登録エンティティ</span><span class="sxs-lookup"><span data-stu-id="32eb5-191">The Enrollment Entity</span></span>

![Enrollment_entity](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image10.png)

<span data-ttu-id="32eb5-193">*モデル*フォルダー作成*Enrollment.cs*し、既存のコードを次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-193">In the *Models* folder, create *Enrollment.cs* and replace the existing code with the following code:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample4.cs)]

<span data-ttu-id="32eb5-194">`EnrollmentID`プロパティは、主キーになります。 このエンティティを使用して、 *classname* `ID`パターンの代わりに`ID`で学習したとしてそれ自体で、`Student`エンティティです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-194">The `EnrollmentID` property will be the primary key; this entity uses the *classname* `ID` pattern instead of `ID` by itself as you saw in the `Student` entity.</span></span> <span data-ttu-id="32eb5-195">通常 1 つパターンを選択し、データ モデル全体で使用するとします。</span><span class="sxs-lookup"><span data-stu-id="32eb5-195">Ordinarily you would choose one pattern and use it throughout your data model.</span></span> <span data-ttu-id="32eb5-196">ここでは、いずれかのパターンを使用することができます、バリエーションを示しています。</span><span class="sxs-lookup"><span data-stu-id="32eb5-196">Here, the variation illustrates that you can use either pattern.</span></span> <span data-ttu-id="32eb5-197">後のチュートリアルでわかる方法を使用して`ID`せず`classname`データ モデルでの継承を実装するが容易です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-197">In a later tutorial, you'll see how using `ID` without `classname` makes it easier to implement inheritance in the data model.</span></span>

<span data-ttu-id="32eb5-198">`Grade`プロパティは、 [enum](https://msdn.microsoft.com/data/hh859576.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-198">The `Grade` property is an [enum](https://msdn.microsoft.com/data/hh859576.aspx).</span></span> <span data-ttu-id="32eb5-199">後に疑問符 ()、`Grade`型宣言では、ことを示します、`Grade`プロパティは[null 許容](https://msdn.microsoft.com/library/2cf62fcy.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-199">The question mark after the `Grade` type declaration indicates that the `Grade` property is [nullable](https://msdn.microsoft.com/library/2cf62fcy.aspx).</span></span> <span data-ttu-id="32eb5-200">Null である評価とは異なる、ゼロ グレード: null は、評価が不明またはまだ割り当てられていないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-200">A grade that's null is different from a zero grade — null means a grade isn't known or hasn't been assigned yet.</span></span>

<span data-ttu-id="32eb5-201">`StudentID`プロパティは、foreign key、および対応するナビゲーション プロパティは`Student`します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-201">The `StudentID` property is a foreign key, and the corresponding navigation property is `Student`.</span></span> <span data-ttu-id="32eb5-202">`Enrollment`エンティティが 1 つに関連付けられた`Student`エンティティ、プロパティは、1 つのみを保持できるように`Student`エンティティ (とは異なり、`Student.Enrollments`ナビゲーション プロパティ先ほど見た、複数を格納する`Enrollment`エンティティ)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-202">An `Enrollment` entity is associated with one `Student` entity, so the property can only hold a single `Student` entity (unlike the `Student.Enrollments` navigation property you saw earlier, which can hold multiple `Enrollment` entities).</span></span>

<span data-ttu-id="32eb5-203">`CourseID`プロパティは、foreign key、および対応するナビゲーション プロパティは`Course`します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-203">The `CourseID` property is a foreign key, and the corresponding navigation property is `Course`.</span></span> <span data-ttu-id="32eb5-204">`Enrollment`エンティティが 1 つに関連付けられた`Course`エンティティです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-204">An `Enrollment` entity is associated with one `Course` entity.</span></span>

<span data-ttu-id="32eb5-205">Entity Framework がという名前が場合に、外部キーのプロパティとしてプロパティを解釈*&lt;ナビゲーション プロパティ名&gt;&lt;主キーのプロパティ名&gt;* (たとえば、 `StudentID`の`Student`以降のナビゲーション プロパティ、`Student`エンティティの主キーが`ID`)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-205">Entity Framework interprets a property as a foreign key property if it's named *&lt;navigation property name&gt;&lt;primary key property name&gt;* (for example, `StudentID` for the `Student` navigation property since the `Student` entity's primary key is `ID`).</span></span> <span data-ttu-id="32eb5-206">外部キー プロパティできますも同じ名前にするだけで*&lt;主キーのプロパティ名&gt;* (たとえば、`CourseID`ので、`Course`エンティティの主キーが`CourseID`)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-206">Foreign key properties can also be named the same simply *&lt;primary key property name&gt;* (for example, `CourseID` since the `Course` entity's primary key is `CourseID`).</span></span>

### <a name="the-course-entity"></a><span data-ttu-id="32eb5-207">Course エンティティ</span><span class="sxs-lookup"><span data-stu-id="32eb5-207">The Course Entity</span></span>

![Course_entity](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image11.png)

<span data-ttu-id="32eb5-209">*モデル*フォルダー作成*Course.cs*、テンプレート コードを次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-209">In the *Models* folder, create *Course.cs*, replacing the template code with the following code:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample5.cs)]

<span data-ttu-id="32eb5-210">`Enrollments`プロパティは、ナビゲーション プロパティ。</span><span class="sxs-lookup"><span data-stu-id="32eb5-210">The `Enrollments` property is a navigation property.</span></span> <span data-ttu-id="32eb5-211">A`Course`エンティティを任意の数に関連付けることができます`Enrollment`エンティティです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-211">A `Course` entity can be related to any number of `Enrollment` entities.</span></span>

<span data-ttu-id="32eb5-212">ここでの詳細について、 [DatabaseGenerated](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.schema.databasegeneratedattribute(v=vs.110).aspx)このシリーズの後のチュートリアルでの属性です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-212">We'll say more about the [DatabaseGenerated](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.schema.databasegeneratedattribute(v=vs.110).aspx) attribute in a later tutorial in this series.</span></span> <span data-ttu-id="32eb5-213">基本的には、この属性には、それを生成、データベースのではなく、コースのプライマリ キーを入力することができます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-213">Basically, this attribute lets you enter the primary key for the course rather than having the database generate it.</span></span>

## <a name="create-the-database-context"></a><span data-ttu-id="32eb5-214">データベース コンテキストを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-214">Create the Database Context</span></span>

<span data-ttu-id="32eb5-215">指定されたデータ モデルの Entity Framework 機能を調整するメイン クラスは、*データベース コンテキスト*クラスです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-215">The main class that coordinates Entity Framework functionality for a given data model is the *database context* class.</span></span> <span data-ttu-id="32eb5-216">派生することによってこのクラスを作成する、 [System.Data.Entity.DbContext](https://msdn.microsoft.com/library/system.data.entity.dbcontext(v=VS.103).aspx)クラスです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-216">You create this class by deriving from the [System.Data.Entity.DbContext](https://msdn.microsoft.com/library/system.data.entity.dbcontext(v=VS.103).aspx) class.</span></span> <span data-ttu-id="32eb5-217">コードでは、データ モデルのエンティティが含まれているを指定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-217">In your code you specify which entities are included in the data model.</span></span> <span data-ttu-id="32eb5-218">特定の Entity Framework の動作をカスタマイズすることもできます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-218">You can also customize certain Entity Framework behavior.</span></span> <span data-ttu-id="32eb5-219">クラスの名前は、このプロジェクトで`SchoolContext`です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-219">In this project, the class is named `SchoolContext`.</span></span>

<span data-ttu-id="32eb5-220">ContosoUniversity プロジェクトにフォルダーを作成するでプロジェクトを右クリックして**ソリューション エクスプ ローラー**  をクリック**追加**、クリックして**新しいフォルダー**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-220">To create a folder in the ContosoUniversity project, right-click the project in **Solution Explorer** and click **Add**, and then click **New Folder**.</span></span> <span data-ttu-id="32eb5-221">新しいフォルダーの名前を付けます*DAL* (データ アクセス層) 用です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-221">Name the new folder *DAL* (for Data Access Layer).</span></span> <span data-ttu-id="32eb5-222">そのフォルダーの作成という新しいクラス ファイル*SchoolContext.cs*、テンプレート コードを次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-222">In that folder create a new class file named *SchoolContext.cs*, and replace the template code with the following code:</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample6.cs)]

### <a name="specifying-entity-sets"></a><span data-ttu-id="32eb5-223">エンティティ セットを指定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-223">Specifying entity sets</span></span>

<span data-ttu-id="32eb5-224">このコードを作成、 [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=VS.103).aspx)各エンティティ セットのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-224">This code creates a [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=VS.103).aspx) property for each entity set.</span></span> <span data-ttu-id="32eb5-225">Entity Framework の用語で、*エンティティ セット*通常、データベース テーブルに対応し、*エンティティ*テーブル内の行に対応しています。</span><span class="sxs-lookup"><span data-stu-id="32eb5-225">In Entity Framework terminology, an *entity set* typically corresponds to a database table, and an *entity* corresponds to a row in the table.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="32eb5-226">省略した可能性がありますが、`DbSet<Enrollment>`と`DbSet<Course>`ステートメントと同じように動作します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-226">You could have omitted the `DbSet<Enrollment>` and `DbSet<Course>` statements and it would work the same.</span></span> <span data-ttu-id="32eb5-227">Entity Framework はそれらを含める暗黙的に、`Student`エンティティ参照、`Enrollment`エンティティと`Enrollment`エンティティ参照、`Course`エンティティです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-227">The Entity Framework would include them implicitly because the `Student` entity references the `Enrollment` entity and the `Enrollment` entity references the `Course` entity.</span></span>


### <a name="specifying-the-connection-string"></a><span data-ttu-id="32eb5-228">接続文字列の指定</span><span class="sxs-lookup"><span data-stu-id="32eb5-228">Specifying the connection string</span></span>

<span data-ttu-id="32eb5-229">(これは、後で、Web.config ファイルに追加されます) 接続文字列の名前は、コンス トラクターに渡されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-229">The name of the connection string (which you'll add to the Web.config file later) is passed in to the constructor.</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample7.cs?highlight=1)]

<span data-ttu-id="32eb5-230">Web.config ファイルに格納されているいずれかの名前ではなく、接続文字列自体に渡すこともできます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-230">You could also pass in the connection string itself instead of the name of one that is stored in the Web.config file.</span></span> <span data-ttu-id="32eb5-231">使用するデータベースを指定するためのオプションの詳細については、次を参照してください。 [Entity Framework の接続とモデル](https://msdn.microsoft.com/data/jj592674)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-231">For more information about options for specifying the database to use, see [Entity Framework - Connections and Models](https://msdn.microsoft.com/data/jj592674).</span></span>

<span data-ttu-id="32eb5-232">場合は、接続文字列か 1 つの名前を明示的に指定しなければ、Entity Framework は、接続文字列名がクラス名と同じであると仮定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-232">If you don't specify a connection string or the name of one explicitly, Entity Framework assumes that the connection string name is the same as the class name.</span></span> <span data-ttu-id="32eb5-233">この例では既定の接続文字列名になりますし`SchoolContext`、明示的に指定しているものと同じです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-233">The default connection string name in this example would then be `SchoolContext`, the same as what you're specifying explicitly.</span></span>

### <a name="specifying-singular-table-names"></a><span data-ttu-id="32eb5-234">単数形のテーブル名を指定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-234">Specifying singular table names</span></span>

<span data-ttu-id="32eb5-235">`modelBuilder.Conventions.Remove`内のステートメント、 [OnModelCreating](https://msdn.microsoft.com/library/system.data.entity.dbcontext.onmodelcreating(v=vs.103).aspx)メソッドは、複数化されてからテーブル名を防止します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-235">The `modelBuilder.Conventions.Remove` statement in the [OnModelCreating](https://msdn.microsoft.com/library/system.data.entity.dbcontext.onmodelcreating(v=vs.103).aspx) method prevents table names from being pluralized.</span></span> <span data-ttu-id="32eb5-236">これをしなかった場合、データベースで生成されたテーブルの名前は`Students`、 `Courses`、および`Enrollments`です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-236">If you didn't do this, the generated tables in the database would be named `Students`, `Courses`, and `Enrollments`.</span></span> <span data-ttu-id="32eb5-237">代わりに、テーブル名になります`Student`、 `Course`、および`Enrollment`です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-237">Instead, the table names will be `Student`, `Course`, and `Enrollment`.</span></span> <span data-ttu-id="32eb5-238">テーブル名を複数形にするかどうかについては、開発者の間で意見が分かれるでしょう。</span><span class="sxs-lookup"><span data-stu-id="32eb5-238">Developers disagree about whether table names should be pluralized or not.</span></span> <span data-ttu-id="32eb5-239">このチュートリアルは単数形のフォームを使用しますが、重要な点は、することを含むか、次のコード行を省略することによって、どのフォームを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-239">This tutorial uses the singular form, but the important point is that you can select whichever form you prefer by including or omitting this line of code.</span></span>

## <a name="set-up-ef-to-initialize-the-database-with-test-data"></a><span data-ttu-id="32eb5-240">データベースにテスト データを初期化するために、EF を設定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-240">Set up EF to initialize the database with test data</span></span>

<span data-ttu-id="32eb5-241">Entity Framework できます自動的に作成 (または削除して再作成) するアプリケーションの実行時のデータベースです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-241">The Entity Framework can automatically create (or drop and re-create) a database for you when the application runs.</span></span> <span data-ttu-id="32eb5-242">これをするアプリケーションを実行するたびに、または、モデルは、既存のデータベースとの同期時にのみを指定することができます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-242">You can specify that this should be done every time your application runs or only when the model is out of sync with the existing database.</span></span> <span data-ttu-id="32eb5-243">作成することも、 `Seed` Entity Framework が、テスト データを設定するために、データベースの作成後に自動的に呼び出すメソッド。</span><span class="sxs-lookup"><span data-stu-id="32eb5-243">You can also write a `Seed` method that the Entity Framework automatically calls after creating the database in order to populate it with test data.</span></span>

<span data-ttu-id="32eb5-244">既定の動作では、のみそれが存在しないとき (モデルが変更されており、データベースが既に存在する場合、例外がスロー) データベースを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-244">The default behavior is to create a database only if it doesn't exist (and throw an exception if the model has changed and the database already exists).</span></span> <span data-ttu-id="32eb5-245">このセクションでは、データベースを削除して、モデルが変更されるたびを再作成することを指定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-245">In this section you'll specify that the database should be dropped and re-created whenever the model changes.</span></span> <span data-ttu-id="32eb5-246">データベースを削除するには、すべてのデータの損失と、します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-246">Dropping the database causes the loss of all your data.</span></span> <span data-ttu-id="32eb5-247">これは一般的に [ok]、開発中にあるため、`Seed`メソッドは、データベースが再作成され、テスト データを再作成時に実行されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-247">This is generally OK during development, because the `Seed` method will run when the database is re-created and will re-create your test data.</span></span> <span data-ttu-id="32eb5-248">実稼働環境で通常たくないすべてのデータが失われるたびに、データベース スキーマを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="32eb5-248">But in production you generally don't want to lose all your data every time you need to change the database schema.</span></span> <span data-ttu-id="32eb5-249">後で削除して、データベースを再作成ではなく、データベース スキーマを変更する Code First Migrations を使用して、モデルの変更を処理する方法が表示されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-249">Later you'll see how to handle model changes by using Code First Migrations to change the database schema instead of dropping and re-creating the database.</span></span>

<span data-ttu-id="32eb5-250">DAL フォルダーでという新しいクラス ファイルを作成*SchoolInitializer.cs*にテンプレート コードを置き換えると、</span><span class="sxs-lookup"><span data-stu-id="32eb5-250">In the DAL folder, create a new class file named *SchoolInitializer.cs* and replace the template code with the</span></span>  
<span data-ttu-id="32eb5-251">次のコードは、これにより、ときに作成するデータベースで必要し、新しいデータベースにテスト データを読み込みます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-251">following code, which causes a database to be created when needed and loads test data into the new database.</span></span>

[!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="32eb5-252">`Seed`メソッドを受け取り、入力パラメーターとして、データベース コンテキストのオブジェクト、メソッドのコードを使用</span><span class="sxs-lookup"><span data-stu-id="32eb5-252">The `Seed` method takes the database context object as an input parameter, and the code in the method uses</span></span>  
<span data-ttu-id="32eb5-253">そのオブジェクトをデータベースに新しいエンティティを追加します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-253">that object to add new entities to the database.</span></span> <span data-ttu-id="32eb5-254">各エンティティ型に対して、コードのコレクションを作成新規</span><span class="sxs-lookup"><span data-stu-id="32eb5-254">For each entity type, the code creates a collection of new</span></span>  
 <span data-ttu-id="32eb5-255">エンティティ、適切なにそれらを追加`DbSet`プロパティ、および、データベースへの変更を保存します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-255">entities, adds them to the appropriate `DbSet` property, and then saves the changes to the database.</span></span> <span data-ttu-id="32eb5-256">そうじゃないです</span><span class="sxs-lookup"><span data-stu-id="32eb5-256">It isn't</span></span>  
<span data-ttu-id="32eb5-257">呼び出すために必要な`SaveChanges`によりこれが、ここでは、行われるように、エンティティの各グループの後にメソッド</span><span class="sxs-lookup"><span data-stu-id="32eb5-257">necessary to call the `SaveChanges` method after each group of entities, as is done here, but doing that helps</span></span>  
<span data-ttu-id="32eb5-258">コードは、データベースに書き込んでいるときに例外が発生した場合は、問題の原因を見つけます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-258">you locate the source of a problem if an exception occurs while the code is writing to the database.</span></span>

<span data-ttu-id="32eb5-259">初期化子クラスを使用する Entity Framework を確認するには、要素を追加、`entityFramework`アプリケーション内の要素*Web.config*ファイル (ファイル、ルート プロジェクト フォルダー内)、次の例で示すようにします。</span><span class="sxs-lookup"><span data-stu-id="32eb5-259">To tell Entity Framework to use your initializer class, add an element to the `entityFramework` element in the application *Web.config* file (the one in the root project folder), as shown in the following example:</span></span>

[!code-xml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample9.xml?highlight=2-6)]

<span data-ttu-id="32eb5-260">`context type`コンテキストの完全修飾クラス名とには、アセンブリを指定し、`databaseinitializer type`初期化子のクラスと内にあるアセンブリの完全修飾名を指定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-260">The `context type` specifies the fully qualified context class name and the assembly it's in, and the `databaseinitializer type` specifies the fully qualified name of the initializer class and the assembly it's in.</span></span> <span data-ttu-id="32eb5-261">(で属性を設定するには、初期化子を使用する EF を含めない場合は、ときに、`context`要素: `disableDatabaseInitialization="true"`)。詳細については、次を参照してください。 [Entity Framework の構成ファイル設定](https://msdn.microsoft.com/data/jj556606)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-261">(When you don't want EF to use the initializer, you can set an attribute on the `context` element: `disableDatabaseInitialization="true"`.) For more information, see [Entity Framework - Config File Settings](https://msdn.microsoft.com/data/jj556606).</span></span>

<span data-ttu-id="32eb5-262">初期化子を設定する代わりに、 *Web.config*ファイルを追加することによって実行するコードで、`Database.SetInitializer`ステートメントを`Application_Start`メソッドで、 *Global.asax.cs*ファイル。</span><span class="sxs-lookup"><span data-stu-id="32eb5-262">As an alternative to setting the initializer in the *Web.config* file is to do it in code by adding a `Database.SetInitializer` statement to the `Application_Start` method in the *Global.asax.cs* file.</span></span> <span data-ttu-id="32eb5-263">詳細については、次を参照してください。[についてデータベース初期化子の Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-263">For more information, see [Understanding Database Initializers in Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm).</span></span>

<span data-ttu-id="32eb5-264">アプリケーションは現在設定されている最大の実行で最初にデータベースをアクセスすること、</span><span class="sxs-lookup"><span data-stu-id="32eb5-264">The application is now set up so that when you access the database for the first time in a given run of the</span></span>  
<span data-ttu-id="32eb5-265">Entity Framework がモデルにデータベースを比較するアプリケーション、(、`SchoolContext`およびエンティティ クラス)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-265">application, the Entity Framework compares the database to the model (your `SchoolContext` and entity classes).</span></span> <span data-ttu-id="32eb5-266">違いがある場合、アプリケーションは削除して、データベースを再作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-266">If there's a difference, the application drops and re-creates the database.</span></span>

> [!NOTE]
> <span data-ttu-id="32eb5-267">アプリケーションを実稼働 web サーバーを展開するときに、削除するか、削除して、データベースを再作成するコードを無効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="32eb5-267">When you deploy an application to a production web server, you must remove or disable code that drops and re-creates the database.</span></span> <span data-ttu-id="32eb5-268">このシリーズの後のチュートリアルを実行してみましょう。</span><span class="sxs-lookup"><span data-stu-id="32eb5-268">You'll do that in a later tutorial in this series.</span></span>


## <a name="set-up-ef-to-use-a-sql-server-express-localdb-database"></a><span data-ttu-id="32eb5-269">SQL Server Express LocalDB データベースを使用する EF を設定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-269">Set up EF to use a SQL Server Express LocalDB database</span></span>

<span data-ttu-id="32eb5-270">[LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)は、SQL Server Express データベース エンジンの簡易バージョンです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-270">[LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx) is a lightweight version of the SQL Server Express Database Engine.</span></span> <span data-ttu-id="32eb5-271">簡単にインストールして構成は、オンデマンドで起動し、ユーザー モードで実行します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-271">It's easy to install and configure, starts on demand, and runs in user mode.</span></span> <span data-ttu-id="32eb5-272">LocalDB は、SQL Server Express データベースを対象として使用することができますの特殊な実行モードで実行*.mdf*ファイル。</span><span class="sxs-lookup"><span data-stu-id="32eb5-272">LocalDB runs in a special execution mode of SQL Server Express that enables you to work with databases as *.mdf* files.</span></span> <span data-ttu-id="32eb5-273">LocalDB のデータベース ファイルに格納して、*アプリ\_データ*プロジェクトにデータベースをコピーできるようにする場合は、web プロジェクトのフォルダーです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-273">You can put LocalDB database files in the *App\_Data* folder of a web project if you want to be able to copy the database with the project.</span></span> <span data-ttu-id="32eb5-274">SQL Server express ユーザー インスタンスの機能でを操作することもできます*.mdf*は、ファイル、ユーザー インスタンス機能は推奨されません。 そのため、LocalDB を使用するため推奨*.mdf*ファイル。</span><span class="sxs-lookup"><span data-stu-id="32eb5-274">The user instance feature in SQL Server Express also enables you to work with *.mdf* files, but the user instance feature is deprecated; therefore, LocalDB is recommended for working with *.mdf* files.</span></span> <span data-ttu-id="32eb5-275">Visual Studio 2012 およびそれ以降のバージョンで LocalDB は既定では Visual Studio と共にインストールされます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-275">In Visual Studio 2012 and later versions, LocalDB is installed by default with Visual Studio.</span></span>

<span data-ttu-id="32eb5-276">通常実稼働 web アプリケーションの SQL Server Express は使用されません。</span><span class="sxs-lookup"><span data-stu-id="32eb5-276">Typically SQL Server Express is not used for production web applications.</span></span> <span data-ttu-id="32eb5-277">LocalDB 具体的には、ために推奨されませんを実稼働用 web アプリケーションと IIS を使用するものはありません。</span><span class="sxs-lookup"><span data-stu-id="32eb5-277">LocalDB in particular is not recommended for production use with a web application because it is not designed to work with IIS.</span></span>

<span data-ttu-id="32eb5-278">このチュートリアルでは、LocalDB を使用します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-278">In this tutorial you'll work with LocalDB.</span></span> <span data-ttu-id="32eb5-279">アプリケーションを開く*Web.config*ファイルを追加、`connectionStrings`要素の前、`appSettings`要素は、次の例で示すようにします。</span><span class="sxs-lookup"><span data-stu-id="32eb5-279">Open the application *Web.config* file and add a `connectionStrings` element preceding the `appSettings` element, as shown in the following example.</span></span> <span data-ttu-id="32eb5-280">(更新するかどうかを確認、 *Web.config*ルート プロジェクト フォルダー内のファイルです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-280">(Make sure you update the *Web.config* file in the root project folder.</span></span> <span data-ttu-id="32eb5-281">*Web.config*ファイルは、*ビュー*サブフォルダーを更新する必要はありません)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-281">There's also a *Web.config* file is in the *Views* subfolder that you don't need to update.)</span></span>

<span data-ttu-id="32eb5-282">Visual Studio 2015 を使用している場合は、接続文字列で"v11.0"を既定の SQL Server インスタンス名が変更されると"MSSQLLocalDB"で置き換えます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-282">If you are using Visual Studio 2015, replace "v11.0" in the connection string with "MSSQLLocalDB", as the default SQL Server instance name has changed.</span></span>

[!code-xml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample10.xml?highlight=1-3)]

<span data-ttu-id="32eb5-283">追加した接続文字列は、Entity Framework がという名前の LocalDB データベースを使用することを指定します*ContosoUniversity1.mdf*です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-283">The connection string you've added specifies that Entity Framework will use a LocalDB database named *ContosoUniversity1.mdf*.</span></span> <span data-ttu-id="32eb5-284">(データベースはまだ存在しません。EF が作成されます。)データベースを作成する場合、*アプリ\_データ*追加することも、フォルダー`AttachDBFilename=|DataDirectory|\ContosoUniversity1.mdf`接続文字列にします。</span><span class="sxs-lookup"><span data-stu-id="32eb5-284">(The database doesn't exist yet; EF will create it.) If you wanted the database to be created in your *App\_Data* folder, you could add `AttachDBFilename=|DataDirectory|\ContosoUniversity1.mdf` to the connection string.</span></span> <span data-ttu-id="32eb5-285">接続文字列の詳細については、次を参照してください。 [ASP.NET Web アプリケーション用の SQL Server 接続文字列](https://msdn.microsoft.com/library/jj653752.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-285">For more information about connection strings, see [SQL Server Connection Strings for ASP.NET Web Applications](https://msdn.microsoft.com/library/jj653752.aspx).</span></span>

<span data-ttu-id="32eb5-286">実際に接続文字列を用意する必要はありません、 *Web.config*ファイル。</span><span class="sxs-lookup"><span data-stu-id="32eb5-286">You don't actually have to have a connection string in the *Web.config* file.</span></span> <span data-ttu-id="32eb5-287">接続文字列を指定しない場合、Entity Framework は、コンテキスト クラスに基づくいずれかの既定値を使用します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-287">If you don't supply a connection string, Entity Framework will use a default one based on your context class.</span></span> <span data-ttu-id="32eb5-288">詳細については、次を参照してください。 [Code First の新しいデータベースに](https://msdn.microsoft.com/data/jj193542)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-288">For more information, see [Code First to a New Database](https://msdn.microsoft.com/data/jj193542).</span></span>

## <a name="creating-a-student-controller-and-views"></a><span data-ttu-id="32eb5-289">学生のコント ローラーとビューの作成</span><span class="sxs-lookup"><span data-stu-id="32eb5-289">Creating a Student Controller and Views</span></span>

<span data-ttu-id="32eb5-290">今すぐデータを表示する web ページを作成し、データを要求の処理が自動的にトリガー</span><span class="sxs-lookup"><span data-stu-id="32eb5-290">Now you'll create a web page to display data, and the process of requesting the data will automatically trigger</span></span>  
<span data-ttu-id="32eb5-291">データベースの作成。</span><span class="sxs-lookup"><span data-stu-id="32eb5-291">the creation of the database.</span></span> <span data-ttu-id="32eb5-292">新しいコント ローラーの作成から始めます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-292">You'll begin by creating a new controller.</span></span> <span data-ttu-id="32eb5-293">前にプロジェクトをビルドして、モデルおよびコンテキスト クラスを MVC コント ローラーのスキャフォールディングを使用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="32eb5-293">But before you do that, build the project to make the model and context classes available to MVC controller scaffolding.</span></span>

1. <span data-ttu-id="32eb5-294">右クリックし、**コント ローラー**フォルダーに**ソリューション エクスプ ローラー****追加**、順にクリック**スキャフォールディングされた新しい項目**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-294">Right-click the **Controllers** folder in **Solution Explorer**, select **Add**, and then click **New Scaffolded Item**.</span></span>
- <span data-ttu-id="32eb5-295">**追加 Scaffold**ダイアログ ボックスで、 **MVC 5 コント ローラー、ビューがある Entity Framework を使用して**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-295">In the **Add Scaffold** dialog box, select **MVC 5 Controller with views, using Entity Framework**.</span></span>

    ![スキャフォールディングを追加します。](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image12.png)
- <span data-ttu-id="32eb5-297">コント ローラーの追加 ダイアログ ボックスで、以下の選択を行い をクリックして**追加**:</span><span class="sxs-lookup"><span data-stu-id="32eb5-297">In the Add Controller dialog box, make the following selections and then click **Add**:</span></span>

    - <span data-ttu-id="32eb5-298">モデル クラス:**学生 (ContosoUniversity.Models)**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-298">Model class: **Student (ContosoUniversity.Models)**.</span></span> <span data-ttu-id="32eb5-299">(プロジェクトのビルド ドロップダウン リストでは、このオプションが表示されない場合、およびもう一度やり直してください。)</span><span class="sxs-lookup"><span data-stu-id="32eb5-299">(If you don't see this option in the drop-down list, build the project and try again.)</span></span>
    - <span data-ttu-id="32eb5-300">データ コンテキスト クラス: **SchoolContext (ContosoUniversity.DAL)**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-300">Data context class: **SchoolContext (ContosoUniversity.DAL)**.</span></span>
    - <span data-ttu-id="32eb5-301">コント ローラー名: **StudentController** (StudentsController されません)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-301">Controller name: **StudentController** (not StudentsController).</span></span>
    - <span data-ttu-id="32eb5-302">その他のフィールドの既定値のままにします。</span><span class="sxs-lookup"><span data-stu-id="32eb5-302">Leave the default values for the other fields.</span></span>

    ![Add_Controller_dialog_box_for_Student_controller](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image13.png)

    <span data-ttu-id="32eb5-304">クリックすると、**追加**、scaffolder StudentController.cs ファイルと、コント ローラーを使用するビュー (.cshtml ファイル) のセットを作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-304">When you click **Add**, the scaffolder creates a StudentController.cs file and a set of views (.cshtml files) that work with the controller.</span></span> <span data-ttu-id="32eb5-305">Entity Framework を使用するプロジェクトを作成するときに、将来を活用することも、scaffolder の追加機能の一部: をだけで、最初のモデル クラスを作成する接続文字列を作成しませんし、**コント ローラーの追加**ボックスは、新しいコンテキスト クラスを指定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-305">In the future when you create projects that use Entity Framework you can also take advantage of some additional functionality of the scaffolder: just create your first model class, don't create a connection string, and then in the **Add Controller** box specify new context class.</span></span> <span data-ttu-id="32eb5-306">Scaffolder を作成、`DbContext`コント ローラーとビューだけでなくクラスとの接続文字列します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-306">The scaffolder will create your `DbContext` class and your connection string as well as the controller and views.</span></span>
- <span data-ttu-id="32eb5-307">Visual Studio を開き、 *Controllers\StudentController.cs*ファイル。</span><span class="sxs-lookup"><span data-stu-id="32eb5-307">Visual Studio opens the *Controllers\StudentController.cs* file.</span></span> <span data-ttu-id="32eb5-308">データベース コンテキストのオブジェクトをインスタンス化するクラスの変数が作成されてが表示されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-308">You see a class variable has been created that instantiates a database context object:</span></span>

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample11.cs)]

    <span data-ttu-id="32eb5-309">`Index`アクション メソッドから受講者のリストを取得、*受講者*エンティティ セットを読み取ることによって、`Students`データベース コンテキストのインスタンスのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="32eb5-309">The `Index` action method gets a list of students from the *Students* entity set by reading the `Students` property of the database context instance:</span></span>

    [!code-csharp[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample12.cs)]

    <span data-ttu-id="32eb5-310">*Student\Index.cshtml*ビューは、テーブルのこの一覧を表示します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-310">The *Student\Index.cshtml* view displays this list in a table:</span></span>

    [!code-cshtml[Main](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/samples/sample13.cshtml)]
- <span data-ttu-id="32eb5-311">Ctrl キーを押しながら F5 キーを押してプロジェクトを実行します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-311">Press CTRL+F5 to run the project.</span></span> <span data-ttu-id="32eb5-312">(「シャドウ コピーを作成できません」エラーが発生した場合、ブラウザーを閉じ、もう一度やり直してください。)</span><span class="sxs-lookup"><span data-stu-id="32eb5-312">(If you get a "Cannot create Shadow Copy" error, close the browser and try again.)</span></span>

    <span data-ttu-id="32eb5-313">をクリックして、**受講者**テスト データを表示 タブを`Seed`メソッドを挿入します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-313">Click the **Students** tab to see the test data that the `Seed` method inserted.</span></span> <span data-ttu-id="32eb5-314">ナロー方法に応じて、ブラウザーまたはウィンドウは、最上位のアドレス バーに受講者 タブのリンクが表示されますのリンクを表示する右上隅をクリックする必要があります。</span><span class="sxs-lookup"><span data-stu-id="32eb5-314">Depending on how narrow your browser window is, you'll see the Student tab link in the top address bar or you'll have to click the upper right corner to see the link.</span></span>

    ![メニュー ボタン](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image14.png)

    ![学生のインデックス ページ](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image15.png)

## <a name="view-the-database"></a><span data-ttu-id="32eb5-317">データベースを表示します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-317">View the Database</span></span>

<span data-ttu-id="32eb5-318">受講者 ページを実行すると、アプリケーションがデータベースにアクセスしようとした場合、データベースがありませんでした。 そのため、1 つを作成、し、実行されたデータベースにデータを設定するシード メソッド EF を確認しました。</span><span class="sxs-lookup"><span data-stu-id="32eb5-318">When you ran the Students page and the application tried to access the database, EF saw that there was no database and so it created one, then it ran the seed method to populate the database with data.</span></span>

<span data-ttu-id="32eb5-319">いずれかを使用する**サーバー エクスプ ローラー**または**SQL Server オブジェクト エクスプ ローラー** Visual Studio でデータベースを表示するには、(SSOX)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-319">You can use either **Server Explorer** or **SQL Server Object Explorer** (SSOX) to view the database in Visual Studio.</span></span> <span data-ttu-id="32eb5-320">このチュートリアルで使用する**サーバー エクスプ ローラー**です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-320">For this tutorial you'll use **Server Explorer**.</span></span> <span data-ttu-id="32eb5-321">(エディションの Visual Studio Express 2013 年より前で**サーバー エクスプ ローラー**が呼び出された**データベース エクスプ ローラー**)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-321">(In Visual Studio Express editions earlier than 2013, **Server Explorer** is called **Database Explorer**.)</span></span>

1. <span data-ttu-id="32eb5-322">ブラウザーを閉じます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-322">Close the browser.</span></span>
2. <span data-ttu-id="32eb5-323">**サーバー エクスプ ローラー**、展開**データ接続**、展開**学校コンテキスト (ContosoUniversity)**、順に展開**テーブル**を表示するには新しいデータベースのテーブルです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-323">In **Server Explorer**, expand **Data Connections**, expand **School Context (ContosoUniversity)**, and then expand **Tables** to see the tables in your new database.</span></span>

    ![](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image16.png)
3. <span data-ttu-id="32eb5-324">右クリックし、**学生**テーブルし、をクリックして**テーブル データの表示**に作成された列とテーブルに挿入された行を参照してください。</span><span class="sxs-lookup"><span data-stu-id="32eb5-324">Right-click the **Student** table and click **Show Table Data** to see the columns that were created and the rows that were inserted into the table.</span></span>

    ![Student テーブル](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application/_static/image17.png)
4. <span data-ttu-id="32eb5-326">閉じる、**サーバー エクスプ ローラー**接続します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-326">Close the **Server Explorer** connection.</span></span>

<span data-ttu-id="32eb5-327">*ContosoUniversity1.mdf*と*.ldf*データベース ファイルは、`C:\Users\<yourusername>`フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-327">The *ContosoUniversity1.mdf* and *.ldf* database files are in the `C:\Users\<yourusername>` folder.</span></span>

<span data-ttu-id="32eb5-328">使用しているため、`DropCreateDatabaseIfModelChanges`初期化子、でした今すぐ変更を加えるには`Student`クラス、もう一度、アプリケーションを実行し、するとデータベースに自動的に変更内容を一致するように再作成します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-328">Because you're using the `DropCreateDatabaseIfModelChanges` initializer, you could now make a change to the `Student` class, run the application again, and the database would automatically be re-created to match your change.</span></span> <span data-ttu-id="32eb5-329">たとえば、追加する場合、`EmailAddress`プロパティを`Student`クラス、受講者 ページを再度実行し、表示、テーブルをもう一度、表示して、新しい`EmailAddress`列です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-329">For example, if you add an `EmailAddress` property to the `Student` class, run the Students page again, and then look at the table again, you will see a new `EmailAddress` column.</span></span>

## <a name="conventions"></a><span data-ttu-id="32eb5-330">規約</span><span class="sxs-lookup"><span data-stu-id="32eb5-330">Conventions</span></span>

<span data-ttu-id="32eb5-331">使用するための完全なデータベースを作成できるように、Entity Framework の順序で記述したコードの量は最小限に抑える*規則*、または Entity Framework で想定します。</span><span class="sxs-lookup"><span data-stu-id="32eb5-331">The amount of code you had to write in order for the Entity Framework to be able to create a complete database for you is minimal because of the use of *conventions*, or assumptions that the Entity Framework makes.</span></span> <span data-ttu-id="32eb5-332">既に説明した一部の場合、またはされず、気付かないうち使用されていたは。</span><span class="sxs-lookup"><span data-stu-id="32eb5-332">Some of them have already been noted or were used without your being aware of them:</span></span>

- <span data-ttu-id="32eb5-333">エンティティのクラス名の複数形のフォームは、テーブル名として使用されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-333">The pluralized forms of entity class names are used as table names.</span></span>
- <span data-ttu-id="32eb5-334">エンティティのプロパティ名は、列名に使用されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-334">Entity property names are used for column names.</span></span>
- <span data-ttu-id="32eb5-335">名前付きエンティティのプロパティ`ID`または*classname* `ID`主キー プロパティとして認識されます。</span><span class="sxs-lookup"><span data-stu-id="32eb5-335">Entity properties that are named `ID` or *classname* `ID` are recognized as primary key properties.</span></span>
- <span data-ttu-id="32eb5-336">という名前が場合、プロパティが外部キーのプロパティとして解釈されます*&lt;ナビゲーション プロパティ名&gt;&lt;主キーのプロパティ名&gt;* (たとえば、 `StudentID` の`Student`以降のナビゲーション プロパティ、`Student`エンティティの主キーが`ID`)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-336">A property is interpreted as a foreign key property if it's named *&lt;navigation property name&gt;&lt;primary key property name&gt;* (for example, `StudentID` for the `Student` navigation property since the `Student` entity's primary key is `ID`).</span></span> <span data-ttu-id="32eb5-337">外部キー プロパティできますも同じ名前にするだけで&lt;主キーのプロパティ名&gt;(たとえば、`EnrollmentID`ので、`Enrollment`エンティティの主キーが`EnrollmentID`)。</span><span class="sxs-lookup"><span data-stu-id="32eb5-337">Foreign key properties can also be named the same simply &lt;primary key property name&gt; (for example, `EnrollmentID` since the `Enrollment` entity's primary key is `EnrollmentID`).</span></span>

<span data-ttu-id="32eb5-338">規則がオーバーライドできることを見てきました。</span><span class="sxs-lookup"><span data-stu-id="32eb5-338">You've seen that conventions can be overridden.</span></span> <span data-ttu-id="32eb5-339">たとえば、テーブル名を複数化しないでください、および、後述することを指定を外部キーのプロパティとしてプロパティを明示的にマークする方法です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-339">For example, you specified that table names shouldn't be pluralized, and you'll see later how to explicitly mark a property as a foreign key property.</span></span> <span data-ttu-id="32eb5-340">規則およびそれらをオーバーライドする方法の詳細を学習、[詳細複雑なデータ モデルを作成する](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)このシリーズの後でチュートリアルです。</span><span class="sxs-lookup"><span data-stu-id="32eb5-340">You'll learn more about conventions and how to override them in the [Creating a More Complex Data Model](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md) tutorial later in this series.</span></span> <span data-ttu-id="32eb5-341">規則の詳細については、次を参照してください。[コード First 規約に従って](https://msdn.microsoft.com/data/jj679962)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-341">For more information about conventions, see [Code First Conventions](https://msdn.microsoft.com/data/jj679962).</span></span>

## <a name="summary"></a><span data-ttu-id="32eb5-342">まとめ</span><span class="sxs-lookup"><span data-stu-id="32eb5-342">Summary</span></span>

<span data-ttu-id="32eb5-343">保存し、データを表示する Entity Framework および SQL Server Express LocalDB を使用する簡単なアプリケーションが作成されました。</span><span class="sxs-lookup"><span data-stu-id="32eb5-343">You've now created a simple application that uses the Entity Framework and SQL Server Express LocalDB to store and display data.</span></span> <span data-ttu-id="32eb5-344">次のチュートリアルでは基本的な CRUD を実行する方法を学習 (作成、読み取り、更新、削除) 操作です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-344">In the following tutorial you'll learn how to perform basic CRUD (create, read, update, delete) operations.</span></span>

<span data-ttu-id="32eb5-345">このチュートリアルをリンクする方法と、何を改善にフィードバックを送信してください。</span><span class="sxs-lookup"><span data-stu-id="32eb5-345">Please leave feedback on how you liked this tutorial and what we could improve.</span></span> <span data-ttu-id="32eb5-346">新しいトピックを要求することもできます。 [Me 方法でコードの表示](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-346">You can also request new topics at [Show Me How With Code](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span></span>

<span data-ttu-id="32eb5-347">その他の Entity Framework リソースへのリンクは含まれて[ASP.NET データ アクセス - リソースのことをお勧め](../../../../whitepapers/aspnet-data-access-content-map.md)です。</span><span class="sxs-lookup"><span data-stu-id="32eb5-347">Links to other Entity Framework resources can be found in [ASP.NET Data Access - Recommended Resources](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="32eb5-348">次へ</span><span class="sxs-lookup"><span data-stu-id="32eb5-348">Next</span></span>](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
