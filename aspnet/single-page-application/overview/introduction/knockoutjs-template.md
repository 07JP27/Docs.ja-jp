---
uid: single-page-application/overview/introduction/knockoutjs-template
title: 'Single Page Application: KnockoutJS テンプレート |Microsoft ドキュメント'
author: MikeWasson
description: Knockout テンプレート
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/30/2013
ms.topic: article
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: e6c0c45bed098a8a1160ff11e4f77244bf55ffd3
ms.sourcegitcommit: 493a215355576cfa481773365de021bcf04bb9c7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/15/2018
---
<a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="4a30b-103">Single Page Application: KnockoutJS テンプレート</span><span class="sxs-lookup"><span data-stu-id="4a30b-103">Single Page Application: KnockoutJS template</span></span>
====================
<span data-ttu-id="4a30b-104">作成者 [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="4a30b-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="4a30b-105">ASP.NET および Web ツール 2012.2 の一部である Knockout MVC テンプレート</span><span class="sxs-lookup"><span data-stu-id="4a30b-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="4a30b-106">ASP.NET および Web ツール 2012.2 をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)


<span data-ttu-id="4a30b-107">ASP.NET および Web ツール 2012.2 更新には、ASP.NET MVC 4 用の単一ページ アプリケーション (SPA) テンプレートが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="4a30b-108">このテンプレートは、対話型のクライアント側 web アプリケーションの構築をすばやく開始するために設計されています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="4a30b-109">「単一ページ アプリケーション」(SPA) が 1 つの HTML ページが読み込まれ、新しいページを読み込むのではなく、ページを動的に更新する web アプリケーションの一般的な用語です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="4a30b-110">最初のページ読み込み後、SPA が AJAX 要求を使用してサーバーを説明します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="4a30b-111">AJAX が現在では、JavaScript フレームワークをビルドし、大規模な高度な SPA アプリケーションを管理しやすくします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="4a30b-112">また、html5 および css3 用がしやすく豊富な Ui を作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="4a30b-113">開始に役立つは、SPA テンプレートは、サンプルの「to do リスト」アプリケーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="4a30b-114">このチュートリアルでは、テンプレートのガイド付きツアーをみましょう。</span><span class="sxs-lookup"><span data-stu-id="4a30b-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="4a30b-115">まず、to do リスト、アプリケーション自体を確認し、動作を構成するテクノロジの部分を調べるおします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="4a30b-116">新しい SPA テンプレート プロジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="4a30b-117">要件:</span><span class="sxs-lookup"><span data-stu-id="4a30b-117">Requirements:</span></span>

- <span data-ttu-id="4a30b-118">Visual Studio 2012 または Visual Studio Express 2012 for Web</span><span class="sxs-lookup"><span data-stu-id="4a30b-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="4a30b-119">ASP.NET Web ツール 2012.2 を更新します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="4a30b-120">更新プログラムをインストールする[ここ](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2)です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="4a30b-121">Visual Studio を起動し、選択**新しいプロジェクト**スタート ページからです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="4a30b-122">またはから、**ファイル**メニューの **新規**し**プロジェクト**です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="4a30b-123">**テンプレート**ペインで、**インストールされたテンプレート**を展開し、 **Visual c#** ノード。</span><span class="sxs-lookup"><span data-stu-id="4a30b-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="4a30b-124">**Visual c#** **Web**です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="4a30b-125">プロジェクト テンプレートの一覧で選択**ASP.NET MVC 4 Web Application**です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="4a30b-126">プロジェクトの名前を指定し、をクリックして**OK**です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="4a30b-127">**新しいプロジェクト**ウィザードで、 **Single Page Application**です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="4a30b-128">F5 キーを押してアプリケーションをビルドし、実行します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="4a30b-129">アプリケーションを最初に実行すると、ログイン画面が表示されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="4a30b-130">クリックして、&quot;サインアップ&quot;リンクし、新しいユーザーを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="4a30b-131">ログインした後、アプリケーションは、次の 2 つの項目を含む既定の Todo リストを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="4a30b-132">"Todo リストの追加 をクリックすることができます、新しいリストを追加します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="4a30b-133">リストの名前を変更の一覧に項目を追加し、それらのチェックします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="4a30b-134">項目を削除したり、リスト全体を削除できます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="4a30b-135">変更は、サーバー上のデータベースに自動的に保存されます (この時点では、LocalDB 実際には、アプリケーションをローカルで実行しているため)。</span><span class="sxs-lookup"><span data-stu-id="4a30b-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="4a30b-136">SPA テンプレートのアーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="4a30b-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="4a30b-137">この図では、アプリケーションのメインのビルド ブロックを示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="4a30b-138">サーバー側では、ASP.NET MVC は、HTML を提供しもフォーム ベース認証を処理します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="4a30b-139">ASP.NET Web API は、ToDoItems、取得、作成、更新、および削除を含む、ToDoLists に関連するすべての要求を処理します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="4a30b-140">クライアントは、JSON 形式で Web API でのデータを交換します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="4a30b-141">Entity Framework (EF) は、O/RM 層です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="4a30b-142">ASP.NET のオブジェクト指向 world と基になるデータベースの間を仲介します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="4a30b-143">データベースが LocalDB を使用しますが、これは、Web.config ファイルで変更できます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="4a30b-144">通常を使用して LocalDB ローカル開発用 EF コード優先の移行を使用して、サーバー上の SQL データベースに展開します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="4a30b-145">クライアント側では、Knockout.js ライブラリは、AJAX 要求からのページ更新を処理します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="4a30b-146">Knockout では、データ バインディングを使用して、ページを最新のデータと同期します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="4a30b-147">JSON データ順を追っておよび DOM を更新するコードの記述がないようにして、</span><span class="sxs-lookup"><span data-stu-id="4a30b-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="4a30b-148">代わりに、宣言型の属性は、Knockout にデータを表示する方法を指示する HTML に配置します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="4a30b-149">このアーキテクチャの大きな利点は、アプリケーション ロジックからプレゼンテーション層が分離されることです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="4a30b-150">Web API の部分は、web ページがどのように表示されるかについての知識がなくても作成できます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="4a30b-151">「ビュー モデル」を作成する、クライアント側でそのデータを表すビュー モデルを使用して Knockout を HTML にバインドします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="4a30b-152">ビュー モデルを変更することがなく、HTML を簡単に変更することができます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="4a30b-153">(見ていきます Knockout、少し後でします。)</span><span class="sxs-lookup"><span data-stu-id="4a30b-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="4a30b-154">モデル</span><span class="sxs-lookup"><span data-stu-id="4a30b-154">Models</span></span>

<span data-ttu-id="4a30b-155">Visual Studio プロジェクトには、Models フォルダーには、サーバー側で使用されるモデルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="4a30b-156">(クライアント側でのモデルはまた、ものが表示されます)。</span><span class="sxs-lookup"><span data-stu-id="4a30b-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

<span data-ttu-id="4a30b-157">**TodoItem、TodoList**</span><span class="sxs-lookup"><span data-stu-id="4a30b-157">**TodoItem, TodoList**</span></span>

<span data-ttu-id="4a30b-158">これらは、Entity Framework Code First のデータベース モデルです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="4a30b-159">これらのモデルが互いを指すプロパティを持つことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="4a30b-159">Notice that these models have properties that point to each other.</span></span> <span data-ttu-id="4a30b-160">`ToDoList` ToDoItems、およびそれぞれのコレクションを含む`ToDoItem`がその親 ToDoList への参照。</span><span class="sxs-lookup"><span data-stu-id="4a30b-160">`ToDoList` contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="4a30b-161">これらのプロパティと呼ばれるナビゲーションされ、to do リストとそのタスク項目一対多リレーションシップを表します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="4a30b-162">`ToDoItem`クラスも使用して、 **[ForeignKey]** ことを指定する属性`ToDoListId`への外部キーは、`ToDoList`テーブル。</span><span class="sxs-lookup"><span data-stu-id="4a30b-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="4a30b-163">これは、データベースに foreign key 制約を追加する EF を示しています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

<span data-ttu-id="4a30b-164">**TodoItemDto、TodoListDto**</span><span class="sxs-lookup"><span data-stu-id="4a30b-164">**TodoItemDto, TodoListDto**</span></span>

<span data-ttu-id="4a30b-165">これらのクラスは、クライアントに送信されるデータを定義します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="4a30b-166">データの転送オブジェクト"の"は"DTO"を表します</span><span class="sxs-lookup"><span data-stu-id="4a30b-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="4a30b-167">DTO では、エンティティを JSON にシリアル化する方法を定義します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="4a30b-168">一般は dtos の使用を使用するいくつかの理由があります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="4a30b-169">制御するプロパティはシリアル化します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-169">To control which properties are serialized.</span></span> <span data-ttu-id="4a30b-170">DTO には、ドメイン モデルからプロパティのサブセットを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="4a30b-171">これを行います (機密データを非表示) をセキュリティ上の理由から、または単に送信されるデータの量を削減します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="4a30b-172">たとえば、データの形状を変更するより複雑なデータ構造を平坦化します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="4a30b-173">DTO (関心の分離) 外の任意のビジネス ロジックを保持します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="4a30b-174">場合は、ドメイン モデルは、何らかの理由によりシリアル化できません。</span><span class="sxs-lookup"><span data-stu-id="4a30b-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="4a30b-175">たとえば、循環参照問題が発生があるオブジェクトをシリアル化するときに Web API では、この問題を処理する方法 (を参照してください[循環オブジェクト参照の処理](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); DTO を使用して単に問題を回避して、完全がします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="4a30b-176">SPA テンプレートで、dtos の使用には、ドメイン モデルと同じデータが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="4a30b-177">ただし、これらはでも役立ちますしないのは、循環参照ナビゲーション プロパティの一般的なパターンで DTO 例も示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

<span data-ttu-id="4a30b-178">**AccountModels.cs**</span><span class="sxs-lookup"><span data-stu-id="4a30b-178">**AccountModels.cs**</span></span>

<span data-ttu-id="4a30b-179">このファイルには、サイトのメンバーシップのモデルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-179">This file contains models for site membership.</span></span> <span data-ttu-id="4a30b-180">`UserProfile`クラスは、メンバーシップ DB でのユーザー プロファイルのスキーマを定義します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="4a30b-181">(この場合、唯一の情報は、ユーザー ID とユーザー名) です。このファイルに他のモデル クラスを使用して、ユーザーの登録とログイン フォームを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="4a30b-182">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="4a30b-182">Entity Framework</span></span>

<span data-ttu-id="4a30b-183">SPA テンプレート EF Code First を使用します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="4a30b-184">Code First の開発でコードでは、モデルを最初に定義するし、EF モデルを使用してデータベースを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="4a30b-185">既存のデータベースで EF を使用することもできます ([Database First](https://msdn.microsoft.com/data/jj206878.aspx))。</span><span class="sxs-lookup"><span data-stu-id="4a30b-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span></span>

<span data-ttu-id="4a30b-186">`TodoItemContext`モデル フォルダー内のクラスから派生**DbContext**です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="4a30b-187">このクラスは、モデルと EF 間「グルー」を提供します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="4a30b-188">`TodoItemContext`を保持する`ToDoItem`コレクションおよび`TodoList`コレクション。</span><span class="sxs-lookup"><span data-stu-id="4a30b-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="4a30b-189">データベースを照会するには、単にこれらのコレクションに対して LINQ クエリを記述する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="4a30b-190">たとえば、ユーザー"Alice"のタスク一覧のすべてを選択する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="4a30b-191">新しい項目をコレクションに追加する、項目を更新またはコレクションから項目を削除できデータベースへの変更を保持できます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="4a30b-192">ASP.NET Web API コント ローラー</span><span class="sxs-lookup"><span data-stu-id="4a30b-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="4a30b-193">ASP.NET Web API では、コント ローラーは、HTTP 要求を処理するオブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="4a30b-194">SPA テンプレートで Web API を使用してでの CRUD 操作を有効にするように、`ToDoList`と`ToDoItem`インスタンス。</span><span class="sxs-lookup"><span data-stu-id="4a30b-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="4a30b-195">コント ローラーは、ソリューションのコント ローラーのフォルダーにあります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- <span data-ttu-id="4a30b-196">`TodoController`: 作業項目の HTTP 要求を処理します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-196">`TodoController`: Handles HTTP requests for to-do items</span></span>
- <span data-ttu-id="4a30b-197">`TodoListController`: タスク一覧の HTTP 要求を処理します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-197">`TodoListController`: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="4a30b-198">これらの名前は、Web API コント ローラー名を URI パスに一致するために、考慮されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="4a30b-199">(Web API がコント ローラーに HTTP 要求をルーティングする方法については、次を参照してください[ASP.NET Web API でルーティング](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md)。)。</span><span class="sxs-lookup"><span data-stu-id="4a30b-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="4a30b-200">見てみましょう、`ToDoListController`クラスです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="4a30b-201">1 つのデータ メンバーが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="4a30b-202">`TodoItemContext`前述のように、EF との通信に使用します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="4a30b-203">コント ローラーのメソッドは、CRUD 操作を実装します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="4a30b-204">Web API では、コント ローラーのメソッドに、クライアントからの HTTP 要求をようにマップします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="4a30b-205">HTTP 要求</span><span class="sxs-lookup"><span data-stu-id="4a30b-205">HTTP Request</span></span> | <span data-ttu-id="4a30b-206">コント ローラー メソッド</span><span class="sxs-lookup"><span data-stu-id="4a30b-206">Controller Method</span></span> | <span data-ttu-id="4a30b-207">説明</span><span class="sxs-lookup"><span data-stu-id="4a30b-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4a30b-208">GET /api/todo</span><span class="sxs-lookup"><span data-stu-id="4a30b-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="4a30b-209">タスク一覧のコレクションを取得します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="4a30b-210">GET /api/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="4a30b-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="4a30b-211">ID でタスク一覧を取得します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="4a30b-212">PUT /api/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="4a30b-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="4a30b-213">To do リストを更新します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="4a30b-214">POST /api/todo</span><span class="sxs-lookup"><span data-stu-id="4a30b-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="4a30b-215">新しいタスク一覧を作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="4a30b-216">DELETE /api/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="4a30b-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="4a30b-217">TODO リストを削除します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="4a30b-218">一部の操作の Uri に ID 値のプレース ホルダーが含まれていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="4a30b-219">たとえば、リストを削除するに - 42 の ID を持つ、URI は`/api/todo/42`します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="4a30b-220">CRUD 操作の Web API の使用に関する詳細については、次を参照してください。 [CRUD 操作をサポートする Web API を作成する](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md)です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="4a30b-221">このコント ローラーのコードはきわめて簡単です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="4a30b-222">いくつかの興味深い点を次に示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-222">Here are some interesting points:</span></span>

- <span data-ttu-id="4a30b-223">`GetTodoLists`メソッドでは、LINQ クエリを使用して、ログイン ユーザーの ID で結果をフィルター処理します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="4a30b-224">このように、ユーザーには、その人に属するデータのみが表示されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="4a30b-225">また、変換に、Select ステートメントを使用することを確認、`ToDoList`インスタンスを`TodoListDto`インスタンス。</span><span class="sxs-lookup"><span data-stu-id="4a30b-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="4a30b-226">PUT や POST メソッドでは、データベースを変更する前にモデルの状態を確認します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="4a30b-227">場合**ModelState.IsValid**が false の場合、これらのメソッドは、HTTP 400 Bad Request を返します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="4a30b-228">詳しくは、Web API でのモデル検証[モデルの検証](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md)です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="4a30b-229">コント ローラーのクラスがで装飾されても、 **[Authorize]** 属性。</span><span class="sxs-lookup"><span data-stu-id="4a30b-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="4a30b-230">この属性は、HTTP 要求が認証されるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="4a30b-231">クライアントが HTTP 401 を受け取る場合は、要求が認証されていない権限がありません。</span><span class="sxs-lookup"><span data-stu-id="4a30b-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="4a30b-232">認証の詳細を参照[ASP.NET Web API で認証と承認](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md)です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="4a30b-233">`TodoController`クラスは類似`TodoListController`です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="4a30b-234">最も大きな違いは、クライアントは、各タスクの一覧と共に作業アイテムが取得されるため、GET メソッドを定義しません。</span><span class="sxs-lookup"><span data-stu-id="4a30b-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="4a30b-235">MVC コント ローラーとビュー</span><span class="sxs-lookup"><span data-stu-id="4a30b-235">MVC Controllers and Views</span></span>

<span data-ttu-id="4a30b-236">MVC コント ローラーは、ソリューションのコント ローラーのフォルダーにあります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> <span data-ttu-id="4a30b-237">`HomeController` アプリケーションのメインの HTML をレンダリングします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-237">`HomeController` renders the main HTML for the application.</span></span> <span data-ttu-id="4a30b-238">Home コント ローラーのビューは、Views/Home/Index.cshtml で定義されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="4a30b-239">ホーム ビューは、ユーザーがログインしているかどうかに応じて異なるコンテンツを表示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="4a30b-240">ユーザーがログインしている、主要な UI が表示されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="4a30b-241">それ以外の場合、ログイン パネルが表示されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="4a30b-242">サーバー側でこの条件付き表示が行われることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="4a30b-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="4a30b-243">クライアント側で機密性の高いコンテンツを非表示を試行しません (&) を HTTP 応答で送信する #8212anything は生の HTTP メッセージを監視しているユーザーに表示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-243">Never try to hide sensitive content on the client side&#8212anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="4a30b-244">クライアント側の JavaScript および Knockout.js</span><span class="sxs-lookup"><span data-stu-id="4a30b-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="4a30b-245">今すぐアプリケーションをクライアントのサーバー側の有効みましょう。</span><span class="sxs-lookup"><span data-stu-id="4a30b-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="4a30b-246">SPA テンプレートでは、jQuery、および Knockout.js の組み合わせを使用して、smooth、対話型の UI を作成します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="4a30b-247">Knockout.js は、HTML をデータにバインドしやすく JavaScript ライブラリです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="4a30b-248">Knockout.js"モデル-ビュー-ViewModel です"と呼ばれるパターンを使用します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="4a30b-249">モデルは、ドメインのデータ (ToDo リストと ToDo 項目) です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="4a30b-250">ビューは、HTML ドキュメントです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-250">The view is the HTML document.</span></span>
- <span data-ttu-id="4a30b-251">ビュー モデルは、モデル データを保持する JavaScript オブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="4a30b-252">ビュー モデルは、UI のコードの抽象化です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="4a30b-253">HTML 形式の知識がないです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="4a30b-254">代わりに、「ToDo 項目の一覧」など、ビューの抽象機能を表します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="4a30b-255">ビュー データにバインドされてビュー モデルです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="4a30b-256">ビュー モデルへの更新は、ビューに自動的に反映されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="4a30b-257">バインディングは、逆方向にも動作します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="4a30b-258">(クリックするなど)、DOM 内のイベント データ バインド関数をビュー モデルに AJAX 呼び出しをトリガーします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="4a30b-259">SPA テンプレートには、3 つの層に、クライアント側 JavaScript が編成されています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="4a30b-260">todo.datacontext.js: AJAX 要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="4a30b-261">todo.model.js: モデルを定義します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="4a30b-262">todo.viewmodel.js: ビュー モデルを定義します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="4a30b-263">これらのスクリプト ファイルは、ソリューションのスクリプト/アプリケーション フォルダーにあります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="4a30b-264">**todo.datacontext** Web API コント ローラーのすべての AJAX 呼び出しを処理します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="4a30b-265">(でのログ記録の AJAX 呼び出しがで定義されている、ajaxlogin.js。)</span><span class="sxs-lookup"><span data-stu-id="4a30b-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="4a30b-266">**todo.model.js** to do リストに表示するクライアント側 (ブラウザー) モデルを定義します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="4a30b-267">2 つのモデル クラス: todoItem todoList とします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="4a30b-268">モデルのクラスのプロパティの多くは、型"ko.observable"です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="4a30b-269">観測可能なオブジェクトは、そのマジック Knockout のしくみです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="4a30b-270">[Knockout ドキュメント](http://knockoutjs.com/documentation/introduction.html): 監視対象は、「を JavaScript オブジェクトの変更はサブスクライバーに通知できます」。</span><span class="sxs-lookup"><span data-stu-id="4a30b-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="4a30b-271">監視対象の値が変更されたときに、Knockout はそれらの観測可能なオブジェクトにバインドされている HTML 要素を更新します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="4a30b-272">たとえば、todoItem では、観測可能なオブジェクトのタイトルと先読みプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="4a30b-273">コードで観測可能なオブジェクトをサブスクライブすることもできます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="4a30b-274">たとえば、todoItem クラスは、「先読み」および"title"プロパティの変更をサブスクライブしています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

<span data-ttu-id="4a30b-275">**ビュー モデル**</span><span class="sxs-lookup"><span data-stu-id="4a30b-275">**View Model**</span></span>

<span data-ttu-id="4a30b-276">ビュー モデルは、todo.viewmodel.js で定義されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="4a30b-277">ビュー モデルは、中心点のアプリケーションがドメインのデータを HTML ページの要素をバインドする場所です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="4a30b-278">SPA テンプレートでは、ビュー モデルには、todoLists の監視可能な配列が含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="4a30b-279">ビュー モデルには、次のコードは、バインドを適用する Knockout を指示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="4a30b-280">HTML およびデータ バインディング</span><span class="sxs-lookup"><span data-stu-id="4a30b-280">HTML and Data Binding</span></span>

<span data-ttu-id="4a30b-281">メイン ページの HTML は Views/Home/Index.cshtml で定義されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="4a30b-282">データ バインディングを使用しているため、HTML、どのような実際に表示される取得のテンプレートだけです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="4a30b-283">Knockout を使用して*宣言*バインドします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="4a30b-284">ページの要素をデータにバインドするには、要素に「データ バインド」属性を追加します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="4a30b-285">Knockout ドキュメントからの抜粋、非常に単純な例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="4a30b-286">Knockout 更新の内容をこの例では、  **&lt;span&gt;** の値を持つ要素`myItems.count()`です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="4a30b-287">この値が変更されるたびに、Knockout はドキュメントを更新します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="4a30b-288">Knockout は異なるバインディングの種類の数を提供します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="4a30b-289">SPA テンプレートで使用されるバインディングの一部を次に示します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="4a30b-290">**foreach**: ループを反復処理し、一覧内の各項目に同じマークアップを適用することができます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="4a30b-291">これは、to do リストとタスク アイテムを表示するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="4a30b-292">内で、 **foreach**バインドがリストの要素に適用されます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="4a30b-293">**表示されている**: 表示を切り替えるために使用します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="4a30b-294">非表示にするコレクションが空、またはエラー メッセージが表示されるようにします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="4a30b-295">**値**: フォームの値を設定するために使用します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="4a30b-296">**をクリックして**: クリック イベントをビュー モデルの関数をバインドします。</span><span class="sxs-lookup"><span data-stu-id="4a30b-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="4a30b-297">アンチ CSRF 保護</span><span class="sxs-lookup"><span data-stu-id="4a30b-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="4a30b-298">クロスサイト リクエスト フォージェリ (CSRF) は、攻撃が悪意のあるサイトは、ユーザーが現在記録される場所で脆弱なサイトに要求を送信します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="4a30b-299">ASP.NET MVC を使用して CSRF 攻撃を防ぐため、*偽造防止トークン*、確認トークンの要求とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="4a30b-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="4a30b-300">つまり、サーバーが、web ページにランダムに生成されたトークンを格納します。</span><span class="sxs-lookup"><span data-stu-id="4a30b-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="4a30b-301">クライアントは、サーバーにデータを送信するときに、この値、要求メッセージにいる必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="4a30b-302">偽造防止トークンは動作ため、悪意のあるページが同じオリジン ポリシーにより、ユーザーのトークンを読み取ることができません。</span><span class="sxs-lookup"><span data-stu-id="4a30b-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="4a30b-303">(同じオリジンのポリシーは、互いのコンテンツへのアクセスから 2 つの異なるサイトでホストされているドキュメントを避けるため)。</span><span class="sxs-lookup"><span data-stu-id="4a30b-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="4a30b-304">ASP.NET MVC は、経由した偽造防止トークンの組み込みサポートを提供、 [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx)クラスおよび[[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx)属性。</span><span class="sxs-lookup"><span data-stu-id="4a30b-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="4a30b-305">現時点では、この機能では、Web API に組み込まれていません。</span><span class="sxs-lookup"><span data-stu-id="4a30b-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="4a30b-306">ただし、SPA テンプレートには、Web API のカスタム実装が含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="4a30b-307">このコードがで定義されている、`ValidateHttpAntiForgeryTokenAttribute`ソリューションの [フィルター] フォルダーにあるクラスです。</span><span class="sxs-lookup"><span data-stu-id="4a30b-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="4a30b-308">Web API でのアンチ CSRF の詳細については、次を参照してください。[防止クロスサイト リクエスト フォージェリ (CSRF) 攻撃](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md)です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="4a30b-309">まとめ</span><span class="sxs-lookup"><span data-stu-id="4a30b-309">Conclusion</span></span>

<span data-ttu-id="4a30b-310">SPA テンプレートは、すばやくを対話形式で最新の web アプリケーションの作成を開始するために設計されています。</span><span class="sxs-lookup"><span data-stu-id="4a30b-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="4a30b-311">Knockout.js ライブラリを使用してデータとアプリケーションのロジックからプレゼンテーション (HTML マークアップ) を区切ります。</span><span class="sxs-lookup"><span data-stu-id="4a30b-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="4a30b-312">Knockout は、SPA を作成に使用できる唯一の JavaScript ライブラリではありません。</span><span class="sxs-lookup"><span data-stu-id="4a30b-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="4a30b-313">その他のいくつかのオプションを探索する場合を見て、 [SPA テンプレートのコミュニティによって作成された](../templates/index.md)です。</span><span class="sxs-lookup"><span data-stu-id="4a30b-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
