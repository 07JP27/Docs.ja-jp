---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
title: "DataList でリピータ (c#) カスタム ボタン |Microsoft ドキュメント"
author: rick-anderson
description: "このチュートリアルでは、リピータを使用して、システムでは、その associ を表示するためのボタンを提供する各カテゴリにカテゴリを一覧表示するインターフェイスを構築しています."
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/13/2006
ms.topic: article
ms.assetid: 1f42e332-78dc-438b-9e35-0c97aa0ad929
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
msc.type: authoredcontent
ms.openlocfilehash: 9a072ae18bbb19d086eb825c6e72b68d40b2e429
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2018
---
<a name="custom-buttons-in-the-datalist-and-repeater-c"></a><span data-ttu-id="4bcb3-103">DataList でリピータ (c#) カスタム ボタン</span><span class="sxs-lookup"><span data-stu-id="4bcb3-103">Custom Buttons in the DataList and Repeater (C#)</span></span>
====================
<span data-ttu-id="4bcb3-104">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4bcb3-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4bcb3-105">[サンプル アプリをダウンロード](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe)または[PDF のダウンロード](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="4bcb3-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span></span>

> <span data-ttu-id="4bcb3-106">このチュートリアルではおリピータを使用して、システムでは、BulletedList コントロールを使用して関連付けられた製品を表示するためのボタンを提供する各カテゴリにカテゴリを一覧表示するインターフェイスを構築します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>


## <a name="introduction"></a><span data-ttu-id="4bcb3-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="4bcb3-107">Introduction</span></span>

<span data-ttu-id="4bcb3-108">過去 17 個の DataList とリピータ チュートリアル全体では読み取り専用の例と編集および削除の例を作成しました。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="4bcb3-109">編集と削除、DataList 内で機能させるために、DataList s にボタンを追加お`ItemTemplate`、ポストバックの原因となったクリックして、[s] ボタンに対応する DataList イベントを発生させた`CommandName`プロパティです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="4bcb3-110">たとえば、ボタンを追加する、`ItemTemplate`で、`CommandName`編集のプロパティの値により DataList s`EditCommand`ポストバックを発生させると 1 つ、`CommandName`削除が発生し、`DeleteCommand`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="4bcb3-111">さらに編集ボタンを削除してに、DataList およびリピータ コントロール含めることができますもボタン、ある、または ImageButtons をクリックすると、なんらかのカスタム サーバー側ロジックを実行します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="4bcb3-112">このチュートリアルではリピータを使用して、システムで、カテゴリを一覧表示するインターフェイスを構築します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="4bcb3-113">リピータ カテゴリごとに関連付けられている製品 BulletedList コントロールを使用して、カテゴリを表示するためのボタンが含まれます (図 1 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>


<span data-ttu-id="4bcb3-114">[![表示製品リンク表示では、カテゴリの製品箇条書きリストをクリックして](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4bcb3-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span></span>

<span data-ttu-id="4bcb3-115">**図 1**: 箇条書きで s 製品カテゴリを製品のリンクを表示する表示をクリックすると ([フルサイズのイメージを表示するをクリックして](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="4bcb3-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span></span>


## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="4bcb3-116">手順 1: カスタム ボタンのチュートリアル Web ページの追加</span><span class="sxs-lookup"><span data-stu-id="4bcb3-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="4bcb3-117">カスタム ボタンを追加する方法を見ると、前に、まず、このチュートリアルに必要とする、web サイト プロジェクトで ASP.NET ページを作成するのにはしばらく s を使用できます。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="4bcb3-118">という名前の新しいフォルダーを追加することによって開始`CustomButtonsDataListRepeater`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="4bcb3-119">次に、各ページに関連付けるように、そのフォルダーに次の 2 つの ASP.NET ページを追加、`Site.master`マスター ページ。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`


![カスタム ボタンに関連するチュートリアルについては、ASP.NET ページを追加します。](custom-buttons-in-the-datalist-and-repeater-cs/_static/image4.png)

<span data-ttu-id="4bcb3-121">**図 2**: カスタム ボタンに関連するチュートリアルについては、ASP.NET ページを追加します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>


<span data-ttu-id="4bcb3-122">などの他のフォルダーで`Default.aspx`で、`CustomButtonsDataListRepeater`フォルダーは、チュートリアルのセクションに一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="4bcb3-123">注意してください、`SectionLevelTutorialListing.ascx`ユーザー コントロールは、この機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="4bcb3-124">このユーザー コントロールを追加して`Default.aspx`をページのデザイン ビューに、ソリューション エクスプ ローラーからドラッグしています。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="4bcb3-125">[![Default.aspx に SectionLevelTutorialListing.ascx ユーザー コントロールを追加します。](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="4bcb3-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span></span>

<span data-ttu-id="4bcb3-126">**図 3**: 追加、`SectionLevelTutorialListing.ascx`ユーザー コントロールを`Default.aspx`([フルサイズのイメージを表示するをクリックして](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="4bcb3-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span></span>


<span data-ttu-id="4bcb3-127">最後に、エントリとして、ページを追加、`Web.sitemap`ファイル。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="4bcb3-128">具体的には、DataList リピータとページングと並べ替えの後に、次のマークアップを追加`<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="4bcb3-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>


[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample1.xml)]

<span data-ttu-id="4bcb3-129">更新した後に`Web.sitemap`ブラウザーを使って、チュートリアルの web サイトを表示します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="4bcb3-130">左側のメニューには、編集、挿入、およびチュートリアルを削除する項目が含まれています。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![サイト マップではカスタム ボタンのチュートリアル」のエントリが含まれるようになりました](custom-buttons-in-the-datalist-and-repeater-cs/_static/image8.png)

<span data-ttu-id="4bcb3-132">**図 4**: サイト マップではカスタム ボタンのチュートリアル」のエントリが含まれるようになりました</span><span class="sxs-lookup"><span data-stu-id="4bcb3-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>


## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="4bcb3-133">手順 2: カテゴリの一覧を追加します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="4bcb3-134">このチュートリアルの必要がありますを表示する製品 LinkButton と共にすべてのカテゴリを一覧表示する Repeater を作成するをクリックすると、箇条書きリストに関連付けられているカテゴリの製品が表示されます。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="4bcb3-135">システム内のカテゴリを一覧表示する単純な Repeater をまず作成 s を使用できます。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="4bcb3-136">開いて開始、 `CustomButtons.aspx`  ページで、`CustomButtonsDataListRepeater`フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="4bcb3-137">ツールボックスからデザイナーとセットにリピータをドラッグしてその`ID`プロパティを`Categories`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="4bcb3-138">次に、リピータ s のスマート タグから新しいデータ ソース コントロールを作成します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="4bcb3-139">具体的には、という名前の新しい ObjectDataSource コントロールを作成`CategoriesDataSource`からそのデータを選択する、`CategoriesBLL`クラスの`GetCategories()`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>


<span data-ttu-id="4bcb3-140">[![ObjectDataSource CategoriesBLL クラスの GetCategories() メソッドを使用して構成します。](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="4bcb3-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span></span>

<span data-ttu-id="4bcb3-141">**図 5**: 構成を使用する ObjectDataSource、`CategoriesBLL`クラス s`GetCategories()`メソッド ([フルサイズのイメージを表示するをクリックして](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="4bcb3-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span></span>


<span data-ttu-id="4bcb3-142">Visual Studio が、既定値を作成、DataList コントロールとは異なり`ItemTemplate`データ ソースに基づき、s リピータ テンプレート必要があります手動で定義します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="4bcb3-143">さらに、リピータのテンプレートを作成して、宣言的に編集する必要があります (つまり、ある s テンプレートの編集なしオプション リピータ s のスマート タグで)。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="4bcb3-144">左下隅の [ソース] タブをクリックし、追加、`ItemTemplate`項目 %s の名前を表示する、`<h3>`要素とその説明の段落にタグを付ける; が含まれて、`SeparatorTemplate`水平線を表示する (`<hr />`) 間カテゴリです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="4bcb3-145">追加の LinkButton こともその`Text`プロパティを表示する製品に設定します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="4bcb3-146">次の手順を完了すると、ページ s の宣言型マークアップは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-146">After completing these steps, your page s declarative markup should look like the following:</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample2.aspx)]

<span data-ttu-id="4bcb3-147">図 6 は、ブラウザーで表示したときに、ページを示します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="4bcb3-148">各カテゴリの名前と説明が表示されます。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-148">Each category name and description is listed.</span></span> <span data-ttu-id="4bcb3-149">製品の表示 ボタンをクリックすると、ポストバックがアクションをまだ実行しません。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>


<span data-ttu-id="4bcb3-150">[![各カテゴリ名と説明が表示されます、製品を表示する LinkButton と共に](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="4bcb3-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span></span>

<span data-ttu-id="4bcb3-151">**図 6**: 各カテゴリの名前と説明が表示されます、製品を表示する LinkButton と共に ([フルサイズのイメージを表示するをクリックして](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="4bcb3-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span></span>


## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="4bcb3-152">実行するサーバー側ロジックときに、表示製品 LinkButton がクリックされた手順 3。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="4bcb3-153">ポストバックが発生するボタン、linkbutton コントロールまたは DataList またはリピータ テンプレート内の ImageButton がクリックされたときと DataList またはリピータの`ItemCommand`イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="4bcb3-154">加え、`ItemCommand`イベント、DataList コントロールも発生する可能性が、別の特定のイベント場合ボタン s`CommandName`プロパティが、予約済み (削除、編集、キャンセル、Update、または選択)、文字列のいずれかに設定が、`ItemCommand`イベントが*常に*発生します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="4bcb3-155">DataList またはリピータ内で、ボタンをクリックすることがよくを渡す必要が (であることを複数の両方の編集など、コントロール内のボタンと [削除] ボタンの場合) クリックしてされたボタンおよび追加の情報をおそらくと共に (次のようにプライマリ キーの値のボタンがクリックされたアイテム)。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="4bcb3-156">ボタン、LinkButton、および ImageButton に渡される値を持つ 2 つのプロパティを提供、`ItemCommand`イベントのハンドラー。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="4bcb3-157">`CommandName`通常、テンプレート内の各ボタンの識別に使用する文字列</span><span class="sxs-lookup"><span data-stu-id="4bcb3-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="4bcb3-158">`CommandArgument`主キーの値など、いくつかのデータ フィールドの値を保持するために一般的に使用</span><span class="sxs-lookup"><span data-stu-id="4bcb3-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="4bcb3-159">この例では、設定、LinkButton s `CommandName` ShowProducts と現在のレコードの主キー値をバインドするプロパティ`CategoryID`を`CommandArgument`databinding 構文を使用してプロパティ`CategoryArgument='<%# Eval("CategoryID") %>'`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="4bcb3-160">これら 2 つのプロパティを指定してから LinkButton s の宣言構文は次のようになります。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample3.aspx)]

<span data-ttu-id="4bcb3-161">ときに、ボタンがクリックされた、ポストバックが発生し、DataList またはリピータの`ItemCommand`イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="4bcb3-162">イベント ハンドラーは、[s] ボタンに渡されます`CommandName`と`CommandArgument`値。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="4bcb3-163">リピータ s のイベント ハンドラーを作成`ItemCommand`、イベント ハンドラーに渡されたイベントと 2 番目のパラメーター (名前付き`e`)。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="4bcb3-164">この 2 番目のパラメーターの型は[ `RepeaterCommandEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx)し、次の 4 つのプロパティします。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="4bcb3-165">`CommandArgument`クリックされたボタン秒の値`CommandArgument`プロパティ</span><span class="sxs-lookup"><span data-stu-id="4bcb3-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="4bcb3-166">`CommandName`ボタンの秒の値`CommandName`プロパティ</span><span class="sxs-lookup"><span data-stu-id="4bcb3-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="4bcb3-167">`CommandSource`クリックされたボタン コントロールへの参照</span><span class="sxs-lookup"><span data-stu-id="4bcb3-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="4bcb3-168">`Item`参照、 [ `RepeaterItem` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx)がクリックされたボタンが含まれている; リピータにバインドされている各レコードとして示されています、`RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="4bcb3-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="4bcb3-169">選択したカテゴリ s 以降`CategoryID`経由で渡される、`CommandArgument`プロパティで選択したカテゴリに関連付けられている製品のセットを取得できます、`ItemCommand`イベント ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="4bcb3-170">BulletedList コントロールにこれらの製品をバインドすることができますし、 `ItemTemplate` (私たちを追加するには、まだしました)。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="4bcb3-171">参照を設定した後、残っている、BulletedList を追加するにはすべて、`ItemCommand`イベント ハンドラー、し、手順 4. で取り上げる、選択したカテゴリの製品のセットをバインドします。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="4bcb3-172">DataList s`ItemCommand`イベント ハンドラーは型のオブジェクトに渡されます[ `DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx)と同じ 4 つのプロパティを提供する、`RepeaterCommandEventArgs`クラスです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>


## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="4bcb3-173">手順 4: 箇条書きリストで選択したカテゴリの製品を表示します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="4bcb3-174">リピータ s 内で選択したカテゴリの製品を表示できる`ItemTemplate`コントロールの任意の数を使用します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="4bcb3-175">リピータ、DataList、DropDownList、GridView、およびなど入れ子になった別追加でした。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="4bcb3-176">箇条書きとして製品を表示するので、ただし、BulletedList コントロールを使用します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="4bcb3-177">返す、 `CustomButtons.aspx` s 宣言型マークアップのページで、BulletedList コントロールを追加して、`ItemTemplate`表示製品 LinkButton 後です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="4bcb3-178">集合 BulletedLists s`ID`に`ProductsInCategory`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="4bcb3-179">BulletedList を介して指定されたデータ フィールドの値を表示する、`DataTextField`プロパティです。 このコントロールは製品の情報にバインドされている、設定であるため、`DataTextField`プロパティを`ProductName`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample4.aspx)]

<span data-ttu-id="4bcb3-180">`ItemCommand` 、イベント ハンドラーを使用してこのコントロールを参照`e.Item.FindControl("ProductsInCategory")`し、選択したカテゴリに関連付けられている製品のセットにバインドします。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>


[!code-csharp[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample5.cs)]

<span data-ttu-id="4bcb3-181">のどのアクションを実行する前に、 `ItemCommand` 、イベント ハンドラーが最初に値を確認して、入力方向が賢明です`CommandName`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="4bcb3-182">以降、`ItemCommand`イベント ハンドラーは、ときに発生*任意*ボタンがクリックされたテンプレートの使用に複数のボタンがある場合、`CommandName`を実行するアクションを識別する値。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="4bcb3-183">チェック、`CommandName`ここでは、議論を 1 つのボタンのみがあるため、フォームにことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="4bcb3-184">次に、`CategoryID`から取得したカテゴリの`CommandArgument`プロパティです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="4bcb3-185">BulletedList コントロール、テンプレートでは参照されているしの結果にバインドされている、`ProductsBLL`クラスの`GetProductsByCategoryID(categoryID)`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="4bcb3-186">など、DataList 内のボタンを使用する前のチュートリアルで[編集の概要と、DataList のデータを削除する](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)を使用して特定のアイテムの主キーの値と判断しました、`DataKeys`コレクション。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="4bcb3-187">このアプローチでは、DataList にも、中にリピータが、`DataKeys`プロパティです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="4bcb3-188">代わりに、s をクリックしてなどの主キーの値を提供するため、別の方法を使用する必要があります`CommandArgument`プロパティまたはテンプレート内で非表示のラベルの Web コントロールに主キーの値を割り当てる場合や、に戻り、値を読み取る`ItemCommand`イベント ハンドラーを使用して`e.Item.FindControl("LabelID")`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="4bcb3-189">完了した後、 `ItemCommand` 、イベント ハンドラー、ブラウザーのこのページをテストします。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="4bcb3-190">図 7 に示す、製品を表示するをクリックするとリンク ポストバックを発生させるし、BulletedList で選択したカテゴリの製品が表示されます。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="4bcb3-191">さらに、注意してくださいことは、この製品の情報が残っている場合でも、他のカテゴリを表示する製品のリンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="4bcb3-192">BulletedList コントロール s を単に設定する場合、このレポートの動作を変更する、一度に 1 つだけのカテゴリの製品が表示されているように、`EnableViewState`プロパティを`False`です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>


<span data-ttu-id="4bcb3-193">[![選択したカテゴリの製品を表示する、BulletedList を使用します。](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="4bcb3-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span></span>

<span data-ttu-id="4bcb3-194">**図 7**: A BulletedList を使用して、選択したカテゴリの製品を表示 ([フルサイズのイメージを表示するをクリックして](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="4bcb3-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span></span>


## <a name="summary"></a><span data-ttu-id="4bcb3-195">まとめ</span><span class="sxs-lookup"><span data-stu-id="4bcb3-195">Summary</span></span>

<span data-ttu-id="4bcb3-196">DataList とリピータ コントロールは、任意の数をテンプレート内のボタン、ある、または ImageButtons を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="4bcb3-197">クリックすると、このようなボタンがポストバックを発生させるし、生成、`ItemCommand`イベント。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="4bcb3-198">クリックしてされたボタンにカスタム サーバー側のアクションを関連付けるのイベント ハンドラーを作成、`ItemCommand`イベント。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="4bcb3-199">このイベント ハンドラーで受信をまずチェック`CommandName`クリックしてされたボタンを決定する値。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="4bcb3-200">S をクリックして追加情報を指定することができます必要に応じて`CommandArgument`プロパティです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="4bcb3-201">満足プログラミング!</span><span class="sxs-lookup"><span data-stu-id="4bcb3-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="4bcb3-202">作成者について</span><span class="sxs-lookup"><span data-stu-id="4bcb3-202">About the Author</span></span>

<span data-ttu-id="4bcb3-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックとの創設者の作成者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、1998 年からマイクロソフトの Web テクノロジで取り組んできました。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="4bcb3-204">Scott は、コンサルタント、トレーナー、ライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="4bcb3-205">最新の著書[ *Sam 学べる自分で ASP.NET 2.0 が 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="4bcb3-206">彼に到達できる[ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)彼のブログを使用して含まれているのか[http://ScottOnWriting.NET](http://ScottOnWriting.NET)です。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="4bcb3-207">感謝の特別な</span><span class="sxs-lookup"><span data-stu-id="4bcb3-207">Special Thanks To</span></span>

<span data-ttu-id="4bcb3-208">このチュートリアルの系列は既に多くの便利なレビュー担当者によって確認済みです。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-208">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="4bcb3-209">このチュートリアルのレビュー担当者の潜在顧客が Dennis Patterson しました。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-209">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="4bcb3-210">今後、MSDN の記事を確認することに関心のあるですか。</span><span class="sxs-lookup"><span data-stu-id="4bcb3-210">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="4bcb3-211">場合は、ドロップ me 一度に 1 行ずつ[mitchell@4GuysFromRolla.comです。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4bcb3-211">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="4bcb3-212">次へ</span><span class="sxs-lookup"><span data-stu-id="4bcb3-212">Next</span></span>](custom-buttons-in-the-datalist-and-repeater-vb.md)
