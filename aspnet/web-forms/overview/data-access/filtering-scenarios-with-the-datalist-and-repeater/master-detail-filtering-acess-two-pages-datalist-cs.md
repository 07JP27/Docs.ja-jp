---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
title: "マスター/詳細の 2 つのページ (c#) にわたってフィルター |Microsoft ドキュメント"
author: rick-anderson
description: "このチュートリアルでは 2 つのページ間でマスター/詳細レポートを分離する方法について説明します。 'Master' のページで、Repeater コントロールを使用して categ の一覧を表示するためにしています."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/30/2010
ms.topic: article
ms.assetid: 68b8c023-92fa-4df6-9563-1764e16e4b04
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: bb86db509ca26dde0c24341dee402e7af4355507
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/10/2017
---
<a name="masterdetail-filtering-across-two-pages-c"></a><span data-ttu-id="d200e-104">マスター/詳細の 2 つのページ (c#) にわたってフィルター処理</span><span class="sxs-lookup"><span data-stu-id="d200e-104">Master/Detail Filtering Across Two Pages (C#)</span></span>
====================
<span data-ttu-id="d200e-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d200e-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d200e-106">[サンプル アプリをダウンロード](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe)または[PDF のダウンロード](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="d200e-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) or [Download PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span></span>

> <span data-ttu-id="d200e-107">このチュートリアルでは 2 つのページ間でマスター/詳細レポートを分離する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d200e-107">In this tutorial we look at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="d200e-108">「マスター」のページで、Repeater コントロールを使用するときに表示するカテゴリの一覧をクリックされるになります「詳細」のページに 2 つの列 DataList が、選択したカテゴリに属する製品を示しています。</span><span class="sxs-lookup"><span data-stu-id="d200e-108">In the "master" page we use a Repeater control to render a list of categories that, when clicked, will take the user to the "details" page where a two-column DataList shows those products belonging to the selected category.</span></span>


## <a name="introduction"></a><span data-ttu-id="d200e-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="d200e-109">Introduction</span></span>

<span data-ttu-id="d200e-110">[前のチュートリアル](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)DropDownLists を使用して、「マスター」のレコードと「詳細」を表示する DataList を表示する単一の web ページにマスター/詳細レポートを表示する方法を説明しました</span><span class="sxs-lookup"><span data-stu-id="d200e-110">In the [preceding tutorial](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) we saw how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details."</span></span> <span data-ttu-id="d200e-111">マスター/詳細レポートに使用されるもう 1 つの一般的なパターンでは、1 つの web ページ上のマスター レコードと別の詳細が必要です。</span><span class="sxs-lookup"><span data-stu-id="d200e-111">Another common pattern used for master/detail reports is to have the master records on one web page and the details on another.</span></span> <span data-ttu-id="d200e-112">前に示した[マスター/詳細フィルター間で 2 つのページ](../masterdetail/master-detail-filtering-across-two-pages-cs.md)チュートリアルでは、すべて仕入先のシステムに表示する GridView を使用するこのパターンを調べることです。</span><span class="sxs-lookup"><span data-stu-id="d200e-112">In the earlier [Master/Detail Filtering Across Two Pages](../masterdetail/master-detail-filtering-across-two-pages-cs.md) tutorial, we examined this pattern using a GridView to display all of the suppliers in the system.</span></span> <span data-ttu-id="d200e-113">この GridView に渡す 2 番目のページへのリンクとしてレンダリングできる内が含まれている、`SupplierID`クエリ文字列にします。</span><span class="sxs-lookup"><span data-stu-id="d200e-113">This GridView included a HyperLinkField, which rendered as a link to a second page, passing along the `SupplierID` in the querystring.</span></span> <span data-ttu-id="d200e-114">2 番目のページは、選択した業者によって提供されるこれらの製品を一覧表示するのに GridView を使用します。</span><span class="sxs-lookup"><span data-stu-id="d200e-114">The second page used a GridView to list those products provided by the selected supplier.</span></span>

<span data-ttu-id="d200e-115">このような 2 ページ マスター/詳細レポートは、DataList とリピータ コントロールもを使用して実現できます。</span><span class="sxs-lookup"><span data-stu-id="d200e-115">Such two-page master/detail reports can be accomplished using DataList and Repeater controls as well.</span></span> <span data-ttu-id="d200e-116">唯一の違いは、DataList もリピータが内のコントロールのサポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="d200e-116">The only difference is that neither the DataList nor the Repeater provides support for the HyperLinkField control.</span></span> <span data-ttu-id="d200e-117">代わりに、ハイパーリンクの Web コントロールや HTML アンカー要素を追加します (`<a>`) 内でのコントロールの`ItemTemplate`します。</span><span class="sxs-lookup"><span data-stu-id="d200e-117">Instead, we must add a HyperLink Web control or an anchor HTML element (`<a>`) within the control's `ItemTemplate`.</span></span> <span data-ttu-id="d200e-118">ハイパーリンクの`NavigateUrl`プロパティまたはアンカーの`href`宣言的またはプログラムによるアプローチを使用して属性をカスタマイズすることができますし、します。</span><span class="sxs-lookup"><span data-stu-id="d200e-118">The HyperLink's `NavigateUrl` property or the anchor's `href` attribute can then be customized using declarative or programmatic approaches.</span></span>

<span data-ttu-id="d200e-119">このチュートリアルでは、箇条書き Repeater コントロールを使用して 1 つのページ上でカテゴリを一覧表示する例を調べておみます。</span><span class="sxs-lookup"><span data-stu-id="d200e-119">In this tutorial we'll explore an example that lists the categories in a bulleted list on one page using a Repeater control.</span></span> <span data-ttu-id="d200e-120">各リスト項目には、カテゴリ名が 2 番目のページへのリンクとして表示されます、カテゴリの名前と説明が含まれます。</span><span class="sxs-lookup"><span data-stu-id="d200e-120">Each list item will include the category's name and description, with the category name displayed as a link to a second page.</span></span> <span data-ttu-id="d200e-121">このリンクをクリックするとは whisk 2 番目のページにユーザーが選択したカテゴリに属している製品を DataList が表示されます。</span><span class="sxs-lookup"><span data-stu-id="d200e-121">Clicking on this link will whisk the user to the second page, where a DataList will show those products that belong to the selected category.</span></span>

## <a name="step-1-displaying-the-categories-in-a-bulleted-list"></a><span data-ttu-id="d200e-122">手順 1: 箇条書きリストに、カテゴリを表示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-122">Step 1: Displaying the Categories in a Bulleted List</span></span>

<span data-ttu-id="d200e-123">マスター/詳細レポートを作成する最初の手順では、「マスター」のレコードを表示することによって開始します。</span><span class="sxs-lookup"><span data-stu-id="d200e-123">The first step in creating any master/detail report is to start by displaying the "master" records.</span></span> <span data-ttu-id="d200e-124">そのため、まず最初に、「マスター」のページで、カテゴリが表示されます。</span><span class="sxs-lookup"><span data-stu-id="d200e-124">Therefore, our first task is to display the categories in the "master" page.</span></span> <span data-ttu-id="d200e-125">開く、 `CategoryListMaster.aspx`  ページで、`DataListRepeaterFiltering`フォルダーはリピータ コントロールを追加し、新しい ObjectDataSource を追加することを選択、スマート タグからです。</span><span class="sxs-lookup"><span data-stu-id="d200e-125">Open the `CategoryListMaster.aspx` page in the `DataListRepeaterFiltering` folder, add a Repeater control, and, from the smart tag, opt to add a new ObjectDataSource.</span></span> <span data-ttu-id="d200e-126">データにアクセスできるように、新しい ObjectDataSource を構成、`CategoriesBLL`クラスの`GetCategories`メソッド (図 1 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="d200e-126">Configure the new ObjectDataSource so that it accesses its data from the `CategoriesBLL` class's `GetCategories` method (see Figure 1).</span></span>


<span data-ttu-id="d200e-127">[![構成、ObjectDataSource CategoriesBLL クラスのメソッドを使用するには](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-127">[![Configure the ObjectDataSource to Use the CategoriesBLL Class's GetCategories Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="d200e-128">**図 1**: 構成を使用する ObjectDataSource、`CategoriesBLL`クラスの`GetCategories`メソッド ([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-128">**Figure 1**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class's `GetCategories` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span></span>


<span data-ttu-id="d200e-129">次に、箇条書きリスト内のアイテムとして各カテゴリの名前と説明が表示されるようにリピータのテンプレートを定義します。</span><span class="sxs-lookup"><span data-stu-id="d200e-129">Next, define the Repeater's templates such that it displays each category name and description as an item in a bulleted list.</span></span> <span data-ttu-id="d200e-130">説明されていない気が各カテゴリの詳細ページへのリンク。</span><span class="sxs-lookup"><span data-stu-id="d200e-130">Let's not yet worry about having each category link to the details page.</span></span> <span data-ttu-id="d200e-131">次は、リピータと ObjectDataSource の宣言型マークアップを示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-131">The following shows the declarative markup for the Repeater and ObjectDataSource:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="d200e-132">完全なマークアップがこの、ブラウザーを使って作業の進行状況を表示するのにはしばらくを受け取る。</span><span class="sxs-lookup"><span data-stu-id="d200e-132">With this markup complete, take a moment to view our progress through a browser.</span></span> <span data-ttu-id="d200e-133">図 2 に示すリピータは各カテゴリの名前と説明を示す箇条書きリストとして表示されます。</span><span class="sxs-lookup"><span data-stu-id="d200e-133">As Figure 2 shows, the Repeater renders as a bulleted list showing each category's name and description.</span></span>


<span data-ttu-id="d200e-134">[![各カテゴリは箇条書きリスト項目として表示されます。](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-134">[![Each Category is Displayed as a Bulleted List Item](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="d200e-135">**図 2**: 各カテゴリは箇条書きリスト項目として表示されます ([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-135">**Figure 2**: Each Category is Displayed as a Bulleted List Item ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span></span>


## <a name="step-2-turning-the-category-name-into-a-link-to-the-details-page"></a><span data-ttu-id="d200e-136">手順 2: に、カテゴリ名の詳細 ページへのリンク</span><span class="sxs-lookup"><span data-stu-id="d200e-136">Step 2: Turning the Category Name into a Link to the Details Page</span></span>

<span data-ttu-id="d200e-137">1 つのカテゴリの「詳細」の情報を表示するユーザーを許可する必要がありますクリックされると、2 ページ目にユーザーを受け取るときに、各箇条書きリスト項目のリンクを追加する (`ProductsForCategoryDetails.aspx`)。</span><span class="sxs-lookup"><span data-stu-id="d200e-137">To allow a user to display the "details" information for a given category, we need to add a link to each bulleted list item that, when clicked, will take the user to the second page (`ProductsForCategoryDetails.aspx`).</span></span> <span data-ttu-id="d200e-138">そうすると、この 2 番目のページでは、選択したを DataList を使用してカテゴリの製品が表示されます。</span><span class="sxs-lookup"><span data-stu-id="d200e-138">This second page will then display the products for the selected category using a DataList.</span></span> <span data-ttu-id="d200e-139">リンクがクリックしてされたカテゴリを決定するために渡す必要がクリックしたカテゴリの`CategoryID`メカニズムによって 2 ページ目にします。</span><span class="sxs-lookup"><span data-stu-id="d200e-139">In order to determine the category whose link was clicked, we need to pass the clicked category's `CategoryID` to the second page through some mechanism.</span></span> <span data-ttu-id="d200e-140">ページ間でスカラー データを転送する最も簡単な最も簡単な方法は、このチュートリアルで使用するオプションは、クエリ文字列を通じてです。</span><span class="sxs-lookup"><span data-stu-id="d200e-140">The simplest, most straightforward way to transfer scalar data from one page to another is through the querystring, which is the option we'll use in this tutorial.</span></span> <span data-ttu-id="d200e-141">具体的には、`ProductsForCategoryDetails.aspx`ページは、選択を求める *`categoryID`* という名前のクエリ文字列フィールドを介して渡される値を`CategoryID`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-141">In particular, the `ProductsForCategoryDetails.aspx` page will expect the selected *`categoryID`* value to be passed through a querystring field named `CategoryID`.</span></span> <span data-ttu-id="d200e-142">例については、飲料カテゴリの製品を表示するのには、`CategoryID`は 1 で、ユーザーがアクセスしてください`ProductsForCategoryDetails.aspx?CategoryID=1`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-142">For example, to view the products for the Beverages category, which has a `CategoryID` of 1, a user would visit `ProductsForCategoryDetails.aspx?CategoryID=1`.</span></span>

<span data-ttu-id="d200e-143">ハイパーリンク Web コントロール、または HTML アンカー要素が追加する必要がありますリピータで箇条書きリストの各項目のハイパーリンクを作成する (`<a>`) に、`ItemTemplate`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-143">To create a hyperlink for each bulleted list item in the Repeater we need to either add a HyperLink Web control or an HTML anchor element (`<a>`) to the `ItemTemplate`.</span></span> <span data-ttu-id="d200e-144">シナリオでのハイパーリンクが表示行ごとに同じ、いずれかの方法で十分です。</span><span class="sxs-lookup"><span data-stu-id="d200e-144">In scenarios where the hyperlink is displayed the same for each row, either approach will suffice.</span></span> <span data-ttu-id="d200e-145">リピータの (_n)、アンカー要素を使用します。</span><span class="sxs-lookup"><span data-stu-id="d200e-145">For Repeaters, I prefer using the anchor element.</span></span> <span data-ttu-id="d200e-146">アンカー要素を使用するにリピータの ItemTemplate を更新します。</span><span class="sxs-lookup"><span data-stu-id="d200e-146">To use the anchor element, update the Repeater's ItemTemplate to:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="d200e-147">なお、`CategoryID`アンカー要素の内に直接挿入できます`href`属性ですただし、実行されるので、を区切るために、`href`とアポストロフィ (注引用符) 以降の属性の値、`Eval`メソッド。内で、`href`属性は、その文字列を区切る (`"CategoryID"`) 引用符で囲まれます。</span><span class="sxs-lookup"><span data-stu-id="d200e-147">Note that the `CategoryID` can be injected directly within the anchor element's `href` attribute; however, to do so be certain to delimit the `href` attribute's value with apostrophes (and note quotation marks) since the `Eval` method within the `href` attribute delimits its string (`"CategoryID"`) with quotation marks.</span></span> <span data-ttu-id="d200e-148">または、代わりに、ハイパーリンクの Web コントロールを使用できます。</span><span class="sxs-lookup"><span data-stu-id="d200e-148">Alternatively, a HyperLink Web control can be used instead:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="d200e-149">注方法、URL の静的部分 — `ProductsForCategoryDetails.aspx?CategoryID` -がの結果に追加されます`Eval("CategoryID")`文字列の連結を使用して、データ バインド構文内で直接です。</span><span class="sxs-lookup"><span data-stu-id="d200e-149">Note how the static portion of the URL — `ProductsForCategoryDetails.aspx?CategoryID` — is appended to the result of `Eval("CategoryID")` directly within the databinding syntax using string concatenation.</span></span>

<span data-ttu-id="d200e-150">ハイパーリンク コントロールを使用する利点の 1 つをプログラムでアクセスできるリピータから`ItemDataBound`必要な場合は、イベント ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="d200e-150">One benefit of using the HyperLink control is that it can be programmatically accessed from the Repeater's `ItemDataBound` event handler, if needed.</span></span> <span data-ttu-id="d200e-151">たとえばは、関連付けられている製品のカテゴリへのリンクではなくテキストとして、カテゴリ名を表示することができます。</span><span class="sxs-lookup"><span data-stu-id="d200e-151">For example, you might want to display the category name as text rather than as a link for categories with no associated products.</span></span> <span data-ttu-id="d200e-152">このようなチェック プログラムでを実行できますが、`ItemDataBound`イベント ハンドラーですなしでカテゴリを製品、ハイパーリンクの関連付けられている`NavigateUrl`プロパティを招き、その特定のカテゴリ名で結果として空の文字列に設定する可能性があります。プレーン テキストとして (ではなくリンクとして) を表示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-152">Such a check could be programmatically performed in the `ItemDataBound` event handler; for categories with no associated products, the HyperLink's `NavigateUrl` property could be set to a blank string, thereby resulting in that particular category name rendering as plain text (rather than as a link).</span></span> <span data-ttu-id="d200e-153">戻って、 [DataList とリピータ ベース時のデータの書式設定](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md)を通じてプログラム ロジックに基づいて、DataList とリピータの内容を書式設定の詳細についてのチュートリアル、`ItemDataBound`イベント ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="d200e-153">Refer back to the [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorial for more information on formatting the DataList and Repeater's contents based on programmatic logic through the `ItemDataBound` event handler.</span></span>

<span data-ttu-id="d200e-154">実行する場合、自由に、ページのアンカー要素またはハイパーリンク コントロールのアプローチのいずれかを使用してください。</span><span class="sxs-lookup"><span data-stu-id="d200e-154">If you are following along, feel free to use either the anchor element or HyperLink control approach in your page.</span></span> <span data-ttu-id="d200e-155">各カテゴリ名へのリンクとして表示するか、ブラウザーからページを表示するときに、方法に関係なく`ProductsForCategoryDetails.aspx`、適用可能なを渡して、`CategoryID`値 (図 3 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="d200e-155">Regardless of the approach, when viewing the page through a browser each category name should be rendered as a link to `ProductsForCategoryDetails.aspx`, passing in the applicable `CategoryID` value (see Figure 3).</span></span>


<span data-ttu-id="d200e-156">[![カテゴリの名前が ProductsForCategoryDetails.aspx にリンクできるよう](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-156">[![The Category Names Now Link to ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="d200e-157">**図 3**:、カテゴリ名今すぐへのリンク`ProductsForCategoryDetails.aspx`([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-157">**Figure 3**: The Category Names Now Link to `ProductsForCategoryDetails.aspx` ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span></span>


## <a name="step-3-listing-the-products-that-belong-to-the-selected-category"></a><span data-ttu-id="d200e-158">手順 3: 選択したカテゴリに属している製品を一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-158">Step 3: Listing the Products that Belong to the Selected Category</span></span>

<span data-ttu-id="d200e-159">`CategoryListMaster.aspx` 詳細 ページを実装することに注目する準備ができました ページで完了、`ProductsForCategoryDetails.aspx`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-159">With the `CategoryListMaster.aspx` page complete, we're ready to turn our attention to implementing the "details" page, `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="d200e-160">このページを開いて、DataList をツールボックスからデザイナーにドラッグ、および設定の`ID`プロパティを`ProductsInCategory`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-160">Open this page, drag a DataList from the Toolbox onto the Designer, and set its `ID` property to `ProductsInCategory`.</span></span> <span data-ttu-id="d200e-161">次に、DataList のスマート タグからの選択 ページで、名前付けに新しい ObjectDataSource を追加`ProductsInCategoryDataSource`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-161">Next, from the DataList's smart tag choose to add a new ObjectDataSource to the page, naming it `ProductsInCategoryDataSource`.</span></span> <span data-ttu-id="d200e-162">呼び出しをするように構成、`ProductsBLL`クラスの`GetProductsByCategoryID(categoryID)`メソッド以外の設定を (なし)、INSERT、UPDATE、および DELETE のタブで、ドロップダウン リストを一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-162">Configure it such that it calls the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method; set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>


<span data-ttu-id="d200e-163">[![ObjectDataSource ProductsBLL クラスの GetProductsByCategoryID(categoryID) メソッドを使用して構成します。](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-163">[![Configure the ObjectDataSource to Use the ProductsBLL Class's GetProductsByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="d200e-164">**図 4**: 構成を使用する ObjectDataSource、`ProductsBLL`クラスの`GetProductsByCategoryID(categoryID)`メソッド ([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-164">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class's `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span></span>


<span data-ttu-id="d200e-165">以降、`GetProductsByCategoryID(categoryID)`メソッドは、入力パラメーターを受け取ります (*`categoryID`*)、データ ソースの選択ウィザードは us にパラメーターのソースを指定する機会を提供します。</span><span class="sxs-lookup"><span data-stu-id="d200e-165">Since the `GetProductsByCategoryID(categoryID)` method accepts an input parameter (*`categoryID`*), the Choose Data Source wizard offers us an opportunity to specify the parameter's source.</span></span> <span data-ttu-id="d200e-166">パラメーターのソース、QueryStringField を使用してクエリ文字列に設定`CategoryID`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-166">Set the parameter source to QueryString using the QueryStringField `CategoryID`.</span></span>


<span data-ttu-id="d200e-167">[![パラメーターのソースとしての Querystring フィールド CategoryID を使用します。](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-167">[![Use the Querystring Field CategoryID as the Parameter's Source](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="d200e-168">**図 5**: クエリ文字列フィールドを使用して`CategoryID`パラメーターのソースとして ([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-168">**Figure 5**: Use the Querystring Field `CategoryID` as the Parameter's Source ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span></span>


<span data-ttu-id="d200e-169">データ ソース ウィザードの完了後に前のチュートリアルで見てきたよう、Visual Studio は自動的に作成、 `ItemTemplate` DataList を各データ フィールドの名前と値の一覧を表示するためです。</span><span class="sxs-lookup"><span data-stu-id="d200e-169">As we've seen in previous tutorials, after completing the Choose Data Source wizard, Visual Studio automatically creates an `ItemTemplate` for the DataList that lists each data field name and value.</span></span> <span data-ttu-id="d200e-170">製品の名前、供給業者、および price のみを一覧表示するには、このテンプレートを置き換えます。</span><span class="sxs-lookup"><span data-stu-id="d200e-170">Replace this template with one that lists only the product's name, supplier, and price.</span></span> <span data-ttu-id="d200e-171">また、設定、DataList`RepeatColumns`プロパティを 2 です。</span><span class="sxs-lookup"><span data-stu-id="d200e-171">Also, set the DataList's `RepeatColumns` property to 2.</span></span> <span data-ttu-id="d200e-172">これらの変更後に、DataList と ObjectDataSource の宣言型マークアップを次のようになります。</span><span class="sxs-lookup"><span data-stu-id="d200e-172">After these changes, your DataList and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample4.aspx)]

<span data-ttu-id="d200e-173">開始アクションでこのページを表示する、`CategoryListMaster.aspx`ページです。 次に、カテゴリの箇条書きリストにあるリンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="d200e-173">To view this page in action, start from the `CategoryListMaster.aspx` page; next, click on a link in the categories bulleted list.</span></span> <span data-ttu-id="d200e-174">これにより操作により`ProductsForCategoryDetails.aspx`に沿って渡す、`CategoryID`クエリ文字列を通じてします。</span><span class="sxs-lookup"><span data-stu-id="d200e-174">Doing so will take you to `ProductsForCategoryDetails.aspx`, passing along the `CategoryID` through the querystring.</span></span> <span data-ttu-id="d200e-175">`ProductsInCategoryDataSource`で ObjectDataSource`ProductsForCategoryDetails.aspx`は指定したカテゴリの製品だけを取得し、それらの行ごとに 2 つの製品を表示すると、DataList に表示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-175">The `ProductsInCategoryDataSource` ObjectDataSource in `ProductsForCategoryDetails.aspx` will then get just those products for the specified category and display them in the DataList, which renders two products per row.</span></span> <span data-ttu-id="d200e-176">図 6 は、のスクリーン ショット`ProductsForCategoryDetails.aspx`飲み物を表示するときにします。</span><span class="sxs-lookup"><span data-stu-id="d200e-176">Figure 6 shows a screenshot of `ProductsForCategoryDetails.aspx` when viewing the Beverages.</span></span>


<span data-ttu-id="d200e-177">[![飲み物が表示され、行ごとに 2 つ](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-177">[![The Beverages are Displayed, Two per Row](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span></span>

<span data-ttu-id="d200e-178">**図 6**:、飲み物が表示され、行ごとに 2 つ ([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-178">**Figure 6**: The Beverages are Displayed, Two per Row ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span></span>


## <a name="step-4-displaying-category-information-on-productsforcategorydetailsaspx"></a><span data-ttu-id="d200e-179">手順 4: ProductsForCategoryDetails.aspx にカテゴリ情報を表示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-179">Step 4: Displaying Category Information on ProductsForCategoryDetails.aspx</span></span>

<span data-ttu-id="d200e-180">内にあるカテゴリで、ユーザーがクリックしたとき`CategoryListMaster.aspx`に取得されます。`ProductsForCategoryDetails.aspx`され、選択したカテゴリに属している製品を表示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-180">When a user clicks on a category in `CategoryListMaster.aspx`, they are taken to `ProductsForCategoryDetails.aspx` and shown the products that belong to the selected category.</span></span> <span data-ttu-id="d200e-181">ただし、`ProductsForCategoryDetails.aspx`に関してどのようなカテゴリが選択された視覚的な手掛かりはありません。</span><span class="sxs-lookup"><span data-stu-id="d200e-181">However, in `ProductsForCategoryDetails.aspx` there are no visual cues as to what category was selected.</span></span> <span data-ttu-id="d200e-182">飲み物が誤ってクリックされた調味料をクリックすることを意図した、ユーザーに到達すると、誤った操作を実現する手段を持たない`ProductsForCategoryDetails.aspx`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-182">A user that meant to click Beverages, but accidentally clicked Condiments, has no way of realizing their mistake once they reach `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="d200e-183">このような問題を軽減するのには、選択したカテゴリに関する情報を表示できます: その名前と説明 — の上部にある、`ProductsForCategoryDetails.aspx`ページ。</span><span class="sxs-lookup"><span data-stu-id="d200e-183">To alleviate this potential problem, we can display information about the selected category — its name and description — at the top of the `ProductsForCategoryDetails.aspx` page.</span></span>

<span data-ttu-id="d200e-184">これを実現する追加リピータ コントロールの上 FormView`ProductsForCategoryDetails.aspx`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-184">To accomplish this, add a FormView above the Repeater control in `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="d200e-185">次に、新しい ObjectDataSource をという名前のフォーム ビューのスマート タグからページを追加`CategoryDataSource`を使用するように構成し、`CategoriesBLL`クラスの`GetCategoryByCategoryID(categoryID)`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="d200e-185">Next, add a new ObjectDataSource to the page from the FormView's smart tag named `CategoryDataSource` and configure it to use the `CategoriesBLL` class's `GetCategoryByCategoryID(categoryID)` method.</span></span>


<span data-ttu-id="d200e-186">[![を介して、CategoriesBLL GetCategoryByCategoryID(categoryID) クラスのカテゴリに関する情報にアクセス](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-186">[![Access Information about the Category through the CategoriesBLL Class's GetCategoryByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span></span>

<span data-ttu-id="d200e-187">**図 7**: を通じてカテゴリに関する情報を取得、`CategoriesBLL`クラスの`GetCategoryByCategoryID(categoryID)`メソッド ([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-187">**Figure 7**: Access Information about the Category through the `CategoriesBLL` Class's `GetCategoryByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span></span>


<span data-ttu-id="d200e-188">同様、 `ProductsInCategoryDataSource` ObjectDataSource が手順 3. で追加、`CategoryDataSource`のデータ ソースの構成ウィザードの指示に従って us のソースで、`GetCategoryByCategoryID(categoryID)`メソッドのパラメーターを入力します。</span><span class="sxs-lookup"><span data-stu-id="d200e-188">As with the `ProductsInCategoryDataSource` ObjectDataSource added in Step 3, the `CategoryDataSource`'s Configure Data Source wizard prompts us for a source for the `GetCategoryByCategoryID(categoryID)` method's input parameter.</span></span> <span data-ttu-id="d200e-189">正確な設定と同じにする前に、パラメーターのソースをクエリ文字列、QueryStringField 値に設定を使用して`CategoryID`(戻るは図 5 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="d200e-189">Use the exact same settings as before, setting the parameter source to QueryString and the QueryStringField value to `CategoryID` (refer back to Figure 5).</span></span>

<span data-ttu-id="d200e-190">ウィザードを完了すると、Visual Studio が自動的に作成されます、 `ItemTemplate`、 `EditItemTemplate`、および`InsertItemTemplate`FormView 用です。</span><span class="sxs-lookup"><span data-stu-id="d200e-190">After completing the wizard, Visual Studio automatically creates an `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate` for the FormView.</span></span> <span data-ttu-id="d200e-191">読み取り専用のインターフェイスを提供していますので自由に削除、`EditItemTemplate`と`InsertItemTemplate`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-191">Since we're providing a read-only interface, feel free to remove the `EditItemTemplate` and `InsertItemTemplate`.</span></span> <span data-ttu-id="d200e-192">また、自由にカスタマイズ FormView の`ItemTemplate`します。</span><span class="sxs-lookup"><span data-stu-id="d200e-192">Also, feel free to customize the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="d200e-193">余分なテンプレートを削除すると、ItemTemplate のカスタマイズ、フォーム ビューと ObjectDataSource の宣言型マークアップを次のようになります。</span><span class="sxs-lookup"><span data-stu-id="d200e-193">After removing the superfluous templates and customizing the ItemTemplate, your FormView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="d200e-194">図 8 は、スクリーン ショット、ブラウザーからこのページを表示している場合を示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-194">Figure 8 shows a screen shot when viewing this page through a browser.</span></span>

> [!NOTE]
> <span data-ttu-id="d200e-195">FormView のカテゴリの一覧にユーザーを実行する上記のハイパーリンク コントロールを追加しました、FormView に加えて (`CategoryListMaster.aspx`)。</span><span class="sxs-lookup"><span data-stu-id="d200e-195">In addition to the FormView, I've also added a HyperLink control above the FormView that will take the user back to the list of categories (`CategoryListMaster.aspx`).</span></span> <span data-ttu-id="d200e-196">このリンクを別の場所に配置するかを完全に省略する自由です。</span><span class="sxs-lookup"><span data-stu-id="d200e-196">Feel free to place this link elsewhere or to omit it altogether.</span></span>


<span data-ttu-id="d200e-197">[![カテゴリ情報は、ページの上部に表示されるようになりました](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-197">[![Category Information is Now Displayed at the Top of the Page](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span></span>

<span data-ttu-id="d200e-198">**図 8**: カテゴリ情報は、ページの上部に表示されるようになりました ([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-198">**Figure 8**: Category Information is Now Displayed at the Top of the Page ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span></span>


## <a name="step-5-displaying-a-message-if-no-products-belong-to-the-selected-category"></a><span data-ttu-id="d200e-199">手順 5: 選択したカテゴリに属している製品が存在しない場合は、メッセージを表示します。</span><span class="sxs-lookup"><span data-stu-id="d200e-199">Step 5: Displaying a Message if No Products Belong to the Selected Category</span></span>

<span data-ttu-id="d200e-200">`CategoryListMaster.aspx`ページに関係なく、システム内のすべてのカテゴリを一覧表示の製品が関連付けられているかどうかが発生します。</span><span class="sxs-lookup"><span data-stu-id="d200e-200">The `CategoryListMaster.aspx` page lists all categories in the system, regardless of whether there are any associated products.</span></span> <span data-ttu-id="d200e-201">関連付けられている製品、DataList でカテゴリをクリックすると`ProductsForCategoryDetails.aspx`が表示されない、そのデータ ソースはすべての項目が存在しないためです。</span><span class="sxs-lookup"><span data-stu-id="d200e-201">If a user clicks on a category with no associated products, the DataList in `ProductsForCategoryDetails.aspx` will not be rendered, as its data source will not have any items.</span></span> <span data-ttu-id="d200e-202">GridView は、過去のチュートリアルで見てきたよう、`EmptyDataText`そのデータ ソースのレコードがない場合に表示するテキスト メッセージを指定するために使用できるプロパティです。</span><span class="sxs-lookup"><span data-stu-id="d200e-202">As we've seen in past tutorials, the GridView provides an `EmptyDataText` property that can be used to specify a text message to display if there are no records in its data source.</span></span> <span data-ttu-id="d200e-203">残念ながら、DataList もリピータには、このようなプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="d200e-203">Unfortunately, neither the DataList nor Repeater has such a property.</span></span>

<span data-ttu-id="d200e-204">選択したカテゴリに一致する製品がありませんを追加することをユーザーに通知メッセージを表示するために、ラベル コントロールをページの`Text`プロパティに一致する製品がないことを表示するメッセージが割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="d200e-204">In order to display a message informing the user that there are no matching products for the selected category, we need to add a Label control to the page whose `Text` property is assigned the message to display in the event that there are no matching products.</span></span> <span data-ttu-id="d200e-205">プログラムで設定する必要があります、`Visible`プロパティは、DataList が任意の項目を格納するかどうかに基づいています。</span><span class="sxs-lookup"><span data-stu-id="d200e-205">We then need to programmatically set its `Visible` property based on whether or not the DataList contains any items.</span></span>

<span data-ttu-id="d200e-206">これを実現するには、DataList の下にラベルを追加することで開始します。</span><span class="sxs-lookup"><span data-stu-id="d200e-206">To accomplish this, start by adding a Label beneath the DataList.</span></span> <span data-ttu-id="d200e-207">設定の`ID`プロパティを`NoProductsMessage`とその`Text`プロパティを「... 選択したカテゴリの製品がありません」</span><span class="sxs-lookup"><span data-stu-id="d200e-207">Set its `ID` property to `NoProductsMessage` and its `Text` property to "There are no products for the selected category…"</span></span> <span data-ttu-id="d200e-208">次に、このラベルをプログラムで設定する必要があります`Visible`プロパティにすべてのデータがバインドされているかどうかに基づいて、 `ProductsInCategory` DataList です。</span><span class="sxs-lookup"><span data-stu-id="d200e-208">Next, we need to programmatically set this Label's `Visible` property based on whether or not any data was bound to the `ProductsInCategory` DataList.</span></span> <span data-ttu-id="d200e-209">DataList にデータがバインドされた後は、この割り当てを行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="d200e-209">This assignment must be made after the data has been bound to the DataList.</span></span> <span data-ttu-id="d200e-210">GridView、DetailsView、およびフォーム ビューのコントロールのイベント ハンドラーを作成おでした`DataBound`イベントで、データ バインドが完了した後に発生します。</span><span class="sxs-lookup"><span data-stu-id="d200e-210">For the GridView, DetailsView, and FormView, we could create an event handler for the control's `DataBound` event, which fires after databinding has completed.</span></span> <span data-ttu-id="d200e-211">ただし、DataList もリピータには、`DataBound`使用可能なイベントです。</span><span class="sxs-lookup"><span data-stu-id="d200e-211">However, neither the DataList nor the Repeater has a `DataBound` event available.</span></span>

<span data-ttu-id="d200e-212">この例のラベルの割り当てるできます`Visible`プロパティに、`Page_Load`データが、ページの前に DataList に割り当てられているされますので、イベント ハンドラー`Load`イベント。</span><span class="sxs-lookup"><span data-stu-id="d200e-212">For this particular example we can assign the Label's `Visible` property in the `Page_Load` event handler, since the data will have been assigned to the DataList prior to the page's `Load` event.</span></span> <span data-ttu-id="d200e-213">ただし、このアプローチない一般的なケースでどおりに動作 DataList ページのライフ サイクルの後に、ObjectDataSource からデータをバインドする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d200e-213">However, this approach would not work in the general case, as the data from the ObjectDataSource might be bound to the DataList later in the page's lifecycle.</span></span> <span data-ttu-id="d200e-214">たとえば場合は、「マスター」のレコードを保持する DropDownList を使用してマスター/詳細レポートを表示するときに表示されるデータの別のコントロールの値がに基づいて、データ可能性がありますいない再バインドされるまで、データの Web コントロールに、`PreRender`段階で、ページの有効期間。</span><span class="sxs-lookup"><span data-stu-id="d200e-214">For example, if the displayed data is based upon the value in another control, such as it is when displaying a master/detail report using a DropDownList to hold the "master" records, the data may not rebound to the data Web control until the `PreRender` stage in the page's life cycle.</span></span>

<span data-ttu-id="d200e-215">割り当てるには、すべてのケースで動作する 1 つのソリューション、`Visible`プロパティを`False`DataList ので`ItemDataBound`(または`ItemCreated`) の項目の種類をバインドするときにイベント ハンドラー`Item`または`AlternatingItem`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-215">One solution which will work for all cases is to assign the `Visible` property to `False` in the DataList's `ItemDataBound` (or `ItemCreated`) event handler when binding an item type of `Item` or `AlternatingItem`.</span></span> <span data-ttu-id="d200e-216">このような場合はわかっていますがあることには、少なくとも 1 つのデータ、データ ソース内の項目し、隠すことができるため、`NoProductsMessage`ラベル。</span><span class="sxs-lookup"><span data-stu-id="d200e-216">In such a case we know that there is at least one data item in the data source and therefore can hide the `NoProductsMessage` Label.</span></span> <span data-ttu-id="d200e-217">このイベント ハンドラーに加えも必要があります、イベント ハンドラー、DataList の`DataBinding`ラベルを初期化して、イベント`Visible`プロパティを`True`です。</span><span class="sxs-lookup"><span data-stu-id="d200e-217">In addition to this event handler, we also need an event handler for the DataList's `DataBinding` event, where we initialize the Label's `Visible` property to `True`.</span></span> <span data-ttu-id="d200e-218">以降、`DataBinding`イベントが発生する前に、`ItemDataBound`イベント、ラベルの`Visible`プロパティの初期設定`True`以外の場合は、データ項目がある場合設定するただし、 `False`。</span><span class="sxs-lookup"><span data-stu-id="d200e-218">Since the `DataBinding` event fires before the `ItemDataBound` events, the Label's `Visible` property will initially be set to `True`; if there are any data items, however, it will be set to `False`.</span></span> <span data-ttu-id="d200e-219">次のコードでは、このロジックを実装します。</span><span class="sxs-lookup"><span data-stu-id="d200e-219">The following code implements this logic:</span></span>

[!code-csharp[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="d200e-220">すべてのカテゴリ、Northwind データベースは 1 つまたは複数の製品に関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="d200e-220">All of the categories in the Northwind database are associated with one or more products.</span></span> <span data-ttu-id="d200e-221">この機能をテストするには手動で調整して、Northwind データベースこのチュートリアルでは、生成カテゴリに関連付けられているすべての製品を再割り当て (`CategoryID` = 7) Seafood カテゴリに (`CategoryID` = 8)。</span><span class="sxs-lookup"><span data-stu-id="d200e-221">To test this feature, I've manually adjusted the Northwind database for this tutorial, reassigning all products associated with the Produce category (`CategoryID` = 7) to the Seafood category (`CategoryID` = 8).</span></span> <span data-ttu-id="d200e-222">これには、サーバー エクスプ ローラーから新しいクエリを選択して、次を使用して`UPDATE`ステートメント。</span><span class="sxs-lookup"><span data-stu-id="d200e-222">This can be accomplished from the Server Explorer by choosing New Query and using the following `UPDATE` statement:</span></span>

[!code-sql[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample7.sql)]

<span data-ttu-id="d200e-223">データベースを適宜更新した後に戻り、`CategoryListMaster.aspx`ページおよび生成のリンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="d200e-223">After updating the database accordingly, return to the `CategoryListMaster.aspx` page and click on the Produce link.</span></span> <span data-ttu-id="d200e-224">生成カテゴリに属しているすべての製品が不要になった、する必要がありますを参照して、「... 選択したカテゴリの製品がありません」</span><span class="sxs-lookup"><span data-stu-id="d200e-224">Since there are no longer any products belonging to the Produce category, you should see the "There are no products for the selected category…"</span></span> <span data-ttu-id="d200e-225">メッセージでは、図 9 に示すようにします。</span><span class="sxs-lookup"><span data-stu-id="d200e-225">message, as shown in Figure 9.</span></span>


<span data-ttu-id="d200e-226">[![選択したカテゴリに No 製品属しているものがある場合、メッセージが表示されます。](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="d200e-226">[![A Message is Displayed if there are No Products Belonging to the Selected Category](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span></span>

<span data-ttu-id="d200e-227">**図 9**: 選択したカテゴリに No 製品属しているものがある場合、メッセージが表示されます ([フルサイズのイメージを表示するをクリックして](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="d200e-227">**Figure 9**: A Message is Displayed if there are No Products Belonging to the Selected Category ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="d200e-228">概要</span><span class="sxs-lookup"><span data-stu-id="d200e-228">Summary</span></span>

<span data-ttu-id="d200e-229">マスター/詳細レポートを 1 ページにマスター/詳細の両方のレコードが表示されることができます、多くの web サイトで区切られます複数の 2 つの web ページ。</span><span class="sxs-lookup"><span data-stu-id="d200e-229">While master/detail reports can display both the master and detail records on a single page, in many websites they are separated out across two web pages.</span></span> <span data-ttu-id="d200e-230">このチュートリアルでは、「マスター」の web ページで、Repeater を使用して、箇条書きリストに示されているカテゴリと [詳細] ページに示される関連付けられている製品で、このようなマスター/詳細レポートを実装する方法について説明しました。</span><span class="sxs-lookup"><span data-stu-id="d200e-230">In this tutorial we looked at how to implement such a master/detail report by having the categories listed in a bulleted list using a Repeater in the "master" web page and the associated products listed in the "details" page.</span></span> <span data-ttu-id="d200e-231">マスターの web ページ内の各リスト項目に渡されます行の詳細ページへのリンクが含まれている`CategoryID`値。</span><span class="sxs-lookup"><span data-stu-id="d200e-231">Each list item in the master web page contained a link to the details page that passed along the row's `CategoryID` value.</span></span>

<span data-ttu-id="d200e-232">[詳細] ページで、指定された業者のこれらの製品を取得することによって実現されました、`ProductsBLL`クラスの`GetProductsByCategoryID(categoryID)`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="d200e-232">In the details page retrieving those products for the specified supplier was accomplished through the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="d200e-233"> *`categoryID`* を使用して宣言パラメーターの値が指定された、`CategoryID`パラメーターのソースとしてのクエリ文字列値です。</span><span class="sxs-lookup"><span data-stu-id="d200e-233">The *`categoryID`* parameter value was specified declaratively using the `CategoryID` querystring value as the parameter source.</span></span> <span data-ttu-id="d200e-234">詳細 ページを使用して、FormView でカテゴリの詳細を表示する方法と、選択したカテゴリに属する製品が存在しなかった場合にメッセージを表示する方法についても説明しました。</span><span class="sxs-lookup"><span data-stu-id="d200e-234">We also looked at how to display category details in the details page using a FormView and how to display a message if there were no products belonging to the selected category.</span></span>

<span data-ttu-id="d200e-235">満足プログラミング!</span><span class="sxs-lookup"><span data-stu-id="d200e-235">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="d200e-236">作成者について</span><span class="sxs-lookup"><span data-stu-id="d200e-236">About the Author</span></span>

<span data-ttu-id="d200e-237">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックとの創設者の作成者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、1998 年からマイクロソフトの Web テクノロジで取り組んできました。</span><span class="sxs-lookup"><span data-stu-id="d200e-237">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="d200e-238">Scott は、コンサルタント、トレーナー、ライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="d200e-238">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="d200e-239">最新の著書[ *Sam 学べる自分で ASP.NET 2.0 が 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)です。</span><span class="sxs-lookup"><span data-stu-id="d200e-239">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="d200e-240">彼に到達できる[ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)彼のブログを使用して含まれているのか[http://ScottOnWriting.NET](http://ScottOnWriting.NET)です。</span><span class="sxs-lookup"><span data-stu-id="d200e-240">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="d200e-241">特別に感謝しています.</span><span class="sxs-lookup"><span data-stu-id="d200e-241">Special Thanks To…</span></span>

<span data-ttu-id="d200e-242">このチュートリアルの系列は既に多くの便利なレビュー担当者によって確認済みです。</span><span class="sxs-lookup"><span data-stu-id="d200e-242">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="d200e-243">このチュートリアルの潜在顧客レビュー担当者は、Zack Jones および Liz Shulok がいました。</span><span class="sxs-lookup"><span data-stu-id="d200e-243">Lead reviewers for this tutorial were Zack Jones and Liz Shulok.</span></span> <span data-ttu-id="d200e-244">今後、MSDN の記事を確認することに関心のあるですか。</span><span class="sxs-lookup"><span data-stu-id="d200e-244">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="d200e-245">場合は、ドロップ me 一度に 1 行ずつ[mitchell@4GuysFromRolla.comです。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="d200e-245">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="d200e-246">[前へ](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[次へ](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span><span class="sxs-lookup"><span data-stu-id="d200e-246">[Previous](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[Next](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span></span>
