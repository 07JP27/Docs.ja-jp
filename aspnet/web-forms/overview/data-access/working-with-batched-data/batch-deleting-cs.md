---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: "バッチを削除する (c#) |Microsoft ドキュメント"
author: rick-anderson
description: "単一の操作で複数のデータベース レコードを削除する方法を説明します。 ユーザー インターフェイス レイヤー内で作成された以前 tut 拡張の GridView に構築しています."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/26/2007
ms.topic: article
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: 71c4b323c2604d9e775f75272bb9565505580522
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/10/2017
---
<a name="batch-deleting-c"></a><span data-ttu-id="ecd9a-104">バッチを削除する (c#)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-104">Batch Deleting (C#)</span></span>
====================
<span data-ttu-id="ecd9a-105">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ecd9a-106">[コードをダウンロードする](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip)または[PDF のダウンロード](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="ecd9a-107">単一の操作で複数のデータベース レコードを削除する方法を説明します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="ecd9a-108">ユーザー インターフェイス レイヤーでは、以前のチュートリアルで作成された拡張の GridView に基づいてお構築します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="ecd9a-109">データ アクセス層は、すべての削除が成功するすべての削除をロールバックすることを確認するトランザクション内で複数の削除操作をラップします。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>


## <a name="introduction"></a><span data-ttu-id="ecd9a-110">はじめに</span><span class="sxs-lookup"><span data-stu-id="ecd9a-110">Introduction</span></span>

<span data-ttu-id="ecd9a-111">[前のチュートリアル](batch-updating-cs.md)編集インターフェイスが完全に編集可能な GridView を使用して、バッチを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="ecd9a-112">ユーザーがよく編集箇所多数のレコードを一度にの場合、編集インターフェイス バッチが必要になりますはるかに少ないポストバックとキーボード、マウスのコンテキスト スイッチ、それによってエンドユーザーの効率が向上します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="ecd9a-113">この手法は、通常は、1 つの go の複数のレコードを削除するユーザーがページで同様に便利です。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="ecd9a-114">オンラインの電子メール クライアントを使用したすべてのユーザーがインターフェイスを削除すると、最も一般的なバッチのいずれかに慣れて既に: (図 1 を参照してください)、対応する削除すべてのチェック項目がグリッド内の各行のチェック ボックス ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="ecd9a-115">このチュートリアルではなく短いため web ベースのインターフェイスと 1 つのアトミック操作として、一連のレコードを削除する方法の両方を作成する前のチュートリアルで面倒な作業のすべてが既に完了しました。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="ecd9a-116">[GridView 列のチェック ボックスを追加する](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)と対応するチェック ボックスの列を含む GridView を作成したチュートリアル、[トランザクション内でデータベースの変更をラッピング](wrapping-database-modifications-within-a-transaction-cs.md)内のメソッドを作成したチュートリアル削除するトランザクションを使用する BLL、`List<T>`の`ProductID`値。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="ecd9a-117">このチュートリアルでおは時にビルドし、例を削除すると、作業バッチを作成する過去の経験をマージします。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>


<span data-ttu-id="ecd9a-118">[![各行には、チェック ボックスが含まれています。](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="ecd9a-119">**図 1**: 各行には、チェック ボックスが含まれています ([フルサイズのイメージを表示するをクリックして](batch-deleting-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="ecd9a-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>


## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="ecd9a-120">手順 1: インターフェイスを削除するバッチを作成します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="ecd9a-121">インターフェイスを削除するバッチ既に作成したので、 [GridView 列のチェック ボックスを追加する](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)チュートリアルでは、おは単にコピーする`BatchDelete.aspx`最初から作成することではなくです。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="ecd9a-122">開いて開始、 `BatchDelete.aspx`  ページで、`BatchData`フォルダーおよび`CheckBoxField.aspx` ページで、`EnhancedGridView`フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="ecd9a-123">`CheckBoxField.aspx`  ページで、ソース ビューに移動して間のマークアップをコピー、`<asp:Content>`図 2 に示すようにタグを付けます。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>


<span data-ttu-id="ecd9a-124">[![CheckBoxField.aspx の宣言型マークアップをクリップボードにコピーします。](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="ecd9a-125">**図 2**: コピーの宣言型マークアップ`CheckBoxField.aspx`をクリップボードに ([フルサイズのイメージを表示するをクリックして](batch-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="ecd9a-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>


<span data-ttu-id="ecd9a-126">次に、ビューに移動して、ソースで`BatchDelete.aspx`内でのクリップボードの内容を貼り付けると、`<asp:Content>`タグ。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="ecd9a-127">コピーしてからの分離コード クラス内のコードを貼り付けます`CheckBoxField.aspx.cs`をで分離コード クラス内で`BatchDelete.aspx.cs`(、`DeleteSelectedProducts`ボタン s `Click` 、イベント ハンドラー、`ToggleCheckState`メソッド、および`Click`イベント ハンドラー`CheckAll`と`UncheckAll`ボタン)。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="ecd9a-128">このコンテンツをコピーした後、`BatchDelete.aspx`ページの分離コード クラスは、次のコードを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="ecd9a-129">宣言型マークアップとソース コードをコピー後すぐをテスト`BatchDelete.aspx`ブラウザーで表示しています。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="ecd9a-130">各行が s の製品名、カテゴリ、およびチェック ボックスと共に価格の一覧を表示する GridView の最初の 10 製品を一覧表示する GridView が表示されます。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="ecd9a-131">3 つのボタンがあります。 すべてをチェックをオフに、すべて、その選択した製品を削除します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="ecd9a-132">すべてをオフにしてすべてのチェック ボックスをクリアするときに、すべてのチェック ボックスを選択すべてチェック ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="ecd9a-133">選択した製品の削除 をクリックを一覧表示するメッセージが表示されます、`ProductID`選択した製品の値が製品を実際に削除されません。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>


<span data-ttu-id="ecd9a-134">[![CheckBoxField.aspx からインターフェイスは BatchDeleting.aspx に移動されました](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="ecd9a-135">**図 3**:、インターフェイスから`CheckBoxField.aspx`に移動しました`BatchDeleting.aspx`([フルサイズのイメージを表示するをクリックして](batch-deleting-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="ecd9a-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>


## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="ecd9a-136">手順 2: トランザクションを使用して、チェックされた製品を削除します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="ecd9a-137">インターフェイスに正常にコピーを削除するバッチに`BatchDeleting.aspx`、ままが選択されている製品の削除 ボタンを使用して、チェックされた製品を削除するようにコードを更新することがすべて、`DeleteProductsWithTransaction`メソッドで、`ProductsBLL`クラス。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="ecd9a-138">追加した、このメソッド、[トランザクション内でデータベースの変更をラッピング](wrapping-database-modifications-within-a-transaction-cs.md)チュートリアルでは、その入力として受け取ります、`List<T>`の`ProductID`値し、対応する各を削除`ProductID`のスコープ内で、トランザクションです。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="ecd9a-139">`DeleteSelectedProducts`ボタン s`Click`イベント ハンドラーは、現在、次を使用して`foreach`GridView 各行を反復処理するループ。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="ecd9a-140">行ごとに、 `ProductSelector` CheckBox Web コントロールがプログラムによって参照されています。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="ecd9a-141">オンの場合行 s`ProductID`から取得した、`DataKeys`コレクションおよび`DeleteResults`s のラベル`Text`プロパティが更新され、行が削除対象として選択されたことを示すメッセージが含まれます。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="ecd9a-142">上記のコードは実際に削除されませんレコードへの呼び出しとして、`ProductsBLL`クラスの`Delete`メソッドのコメント アウトします。この削除ロジックを適用するが、コードは、製品を削除と分割不可能な操作内ではありません。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="ecd9a-143">シーケンス内の最初のいくつか削除は成功しましたが、後で、1 は (外部キー制約違反) のため失敗した場合、は、例外がスローされますが、既に削除されて、これらの製品が削除された残っていません。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="ecd9a-144">原子性を確保するために必要がありますを使用する、`ProductsBLL`クラスの`DeleteProductsWithTransaction`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="ecd9a-145">このメソッドの一覧を受け付けるため`ProductID`値を最初にグリッドから、この一覧をコンパイルし、パラメーターとして渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="ecd9a-146">最初のインスタンスを作成、`List<T>`型の`int`します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="ecd9a-147">内で、`foreach`ループを選択した製品を追加する必要があります`ProductID`値をこの`List<T>`です。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="ecd9a-148">ループの後にこの`List<T>`に渡される必要があります、`ProductsBLL`クラスの`DeleteProductsWithTransaction`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="ecd9a-149">更新プログラム、`DeleteSelectedProducts`ボタンの`Click`イベント ハンドラーを次のコードで。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="ecd9a-150">更新されたコードを作成、`List<T>`型の`int`(`productIDsToDelete`) 設定と、`ProductID`削除する値。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="ecd9a-151">後に、`foreach`ループ、選択すると、少なくとも 1 つの製品がある場合、`ProductsBLL`クラスの`DeleteProductsWithTransaction`メソッドが呼び出され、このリストに渡されます。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="ecd9a-152">`DeleteResults`ラベルが表示もされ、データが GridView にバインドし直す (できるようにする新しく削除されたレコードは、不要になった、グリッド内の行として表示されます)。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="ecd9a-153">図 4 は、削除の行の数が選択された後に、GridView を示します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="ecd9a-154">図 5 は、選択されている製品の削除 ボタンがクリックしてされた後にすぐに、画面を示しています。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="ecd9a-155">図 5 で、 `ProductID` GridView の下にラベルに削除されたレコードの値が表示され、これらの行が GridView ではなくなりました。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>


<span data-ttu-id="ecd9a-156">[![選択した製品が削除されます。](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="ecd9a-157">**図 4**: 選択した製品が削除されます ([フルサイズのイメージを表示するをクリックして](batch-deleting-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="ecd9a-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>


<span data-ttu-id="ecd9a-158">[![削除された製品 ProductID 値は、「GridView の下に一覧表示](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="ecd9a-159">**図 5**:「削除製品`ProductID`値は、「GridView の下に表示されている ([フルサイズのイメージを表示するには、をクリックして](batch-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="ecd9a-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>


> [!NOTE]
> <span data-ttu-id="ecd9a-160">テストする、`DeleteProductsWithTransaction`メソッド s 原子性で、製品のエントリを手動で追加、`Order Details`の表に、(およびその他) には、その製品を削除しようとします。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="ecd9a-161">関連付けられている注文の製品を削除が方法、その他の選択した製品の削除がロールバックしようとするとき、外部キー制約違反を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>


## <a name="summary"></a><span data-ttu-id="ecd9a-162">概要</span><span class="sxs-lookup"><span data-stu-id="ecd9a-162">Summary</span></span>

<span data-ttu-id="ecd9a-163">インターフェイスを削除するバッチを作成するには、対応するチェック ボックスの列を含む GridView を追加し、ボタン Web ときを制御するには、クリックされると、1 つのアトミック操作として選択された行のすべてが削除されます。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="ecd9a-164">このチュートリアルでは前の 2 つのチュートリアルで実行された作業を整理してこのようなインターフェイスを作成お[GridView 列のチェック ボックスを追加する](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)と[トランザクション内でデータベースの変更をラッピング](wrapping-database-modifications-within-a-transaction-cs.md)です。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="ecd9a-165">チェック ボックスの列を含む GridView で作成した最初のチュートリアルでおよび後者の場合、BLL 内のメソッドを実装しましたを渡されたときに、`List<T>`の`ProductID`値、すべてのトランザクションのスコープ内で削除します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="ecd9a-166">次のチュートリアルでは、バッチ挿入操作を実行するためのインターフェイスを作成します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="ecd9a-167">満足プログラミング!</span><span class="sxs-lookup"><span data-stu-id="ecd9a-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="ecd9a-168">作成者について</span><span class="sxs-lookup"><span data-stu-id="ecd9a-168">About the Author</span></span>

<span data-ttu-id="ecd9a-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックとの創設者の作成者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、1998 年からマイクロソフトの Web テクノロジで取り組んできました。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ecd9a-170">Scott は、コンサルタント、トレーナー、ライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ecd9a-171">最新の著書[ *Sam 学べる自分で ASP.NET 2.0 が 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)です。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ecd9a-172">彼に到達できる[ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)彼のブログを使用して含まれているのか[http://ScottOnWriting.NET](http://ScottOnWriting.NET)です。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="ecd9a-173">感謝の特別な</span><span class="sxs-lookup"><span data-stu-id="ecd9a-173">Special Thanks To</span></span>

<span data-ttu-id="ecd9a-174">このチュートリアルの系列は既に多くの便利なレビュー担当者によって確認済みです。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-174">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ecd9a-175">このチュートリアルの潜在顧客レビュー担当者は、Hilton Giesenow および Teresa マーフィーがいました。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-175">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="ecd9a-176">今後、MSDN の記事を確認することに関心のあるですか。</span><span class="sxs-lookup"><span data-stu-id="ecd9a-176">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ecd9a-177">場合は、ドロップ me 一度に 1 行ずつ[mitchell@4GuysFromRolla.comです。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-177">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="ecd9a-178">[前へ](batch-updating-cs.md)
[次へ](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="ecd9a-178">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>
