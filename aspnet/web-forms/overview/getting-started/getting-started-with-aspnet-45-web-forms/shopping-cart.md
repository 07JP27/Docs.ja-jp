---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: "ショッピング カート |Microsoft ドキュメント"
author: Erikre
description: "このチュートリアルの系列では、お用 ASP.NET 4.5 と Microsoft Visual Studio Express 2013 を使用して ASP.NET Web フォーム アプリケーションの構築の基礎を説明しています."
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: 9fe6f28685d6a423b03f9c7abe753283b89344e1
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2018
---
<a name="shopping-cart"></a><span data-ttu-id="b297a-103">ショッピング カート</span><span class="sxs-lookup"><span data-stu-id="b297a-103">Shopping Cart</span></span>
====================
<span data-ttu-id="b297a-104">によって[Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="b297a-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="b297a-105">[Wingtip Toys のサンプル プロジェクト (c#) をダウンロード](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409)または[電子書籍 (PDF) のダウンロード](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="b297a-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="b297a-106">このチュートリアルの系列では、Web 用 ASP.NET 4.5 と Microsoft Visual Studio Express 2013 を使用して ASP.NET Web フォーム アプリケーションの構築の基礎を説明します。</span><span class="sxs-lookup"><span data-stu-id="b297a-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="b297a-107">Visual Studio 2013[プロジェクトと c# ソース コード](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409)はこのチュートリアルのシリーズに付随する使用できます。</span><span class="sxs-lookup"><span data-stu-id="b297a-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="b297a-108">このチュートリアルでは、ショッピング カートを Wingtip Toys サンプルの ASP.NET Web フォーム アプリケーションに追加するために必要なビジネス ロジックについて説明します。</span><span class="sxs-lookup"><span data-stu-id="b297a-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="b297a-109">このチュートリアルでは、前のチュートリアルでは、データ項目と詳細を表示」を上に構築され、Wingtip Toy ストア チュートリアル シリーズの一部です。</span><span class="sxs-lookup"><span data-stu-id="b297a-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="b297a-110">このチュートリアルを完了したときに、サンプル アプリのユーザーは追加、削除、および、ショッピング カートに製品を変更できるようになります。</span><span class="sxs-lookup"><span data-stu-id="b297a-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="b297a-111">学習する内容。</span><span class="sxs-lookup"><span data-stu-id="b297a-111">What you'll learn:</span></span>

1. <span data-ttu-id="b297a-112">Web アプリケーションのショッピング カートを作成する方法。</span><span class="sxs-lookup"><span data-stu-id="b297a-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="b297a-113">ショッピング カートにアイテムを追加するユーザーを有効にする方法です。</span><span class="sxs-lookup"><span data-stu-id="b297a-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="b297a-114">追加する方法、 [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction)ショッピング カートの詳細を表示するコントロール。</span><span class="sxs-lookup"><span data-stu-id="b297a-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="b297a-115">計算され、注文の合計を表示する方法。</span><span class="sxs-lookup"><span data-stu-id="b297a-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="b297a-116">削除し、ショッピング カートにアイテムを更新する方法です。</span><span class="sxs-lookup"><span data-stu-id="b297a-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="b297a-117">ショッピング カート カウンターを含める方法です。</span><span class="sxs-lookup"><span data-stu-id="b297a-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="b297a-118">このチュートリアルではコードの機能:</span><span class="sxs-lookup"><span data-stu-id="b297a-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="b297a-119">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="b297a-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="b297a-120">データの注釈</span><span class="sxs-lookup"><span data-stu-id="b297a-120">Data Annotations</span></span>
3. <span data-ttu-id="b297a-121">厳密に型指定のデータ コントロール</span><span class="sxs-lookup"><span data-stu-id="b297a-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="b297a-122">モデル バインディング</span><span class="sxs-lookup"><span data-stu-id="b297a-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="b297a-123">ショッピング カートを作成します。</span><span class="sxs-lookup"><span data-stu-id="b297a-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="b297a-124">このチュートリアル シリーズの前半は、ページと、データベースから製品データを表示するコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="b297a-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="b297a-125">このチュートリアルで作成管理製品をショッピング カートのユーザーが購入に興味を示しています。</span><span class="sxs-lookup"><span data-stu-id="b297a-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="b297a-126">参照して、登録またはログインしていない場合でも、ショッピング カートにアイテムを追加することができます。</span><span class="sxs-lookup"><span data-stu-id="b297a-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="b297a-127">ショッピング カートのアクセスを管理するユーザーに割り当てます、一意`ID`を初めてカート ショッピング ユーザーにアクセスするときに、グローバル一意識別子 (GUID) を使用します。</span><span class="sxs-lookup"><span data-stu-id="b297a-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="b297a-128">これを格納する`ID`ASP.NET セッション状態を使用します。</span><span class="sxs-lookup"><span data-stu-id="b297a-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b297a-129">ASP.NET セッション状態は、期限切れになる、ユーザーが、サイトをユーザーに固有の情報を格納する便利な場所です。</span><span class="sxs-lookup"><span data-stu-id="b297a-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="b297a-130">セッション状態の誤用はパフォーマンスに影響を持つ大規模なサイトで、デモンストレーションのために、セッション状態の動作の使用が点灯します。</span><span class="sxs-lookup"><span data-stu-id="b297a-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="b297a-131">Wingtip Toys サンプル プロジェクトでは、ここで、セッション状態は、サイトをホストする web サーバーでインプロセスに格納されて、外部プロバイダーを使用しないセッション状態を使用する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="b297a-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="b297a-132">アプリケーションの複数のインスタンスを提供する大規模なサイト、または別のサーバーで、アプリケーションの複数のインスタンスを実行するサイトの使用を検討**Windows Azure キャッシュ サービス**です。</span><span class="sxs-lookup"><span data-stu-id="b297a-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="b297a-133">このキャッシュ サービスは、外部 web サイトには、インプロセス セッション状態を使用しての問題を解決する分散キャッシュ サービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="b297a-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="b297a-134">詳細については、「 [ASP.NET セッション状態は Windows Azure Web サイトを使用する方法](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider)です。</span><span class="sxs-lookup"><span data-stu-id="b297a-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>


### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="b297a-135">モデル クラスとして CartItem を追加します。</span><span class="sxs-lookup"><span data-stu-id="b297a-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="b297a-136">このチュートリアル シリーズの前半作成することで、分類と製品データのスキーマを定義した、`Category`と`Product`内のクラス、*モデル*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="b297a-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="b297a-137">ここで、ショッピング カートのスキーマを定義する新しいクラスを追加します。</span><span class="sxs-lookup"><span data-stu-id="b297a-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="b297a-138">このチュートリアルの後半へのデータ アクセスを処理するクラスを追加する、`CartItem`テーブル。</span><span class="sxs-lookup"><span data-stu-id="b297a-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="b297a-139">このクラスでは、追加、削除、および、ショッピング カートにアイテムを更新するビジネス ロジックを提供します。</span><span class="sxs-lookup"><span data-stu-id="b297a-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="b297a-140">右クリックし、*モデル*フォルダーと選択**追加** - &gt; **新しい項目の**します。</span><span class="sxs-lookup"><span data-stu-id="b297a-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![ショッピング カートの新しい項目の追加](shopping-cart/_static/image1.png)
2. <span data-ttu-id="b297a-142">**[新しい項目の追加]** ダイアログ ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="b297a-143">選択**コード**、し、**クラス**です。</span><span class="sxs-lookup"><span data-stu-id="b297a-143">Select **Code**, and then select **Class**.</span></span> 

    ![ショッピング カート - 新しいアイテム ダイアログ ボックスを追加](shopping-cart/_static/image2.png)
3. <span data-ttu-id="b297a-145">この新しいクラスの名前を*CartItem.cs*です。</span><span class="sxs-lookup"><span data-stu-id="b297a-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="b297a-146">**[追加]**をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b297a-146">Click **Add**.</span></span>  
 <span data-ttu-id="b297a-147">新しいクラス ファイルがエディターで表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="b297a-148">既定のコードを次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="b297a-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="b297a-149">`CartItem`クラスには、ショッピング カートに追加された各製品を定義するスキーマが含まれています。</span><span class="sxs-lookup"><span data-stu-id="b297a-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="b297a-150">このクラスは、このチュートリアル シリーズの前半で作成した他のスキーマ クラスに似ています。</span><span class="sxs-lookup"><span data-stu-id="b297a-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="b297a-151">慣例により、Entity Framework Code First 期待されるプライマリ キーを`CartItem`テーブルには、どちらかになります`CartItemId`または`ID`です。</span><span class="sxs-lookup"><span data-stu-id="b297a-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="b297a-152">ただし、コードがそのデータ注釈を使用して、既定の動作を上書き`[Key]`属性。</span><span class="sxs-lookup"><span data-stu-id="b297a-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="b297a-153">`Key` ItemId プロパティの属性を指定する、`ItemID`プロパティは、主キー。</span><span class="sxs-lookup"><span data-stu-id="b297a-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="b297a-154">`CartId`プロパティを指定します、`ID`を購入するアイテムに関連付けられているユーザーのです。</span><span class="sxs-lookup"><span data-stu-id="b297a-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="b297a-155">このユーザーを作成するコードを追加する`ID`ユーザーがショッピング カートにアクセスするときにします。</span><span class="sxs-lookup"><span data-stu-id="b297a-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="b297a-156">これは、`ID`も、ASP.NET セッション変数として格納されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="b297a-157">製品のコンテキストを更新します。</span><span class="sxs-lookup"><span data-stu-id="b297a-157">Update the Product Context</span></span>

<span data-ttu-id="b297a-158">追加するだけでなく、`CartItem`クラス、エンティティ クラスを管理して、データベースへのデータ アクセスを提供するデータベース コンテキストのクラスを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b297a-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="b297a-159">これを行うには追加、新しく作成された`CartItem`モデル クラスを`ProductContext`クラスです。</span><span class="sxs-lookup"><span data-stu-id="b297a-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="b297a-160">**ソリューション エクスプ ローラー**を検索して開く、 *ProductContext.cs*ファイルで、*モデル*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="b297a-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="b297a-161">強調表示されたコードを追加、 *ProductContext.cs*ファイルの次のようにします。</span><span class="sxs-lookup"><span data-stu-id="b297a-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="b297a-162">このチュートリアル シリーズのコードで説明したように、 *ProductContext.cs*ファイルを追加、`System.Data.Entity`名前空間、Entity Framework のすべてのコア機能にアクセスできるようにします。</span><span class="sxs-lookup"><span data-stu-id="b297a-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="b297a-163">この機能には、クエリ、挿入、更新、および厳密に型指定されたオブジェクトを使用してデータを削除する機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="b297a-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="b297a-164">`ProductContext`クラスは、新たに追加するアクセス権を追加`CartItem`モデル クラス。</span><span class="sxs-lookup"><span data-stu-id="b297a-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="b297a-165">ショッピング カートのビジネス ロジックを管理します。</span><span class="sxs-lookup"><span data-stu-id="b297a-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="b297a-166">次に作成、`ShoppingCart`クラスの新しい*ロジック*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="b297a-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="b297a-167">`ShoppingCart`クラスへのデータ アクセスは、処理、`CartItem`テーブル。</span><span class="sxs-lookup"><span data-stu-id="b297a-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="b297a-168">クラスは、追加、削除、および、ショッピング カートにアイテムを更新するビジネス ロジックも含まれます。</span><span class="sxs-lookup"><span data-stu-id="b297a-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="b297a-169">追加する、ショッピング カート ロジックを次の操作を管理する機能が含まれます。</span><span class="sxs-lookup"><span data-stu-id="b297a-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="b297a-170">ショッピング カートにアイテムを追加します。</span><span class="sxs-lookup"><span data-stu-id="b297a-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="b297a-171">ショッピング カートからアイテムの削除</span><span class="sxs-lookup"><span data-stu-id="b297a-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="b297a-172">ショッピング カート ID を取得します。</span><span class="sxs-lookup"><span data-stu-id="b297a-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="b297a-173">ショッピング カートから項目を取得します。</span><span class="sxs-lookup"><span data-stu-id="b297a-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="b297a-174">ショッピング カートのすべての項目の量の合計</span><span class="sxs-lookup"><span data-stu-id="b297a-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="b297a-175">ショッピング カートのデータの更新</span><span class="sxs-lookup"><span data-stu-id="b297a-175">Updating the shopping cart data</span></span>

<span data-ttu-id="b297a-176">買い物カゴのページ (*後*)、ショッピング カートのデータにアクセスする、ショッピング カート クラスを一緒に使用されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="b297a-177">ユーザーがショッピング カートに追加するすべての項目は、買い物カゴのページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="b297a-178">さらに、ショッピング カートのページとクラス、ページを作成します (*AddToCart.aspx*) 製品をショッピング カートに追加します。</span><span class="sxs-lookup"><span data-stu-id="b297a-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="b297a-179">コードを追加、 *ProductList.aspx*ページおよび*ProductDetails.aspx*ページへのリンクを提供する、 *AddToCart.aspx*  ページで、ユーザーを追加できるようにショッピング カートに製品です。</span><span class="sxs-lookup"><span data-stu-id="b297a-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="b297a-180">次の図は、ユーザーがショッピング カートに製品を追加するときに発生する基本的なプロセスを示します。</span><span class="sxs-lookup"><span data-stu-id="b297a-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![ショッピング カートのショッピング カートに追加します。](shopping-cart/_static/image3.png)

<span data-ttu-id="b297a-182">ユーザーがクリックしたとき、 **Add To Cart**いずれかのリンク、 *ProductList.aspx*ページまたは*ProductDetails.aspx*  ページで、アプリケーションに移動、 *AddToCart.aspx*ページし、自動的に、*後*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="b297a-183">*AddToCart.aspx*ページは製品に追加を選択、ショッピング カート ShoppingCart クラスのメソッドを呼び出しています。</span><span class="sxs-lookup"><span data-stu-id="b297a-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="b297a-184">*後*ページ ショッピング カートに追加されている製品が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="b297a-185">ショッピング カート クラスを作成します。</span><span class="sxs-lookup"><span data-stu-id="b297a-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="b297a-186">`ShoppingCart`クラスは、モデル (Models フォルダー)、(ルート フォルダー) のページおよびロジック (ロジック フォルダー) を明確に区別があるように、アプリケーション内の別のフォルダーに追加されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="b297a-187">**ソリューション エクスプ ローラー**を右クリックし、 **WingtipToys**プロジェクトし、選択**追加**-&gt;**新しいフォルダー**.</span><span class="sxs-lookup"><span data-stu-id="b297a-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="b297a-188">新しいフォルダーの名前を付けます*ロジック*です。</span><span class="sxs-lookup"><span data-stu-id="b297a-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="b297a-189">右クリックし、*ロジック*クリックしてフォルダー**追加** - &gt; **新しい項目の**します。</span><span class="sxs-lookup"><span data-stu-id="b297a-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="b297a-190">という新しいクラス ファイルを追加*ShoppingCartActions.cs*です。</span><span class="sxs-lookup"><span data-stu-id="b297a-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="b297a-191">既定のコードを次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="b297a-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="b297a-192">`AddToCart`メソッドにより、製品に基づいて、ショッピング カートに含まれる個々 の製品`ID`です。</span><span class="sxs-lookup"><span data-stu-id="b297a-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="b297a-193">製品は、カートに追加またはカートが既にその製品の項目を含んでいる場合、数量がインクリメントされます。</span><span class="sxs-lookup"><span data-stu-id="b297a-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="b297a-194">`GetCartId`メソッドを返します、カート`ID`ユーザー。</span><span class="sxs-lookup"><span data-stu-id="b297a-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="b297a-195">カート`ID`ユーザーがショッピング カートに入っている項目を追跡するために使用します。</span><span class="sxs-lookup"><span data-stu-id="b297a-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="b297a-196">ユーザーが既存のカート`ID`、新しいカート`ID`それらに作成されました。</span><span class="sxs-lookup"><span data-stu-id="b297a-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="b297a-197">ユーザーがカート登録済みのユーザーとしてサインインしているかどうかは`ID`がユーザー名に設定されています。</span><span class="sxs-lookup"><span data-stu-id="b297a-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="b297a-198">ただし、ユーザーがカートに署名されていない場合`ID`が一意の値 (GUID) に設定します。</span><span class="sxs-lookup"><span data-stu-id="b297a-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="b297a-199">GUID により、セッションに基づく、各ユーザーの 1 つしかをカートが作成されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="b297a-200">`GetCartItems`メソッド ショッピング カート項目、ユーザーの一覧を返します。</span><span class="sxs-lookup"><span data-stu-id="b297a-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="b297a-201">このチュートリアルの後半で項目を表示する、カート ショッピング カートを使用して、モデル バインディングが使用されることを確認は、`GetCartItems`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="b297a-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="b297a-202">カートに追加機能の作成</span><span class="sxs-lookup"><span data-stu-id="b297a-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="b297a-203">名前付き処理ページを作成する、前述のように、 *AddToCart.aspx*ユーザーのショッピング カートに新製品の追加に使用されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="b297a-204">このページが呼び出す、`AddToCart`メソッドで、`ShoppingCart`先ほど作成したクラスです。</span><span class="sxs-lookup"><span data-stu-id="b297a-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="b297a-205">*AddToCart.aspx*ページを必要とする製品`ID`に渡されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="b297a-206">この製品`ID`呼び出しに使用される、`AddToCart`メソッドで、`ShoppingCart`クラスです。</span><span class="sxs-lookup"><span data-stu-id="b297a-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b297a-207">分離コードを変更する (*AddToCart.aspx.cs*) のこのページでは、ページの UI ではなく (*AddToCart.aspx*)。</span><span class="sxs-lookup"><span data-stu-id="b297a-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>


#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="b297a-208">カートに追加を作成する機能。</span><span class="sxs-lookup"><span data-stu-id="b297a-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="b297a-209">**ソリューション エクスプ ローラー**を右クリックし、 **WingtipToys**プロジェクトで、をクリックして**追加** - &gt; **新しい項目の**します。</span><span class="sxs-lookup"><span data-stu-id="b297a-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="b297a-210">**[新しい項目の追加]** ダイアログ ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="b297a-211">標準の新しいページ (Web フォーム) をという名前のアプリケーションに追加*AddToCart.aspx*です。</span><span class="sxs-lookup"><span data-stu-id="b297a-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![ショッピング カートの Web フォームの追加](shopping-cart/_static/image4.png)
3. <span data-ttu-id="b297a-213">**ソリューション エクスプ ローラー**を右クリックし、 *AddToCart.aspx*ページし、をクリックして**コードの表示**です。</span><span class="sxs-lookup"><span data-stu-id="b297a-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="b297a-214">*AddToCart.aspx.cs*分離コード ファイルがエディターで開きます。</span><span class="sxs-lookup"><span data-stu-id="b297a-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="b297a-215">既存のコードを置き換える、 *AddToCart.aspx.cs*に次のコードの分離。</span><span class="sxs-lookup"><span data-stu-id="b297a-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="b297a-216">ときに、 *AddToCart.aspx*ページが読み込まれる、製品`ID`クエリ文字列から取得されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="b297a-217">次に、ショッピング カート クラスのインスタンスが作成され、呼び出しに使用するが、`AddToCart`このチュートリアルで先ほど追加したメソッドにします。</span><span class="sxs-lookup"><span data-stu-id="b297a-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="b297a-218">`AddToCart`メソッドに含まれている、 *ShoppingCartActions.cs*ファイルを選択した製品をショッピング カートに追加または選択した製品の製品の数量をインクリメントするためのロジックが含まれています。</span><span class="sxs-lookup"><span data-stu-id="b297a-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="b297a-219">製品を追加する場合は、製品をショッピング カートに追加されていない、`CartItem`データベースのテーブルです。</span><span class="sxs-lookup"><span data-stu-id="b297a-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="b297a-220">製品は既にショッピング カートに追加されており、ユーザーが、同じ製品のアイテムを追加、製品の数量が大きくで、`CartItem`テーブル。</span><span class="sxs-lookup"><span data-stu-id="b297a-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="b297a-221">ページが最後に、リダイレクト、*後*ユーザーがカート内の項目の更新された一覧に表示されます、次の手順で追加するページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="b297a-222">既に触れましたが、ユーザー`ID`特定のユーザーに関連付けられている製品を識別するために使用します。</span><span class="sxs-lookup"><span data-stu-id="b297a-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="b297a-223">これは、`ID`内の行を追加、`CartItem`表に、ユーザーがショッピング カートに商品を追加するたびにします。</span><span class="sxs-lookup"><span data-stu-id="b297a-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="b297a-224">ショッピング カート UI を作成します。</span><span class="sxs-lookup"><span data-stu-id="b297a-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="b297a-225">*後*ページ、ユーザーがショッピング カートに追加する製品が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="b297a-226">追加、削除、および、ショッピング カートにアイテムを更新する機能も提供されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="b297a-227">**ソリューション エクスプ ローラー**を右クリックして**WingtipToys**をクリックして**追加** - &gt; **新しい項目の**します。</span><span class="sxs-lookup"><span data-stu-id="b297a-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="b297a-228">**[新しい項目の追加]** ダイアログ ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="b297a-229">選択すると、マスター ページを含む新しいページ (Web フォーム) を追加**マスター ページを使用して Web フォーム**です。</span><span class="sxs-lookup"><span data-stu-id="b297a-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="b297a-230">新しいページの名前を付けます*後*です。</span><span class="sxs-lookup"><span data-stu-id="b297a-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="b297a-231">選択**Site.Master**に新しく作成されたマスター ページをアタッチする*.aspx*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="b297a-232">*後* ページで、既存のマークアップを次のマークアップに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="b297a-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="b297a-233">*後*ページが含まれています、 **GridView**という名前のコントロール`CartList`です。</span><span class="sxs-lookup"><span data-stu-id="b297a-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="b297a-234">このコントロールでは、モデル バインディングを使用して、ショッピング カートのデータをデータベースからバインドを**GridView**コントロール。</span><span class="sxs-lookup"><span data-stu-id="b297a-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="b297a-235">設定すると、`ItemType`のプロパティ、 **GridView**制御、データ バインディング式`Item`で使用できるは、コントロールとコントロールのマークアップが厳密に型指定します。</span><span class="sxs-lookup"><span data-stu-id="b297a-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="b297a-236">詳細を選択できますで既に述べたようこのチュートリアルのシリーズ、`Item`オブジェクトの IntelliSense を使用します。</span><span class="sxs-lookup"><span data-stu-id="b297a-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="b297a-237">設定するデータを選択するモデル バインドを使用するデータ コントロールを構成するのには`SelectMethod`コントロールのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="b297a-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="b297a-238">上記のマークアップでは、設定、`SelectMethod`の一覧を返す GetShoppingCartItems メソッドを使用して`CartItem`オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="b297a-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="b297a-239">**GridView**データ コントロールを選択し、ページのライフ サイクルの適切なタイミングで、メソッドを呼び出し、返されたデータを自動的にバインドします。</span><span class="sxs-lookup"><span data-stu-id="b297a-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="b297a-240">`GetShoppingCartItems`メソッドを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b297a-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="b297a-241">ショッピング カートのアイテムを取得します。</span><span class="sxs-lookup"><span data-stu-id="b297a-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="b297a-242">次に、コードを追加、 *ShoppingCart.aspx.cs*分離コードを取得し、ショッピング カート UI を作成します。</span><span class="sxs-lookup"><span data-stu-id="b297a-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="b297a-243">**ソリューション エクスプ ローラー**を右クリックし、*後*ページし、をクリックして**コードの表示**です。</span><span class="sxs-lookup"><span data-stu-id="b297a-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="b297a-244">*ShoppingCart.aspx.cs*分離コード ファイルがエディターで開きます。</span><span class="sxs-lookup"><span data-stu-id="b297a-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="b297a-245">既存のコードを次のコードに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="b297a-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="b297a-246">、上記のように、`GridView`データの制御呼び出し、`GetShoppingCartItems`ページ ライフで適切なタイミングでメソッドが順番に表示して、返されたデータを自動的にバインドします。</span><span class="sxs-lookup"><span data-stu-id="b297a-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="b297a-247">`GetShoppingCartItems`メソッドのインスタンスを作成、`ShoppingCartActions`オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="b297a-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="b297a-248">呼び出すことによって、カートにアイテムを返す次に、コードがそのインスタンスを使用して、`GetCartItems`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="b297a-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="b297a-249">ショッピング カートに商品を追加します。</span><span class="sxs-lookup"><span data-stu-id="b297a-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="b297a-250">ときにいずれか、 *ProductList.aspx*または*ProductDetails.aspx*ページが表示されたら、ユーザーは、リンクを使用して、ショッピング カートに製品を追加することになります。</span><span class="sxs-lookup"><span data-stu-id="b297a-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="b297a-251">リンクをクリックすると、アプリケーション ページに移動する、処理という*AddToCart.aspx*です。</span><span class="sxs-lookup"><span data-stu-id="b297a-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="b297a-252">*AddToCart.aspx*ページが呼び出す、`AddToCart`メソッドで、`ShoppingCart`このチュートリアルで先ほど追加したクラスです。</span><span class="sxs-lookup"><span data-stu-id="b297a-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="b297a-253">ここに追加、**をカートに追加**両方へのリンク、 *ProductList.aspx*ページおよび*ProductDetails.aspx*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="b297a-254">このリンクは、製品、`ID`データベースから取得されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="b297a-255">**ソリューション エクスプ ローラー**を検索してという名前のページを開く*ProductList.aspx*です。</span><span class="sxs-lookup"><span data-stu-id="b297a-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="b297a-256">黄色で強調表示のマークアップを追加、 *ProductList.aspx*ページ全体のページが次のように表示されるようにします。</span><span class="sxs-lookup"><span data-stu-id="b297a-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="b297a-257">ショッピング カートのテスト</span><span class="sxs-lookup"><span data-stu-id="b297a-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="b297a-258">ショッピング カートに製品を追加する方法を表示するアプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="b297a-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="b297a-259">**F5** キーを押してアプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="b297a-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="b297a-260">プロジェクトが、データベースを再作成した後、ブラウザーが開き、表示、 *Default.aspx*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="b297a-261">選択**車**ナビゲーション メニューのカテゴリ。</span><span class="sxs-lookup"><span data-stu-id="b297a-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="b297a-262">*ProductList.aspx* 「自動車」カテゴリに含まれる製品のみが表示されたページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![ショッピング カートの自動車](shopping-cart/_static/image5.png)
3. <span data-ttu-id="b297a-264">クリックして、**をカートに追加**最初の製品の横にあるリンク (変換 car) を一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="b297a-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="b297a-265">*後*ページが表示されたら、ショッピング カートの選択範囲を表示します。</span><span class="sxs-lookup"><span data-stu-id="b297a-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![ショッピング カートのカート](shopping-cart/_static/image6.png)
4. <span data-ttu-id="b297a-267">その他の製品を選択して表示**平面**ナビゲーション メニューのカテゴリ。</span><span class="sxs-lookup"><span data-stu-id="b297a-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="b297a-268">クリックして、**をカートに追加**表示されている最初の製品の横にあるリンクします。</span><span class="sxs-lookup"><span data-stu-id="b297a-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="b297a-269">*後*ページには、追加の項目が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="b297a-270">ブラウザーを閉じます。</span><span class="sxs-lookup"><span data-stu-id="b297a-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="b297a-271">計算し、注文の合計を表示します。</span><span class="sxs-lookup"><span data-stu-id="b297a-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="b297a-272">追加の製品をショッピング カートに追加するだけでなく、`GetTotal`メソッドを`ShoppingCart`クラスし、買い物カゴのページで注文金額の合計を表示します。</span><span class="sxs-lookup"><span data-stu-id="b297a-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="b297a-273">**ソリューション エクスプ ローラー**を開き、 *ShoppingCartActions.cs*ファイルで、*ロジック*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="b297a-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="b297a-274">次の追加`GetTotal`に黄色で強調表示されているメソッド、`ShoppingCart`クラス、クラスは次のように表示されるようにします。</span><span class="sxs-lookup"><span data-stu-id="b297a-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="b297a-275">最初に、`GetTotal`メソッドは、ユーザーのショッピング カートの ID を取得します。</span><span class="sxs-lookup"><span data-stu-id="b297a-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="b297a-276">そのメソッドでは、カートに各製品の製品の数量が製品価格を乗算することによって合計カートの内容を取得します。</span><span class="sxs-lookup"><span data-stu-id="b297a-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b297a-277">上記のコードでは、null 許容型を使用して"`int?`"です。</span><span class="sxs-lookup"><span data-stu-id="b297a-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="b297a-278">Null 許容型では、すべての値の基になる型として、また、null 値を表すことができます。</span><span class="sxs-lookup"><span data-stu-id="b297a-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="b297a-279">詳細については、「 [null 許容型を使用して](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx)です。</span><span class="sxs-lookup"><span data-stu-id="b297a-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>


### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="b297a-280">ショッピング カート表示を変更します。</span><span class="sxs-lookup"><span data-stu-id="b297a-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="b297a-281">次のコードを変更、*後*ページから呼び出すこと、`GetTotal`メソッドと上の合計を表示、*後*ページが読み込まれるページします。</span><span class="sxs-lookup"><span data-stu-id="b297a-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="b297a-282">**ソリューション エクスプ ローラー**を右クリックし、*後*ページし、選択**コードの表示**です。</span><span class="sxs-lookup"><span data-stu-id="b297a-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="b297a-283">*ShoppingCart.aspx.cs*ファイル、更新、`Page_Load`黄色で強調表示されている次のコードを追加することによってハンドラー。</span><span class="sxs-lookup"><span data-stu-id="b297a-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="b297a-284">ときに、*後*ページが読み込まれる、ショッピング カート オブジェクトをロードし、呼び出すことによって、ショッピング カートの合計を取得、`GetTotal`のメソッド、`ShoppingCart`クラスです。</span><span class="sxs-lookup"><span data-stu-id="b297a-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="b297a-285">ショッピング カートの内容が空の場合、メッセージが表示が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="b297a-286">ショッピング カートの合計金額をテストします。</span><span class="sxs-lookup"><span data-stu-id="b297a-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="b297a-287">できましていないのみに追加する方法、製品、ショッピング カートを表示するアプリケーションを実行しますが、ショッピング カートの合計金額を表示できます。</span><span class="sxs-lookup"><span data-stu-id="b297a-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="b297a-288">**F5** キーを押してアプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="b297a-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="b297a-289">ブラウザーが開き、表示、 *Default.aspx*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="b297a-290">選択**車**ナビゲーション メニューのカテゴリ。</span><span class="sxs-lookup"><span data-stu-id="b297a-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="b297a-291">クリックして、 **Add To Cart**最初の製品の横にあるリンクします。</span><span class="sxs-lookup"><span data-stu-id="b297a-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="b297a-292">*後*ページには、注文の合計が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![ショッピング カートのカートの合計金額](shopping-cart/_static/image7.png)
4. <span data-ttu-id="b297a-294">その他の製品の一部 (たとえば、平面) をカートに追加します。</span><span class="sxs-lookup"><span data-stu-id="b297a-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="b297a-295">*後*ページには、追加したすべての製品の更新後の合計が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![ショッピング カートの複数の製品](shopping-cart/_static/image8.png)
6. <span data-ttu-id="b297a-297">ブラウザー ウィンドウを閉じるには、実行中のアプリを停止します。</span><span class="sxs-lookup"><span data-stu-id="b297a-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="b297a-298">ショッピング カートに更新プログラムとチェック アウトのボタンの追加</span><span class="sxs-lookup"><span data-stu-id="b297a-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="b297a-299">追加、ショッピング カートを変更するユーザーを許可するのに、**更新**ボタンおよび**チェック アウト**買い物カゴのページをクリックします。</span><span class="sxs-lookup"><span data-stu-id="b297a-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="b297a-300">**チェック アウト**ボタンは、このチュートリアルのシリーズに進むまでは使用されません。</span><span class="sxs-lookup"><span data-stu-id="b297a-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="b297a-301">**ソリューション エクスプ ローラー**を開き、*後* ページで、web アプリケーション プロジェクトのルートです。</span><span class="sxs-lookup"><span data-stu-id="b297a-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="b297a-302">追加する、**更新**ボタンをクリックし、**チェック アウト** ボタンをクリックして、*後*ページで、既存のマークアップを黄色で強調表示するマークアップを追加で示すように、次のコード:</span><span class="sxs-lookup"><span data-stu-id="b297a-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="b297a-303">ユーザーがクリックしたとき、**更新** ボタン、`UpdateBtn_Click`イベント ハンドラーが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="b297a-304">このイベント ハンドラーでは、次の手順で追加するコードを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="b297a-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="b297a-305">次に含まれるコードを更新することができます、 *ShoppingCart.aspx.cs*カート項目と呼び出しをループするファイル、`RemoveItem`と`UpdateItem`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="b297a-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="b297a-306">**ソリューション エクスプ ローラー**を開き、 *ShoppingCart.aspx.cs* web アプリケーション プロジェクトのルートにあるファイルです。</span><span class="sxs-lookup"><span data-stu-id="b297a-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="b297a-307">黄色で強調表示されている次のコード セクションを追加、 *ShoppingCart.aspx.cs*ファイル。</span><span class="sxs-lookup"><span data-stu-id="b297a-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="b297a-308">ユーザーがクリックしたとき、**更新**のボタンでは、*後* ページで、UpdateCartItems メソッドが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="b297a-309">UpdateCartItems メソッドは、ショッピング カート内の各項目を更新する値を取得します。</span><span class="sxs-lookup"><span data-stu-id="b297a-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="b297a-310">UpdateCartItems メソッドを呼び出して、`UpdateShoppingCartDatabase`メソッド (追加され、次の手順で説明) を追加するか、ショッピング カートから項目を削除します。</span><span class="sxs-lookup"><span data-stu-id="b297a-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="b297a-311">ショッピング カートへの更新を反映するように、データベースを更新したら、 **GridView**買い物カゴのページで呼び出すことによってコントロールが更新された、`DataBind`のメソッド、 **GridView**です。</span><span class="sxs-lookup"><span data-stu-id="b297a-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="b297a-312">また、買い物カゴのページで注文の合計量は項目の更新されたリストを反映するように更新されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="b297a-313">更新やショッピング カートの項目を削除</span><span class="sxs-lookup"><span data-stu-id="b297a-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="b297a-314">*後* ページで、アイテムの数量を更新し、項目を削除するためのコントロールの追加確認できます。</span><span class="sxs-lookup"><span data-stu-id="b297a-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="b297a-315">これで、これらのコントロール動作を構成するコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="b297a-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="b297a-316">**ソリューション エクスプ ローラー**を開き、 *ShoppingCartActions.cs*ファイルで、*ロジック*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="b297a-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="b297a-317">黄色で強調表示されている次のコードを追加、 *ShoppingCartActions.cs*クラス ファイル。</span><span class="sxs-lookup"><span data-stu-id="b297a-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="b297a-318">`UpdateShoppingCartDatabase`から呼び出されるメソッド、`UpdateCartItems`メソッドを*ShoppingCart.aspx.cs*  ページで、更新するか、ショッピング カートから項目を削除するためのロジックが含まれています。</span><span class="sxs-lookup"><span data-stu-id="b297a-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="b297a-319">`UpdateShoppingCartDatabase`メソッドは、ショッピング カート リスト内のすべての行を反復処理します。</span><span class="sxs-lookup"><span data-stu-id="b297a-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="b297a-320">ショッピング カートのアイテムが削除されるマークされてまたは数量が 1 より小さい場合、`RemoveItem`メソッドが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="b297a-321">ショッピング カート項目がチェックされるそれ以外の場合、更新プログラムの場合、`UpdateItem`メソッドが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="b297a-322">ショッピング カートのアイテムが削除されたか、更新、データベースの変更は保存されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="b297a-323">`ShoppingCartUpdates`ショッピング カートのすべての項目を保持する構造体が使用されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="b297a-324">`UpdateShoppingCartDatabase`メソッドを使用、`ShoppingCartUpdates`構造を更新または削除する必要がかどうか、項目のいずれかあるを判断します。</span><span class="sxs-lookup"><span data-stu-id="b297a-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="b297a-325">次のチュートリアルでは使用して、`EmptyCart`製品を購入した後、ショッピングを消去するメソッドがカートです。</span><span class="sxs-lookup"><span data-stu-id="b297a-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="b297a-326">ここでは、使用するが、`GetCount`に追加したメソッド、 *ShoppingCartActions.cs*ファイル、ショッピング カート内の項目の数を調べることです。</span><span class="sxs-lookup"><span data-stu-id="b297a-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="b297a-327">ショッピング カート カウンターの追加</span><span class="sxs-lookup"><span data-stu-id="b297a-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="b297a-328">ユーザーに、ショッピング カートにアイテムの合計数を表示するに追加するカウンターを*Site.Master*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="b297a-329">このカウンターは、ショッピング カートへのリンクとしても機能します。</span><span class="sxs-lookup"><span data-stu-id="b297a-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="b297a-330">**ソリューション エクスプ ローラー**を開き、 *Site.Master*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="b297a-331">黄色で示したナビゲーション セクションに次のように表示されるように、ショッピング カート カウンターのリンクを追加することで、マークアップを変更します。</span><span class="sxs-lookup"><span data-stu-id="b297a-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="b297a-332">分離コードを次に、更新、 *Site.Master.cs*次のように、黄色で強調表示コードを追加することによってファイル。</span><span class="sxs-lookup"><span data-stu-id="b297a-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="b297a-333">ページは HTML としてレンダリングされる前に、`Page_PreRender`イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="b297a-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="b297a-334">`Page_PreRender`ハンドラー、ショッピング カートの合計数が呼び出すことによって決まりますが、`GetCount`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="b297a-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="b297a-335">返される値に追加、`cartCount`スパンのマークアップに含まれる、 *Site.Master*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="b297a-336">`<span>`タグにより、正常にレンダリングされる内部の要素。</span><span class="sxs-lookup"><span data-stu-id="b297a-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="b297a-337">サイトの任意のページが表示されたら、ショッピング カートの合計金額が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="b297a-338">ユーザーには、ショッピング カートの合計金額、ショッピング カートを表示するクリックもできます。</span><span class="sxs-lookup"><span data-stu-id="b297a-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="b297a-339">完了したショッピング カートのテスト</span><span class="sxs-lookup"><span data-stu-id="b297a-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="b297a-340">今すぐアプリケーションを追加する方法を表示、削除、および更新アイテムは、ショッピング カートで実行できます。</span><span class="sxs-lookup"><span data-stu-id="b297a-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="b297a-341">ショッピング カートの合計金額、ショッピング カート内のすべての項目の総コストが反映されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="b297a-342">**F5** キーを押してアプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="b297a-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="b297a-343">ブラウザーが開き、表示、 *Default.aspx*ページ。</span><span class="sxs-lookup"><span data-stu-id="b297a-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="b297a-344">選択**車**ナビゲーション メニューのカテゴリ。</span><span class="sxs-lookup"><span data-stu-id="b297a-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="b297a-345">クリックして、 **Add To Cart**最初の製品の横にあるリンクします。</span><span class="sxs-lookup"><span data-stu-id="b297a-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="b297a-346">*後*ページには、注文の合計が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b297a-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="b297a-347">選択**平面**ナビゲーション メニューのカテゴリ。</span><span class="sxs-lookup"><span data-stu-id="b297a-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="b297a-348">クリックして、 **Add To Cart**最初の製品の横にあるリンクします。</span><span class="sxs-lookup"><span data-stu-id="b297a-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="b297a-349">3 に、ショッピング カート内の最初の項目の数量を設定し、選択、**アイテムの削除**2 番目の項目のチェック ボックスをオンします。<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="b297a-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="b297a-350">クリックして、**更新**買い物カゴのページを更新および新しい注文の合計を表示するボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="b297a-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![ショッピング カートの買い物カゴの更新](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="b297a-352">まとめ</span><span class="sxs-lookup"><span data-stu-id="b297a-352">Summary</span></span>

<span data-ttu-id="b297a-353">このチュートリアルでは、Wingtip Toys Web フォーム サンプル アプリケーションのショッピング カートを作成しました。</span><span class="sxs-lookup"><span data-stu-id="b297a-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="b297a-354">このチュートリアルでは、Entity Framework Code First、データ注釈、厳密に型指定されたデータ コントロール、およびモデル バインディングを使用しています。</span><span class="sxs-lookup"><span data-stu-id="b297a-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="b297a-355">ショッピング カートには、追加、削除、およびユーザーが注文書の選択項目の更新がサポートしています。</span><span class="sxs-lookup"><span data-stu-id="b297a-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="b297a-356">ショッピング カートの項目を表示する方法を習得買い物カゴの機能を実装するだけでなく、 **GridView**を制御し、注文の合計を計算します。</span><span class="sxs-lookup"><span data-stu-id="b297a-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

## <a name="addition-information"></a><span data-ttu-id="b297a-357">追加情報</span><span class="sxs-lookup"><span data-stu-id="b297a-357">Addition Information</span></span>

[<span data-ttu-id="b297a-358">ASP.NET セッション状態の概要</span><span class="sxs-lookup"><span data-stu-id="b297a-358">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/library/ms178581.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="b297a-359">[前へ](display_data_items_and_details.md)
[次へ](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="b297a-359">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
