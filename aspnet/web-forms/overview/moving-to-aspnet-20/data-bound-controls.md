---
uid: web-forms/overview/moving-to-aspnet-20/data-bound-controls
title: "データ バインド コントロール |Microsoft ドキュメント"
author: microsoft
description: "ASP.NET アプリケーションの大半は、ある程度のバックエンド データ ソースからデータの表示に依存します。 データ バインド コントロールには、相互作用 w のきわめて重要な部分をされている."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2005
ms.topic: article
ms.assetid: 0e23ff32-646d-43f3-8bec-6b2313d3abd6
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/data-bound-controls
msc.type: authoredcontent
ms.openlocfilehash: 3ebb0f9a7a2f071b7bf7aa3855920f1a5784a61f
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/10/2017
---
<a name="data-bound-controls"></a>データ バインド コントロール
====================
によって[Microsoft](https://github.com/microsoft)

> ASP.NET アプリケーションの大半は、ある程度のバックエンド データ ソースからデータの表示に依存します。 データ バインド コントロールには、動的な Web アプリケーション内のデータとの対話のきわめて重要な部分をされています。 ASP.NET 2.0 には、新しい BaseDataBoundControl クラス宣言の構文を含む、データ バインド コントロールにいくつかの重要な機能強化が導入されています。


ASP.NET アプリケーションの大半は、ある程度のバックエンド データ ソースからデータの表示に依存します。 データ バインド コントロールには、動的な Web アプリケーション内のデータとの対話のきわめて重要な部分をされています。 ASP.NET 2.0 には、新しい BaseDataBoundControl クラス宣言の構文を含む、データ バインド コントロールにいくつかの重要な機能強化が導入されています。

BaseDataBoundControl は DataBoundControl クラスと HierarchicalDataBoundControl クラスの基底クラスとして機能します。 このモジュールでは、DataBoundControl から派生する次のクラスについて説明します。

- AdRotator
- リスト コントロール
- GridView
- フォーム ビュー
- DetailsView

HierarchicalDataBoundControl クラスから派生する次のクラスについても説明します。

- TreeView
- メニュー
- サイト マップ パス

## <a name="databoundcontrol-class"></a>DataBoundControl クラス

DataBoundControl クラスは、抽象クラス (VB で MustInherit マーク) テーブルと対話するため、またはリスト形式のデータ。 次のコントロールは、DataBoundControl から派生したコントロールのいくつかを示します。

## <a name="adrotator"></a>AdRotator

AdRotator コントロールでは、特定の URL にリンクされている Web ページにグラフィック バナーを表示することができます。 コントロールのプロパティを使用して表示される画像を回転します。 使用して、ページに表示する特定の ad の頻度を構成することができます、**インプレッション**キーワード フィルターを使用して、プロパティ、広告をフィルターできます。

データは、AdRotator コントロールは、XML ファイルまたはテーブルをデータベースで使用します。 次の属性は、AdRotator 制御を構成する XML ファイルで使用されます。

### <a name="imageurl"></a>ImageUrl
Ad に対して表示するイメージの URL です。

### <a name="navigateurl"></a>NavigateUrl
Ad がクリックされたときに実行されるユーザーの URL。 これにより、エンコードされた URL でなければなりません。

### <a name="alternatetext"></a>AlternateText
ツールヒントに表示され、スクリーン リーダーによって読み取られるされる代替テキストです。 ImageUrl で指定されたイメージが利用できない場合にも表示されます。

### <a name="keyword"></a>キーワード
キーワードのフィルタ リングを使用する場合に使用できるキーワードを定義します。 指定した場合は、キーワード フィルターに一致するキーワードを使用して広告だけが表示されます。

### <a name="impressions"></a>インプレッション
特定の広告が現れる可能性がありますがどのくらいの頻度を決定する重み付けの数です。 これは、他の広告、同じファイル内の印象相対パスです。 XML ファイル内のすべての広告の集団インプレッション数の最大値は 2,048,000,000 1 です。

### <a name="height"></a>高さ
ピクセル単位での ad の高さ。

### <a name="width"></a>幅
ピクセル単位での ad の幅。


> [!NOTE]
> 高さと幅の属性は、AdRotator コントロール自体の幅と高さをオーバーライドします。


一般的な XML ファイルは、次のようになります。

[!code-xml[Main](data-bound-controls/samples/sample1.xml)]

上記の例では、Contoso の ad はインプレッション属性の値により、ASP.NET Web サイトの ad として表示される可能性があるでは 2 回です。

上記の XML ファイルから広告を表示するページに AdRotator コントロールを追加し、設定、 **AdvertisementFile**プロパティを次に示すように、XML ファイルをポイントします。

[!code-aspx[Main](data-bound-controls/samples/sample2.aspx)]

AdRotator コントロールのデータ ソースとして、データベース テーブルを使用することを選択する場合は、最初に、次のスキーマを使用してデータベースを設定する必要があります。

| **列名** | **データ型** | **説明** |
| --- | --- | --- |
| ID | int | 主キー。 この列は、任意の名前を持つことができます。 |
| ImageUrl | nvarchar (*長さ*) | 相対パスまたは絶対 URL、イメージの広告を表示します。 |
| NavigateUrl | nvarchar (*長さ*) | 広告のターゲット URL です。 値を指定しない場合、ad はこのハイパーリンクではありません。 |
| AlternateText | nvarchar (*長さ*) | イメージが見つからない場合に表示されるテキスト。 一部のブラウザーでは、テキストはツールヒントとして表示されます。 代替テキストは、ユーザーが、グラフィックの説明を読み上げるに聞こえるようににもユーザー補助のため使用されます。 |
| キーワード | nvarchar (*長さ*) | ページのフィルター処理できます ad のカテゴリです。 |
| インプレッション | int(4) | 広告の表示頻度の確率値を示す数です。 大きい方の数、頻度が高く、広告が表示されます。 XML ファイル内のすべてのインプレッション値の合計は 2,048,000,000 1 を超えないことがあります。 |
| 幅 | int(4) | ピクセル単位でイメージの幅。 |
| 高さ | int(4) | ピクセルの画像の高さ。 |

別のスキーマを持つデータベースが既にある場合、使用することができます、 **AlternateTextField**、 **ImageUrlField**、および**NavigateUrlField**プロパティにマップする、既存のデータベースに AdRotator 属性。 AdRotator コントロールで、データベースからデータを表示するページにデータ ソース コントロールを追加、データ ソース コントロールのデータベースを指す接続文字列を構成して、AdRotator コントロールの設定**DataSourceID**プロパティは、データ ソース コントロールの ID です。 AdRotator 広告をプログラムで構成する必要がある場合、AdCreated イベントを使用します。 AdCreated イベントは、2 つのパラメーターです。いずれかのオブジェクト、および、その他の AdCreatedEventArgs のインスタンス。 AdCreatedEventArgs では、作成される ad への参照です。

次のコード スニペット ImageUrl、NavigateUrl、および AlternateText 広告をプログラムによって設定します。

[!code-csharp[Main](data-bound-controls/samples/sample3.cs)]

## <a name="list-controls"></a>リスト コントロール

リスト コントロールには、リスト ボックス、DropDownList、CheckBoxList、RadioButtonList、および BulletedList が含まれます。 データ ソースにバインドされたデータの各コントロールができます。 データ ソースの表示テキストとして 1 つのフィールドを使用し、項目の値として 2 番目のフィールドを使用できます必要に応じて。 項目がデザイン時に、静的に追加することもでき、スタティック アイテムとデータ ソースから追加動的アイテムを混在させることができます。

データをリスト コントロールのバインドをページにデータ ソース コントロールを追加します。 データ ソース コントロールの SELECT コマンドを指定し、データ ソース コントロールの ID には、リスト コントロールの DataSourceID プロパティを設定します。 使用して、 **DataTextField**と**DataValueField**プロパティを表示するテキストとコントロールの値を定義します。 また、使用することができます、 **DataTextFormatString**プロパティは次のように表示するテキストの外観を制御します。

| **式** | **説明** |
| --- | --- |
| Price: {0:C} | データの数値/10 進数です。 リテラルが表示されます"Price:"に続けて通貨書式の数字です。 通貨形式のカルチャ属性で指定されたカルチャ設定に依存、**ページ**ディレクティブまたは Web.config ファイルにします。 |
| {0:D4} | 整数データです。 10 進数では使用できません。 幅 4 文字である 0 が埋め込まれたフィールドに整数を表示します。 |
| {0:N2}% | 数値データです。 2 桁の数値を表示有効桁数の末尾にリテラル「%」です。 |
| {0:000.0} | データの数値/10 進数です。 小数点以下 1 桁に丸めて表示します。 3 桁に満たない場合はゼロで埋めます。 |
| {0:D} | 日付/時刻のデータです。 長い日付形式 (「木曜日、August 06, 1996」) を表示します。 使用される日付の形式は、ページまたは Web.config ファイルのカルチャ設定によって決まります。 |
| {0:d} | 日付/時刻のデータです。 短い形式の日付が表示されます (「12/31/99」) を書式設定します。 |
| {0:yy-MM-dd} | 日付/時刻のデータです。 数値の年-月-日形式 (96-08-06) で日付を表示します。 |

## <a name="gridview"></a>GridView

GridView コントロールは、表形式データの表示と編集宣言型の方法を使用して、DataGrid コントロールに代わるものです。 GridView コントロールの次の機能を利用します。

- SqlDataSource などのソース コントロールのデータにバインドします。
- 組み込みの並べ替え機能します。
- 組み込みの更新と機能を削除します。
- 組み込みのページング機能。
- 組み込みの行の選択機能。
- プロパティを動的に設定する GridView オブジェクト モデルへのプログラムによるアクセスは、イベントを処理したりなどです。
- 複数のキー フィールドです。
- ハイパーリンク列の複数のデータ フィールドです。
- テーマとスタイルを使用した外観のカスタマイズ。

**列フィールド**

GridView コントロール内の各列は DataControlField オブジェクトによって表されます。 既定では、AutoGenerateColumns プロパティに設定が**true**、データ ソースの各フィールドの AutoGeneratedField オブジェクトを作成します。 各フィールドはそのデータ ソース内の各フィールドが表示される順序での GridView コントロールの列として表示されます。 フィールドに表示する列を制御することができますも手動で、 **GridView**コントロールを設定して、 **AutoGenerateColumns**プロパティを**false**し、次に、独自列フィールドのコレクションです。 別の列フィールドの種類は、コントロール内の列の動作を決定します。

次の表は、使用できる別の列フィールドの種類を一覧表示します。

| **列フィールドの種類** | **説明** |
| --- | --- |
| BoundField | データ ソースのフィールドの値を表示します。 これは、GridView コントロールの既定の列の型です。 |
| ButtonField | GridView コントロール内の各項目に対してコマンド ボタンを表示します。 これにより、追加または削除 ボタンなどのカスタム ボタン コントロールの列を作成することができます。 |
| CheckBoxField | GridView コントロール内の各項目のチェック ボックスを表示します。 通常、この列フィールドの種類は、ブール値を持つフィールドを表示する場合に使用されます。 |
| CommandField | 定義済みの選択、編集、または削除の各操作を実行するコマンド ボタンを表示します。 |
| HyperLinkField | ハイパーリンクとして、データ ソースのフィールドの値を表示します。 この列のフィールド型では、2 番目のフィールドをハイパーリンクの URL にバインドすることができます。 |
| ImageField | GridView コントロール内の各項目のイメージを表示します。 |
| TemplateField | ユーザー定義コンテンツ項目ごとに、指定したテンプレートに応じて GridView コントロールに表示します。 この列のフィールド型では、列のカスタム フィールドを作成することができます。 |

列のフィールド コレクションを宣言して定義するに最初に追加の開閉**&lt;列&gt;**開始タグと終了タグの GridView コントロールの間のタグ。 次に、開始タグと終了の間に挿入する列フィールドを一覧表示**&lt;列&gt;**タグ。 指定した列が表示されている順序で列コレクションに追加されます。 **列**コレクションはすべて、列は、コントロール内のフィールドおよび GridView コントロールの列フィールドをプログラムで管理することができますを格納します。

明示的に宣言された列のフィールドは、自動的に生成された列のフィールドと共に表示できます。 両方を使用する場合に最初に明示的に宣言された列のフィールドがレンダリング後に自動的に生成される列フィールドがされます。

## <a name="binding-to-data"></a>データへのバインド

GridView コントロールをデータ ソース コントロールにバインドできる (など**SqlDataSource**、 **ObjectDataSource**など) に任意のデータ ソース、System.Collections.IEnumerable を実装すると、インターフェイス (System.Data.DataView、System.Collections.ArrayList、または System.Collections.Hashtable)。 GridView コントロールを適切なデータ ソースの種類にバインドするのにには、次のいずれかを使用します。

- データ ソース コントロールにバインドするには、データ ソース コントロールの ID 値を GridView コントロールの DataSourceID プロパティを設定します。 GridView コントロールは自動的に指定されたデータ ソース コントロールにバインドし、活用できるデータ ソース コントロールの機能を並べ替え、更新、削除、およびページング機能を実行します。 これは、データにバインドする推奨される方法です。
- は、System.Collections.IEnumerable インターフェイスを実装するデータ ソースにバインドするには、プログラムでデータ ソースに GridView コントロールの DataSource プロパティを設定し、DataBind メソッドを呼び出します。 このメソッドを使用して、組み込みの並べ替え、更新、削除すると、ページング機能および GridView コントロールは提供されません。 この機能を提供する必要があります。

## <a name="data-operations"></a>データ操作

GridView コントロールは、並べ替え、更新、削除、選択、およびコントロール内の項目を複数のページをユーザーに許可する多くの組み込み機能を提供します。 GridView コントロールがデータ ソース コントロールにバインドされている場合、GridView コントロールは、データ ソース コントロールの機能を活用し、自動並べ替え、更新、および削除する機能を提供できます。

> [!NOTE]
> GridView コントロールは、並べ替え、更新、およびその他の種類のデータ ソースを使用した削除のサポートを提供できます。ただし、これらの操作の実装に適切なイベント ハンドラーを提供する必要があります。


並べ替えにより、ユーザーを列のヘッダーをクリックして、特定の列に関して GridView コントロール内の項目を並べ替えます。 並べ替えを有効にする AllowSorting プロパティを設定**true**です。

ときにボタン、自動更新、削除、および選択機能を有効にする**ButtonField**または**TemplateField** "Edit"、「削除」、"Select"のコマンド名で、列のフィールドそれぞれをクリックします。 GridView コントロールが自動的に追加、 **CommandField**列フィールドで、編集、削除、またはにAutoGenerateEditButton、AutoGenerateDeleteButton、またはAutoGenerateSelectButtonプロパティが設定されている場合、選択ボタン**true**、それぞれします。

> [!NOTE]
> データ ソースへのレコードの挿入は直接サポートされていません GridView コントロールによってです。 ただし、DetailsView と共に GridView コントロールまたはフォーム ビュー コントロールを使用してレコードを挿入することができます。


データ ソース内のすべてのレコードを表示する、同時に、代わりには、複数のページ レコードを GridView コントロールが自動的に分割できます。 ページングを有効にするに AllowPaging プロパティを設定します。 **true**です。

## <a name="customizing-the-user-interface"></a>ユーザー インターフェイスのカスタマイズ

GridView コントロールの外観をカスタマイズするには、コントロールのさまざまな部分のスタイル プロパティを設定します。 次の表は、異なるスタイル プロパティを一覧表示します。

| **スタイル プロパティ** | **説明** |
| --- | --- |
| AlternatingRowStyle | GridView コントロールに交互のデータ行のスタイルの設定。 RowStyle 設定間で切り替えると、データ行を表示するこのプロパティが設定されている場合、 **AlternatingRowStyle**設定します。 |
| EditRowStyle | GridView コントロールで編集されている行のスタイルの設定。 |
| EmptyDataRowStyle | データ ソースにいくつかのレコードが含まれていない場合に、GridView コントロールに表示される、空のデータ行のスタイルの設定。 |
| 後 | GridView コントロールのフッター行のスタイルの設定。 |
| 後 | GridView コントロールのヘッダー行のスタイルの設定。 |
| PagerStyle | GridView コントロールのページャー行のスタイルの設定。 |
| RowStyle | GridView コントロール内のデータ行のスタイルの設定。 ときに、 **AlternatingRowStyle**でもプロパティが設定、データ行の間で切り替えると表示、 **RowStyle**設定と**AlternatingRowStyle**設定します。 |
| SelectedRowStyle | GridView コントロールで選択した行のスタイルの設定。 |

コントロールのさまざまな部分を非表示を切り替えることができますも。 次の表は、どの部分を表示または非表示を制御するプロパティを一覧表示します。

| **Property** | **説明** |
| --- | --- |
| ShowFooter | GridView コントロールのフッター セクションの表示と非表示を切り替えます。 |
| ShowHeader | GridView コントロールのヘッダー セクションの表示と非表示を切り替えます。 |

### <a name="events"></a>イベント

GridView コントロールは、ユーザーがプログラムをいくつかのイベントを提供します。 これにより、イベントが発生するたびに、カスタムのルーチンを実行することができます。 次の表には、GridView コントロールでサポートされているイベントが一覧表示します。

| **Event** | **説明** |
| --- | --- |
| PageIndexChanged | GridView コントロールは、ページング操作を処理した後、ページャー ボタンのいずれかがクリックされたときに発生します。 このイベントは通常、ユーザーがコントロール内の別のページに移動した後にタスクを実行する必要がある場合に使用します。 |
| PageIndexChanging | ページャー ボタンのいずれかをクリックするが GridView の前にコントロールは、ページング操作を処理と発生します。 このイベントは、ページング操作を取り消すよく使用されます。 |
| RowCancelingEdit | 行の [キャンセル] ボタンをクリックするが GridView コントロールの前に終了します。 編集モードと発生します。 このイベントは、キャンセル操作を停止するよく使用されます。 |
| RowCommand | GridView コントロールのボタンがクリックされたときに発生します。 このイベントは、コントロールにボタンがクリックされたときにタスクを実行する多くの場合、使用します。 |
| RowCreated | GridView コントロールの新しい行が作成されるときに発生します。 このイベントは内容を変更する、行の行が作成されたときによく使用されます。 |
| RowDataBound | データ行が GridView コントロールのデータにバインドされている場合に発生します。 このイベントは、行がデータにバインドされている場合、行の内容を変更するのによく使用されます。 |
| RowDeleted | GridView コントロールがデータ ソースからレコードを削除した後、行の削除 ボタンがクリックされたときに発生します。 このイベントは、削除操作の結果の確認によく使用されます。 |
| RowDeleting | 行の削除 ボタンをクリックするが GridView の前にコントロールがデータ ソースからレコードを削除すると発生します。 このイベントは削除操作をキャンセルによく使用されます。 |
| RowEditing | 行の編集 ボタンをクリックするが GridView の前にコントロールが編集モードに入ると発生します。 このイベントは、編集操作を取り消すよく使用されます。 |
| RowUpdated | GridView コントロールの行が更新後に、行の更新 ボタンがクリックされたときに発生します。 このイベントは、更新操作の結果の確認によく使用されます。 |
| RowUpdating | 行の更新ボタンをクリックするが GridView の前に、コントロールは行を更新すると発生します。 このイベントは、更新操作を取り消すよく使用されます。 |
| SelectedIndexChanged | GridView コントロールは、select 操作を処理した後、行の選択 ボタンがクリックされたときに発生します。 このイベントは、コントロールで行を選択した後にタスクを実行する多くの場合、使用します。 |
| SelectedIndexChanging | 行の選択 ボタンをクリックするが GridView の前にコントロールが選択操作を処理と発生します。 このイベントは、選択操作を取り消すよく使用されます。 |
| 並べ替え | GridView コントロールは、並べ替え操作を処理した後は、列の並べ替えにハイパーリンクがクリックされたときに発生します。 このイベントは通常、ユーザーが列を並べ替えるへのハイパーリンクをクリックした後にタスクを実行するに使用します。 |
| 並べ替え | 列の並べ替えにハイパーリンクをクリックするが GridView の前にコントロールが並べ替え操作を処理と発生します。 このイベントは、並べ替え操作を取り消すまたはカスタムの並べ替えルーチンを実行するによく使用されます。 |

## <a name="formview"></a>フォーム ビュー

フォーム ビュー コントロールを使用して、データ ソースから 1 つのレコードを表示します。 これは似ていますが DetailsView コントロールに行のフィールドではなく、ユーザー定義のテンプレートが表示されます。 独自のテンプレートを作成することより柔軟なデータの表示方法を制御するがします。 FormView コントロールには、次の機能がサポートされています。

- SqlDataSource ObjectDataSource などのソース コントロールをデータにバインドします。
- 組み込みの挿入機能します。
- 組み込みの更新と機能を削除します。
- 組み込みのページング機能。
- プロパティを動的に設定する FormView オブジェクト モデルへのプログラムによるアクセスは、イベントを処理したりなどです。
- ユーザー定義のテンプレート、テーマ、およびスタイルを使用した外観のカスタマイズ。

## <a name="templates"></a>テンプレート

フォーム ビュー コントロールにコンテンツを表示するには、コントロールのさまざまな部分のテンプレートを作成する必要があります。 ほとんどのテンプレートは、省略可能です。ただし、コントロールが構成されているモード用のテンプレートを作成する必要があります。 たとえば、レコードの挿入をサポートする FormView コントロールには、定義されている挿入項目テンプレートが必要です。 次の表には、作成できるさまざまなテンプレートが一覧表示します。

| **テンプレートの種類** | **説明** |
| --- | --- |
| EditItemTemplate | FormView コントロールが編集モードの場合は、データ行のコンテンツを定義します。 通常、このテンプレートには、入力コントロールとするユーザーが既存のレコードの編集に使用できるコマンド ボタンが含まれます。 |
| EmptyDataTemplate | FormView コントロールがいくつかのレコードがないデータ ソースにバインドされている場合に表示される空のデータ行のコンテンツを定義します。 通常、このテンプレートには、データ ソースにいくつかのレコードが含まれていないことをユーザーにアラートを生成するコンテンツが含まれます。 |
| FooterTemplate | フッター行のコンテンツを定義します。 通常、このテンプレートには、フッター行に表示するには、追加のコンテンツが含まれます。 代わりに、単に FooterText プロパティを設定してフッター行に表示するテキストを指定できます。 |
| HeaderTemplate | ヘッダー行のコンテンツを定義します。 通常、このテンプレートには、ヘッダー行に表示するには、追加のコンテンツが含まれます。 代わりに、単に HeaderText プロパティを設定して、ヘッダー行に表示するテキストを指定できます。 |
| ItemTemplate | FormView コントロールが読み取り専用モードの場合は、データ行のコンテンツを定義します。 通常、このテンプレートには、既存のレコードの値を表示するコンテンツが含まれます。 |
| 後 | FormView コントロールが挿入モードの場合は、データ行のコンテンツを定義します。 通常、このテンプレートには、入力コントロールと使用するユーザーが新しいレコードを追加できるコマンド ボタンが含まれます。 |
| 後 | ページング機能が有効になっているときに表示されるページャー行のコンテンツを定義します (AllowPaging プロパティに設定するときに**true**)。 このテンプレートには、通常、使用するユーザーが別のレコードに移動できるコントロールが含まれます。 |

項目テンプレートの編集と挿入項目テンプレートの入力コントロールは、双方向のバインド式を使用して、データ ソースのフィールドにバインドできます。 これにより、自動的に更新プログラムの入力コントロールの値を抽出または挿入操作に FormView 制御できます。 双方向のバインド式は、入力コントロールを自動的に元のフィールド値を表示する編集項目テンプレートのこともできます。

### <a name="binding-to-data"></a>データへのバインド

フォーム ビュー コントロールをデータ ソース コントロールにバインドできる (など**SqlDataSource**、AccessDataSource、 **ObjectDataSource**など)、またはを実装する任意のデータ ソース、(System.Data.DataView、System.Collections.ArrayList、System.Collections.Hashtable など) では、System.Collections.IEnumerable インターフェイスです。 FormView コントロールを適切なデータ ソースの種類にバインドするのにには、次のいずれかを使用します。

- をデータ ソース コントロールにバインドするには、データ ソース コントロールの ID 値を、フォーム ビュー コントロールの DataSourceID プロパティを設定します。 FormView コントロールは自動的に指定されたデータ ソース コントロールにバインドし、活用できるデータ ソース コントロールの機能を挿入、更新、削除、およびページング機能を実行します。 これは、データにバインドする推奨される方法です。
- 実装するデータ ソースにバインドする、**では、System.Collections.IEnumerable**インターフェイス、プログラムでデータ ソースに、フォーム ビュー コントロールの DataSource プロパティを設定およびデータ バインド メソッドを呼び出します。 このメソッドを使用して、組み込みの挿入、更新、削除、およびページング機能 FormView コントロールは提供されません。 適切なイベントを使用してこの機能を提供する必要があります。

## <a name="data-operations"></a>データ操作

FormView コントロールは、更新、削除、挿入、およびコントロール内の項目を複数のページをユーザーに許可する多くの組み込み機能を提供します。 FormView コントロールがデータ ソース コントロールにバインドされている場合、FormView コントロールは、データ ソース コントロールの機能を活用し、自動更新、削除、挿入すると、ページング機能および提供できます。 FormView コントロールは、update、delete、insert、およびその他の種類のデータ ソースのページング操作のサポートを提供できます。ただし、これらの操作の実装で、適切なイベント ハンドラーを提供する必要があります。

FormView コントロールは、テンプレートを使用するための更新、削除、または挿入操作を実行するコマンド ボタンを自動的に生成する方法を行いません。 これらのコマンド ボタンは、適切なテンプレートに手動で含める必要があります。 FormView コントロールを持つ特定のボタンを認識してその**CommandName**プロパティが特定の値に設定します。 次の表は、フォーム ビュー コントロールによって認識されるコマンド ボタンを一覧表示します。

| **Button** | **Commandname 値** | **説明** |
| --- | --- | --- |
| キャンセル | [キャンセル] | 操作をキャンセルして、ユーザーが入力した値を破棄する更新操作または挿入に使用されます。 FormView コントロールは、DefaultMode プロパティによって指定されたモードに戻ります。 |
| 削除 | "削除" | データ ソースから表示されているレコードを削除する削除操作で使用します。 ItemDeleting と ItemDeleted イベントを発生させます。 |
| 編集 | "Edit" | FormView コントロールを編集モードに配置するのには、更新操作で使用されます。 指定されたコンテンツ、 **EditItemTemplate**データ行のプロパティが表示されます。 |
| 挿入 | "Insert" | 挿入操作で、ユーザーが指定した値を使用して、データ ソースに新しいレコードを挿入しようとするために使用します。 ItemInserting と ItemInserted イベントを発生させます。 |
| 新規作成 | "New" | フォーム ビュー コントロールを挿入モードに配置するのには、挿入操作で使用します。 指定されたコンテンツ、**後**データ行のプロパティが表示されます。 |
| ページ | "Page" | ページング操作でページングを実行する、ページャー ボタンを表すために使用します。 ページング操作を指定するには、設定、 **CommandArgument** [次へ]、「前」、"First"、「最新」、または移動先ページのインデックスにあるボタンのプロパティです。 PageIndexChanging と PageIndexChanged イベントを発生させます。 |
| 更新 | [更新] | 更新操作で、ユーザーが指定した値を使用して、データ ソースに表示されているレコードを更新しようとするために使用します。 ItemUpdating と ItemUpdated イベントを発生させます。 |

削除とは異なりボタン (を削除する、表示されているレコードすぐに)、[編集] または [新規] ボタンがクリックされたときにコントロールが編集になる FormView またはモードをそれぞれ挿入します。 コンテンツを編集モードに含まれている、 **EditItemTemplate**現在のデータ項目のプロパティが表示されます。 通常、項目テンプレートの編集は [編集] ボタンに置き換えられる更新プログラムが、[キャンセル] ボタンをクリックするように定義されます。 (テキスト ボックスやチェック ボックス コントロール) のフィールドのデータ型に対応する入力コントロールは、ユーザーを変更するためのフィールドの値を持つ通常も表示されます。 キャンセル ボタンをクリックすると、すべての変更を放棄中に、データ ソースのレコードを更新更新 をクリックします。

含まれるコンテンツ同様に、**後**コントロールが挿入モードの場合、データ項目のプロパティが表示されます。 挿入項目テンプレートは通常、Insert ステートメントや、[キャンセル] ボタンには、新しいボタンが置き換えられます、空の入力コントロールでは、新しいレコードの値を入力するユーザーが表示されるになるように定義されます。 キャンセル ボタンをクリックすると、すべての変更を放棄中に、データ ソースのレコードを挿入挿入 ボタンをクリックします。

フォーム ビュー コントロールでは、ユーザーがデータ ソースの他のレコードに移動するページング機能を提供します。 有効な場合、ページ ナビゲーション コントロールを含むフォーム ビュー コントロールのページャー行が表示されます。 ページングを有効にするには設定、 **AllowPaging**プロパティを**true**です。 ページャー行をカスタマイズするには、PagerStyle に含まれるオブジェクトのプロパティと PagerSettings プロパティを設定します。 組み込みのページャー行 UI を使用して、代わりを使用して、独自の UI を作成することができます、**後**プロパティです。

## <a name="customizing-the-user-interface"></a>ユーザー インターフェイスのカスタマイズ

コントロールのさまざまな部分のスタイル プロパティを設定して、FormView コントロールの外観をカスタマイズできます。 次の表は、異なるスタイル プロパティを一覧表示します。

| **スタイル プロパティ** | **説明** |
| --- | --- |
| EditRowStyle | フォーム ビュー コントロールがデータ行のスタイルの設定は編集モードです。 |
| EmptyDataRowStyle | データ ソースにいくつかのレコードが含まれていない場合に、フォーム ビュー コントロールに表示される、空のデータ行のスタイルの設定。 |
| 後 | フォーム ビュー コントロールのフッター行のスタイルの設定。 |
| 後 | FormView コントロールのヘッダー行のスタイルの設定。 |
| InsertRowStyle | フォーム ビュー コントロールがデータ行のスタイルの設定は、モードを挿入します。 |
| PagerStyle | ページング機能が有効な場合に、フォーム ビュー コントロールに表示されるページャーのスタイルの設定。 |
| RowStyle | FormView コントロールが読み取り専用モードの場合、データ行のスタイルの設定。 |

## <a name="events"></a>イベント

フォーム ビュー コントロールでは、ユーザーがプログラムをいくつかのイベントを提供します。 これにより、イベントが発生するたびに、カスタムのルーチンを実行することができます。 次の表には、フォーム ビュー コントロールでサポートされているイベントが一覧表示します。

| **Event** | **説明** |
| --- | --- |
| ItemCommand | フォーム ビュー コントロール内のボタンがクリックされたときに発生します。 このイベントは、コントロールにボタンがクリックされたときにタスクを実行する多くの場合、使用します。 |
| ItemCreated | FormView コントロールで FormViewRow のすべてのオブジェクトが作成された後に発生します。 このイベントが表示される前に、レコードの値を変更する多くの場合、使用します。 |
| ItemDeleted | [削除] ボタンのときに発生 (ボタンがその**CommandName**プロパティが"Delete"に設定) をクリックして FormView コントロールがデータ ソースからレコードを削除した後です。 このイベントは、削除操作の結果の確認によく使用されます。 |
| ItemDeleting | [削除] ボタンをクリックするが FormView する前にコントロールがデータ ソースからレコードを削除すると発生します。 このイベントは、削除操作を取り消すよく使用されます。 |
| ItemInserted | 場合に、[挿入] ボタン (ボタンをその**CommandName**プロパティを"Insert"に設定) がクリックされた FormView コントロールは、レコードを挿入した後です。 このイベントは、挿入操作の結果の確認によく使用されます。 |
| ItemInserting | 挿入ボタンをクリックするが FormView する前に、コントロールは、レコードを挿入します。 ときに発生します。 このイベントは、挿入操作を取り消すよく使用されます。 |
| ItemUpdated | 更新ボタンときに発生 (ボタンがその**CommandName**プロパティが「更新」に設定) をクリックして FormView コントロールの行が更新した後です。 このイベントは、更新操作の結果の確認によく使用されます。 |
| ItemUpdating | 更新ボタンをクリックするが FormView する前に、コントロールは、レコードを更新すると発生します。 このイベントは、更新操作を取り消すよく使用されます。 |
| ModeChanged | FormView コントロールがモードを変更した後に発生 (編集、挿入、または読み取り専用モードに)。 このイベントは、フォーム ビュー コントロールがモードを変更したときにタスクを実行するよく使用されます。 |
| ModeChanging | FormView コントロールがモードを変更する前に発生 (編集、挿入、または読み取り専用モードに)。 このイベントは、モードの変更をキャンセルよく使用されます。 |
| PageIndexChanged | FormView コントロールは、ページング操作を処理した後、ページャー ボタンのいずれかがクリックされたときに発生します。 このイベントは通常、ユーザーがコントロール内の別のレコードに移動した後にタスクを実行する必要がある場合に使用します。 |
| PageIndexChanging | ページャー ボタンのいずれかをクリックするが FormView する前にコントロールは、ページング操作を処理と発生します。 このイベントは、ページング操作を取り消すよく使用されます。 |

## <a name="detailsview"></a>DetailsView

DetailsView コントロールでは、テーブルにデータ ソースから 1 つのレコードを表示するテーブルの行で、レコードの各フィールドを表示する場所がされます。 マスター/詳細シナリオの GridView コントロールと組み合わせて使用できます。 DetailsView コントロールには、次の機能がサポートされています。

- SqlDataSource などのソース コントロールのデータにバインドします。
- 組み込みの挿入機能します。
- 組み込みの更新と機能を削除します。
- 組み込みのページング機能。
- プロパティを動的に設定する DetailsView オブジェクト モデルへのプログラムによるアクセスは、イベントを処理したりなどです。
- テーマとスタイルを使用した外観のカスタマイズ。

## <a name="row-fields"></a>行フィールド

DetailsView コントロール内の各データ行は、フィールドのコントロールを宣言することによって作成されます。 行フィールドの種類は、コントロール内の行の動作を決定します。 フィールド コントロールは DataControlField から派生します。 次の表は、使用できる行のフィールドの種類を一覧表示します。

| **列フィールドの種類** | **説明** |
| --- | --- |
| BoundField | データ ソースのフィールドの値をテキストとして表示します。 |
| ButtonField | DetailsView コントロール内のコマンド ボタンを表示します。 これにより、追加または削除 ボタンなどのカスタム ボタン コントロールで行を表示することができます。 |
| CheckBoxField | DetailsView コントロールでチェック ボックスを表示します。 通常、この行のフィールド型はブール値を持つフィールドを表示する使用されます。 |
| CommandField | 組み込みのコマンドを表示、編集を実行するボタンの挿入、または DetailsView コントロール内で操作を削除します。 |
| HyperLinkField | ハイパーリンクとして、データ ソースのフィールドの値を表示します。 この行のフィールド型では、2 番目のフィールドをハイパーリンクの URL にバインドすることができます。 |
| ImageField | DetailsView コントロールにイメージを表示します。 |
| TemplateField | ユーザー定義コンテンツを指定したテンプレートに応じて DetailsView コントロール内の行に表示します。 この行のフィールド型では、行のカスタム フィールドを作成することができます。 |

既定では、AutoGenerateRows プロパティに設定が**true**、データ ソースにバインド可能な型の各フィールドにバインドされる行のフィールド オブジェクトを自動的に生成します。 有効なバインド可能な型は、文字列、DateTime、Decimal、Guid、およびプリミティブ型のセットです。 行には、各フィールドは、データ ソース内の各フィールドが表示される順序でのテキストとして表示されます。

行を自動的に生成するレコード内のすべてのフィールドの表示を迅速かつ簡単な方法を提供します。 ただし、DetailsView を使用するコントロールの最先端の機能 DetailsView コントロール内に含める行のフィールドを明示的に宣言する必要があります。 行フィールドを宣言し、最初に設定する、 **AutoGenerateRows**プロパティを**false**です。 次に、追加の開閉**&lt;フィールド&gt;**開始タグと終了タグの DetailsView コントロールの間のタグ。 最後に、開始タグと終了の間に挿入する行フィールドを一覧表示**&lt;フィールド&gt;**タグ。 指定された行のフィールドは、この順で、フィールド コレクションに追加されます。 **フィールド**コレクションでは、プログラムで DetailsView コントロール内の行のフィールドを管理することができます。

> [!NOTE]
> 行のフィールドが Fields コレクションに追加されませんが自動的に生成されます。


## <a name="binding-to-data"></a>データへのバインド

DetailsView コントロールをなど、データ ソース コントロールにバインドできる**SqlDataSource**または AccessDataSource、または System.Data.DataView など、System.Collections.IEnumerable インターフェイスを実装する任意のデータ ソースSystem.Collections.ArrayList と System.Collections.Hashtable です。

DetailsView コントロールを適切なデータ ソースの種類にバインドするのにには、次のいずれかを使用します。

- データ ソース コントロールにバインドするには、データ ソース コントロールの ID 値を DetailsView コントロールの DataSourceID プロパティを設定します。 DetailsView コントロールは、指定されたデータ ソース コントロールに自動的にバインドします。 これは、データにバインドする推奨される方法です。
- 実装するデータ ソースにバインドする、**では、System.Collections.IEnumerable**インターフェイス、プログラムでデータ ソースに DetailsView コントロールの DataSource プロパティを設定および DataBind メソッドを呼び出します。

## <a name="security"></a>セキュリティ

このコントロールは、悪意のあるクライアント スクリプトが含まれる可能性があります、ユーザー入力を表示する使用できます。 スクリプトの実行可能ファイル、SQL ステートメント、またはその他のコードをアプリケーションに表示する前に、クライアントから送信される情報を確認します。 ASP.NET は、入力要求の検証機能があり、ユーザー入力の中のスクリプトのブロックと HTML を提供します。

## <a name="data-operations"></a>データ操作

DetailsView コントロールは、更新、削除、挿入、およびコントロール内の項目を複数のページをユーザーに許可する組み込みの機能を提供します。 DetailsView コントロールがデータ ソース コントロールにバインドされている場合、DetailsView コントロールは、データ ソース コントロールの機能を活用し、自動更新、削除、挿入すると、ページング機能および提供できます。

DetailsView コントロールは、update、delete、insert、およびその他の種類のデータ ソースのページング操作のサポートを提供できます。ただし、適切なイベント ハンドラーでこれらの操作の実装を提供する必要があります。

DetailsView コントロールが自動的に追加、 **CommandField** にAutoGenerateEditButton、AutoGenerateDeleteButton、またはAutoGenerateInsertButtonプロパティを設定して、編集、削除、または新規ボタンで行フィールド**true**、それぞれします。 削除とは異なりボタン (を削除する選択したレコードすぐに)、[編集] または [新規] ボタンがクリックされたときにコントロールが編集になる DetailsView またはモードをそれぞれ挿入します。 編集モードで、[編集] ボタンは、更新プログラムが、[キャンセル] ボタンに置き換えられます。 (テキスト ボックスやチェック ボックス コントロール) のフィールドのデータ型に対応する入力コントロールには、ユーザーが変更するためのフィールドの値が表示されます。 キャンセル ボタンをクリックすると、すべての変更を放棄中に、データ ソースのレコードを更新更新 をクリックします。 同様に、挿入モードでは、新しいボタンが Insert ステートメントや、[キャンセル] ボタンと置き換え、新しいレコードの値を入力するユーザーに対して空の入力コントロールが表示されます。

DetailsView コントロールでは、ユーザーがデータ ソースの他のレコードに移動するページング機能を提供します。 有効にすると、ページ ナビゲーション コントロールは、ページャー行に表示されます。 ページングを有効にするに AllowPaging プロパティを設定します。 **true**です。 ページャー行をカスタマイズするには、PagerStyle と PagerSettings のプロパティを使用します。

## <a name="customizing-the-user-interface"></a>ユーザー インターフェイスのカスタマイズ

DetailsView コントロールの外観をカスタマイズするには、コントロールのさまざまな部分のスタイル プロパティを設定します。 次の表は、異なるスタイル プロパティを一覧表示します。

| **スタイル プロパティ** | **説明** |
| --- | --- |
| AlternatingRowStyle | DetailsView コントロールに交互のデータ行のスタイルの設定。 RowStyle 設定間で切り替えると、データ行を表示するこのプロパティが設定されている場合、 **AlternatingRowStyle**設定します。 |
| CommandRowStyle | DetailsView コントロールの組み込みコマンド ボタンを含む行のスタイルの設定。 |
| EditRowStyle | DetailsView コントロールがデータ行のスタイルの設定は編集モードです。 |
| EmptyDataRowStyle | データ ソースにいくつかのレコードが含まれていない場合に、DetailsView コントロールに表示される、空のデータ行のスタイルの設定。 |
| 後 | DetailsView コントロールのフッター行のスタイルの設定。 |
| 後 | DetailsView コントロールのヘッダー行のスタイルの設定。 |
| InsertRowStyle | DetailsView コントロールがデータ行のスタイルの設定は、モードを挿入します。 |
| PagerStyle | DetailsView コントロールのページャー行のスタイルの設定。 |
| RowStyle | DetailsView コントロール内のデータ行のスタイルの設定。 ときに、 **AlternatingRowStyle**でもプロパティが設定、データ行の間で切り替えると表示、 **RowStyle**設定と**AlternatingRowStyle**設定します。 |
| FieldHeaderStyle | DetailsView コントロールのヘッダーの列のスタイルの設定。 |

## <a name="events"></a>イベント

DetailsView コントロールは、ユーザーがプログラムをいくつかのイベントを提供します。 これにより、イベントが発生するたびに、カスタムのルーチンを実行することができます。 次の表には、DetailsView コントロールでサポートされているイベントが一覧表示します。 DetailsView コントロールがこれらのイベントをその基本クラスからも継承: データ バインド、データ バインド、Disposed、Init、Load、PreRender、およびレンダリングします。

| **Event** | **説明** |
| --- | --- |
| ItemCommand | DetailsView コントロールにボタンがクリックされたときに発生します。 |
| ItemCreated | DetailsView コントロールで DetailsViewRow のすべてのオブジェクトが作成された後に発生します。 このイベントが表示される前に、レコードの値を変更する多くの場合、使用します。 |
| ItemDeleted | DetailsView コントロールがデータ ソースからレコードを削除した後、[削除] ボタンがクリックされたときに発生します。 このイベントは、削除操作の結果の確認によく使用されます。 |
| ItemDeleting | [削除] ボタンをクリックするが DetailsView の前にコントロールがデータ ソースからレコードを削除すると発生します。 このイベントは、削除操作を取り消すよく使用されます。 |
| ItemInserted | DetailsView コントロールは、レコードを挿入した後は、[挿入] ボタンがクリックされたときに発生します。 このイベントは、挿入操作の結果の確認によく使用されます。 |
| ItemInserting | 挿入ボタンをクリックするが DetailsView の前に、コントロールは、レコードを挿入します。 ときに発生します。 このイベントは、挿入操作を取り消すよく使用されます。 |
| ItemUpdated | DetailsView コントロールの行が更新後は、[更新] ボタンがクリックされたときに発生します。 このイベントは、更新操作の結果の確認によく使用されます。 |
| ItemUpdating | 場合に更新 ボタンをクリックすると、DetailsView の前に、コントロールは、レコードを更新します。 このイベントは、更新操作を取り消すよく使用されます。 |
| ModeChanged | DetailsView コントロールは、モード (編集、挿入、または読み取り専用モード) を変更した後に発生します。 このイベントは、DetailsView コントロールがモードを変更したときにタスクを実行する多くの場合、使用します。 |
| ModeChanging | DetailsView コントロール (編集、挿入、または読み取り専用モード) のモードを変更する前に発生します。 このイベントは、モードの変更をキャンセルよく使用されます。 |
| PageIndexChanged | DetailsView コントロールは、ページング操作を処理した後、ページャー ボタンのいずれかがクリックされたときに発生します。 このイベントは通常、ユーザーがコントロール内の別のレコードに移動した後にタスクを実行する必要がある場合に使用します。 |
| PageIndexChanging | ページャー ボタンのいずれかをクリックするが DetailsView の前にコントロールは、ページング操作を処理と発生します。 このイベントは、ページング操作を取り消すよく使用されます。 |

## <a name="the-menu-control"></a>メニュー コントロール

ナビゲーションの全機能を備えたシステムには、ASP.NET 2.0 では、メニュー コントロールは設計されています。 データ バインドされた、SiteMapDataSource などの階層的なデータ ソースを簡単に使用できます。

メニュー コントロール構造体は宣言または動的に定義されていることができ、単一のルート ノードとサブ ノードの任意の数で構成されます。 次のコードは、宣言によって、メニュー コントロールのメニューを定義します。

[!code-aspx[Main](data-bound-controls/samples/sample4.aspx)]

上記の例では、Home.aspx ノードは、ルート ノードです。 その他のすべてのノードは、さまざまなレベルのルート ノード内に入れ子にします。

メニュー コントロールが表示できる; メニューの 2 種類があります。静的メニューおよび動的メニュー。 静的なメニューは、常に表示されるメニュー項目で構成されます。 動的メニューは、ユーザーがマウスを使用してその上に置く場合は、のみ表示されるメニュー項目で構成されます。 顧客は、宣言によって定義されているメニューと静的なメニューや実行時にデータ バインドは、メニューと動的メニューに多くの場合と混同可能性があります。 実際には、動的および静的なメニューでは、母集団のメソッドに関連しません。 条項*静的*と*動的*ユーザーが何らかのアクションを実行したときに表示するかどうか、メニューは、静的に既定で表示されている唯一のみを参照します。

**StaticDisplayLevels**プロパティは、メニューのレベル数は、静的でそのため、既定で表示されている構成に使用します。 上記の例では、設定、 **StaticDisplayLevels**プロパティを 2 の値には、[ホーム] ノード、[音楽] ノードおよび映画ノードを静的に表示するメニューになります。 その他のすべてのノードが動的に表示されます、ユーザーが、親ノード上に置いたとき。

**MaximumDynamicDisplayLevels**最大数を設定するプロパティの動的なレベルのメニューは表示できます。 指定された値より高いレベルで動的メニュー、 **MaximumDynamicDisplayLevels**プロパティは破棄されます。

> [!NOTE]
> ほとんどが確認できていること、メニューが MaximumDynamicDisplayLevels プロパティのために表示するために表示されない状況が発生した可能性があります。 ような場合、プロパティが設定されるように十分に顧客メニューの表示に使用できるようにします。


## <a name="data-binding-the-menu-control"></a>データ バインド メニュー コントロール

メニュー コントロールは、SiteMapDataSource または指定された xmldatasource 上などの任意の階層的なデータ ソースにバインドできます。 SiteMapDataSource は、最も一般的に使用メソッド メニュー コントロールへのデータ バインディングの Web.sitemap ファイルからフィード、およびそのスキーマには、メニュー コントロールに既知の API が用意されていますのでです。 以下のリストは、単純な Web.sitemap ファイルを示しています。

[!code-xml[Main](data-bound-controls/samples/sample5.xml)]

要素が存在しない 1 つしかルート siteMapNode、ここでは、ホーム要素に注意してください。 いくつかの属性は、各 siteMapNode 用に構成できます。 最もよく使用される属性は次のとおりです。

- **url**ユーザーがメニュー項目をクリックしたときに表示される URL を指定します。 この属性が存在しない場合、クリックされたときに、ノードが投稿だけです。
- **タイトル**メニュー項目に表示されるテキストを指定します。
- **説明**ノードのドキュメントとして使用します。 ノードの上にマウスが置かれているときに、ツール ヒントとしても表示します。
- **siteMapFile**では、入れ子になったサイト マップします。 この属性は、整形式の ASP.NET サイト マップ ファイルを指す必要があります。
- **ロール**ノードの外観では、ASP.NET セキュリティ トリミングで制御します。

これらの属性は省略可能ですが、メニューの動作可能性がありますしないように指定されていない場合に期待されるに注意してください。 たとえば場合、 *url*属性が指定されてですが、*説明*属性は、ノードは表示されませんおよびは行われません指定された URL に移動できるようにします。

## <a name="controlling-a-menus-operation"></a>メニューの操作を制御します。

ASP.NET のメニュー、コントロールの動作に影響するいくつかのプロパティします。**向き**プロパティ、 **DisappearAfter**プロパティ、 **StaticItemFormatString**プロパティ、および**StaticPopoutImageUrl**プロパティは、これらの一部を示します。

- **向き**設定できるいずれかに*水平*または*垂直*して静的メニュー項目が、行、または垂直方向に水平方向にレイアウトし、時に積み上げかどうかを制御1 つ別。 このプロパティは、動的メニューには影響しません。
- **DisappearAfter**プロパティ構成がどのくらいの時間動的メニューを表示しておく、マウスがされた後に他の場所に移動します。 値は、ミリ秒、既定値は 500 で指定されます。 このプロパティ値の-1 を設定しないで自動的に非表示には、メニューになります。 その場合は、メニューのみされなくなります、メニューの外部で、ユーザーがクリックしたとき。
- **StaticItemFormatString**プロパティにより、簡単にメニュー システムで一貫性のある文字化けしますを維持します。 このプロパティを指定するときに*{0}*データ ソース内に表示される説明の代わりに入力する必要があります。 たとえば、するには、手順 1 とアクセスの [製品] ページからメニュー項目など、訪問 {0}、StaticItemFormatString のページを指定します。 実行時に、ASP.NET は、メニュー項目の適切な説明と {0} で見つかったを置き換えます。
- **StaticPopoutImageUrl**  メニューの特定のノードに合わせるにことでアクセスできる子ノードがあることを示すために使用されるイメージを指定します。 動的メニューは、既定のイメージを使用し続けます。

## <a name="templated-menu-controls"></a>テンプレート化されたメニュー コントロール

メニュー コントロールは、テンプレート コントロールとでは、次の 2 つの異なる項目テンプレートです。StaticItemTemplate し、後でします。 これらのテンプレートを使用して、ことが簡単に追加するサーバー コントロールまたはユーザー コントロール、メニューにします。

Visual Studio .NET でテンプレートを編集するには、メニューの [スマート タグの表示] ボタンをクリックし、テンプレートの編集を選択するか。 間、StaticItemTemplate または、後の編集を選択できます。

StaticItemTemplate に追加された任意のコントロールは、ページが読み込まれるときに、静的メニューに表示されます。 後に追加された任意のコントロールは、すべてのポップアップ メニューに表示されます。

## <a name="menu-events"></a>メニュー イベント

メニュー コントロールはそれに固有の 2 つのイベント**MenuItemClicked**と**MenuItemDatabound**イベント。

MenuItemClicked イベントは、メニュー項目がクリックされたときに発生します。 MenuItemDatabound イベントは、メニュー項目は、データ バインドされたときに発生します。 **MenuEventArgs**渡されるイベント ハンドラーが、項目のプロパティを使用して、メニュー項目へのアクセスを提供します。

## <a name="controlling-a-menus-appearance"></a>メニューの外観を制御します。

1 つ以上の書式設定メニューを使用できる多くのスタイルを使用してメニュー コントロールの外観を変更できます。 これらには、 **StaticMenuStyle**、 **DynamicMenuStyle**、 **DynamicMenuItemStyle**、 **DynamicSelectedStyle**、および**DynamicHoverStyle**です。 これらのプロパティは、標準 HTML スタイルの文字列を使用して構成されます。 たとえば、次に影響が動的メニューのスタイル。

[!code-aspx[Main](data-bound-controls/samples/sample6.aspx)]

> [!NOTE]
> ホバー時のスタイルのいずれかを使用している場合は、追加する必要があります、&lt;ヘッド&gt;で要素を使用してページを*runat*要素に設定*サーバー*です。


メニュー コントロールは、ASP.NET 2.0 のテーマの使用もサポートします。

## <a name="the-treeview-control"></a>TreeView コントロール

TreeView コントロールでは、ツリー状の構造にデータを表示します。 メニュー コントロールと同様に簡単にできます、SiteMapDataSource などの任意の階層的なデータ ソースにバインドされたデータ。

ASP.NET の利用可能だった TreeView IE WebControl に関連しているかどうかはお客様は、ASP.NET 2.0 の TreeView コントロールについて質問すると思われる最初に抱く 1.x です。 そうじゃないです。 ASP.NET 2.0 TreeView コントロールをゼロから作成されており、使用可能だった IE TreeView WebControl 経由で大幅に向上を提供しています。

メニュー コントロールとまったく同じ方法で実行されるサイト マップに TreeView コントロールをバインドする方法の詳細にアクセスしません。 ただし、TreeView コントロールでは、それが動作するように異なるいくつか違いがあります。

既定では、ツリー ビュー コントロールには、完全に展開されたが表示されます。 初期読み込み時の拡張レベルを変更するには、変更、 **ExpandDepth**コントロールのプロパティです。 これは、ツリー ビューが特定のノードを展開する時にバインドされている場合に特に重要です。

## <a name="databinding-the-treeview-control"></a>TreeView コントロールのデータ バインド

メニュー コントロールとは異なり、TreeView に適していますも大量のデータを処理します。 そのため、SiteMapDataSource または XMLDataSource にデータ バインド、に加えて、TreeView は多くの場合、データセットまたはその他のリレーショナル データにバインドされたデータです。 TreeView コントロールが大量のデータにバインドされている場合、実際には、コントロールに表示されているデータのみにバインドすることをお勧めします。 TreeView ノードが展開されている追加のデータにデータをバインドできます。

このような場合、 **PopulateOnDemand** 、ツリー ビューのプロパティを設定する必要があります*true*です。 実装を提供する必要がありますし、 **TreeNodePopulate**メソッドです。

## <a name="data-binding-without-postback"></a>ポストバックなしのバインド データ

最初に前の例でノードを展開するときにページがポストバックを更新に注意してください。 これがこの例では、問題ではなくは、大量のデータの実稼働環境であることを想像してくださいことができます。 良い場合は、1 つで、TreeView はまだ動的にそのノードへの追加も投稿せず、サーバーをバックアップになります。

設定して、 **PopulateNodesFromClient**と**PopulateOnDemand** true の場合、ASP.NET TreeView コントロールのプロパティは、ポスト バックなしのノードを動的に設定します。 親ノードを展開すると、クライアントから XMLHttp 要求が行われます、OnTreeNodePopulate イベントが発生します。 これは、データに使用し、XML データ アイランドとサーバーが応答では、子ノードをバインドします。

ASP.NET は、この機能を実装するクライアント コードを動的に作成されます。 &lt;スクリプト&gt;AXD ファイルを指し示すスクリプトが含まれているタグが生成されます。 たとえば、以下のリストは、XMLHttp 要求を生成するスクリプト コードのスクリプトへのリンクを示します。

[!code-html[Main](data-bound-controls/samples/sample7.html)]

お使いのブラウザーで上記 AXD ファイルを参照し、開く、XMLHttp 要求を実装するコードが表示されます。 このメソッドは、顧客がスクリプト ファイルを変更することを防ぎます。

## <a name="controlling-the-operation-of-the-treeview-control"></a>TreeView コントロールの操作を制御します。

TreeView コントロールでは、コントロールの動作に影響するいくつかのプロパティがあります。 最も明白なプロパティは、 **ShowCheckBoxes**、 **ShowExpandCollapse**、および**ShowLines**です。

**ShowCheckBoxes**プロパティは、ノードが表示されるときに、チェック ボックスを表示するかどうかに影響します。 このプロパティの有効な値は**None**、**ルート**、**親**、**リーフ**、および**すべて**です。 TreeView コントロールに次のようにこれら影響します。

| **プロパティ値** | **効果** |
| --- | --- |
| なし | すべてのノードには、対応するチェック ボックスは表示されません。 これは、既定の設定です。 |
| ルート | チェック ボックスは、ルート ノードにのみ表示されます。 |
| 親 | チェック ボックスは子ノードを持つそれらのノードにのみ表示されます。 これらの子ノードには、親ノードまたはリーフ ノードを指定できます。 |
| リーフ | 子ノードを持たないこれらのノード上でのみ、チェック ボックスが表示されます。 |
| すべて | チェック ボックスは、すべてのノードに表示されます。 |

チェック ボックスを使用しているときに、 **CheckedNodes**プロパティはポストバック時にオンになっている TreeView ノードのコレクションを返します。

**ShowExpandCollapse**プロパティはルート ノードと親ノードの横にある展開/折りたたみ画像の外観を制御します。 このプロパティ設定されている場合**false**、TreeView ノードを選択し、ハイパーリンクとしてレンダリングされますが、次のリンクをクリックして展開/折りたたまれています。

**ShowLines**プロパティ表示を制御するかどうかの行の親ノードの子ノードに接続します。 ときに**false** (既定)、行は表示されません。 ときに**true**、TreeView コントロールはによって指定されたフォルダー内の線イメージを使用、 **LineImagesFolder**プロパティです。

TreeView の線の外観をカスタマイズするには、Visual Studio .NET 2005 には、行のデザイナー ツールが含まれています。 として TreeView コントロールの下にスマート タグの表示 ボタンを使用してこのツールにアクセスできます。


![](data-bound-controls/_static/image1.jpg)

**図 1**


選択と、**線イメージのカスタマイズ**のメニュー オプション、TreeView の線の外観を構成できるようにする、行のデザイナー ツールを起動します。

## <a name="treeview-events"></a>TreeView イベント

TreeView コントロールには、次の一意のイベントがあります。

- ノードが選択されている場合に SelectedNodeChanged に基づいて、 **SelectAction**プロパティです。
- TreeNodeCheckChanged は、ノードの checkboxs 状態が変更されたときに発生します。
- 基づく TreeNodeExpanded 発生のノードを展開すると、 **SelectAction**プロパティです。
- TreeNodeCollapsed は、ノードが折りたたまれているときに発生します。
- TreeNodeDataBound 発生のノードがデータにバインドされています。
- ノードの内容が表示されたら、TreeNodePopulate が発生します。

**SelectAction**プロパティでは、ノードを選択すると、どのイベントが発生したかを構成することができます。 SelectAction プロパティは、次の措置を示します。

- TreeNodeSelectAction.Expand を発生させます TreeNodeExpanded は、ノードを選択するとします。
- TreeNodeSelectAction.None は、ノードを選択するときにイベントがないを発生させます。
- 既定値は、ノードが選択されている場合は、SelectedNodeChanged イベントを発生させます。
- TreeNodeSelectAction.SelectExpand は、SelectedNodeChanged イベントと、ノードが選択されている場合は、TreeNodeExpanded イベントを発生させます。

## <a name="controlling-appearance-with-styles"></a>スタイルを使用して外観を制御します。

TreeView コントロールでは、スタイルを使用してコントロールの外観を制御する多くのプロパティを提供します。 次のプロパティは使用できます。

| **プロパティ名** | **コントロール** |
| --- | --- |
| HoverNodeStyle | 上にマウスが置かれている場合は、ノードのスタイルを制御します。 |
| LeafNodeStyle | リーフ ノードのスタイルを制御します。 |
| NodeStyle | すべてのノードのスタイルを制御します。 (LeafNodeStyle) などの特定のノードのスタイルは、このスタイルをオーバーライドします。 |
| ParentNodeStyle | すべての親ノードのスタイルを制御します。 |
| RootNodeStyle | ルート ノードのスタイルを制御します。 |
| SelectedNodeStyle | 選択したノードのスタイルを制御します。 |

これらの各プロパティは読み取り専用です。 ただし、それぞれの戻り値は、 **TreeNodeStyle**を使用して、オブジェクト、およびそのオブジェクトのプロパティを変更できる、*プロパティ サブプロパティ*形式です。 たとえばに設定する、 **ForeColor**のプロパティ、 **SelectedNodeStyle**、次の構文を使用します。

[!code-aspx[Main](data-bound-controls/samples/sample8.aspx)]

上記のタグが閉じられていないことに注意してください。 ここで示すように宣言の構文を使用して、TreeViews ノードに含めます HTML コードもためにです。

使用してコード内のスタイル プロパティを指定することも、 *property.subproperty*形式です。 たとえばに設定する、 **ForeColor**のプロパティ、 **RootNodeStyle**コードでは、次の構文を使用します。

[!code-csharp[Main](data-bound-controls/samples/sample9.cs)]

> [!NOTE]
> 包括的なは異なるスタイル プロパティの一覧を表示するには、TreeNodeStyle オブジェクトの MSDN ドキュメントを参照してください。


## <a name="the-sitemappath-control"></a>サイト マップ パス コントロール

サイト マップ パス コントロールは、ASP.NET 開発者向けのパン階層リンク ナビゲーション コントロールを提供します。 他のナビゲーション コントロールと同様に、簡単にできます SiteMapDataSource または XmlDataSource などのソース階層のデータにバインドされたデータ。

サイト マップ パス コントロールは SiteMapNodeItem オブジェクトで構成をされます。 ノードの 3 つの種類があります。ルート ノード、親ノード、および現在のノードです。 ルート ノードは、階層構造の上部にあるノードです。 現在のノードでは、現在のページを表します。 その他のすべてのノードは、親ノードです。

## <a name="controlling-the-operation-of-the-sitemappath-control"></a>サイト マップ パス コントロールの操作を制御します。

サイト マップ パス コントロールの操作を制御するプロパティは次のとおりです。

| **Property** | **プロパティの説明** |
| --- | --- |
| ParentLevelsDisplayed | 親ノードの数が表示されるかを制御します。 既定では-1 で表示される親ノードの数に制限はありません。 |
| PathDirection | サイト マップ パスの方向を制御します。 有効な値は RootToCurrent (既定値) および CurrentToRoot です。 |
| 可能 | サイト マップ パス コントロール内のノードを区切る文字を制御する文字列。 既定値は: です。 |
| RenderCurrentNodeAsLink | 現在のノードがリンクとして表示されるかどうかを制御するブール値。 既定値は False です。 |
| SkipLinkText | スクリーン リーダーによって、ページを表示するときは、ユーザー補助機能を支援します。 このプロパティは、サイト マップ パス コントロールをスキップするスクリーン リーダーを使用します。 この機能を無効にするには、String.Empty にプロパティを設定します。 |

## <a name="templated-sitemappath-controls"></a>テンプレート化されたサイト マップ パス コントロール

SiteMapControl はテンプレートのコントロールおよびコントロールを表示するために使用するための別のテンプレートを定義するような場合です。 サイト マップ パス コントロールでテンプレートを編集するには、コントロールのスマート タグの表示] ボタンをクリックし、メニューから [テンプレートの編集を選択します。 選択できるさまざまなテンプレート間で次のように、SiteMapTasks メニューが表示されます。


![](data-bound-controls/_static/image2.jpg)

**図 2**


**NodeTemplate**テンプレートは、サイト マップ パスの任意のノードを参照します。 ノードが、ルート ノードまたは現在のノードの場合、 **RootNodeTemplate**または**CurrentNodeTemplate**は構成されている、NodeTemplate はオーバーライドします。

## <a name="sitemappath-events"></a>サイト マップ パス イベント

サイト マップ パス コントロールがコントロール クラスから派生していない 2 つのイベント**ItemCreated**イベントおよび**ItemDataBound**イベント。 ItemCreated イベントは、サイト マップ パス項目が作成されるときに発生します。 ItemDataBound は、サイト マップ パスのノードのデータ バインド中にデータ バインド メソッドが呼び出されたときに発生します。 A **SiteMapNodeItemEventArgs**オブジェクトが、項目のプロパティを使用して特定 SiteMapNodeItem へのアクセスを提供します。

## <a name="controlling-appearance-with-styles"></a>スタイルを使用して外観を制御します。

サイト マップ パス コントロールの書式設定するため、次のスタイルを利用できます。

| **プロパティ名** | **コントロール** |
| --- | --- |
| CurrentNodeStyle | 現在のノードのテキストのスタイルを制御します。 |
| RootNodeStyle | ルート ノードのテキストのスタイルを制御します。 |
| NodeStyle | CurrentNodeStyle または RootNodeStyle を適用しないと仮定した場合のすべてのノードのテキストのスタイルを制御します。 |

NodeStyle プロパティは、CurrentNodeStyle か、RootNodeStyle によりオーバーライドされます。 これらの各プロパティは読み取り専用とを返します、**スタイル**オブジェクト。 これらのプロパティのいずれかを使用してノードの外観に影響を与える、返されたスタイル オブジェクトのプロパティを設定する必要があります。 たとえば、次のコードは、現在のノードの前景色プロパティを変更します。

[!code-aspx[Main](data-bound-controls/samples/sample10.aspx)]

プロパティは、次のようにプログラムでも適用できます。

[!code-csharp[Main](data-bound-controls/samples/sample11.cs)]

> [!NOTE]
> テンプレートが適用されている場合、スタイルが適用されません。


## <a name="lab-1-configuring-an-aspnet-menu-control"></a>演習 1: ASP.NET メニュー コントロールを構成します。

1. 新しい Web サイトを作成します。
2. ファイルを新規作成、ファイルを選択し、ファイル テンプレートの一覧からサイト マップを選択して、サイト マップ ファイルを追加します。
3. サイト マップ (既定では Web.sitemap) を開き、以下のリストのように見えるように変更します。 サイト マップ ファイルのように、リンクしているページが実際に存在しないが、演習ではこの問題をされません。

    [!code-xml[Main](data-bound-controls/samples/sample12.xml)]
4. デザイン ビューで、既定の Web フォームを開きます。
5. ツールボックスの [ナビゲーション] セクションからのページに新しいメニュー コントロールを追加します。
6. ツールボックスの [データ] セクションから、新しい SiteMapDataSource を追加します。 SiteMapDataSource、サイト内 Web.sitemap ファイルが自動的に使用されます。 (Web.sitemap ファイル*必要があります*サイトのルート フォルダーにあります)。
7. メニュー コントロールをクリックし、メニューの [タスク] ダイアログを表示するスマート タグの表示ボタンをクリックします。
8. データ ソースのドロップダウン リストで、SiteMapDataSource1 を選択します。
9. オート フォーマットのリンクをクリックし、メニューの形式を選択します。
10. プロパティ ペインで、設定、 **StaticDisplayLevels**プロパティを 2 です。 メニュー コントロールでは、デザイナーでのホーム、製品、およびサービスのノードが表示されます。
11. メニューを使用するブラウザーでページを参照します。 (サイト マップに追加するしましたページが実際に存在しない、ためするが、エラー表示を参照してください。)

StaticDisplayLevels および MaximumDynamicDisplayLevels プロパティの変更をテストしへの影響について、メニューを表示する方法を参照してください。

## <a name="lab-2-dynamically-binding-a-treeview-control"></a>演習 2: TreeView コントロールの動的な連結

この演習では、ローカルで実行する SQL Server が存在しており、Northwind データベースが SQL Server インスタンスに存在すると仮定します。 これらの条件が満たされない場合は、サンプル内の接続文字列を変更してください。 信頼関係接続ではなく SQL Server 認証を指定する必要がありますも注意してください。

1. 新しい Web サイトを作成します。
2. Default.aspx のコード ビューに切り替えをすべてのコードを以下に示すコードに置き換えます。 

    [!code-aspx[Main](data-bound-controls/samples/sample13.aspx)]
3. Treeview.aspx として、ページを保存します。
4. ページを参照します。
5. ページが最初に表示されるときに、ブラウザーでページのソースを表示します。 表示されているノードのみがクライアントに送信されたことに注意してください。
6. 任意のノードの横にあるプラス記号をクリックします。
7. [ソースの表示] ページをもう一度です。 新しく表示されているノードがあるようになりましたことに注意してください。

## <a name="lab-3-details-view-and-editing-data-using-a-gridview-and-detailsview"></a>演習 3: ビューと GridView と DetailsView を使用してデータの編集を詳細します。

1. 新しい Web サイトを作成します。
2. Web サイトを新しい web.config を追加します。
3. 次に示すように、web.config ファイルに接続文字列を追加します。 

    [!code-xml[Main](data-bound-controls/samples/sample14.xml)]

    > [!NOTE]
    > 環境内に基づく接続文字列を変更する必要があります。
4. web.config ファイルを保存して閉じます。
5. Default.aspx を開き、新しい SqlDataSource コントロールを追加します。
6. SqlDataSource コントロールの ID を変更**製品**です。
7. **SqlDataSource タスク** メニューをクリックして**データ ソースの構成**です。
8. 選択**Northwind**接続ドロップダウン リストで [次へ] をクリックします。
9. 選択**製品**から、**名前**ドロップダウン リストを確認し、 **ProductID**、 **ProductName**、 **UnitPrice**、および**UnitsInStock**次のように対応するチェック ボックスです。 

![](data-bound-controls/_static/image3.jpg)

    **Figure 3**
10. **[次へ]**をクリックします。
11. **[完了]**をクリックします。
12. ソース ビューに切り替えるし、生成されたコードを調べます。 通知、 **SelectCommand**、 **DeleteCommand**、 **InsertCommand**、および**UpdateCommand** SqlDataSource に追加されました。コントロール。 追加されたパラメーターも注目してください。
13. デザイン ビューに切り替え、新しい GridView コントロールをページに追加します。
14. 選択**製品**から、**データ ソースの選択**ドロップダウンします。
15. 確認**ページングを有効にする**と**選択を有効にする**次のようにします。 

![](data-bound-controls/_static/image4.jpg)

    **Figure 4**
16. をクリックして、**列の編集**リンクを確認して**フィールドの自動生成**がオンになっています。
17. **[OK]** をクリックします。
18. GridView コントロールを選択し、ボタンをクリックして の横に、 **DataKeyNames**プロパティ ペインでプロパティです。
19. 選択**ProductID**から、**使用可能なデータ フィールド**を一覧表示し、  **&gt;**   ボタンを押す。
20. [OK] をクリックします。
21. 新しい SqlDataSource コントロールをページに追加します。
22. SqlDataSource コントロールの ID を変更**詳細**です。
23. SqlDataSource タスク メニューから選択**データ ソースの構成**です。
24. 選択**Northwind**をクリックして、ドロップダウン リストから**次**です。
25. 選択**製品**から、**名**ドロップダウン リストを確認し、  **\*** のチェック ボックス、**列**listbox です。
26. クリックして、**場所**ボタンをクリックします。
27. 選択**ProductID**から、**列**ドロップダウンします。
28. 選択 **=** 演算子のドロップダウン リストにします。
29. 選択**コントロール**から、**ソース**ドロップダウンします。
30. 選択**GridView1**から、**コントロール ID**ドロップダウンします。
31. クリックして、**追加**WHERE 句を追加するボタンをクリックします。
32. **[OK]** をクリックします。
33. クリックして、 **[詳細設定]**ボタンをクリックし、確認、**生成 INSERT、UPDATE、および DELETE ステートメント**チェック ボックスをオンします。
34. **[OK]** をクリックします。
35. をクリックして**次** をクリック**完了**です。
36. DetailsView コントロールをページに追加します。
37. **データ ソースの選択**ドロップダウン リストで、選択**詳細**です。
38. チェック、**編集を有効にする**次に示すようにチェック ボックスをオンします。 

![](data-bound-controls/_static/image1.gif)

    **Figure 5**
39. ページを保存し、Default.aspx を参照します。
40. クリックして、**選択**DetailsView 更新を自動的に表示する別のレコードの横にあるリンクします。
41. クリックして、**編集**DetailsView コントロール内のリンク。
42. レコードに変更を加えるし、をクリックして**更新**です。
