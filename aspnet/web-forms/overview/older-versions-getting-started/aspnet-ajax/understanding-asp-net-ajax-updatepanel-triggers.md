---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: "ASP.NET AJAX UpdatePanel トリガーについて |Microsoft ドキュメント"
author: scottcate
description: "Visual Studio でのマークアップ エディターで作業しているときにすることがありますに注意してください (IntelliSense) から UpdatePanel コントロールの 2 つの子要素があります。 Wh のいずれかを指定しています."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/12/2008
ms.topic: article
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: 1338ef0763d9bfab451bc30cafa39f715200153d
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/10/2017
---
<a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="c2127-104">ASP.NET AJAX UpdatePanel トリガーをについてください。</span><span class="sxs-lookup"><span data-stu-id="c2127-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>
====================
<span data-ttu-id="c2127-105">によって[Scott カテゴリ](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="c2127-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="c2127-106">PDF をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="c2127-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="c2127-107">Visual Studio でのマークアップ エディターで作業しているときにすることがありますに注意してください (IntelliSense) から UpdatePanel コントロールの 2 つの子要素があります。</span><span class="sxs-lookup"><span data-stu-id="c2127-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="c2127-108">ページ (または 1 つを使用している場合、ユーザー コントロール) 上のコントロールを指定するトリガー要素の 1 つは、要素が含まれている UpdatePanel コントロールの部分的なレンダリングはトリガーとなります。</span><span class="sxs-lookup"><span data-stu-id="c2127-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>


## <a name="introduction"></a><span data-ttu-id="c2127-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="c2127-109">Introduction</span></span>

<span data-ttu-id="c2127-110">ASP.NET の Microsoft のテクノロジは、オブジェクト指向し、イベント ドリブン プログラミング モデルによりに導入され、コンパイルされたコードのメリットと組み合わせたです。</span><span class="sxs-lookup"><span data-stu-id="c2127-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="c2127-111">ただし、そのサーバー側の処理モデルでは、Microsoft ASP.NET 3.5 AJAX Extensions に含まれる新機能によってうちの多くに対処することができます、テクノロジ固有のいくつかの欠点があります。</span><span class="sxs-lookup"><span data-stu-id="c2127-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="c2127-112">これらの拡張機能は、ページ全体の更新、クライアント スクリプト (プロファイル API、ASP.NET を含む)、および広範なクライアント側 API を介して Web サービスにアクセスする機能を必要とせずにページの部分のレンダリングを含む、多くの新しいのリッチ クライアント機能を有効にします。ASP.NET サーバー側コントロール セットに表示するコントロール パターンの多くのミラーに設計されています。</span><span class="sxs-lookup"><span data-stu-id="c2127-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="c2127-113">このホワイト ペーパーでは、ASP.NET AJAX の XML トリガー機能を調べて`UpdatePanel`コンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="c2127-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="c2127-114">XML のトリガーは、特定の UpdatePanel コントロールの部分的なレンダリングを引き起こす可能性のあるコンポーネントをきめ細かく制御を付けます。</span><span class="sxs-lookup"><span data-stu-id="c2127-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="c2127-115">このホワイト ペーパーでは、.NET Framework 3.5 のベータ 2 リリースと Visual Studio 2008 に基づいています。</span><span class="sxs-lookup"><span data-stu-id="c2127-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="c2127-116">.NET Framework の基本クラス ライブラリには、ASP.NET AJAX Extensions に ASP.NET 2.0 を対象としたアドオン アセンブリ以前は統合されました。</span><span class="sxs-lookup"><span data-stu-id="c2127-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="c2127-117">Visual Studio 2008 では、いない Visual Web Developer Express を操作して、(コードの一覧が完全な互換性に関係なく、Visual Studio のユーザー インターフェイスに従ってチュートリアルを提供することにもこのホワイト ペーパーで想定しています開発環境の場合)。</span><span class="sxs-lookup"><span data-stu-id="c2127-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="c2127-118">*トリガー*</span><span class="sxs-lookup"><span data-stu-id="c2127-118">*Triggers*</span></span>

<span data-ttu-id="c2127-119">既定では、特定の UpdatePanel のトリガーは、呼び出し (たとえば) を持つテキスト ボックス コントロールを含む、ポストバックが子コントロールを自動的に含めるその`AutoPostBack`プロパティに設定**true**です。</span><span class="sxs-lookup"><span data-stu-id="c2127-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="c2127-120">ただし、トリガー含めることもできますマークアップ; を使用して宣言型これは、内で、 `<triggers>` UpdatePanel コントロール宣言のセクションでします。</span><span class="sxs-lookup"><span data-stu-id="c2127-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="c2127-121">トリガーを使用してアクセスできますが、`Triggers`コレクション プロパティをお勧め (たとえば、デザイン時に、コントロールを使用できません) 場合は、実行時に、部分的なレンダリング トリガーを登録することを使用して、`RegisterAsyncPostBackControl(Control)`のメソッド、内部オブジェクト、ページの ScriptManager、`Page_Load`イベント。</span><span class="sxs-lookup"><span data-stu-id="c2127-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="c2127-122">ページはステートレスで、これは再登録するこれらのコントロールが作成されるたびにことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c2127-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="c2127-123">自動子トリガー含めることができますも無効になります (ようにするためのポストバックを作成する子コントロールは、部分的なレンダリングを自動的にトリガーしない) を設定して、`ChildrenAsTriggers`プロパティを**false**です。</span><span class="sxs-lookup"><span data-stu-id="c2127-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="c2127-124">これによりどの特定のコントロールを割り当てるときに最大限の柔軟性は、ページ レンダリングを呼び出すことがあり、お勧め、開発者はオプトイン生じる可能性のあるすべてのイベントを処理するのではなく、イベントに応答できるようにできます。</span><span class="sxs-lookup"><span data-stu-id="c2127-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="c2127-125">いる UpdatePanel コントロールが入れ子になっているときに、UpdateMode 設定されている場合注意してください**条件付き**UpdatePanel の子がトリガーされるが、UpdatePanel の更新を子のみが、親ではない場合、します。</span><span class="sxs-lookup"><span data-stu-id="c2127-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="c2127-126">ただし、親の UpdatePanel が更新された場合は、し、UpdatePanel の子も更新されます。</span><span class="sxs-lookup"><span data-stu-id="c2127-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="c2127-127">*&lt;トリガー&gt;要素*</span><span class="sxs-lookup"><span data-stu-id="c2127-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="c2127-128">Visual Studio でのマークアップ エディターで作業しているときにすることがありますに注意してください (IntelliSense) から 2 つの子要素があるに`UpdatePanel`コントロール。</span><span class="sxs-lookup"><span data-stu-id="c2127-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="c2127-129">最も多く見要素は、`<ContentTemplate>`要素は、本質的に更新パネルによって保持されるコンテンツをカプセル化 (部分的なレンダリングを有効化コンテンツ)。</span><span class="sxs-lookup"><span data-stu-id="c2127-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="c2127-130">その他の要素は、`<Triggers>`ページ (または 1 つを使用している場合、ユーザー コントロール) 上のコントロールを指定する要素で UpdatePanel コントロールの部分的なレンダリングはトリガーとなる、&lt;トリガー&gt;要素が存在します。</span><span class="sxs-lookup"><span data-stu-id="c2127-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="c2127-131">`<Triggers>`要素は、任意の数ごとの 2 つの子ノードを含めることができます:`<asp:AsyncPostBackTrigger>`と`<asp:PostBackTrigger>`です。</span><span class="sxs-lookup"><span data-stu-id="c2127-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="c2127-132">2 つの属性が受け入れる`ControlID`と`EventName`、カプセル化の現在の単位内の任意のコントロールを指定できます (たとえば、UpdatePanel コントロールがある場合、Web ユーザー コントロール内で、しないでくださいでコントロールを参照するにはページ、ユーザー コントロールが存在する)。</span><span class="sxs-lookup"><span data-stu-id="c2127-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="c2127-133">`<asp:AsyncPostBackTrigger>`要素は、の子として存在するコントロールからイベントをターゲットにできるという点で便利*任意*このトリガーが子となる UpdatePanel だけでなく、カプセル化の単位で UpdatePanel コントロール.</span><span class="sxs-lookup"><span data-stu-id="c2127-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="c2127-134">したがって、部分ページ更新を開始する任意のコントロールを作成できます。</span><span class="sxs-lookup"><span data-stu-id="c2127-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="c2127-135">同様に、`<asp:PostBackTrigger>`要素は、部分ページ レンダリング、トリガーが、サーバーへのフル ラウンド トリップを必要とする 1 つを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="c2127-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="c2127-136">このトリガー要素は、コントロールが部分ページ レンダリングを通常トリガーそれ以外の場合と、ページ全体のレンダリングを強制にも使用できます (たとえば、ときに、`Button`にコントロールが存在する、 `<ContentTemplate>` UpdatePanel コントロールの要素)。</span><span class="sxs-lookup"><span data-stu-id="c2127-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="c2127-137">もう一度、PostBackTrigger 要素は、カプセル化の現在の単位で UpdatePanel コントロールの子である任意のコントロールを指定できます。</span><span class="sxs-lookup"><span data-stu-id="c2127-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="c2127-138">*&lt;トリガー&gt;要素リファレンス*</span><span class="sxs-lookup"><span data-stu-id="c2127-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="c2127-139">*マークアップ子孫:*</span><span class="sxs-lookup"><span data-stu-id="c2127-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="c2127-140">**タグ**</span><span class="sxs-lookup"><span data-stu-id="c2127-140">**Tag**</span></span> | <span data-ttu-id="c2127-141">**説明**</span><span class="sxs-lookup"><span data-stu-id="c2127-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="c2127-142">&lt;asp: AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="c2127-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="c2127-143">コントロールとこのトリガーの参照を含む UpdatePanel、部分ページ更新が発生するイベントを指定します。</span><span class="sxs-lookup"><span data-stu-id="c2127-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="c2127-144">&lt;asp: PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="c2127-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="c2127-145">コントロールと完全のページ更新 (ページ全体の更新) が発生するイベントを指定します。</span><span class="sxs-lookup"><span data-stu-id="c2127-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="c2127-146">このタグは、コントロールでは、部分的なレンダリングは、それ以外の場合と、フル更新を強制するために使用します。</span><span class="sxs-lookup"><span data-stu-id="c2127-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="c2127-147">*チュートリアル: クロス UpdatePanel トリガー*</span><span class="sxs-lookup"><span data-stu-id="c2127-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="c2127-148">部分的なレンダリングを有効にする設定は、ScriptManager をオブジェクトに新しい ASP.NET ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="c2127-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="c2127-149">このページ - 最初に 2 つの Updatepanel を追加、ラベル コントロール (Label1) および 2 つのボタン コントロール (Button1 と Button2) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="c2127-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="c2127-150">Button1 必要がありますクリック両方を更新して Button2 必要があります言ってと言います、またはそれらの行に沿ったものを更新する をクリックします。</span><span class="sxs-lookup"><span data-stu-id="c2127-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="c2127-151">2 番目の UpdatePanel でラベル コントロール (Label2) のみを含めるが、区別するために既定値以外に、前景色プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="c2127-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="c2127-152">両方 UpdatePanel タグの UpdateMode プロパティを設定する**条件付き**します。</span><span class="sxs-lookup"><span data-stu-id="c2127-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="c2127-153">**Default.aspx の 1 の一覧を表示するには: マークアップ:**</span><span class="sxs-lookup"><span data-stu-id="c2127-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="c2127-154">Button1 の Click イベント ハンドラー、Label1.Text と Label2.Text に設定 (DateTime.Now.ToLongTimeString()) など時間に依存するもの。</span><span class="sxs-lookup"><span data-stu-id="c2127-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="c2127-155">Button2 の Click イベント ハンドラー、Label1.Text のみ時間に依存する値に設定します。</span><span class="sxs-lookup"><span data-stu-id="c2127-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="c2127-156">**2 を一覧表示します。 分離コードで default.aspx.cs (トリム):**</span><span class="sxs-lookup"><span data-stu-id="c2127-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="c2127-157">F5 キーを押して、プロジェクトをビルドおよび実行します。</span><span class="sxs-lookup"><span data-stu-id="c2127-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="c2127-158">更新の両方のパネルをクリックすると、ときに両方のラベル変更は、テキストに注意してください。ただし、このパネルの更新プログラムをクリックすると、Label1 のみが更新されます。</span><span class="sxs-lookup"><span data-stu-id="c2127-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="c2127-159">([フルサイズのイメージを表示するをクリックして](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="c2127-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>


## <a name="under-the-hood"></a><span data-ttu-id="c2127-160">*実際には*</span><span class="sxs-lookup"><span data-stu-id="c2127-160">*Under the Hood*</span></span>

<span data-ttu-id="c2127-161">作成したばかりの例を使用して、ASP.NET AJAX を実行して内容と、UpdatePanel クロス パネル トリガーのしくみを見て取得ことができます。</span><span class="sxs-lookup"><span data-stu-id="c2127-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="c2127-162">HTML、生成されたページのソースと同様、FireBug - と呼ばれる、Mozilla Firefox 拡張機能させるため AJAX ポストバックを簡単に確認できます。</span><span class="sxs-lookup"><span data-stu-id="c2127-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="c2127-163">Lutz Roeder によって .NET Reflector ツールを使ってもします。</span><span class="sxs-lookup"><span data-stu-id="c2127-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="c2127-164">これらのツールの両方の自由に利用可能なオンラインでは、インターネットの検索で検出できます。</span><span class="sxs-lookup"><span data-stu-id="c2127-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="c2127-165">ページのソース コードの検査を示していますほとんどないです。 からUpdatePanel コントロールとしてレンダリングされます`<div>`コンテナー、およびおスクリプト リソースには、指定が含まれているを確認できますが、`<asp:ScriptManager>`です。</span><span class="sxs-lookup"><span data-stu-id="c2127-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="c2127-166">いくつかの新しい AJAX 固有呼び出し PageRequestManager を AJAX クライアント スクリプト ライブラリの内部にもあります。</span><span class="sxs-lookup"><span data-stu-id="c2127-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="c2127-167">UpdatePanel は、レンダリングされる 1 つの 2 つのコンテナーを参照して最後に、 `<input>` 、2 つのボタン`<asp:Label>`としてレンダリングされますコントロール`<span>`コンテナーです。</span><span class="sxs-lookup"><span data-stu-id="c2127-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="c2127-168">(FireBug の DOM ツリーを検査するわかります表示されているコンテンツを生成しないが、ことを示すために、ラベルは淡色表示されていること)。</span><span class="sxs-lookup"><span data-stu-id="c2127-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="c2127-169">このパネルの更新ボタンをクリックし、現在のサーバー時刻で最上位の UpdatePanel が更新されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="c2127-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="c2127-170">FireBug では、要求を確認することができるように、[コンソール] タブを選択します。</span><span class="sxs-lookup"><span data-stu-id="c2127-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="c2127-171">パラメーターを調べて、POST 要求先。</span><span class="sxs-lookup"><span data-stu-id="c2127-171">Examine the POST request parameters first:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="c2127-172">([フルサイズのイメージを表示するをクリックして](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="c2127-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>


<span data-ttu-id="c2127-173">UpdatePanel が示されるが、サーバー側の AJAX コードを ScriptManager1 パラメーターを使用しているコントロールのツリーが発生した正確に注意してください:`Button1`の`UpdatePanel1`コントロール。</span><span class="sxs-lookup"><span data-stu-id="c2127-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="c2127-174">ここで、更新の両方のパネルのボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="c2127-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="c2127-175">パイプで区切られた一連の文字列に設定されている変数がわかります応答を検証するには、次に、具体的には、最上位の UpdatePanel がわかります`UpdatePanel1`が、その全体、HTML ブラウザーに送信します。</span><span class="sxs-lookup"><span data-stu-id="c2127-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="c2127-176">AJAX クライアント スクリプト ライブラリで UpdatePanel の元の HTML コンテンツを使用して新しいコンテンツに置き換え、`.innerHTML`プロパティ、およびそのサーバーが HTML としてサーバーから、変更されたコンテンツを送信します。</span><span class="sxs-lookup"><span data-stu-id="c2127-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="c2127-177">ここで、更新両方パネル ボタンをクリックし、サーバーから結果を確認します。</span><span class="sxs-lookup"><span data-stu-id="c2127-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="c2127-178">結果は非常に似ています - 両方の Updatepanel がサーバーから新しい HTML を受信します。</span><span class="sxs-lookup"><span data-stu-id="c2127-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="c2127-179">同様に、以前のコールバックでは、その他のページの状態が送信されます。</span><span class="sxs-lookup"><span data-stu-id="c2127-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="c2127-180">ご覧のとおり、AJAX ポストバックを実行する特別なコードが使用されていないため、AJAX クライアント スクリプト ライブラリがコードを追加せず、フォームのポストバックをインターセプトします。</span><span class="sxs-lookup"><span data-stu-id="c2127-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="c2127-181">サーバー コントロールは JavaScript を自動的に利用できるように、フォームを自動的に送信しない - ASP.NET は、自動スクリプト リソースを含めること、PostBackOptions クラスによって、主に実現フォーム検証および状態は既に、コードを自動的に挿入、および ClientScriptManager クラスです。</span><span class="sxs-lookup"><span data-stu-id="c2127-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="c2127-182">たとえば、CheckBox コントロールです.NET Reflector でクラスの逆アセンブリを確認します。</span><span class="sxs-lookup"><span data-stu-id="c2127-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="c2127-183">これを行うには、System.Web アセンブリが、開いていることを確認しに移動、`System.Web.UI.WebControls.CheckBox`クラス、開く、`RenderInputTag`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="c2127-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="c2127-184">チェックする条件を探して、`AutoPostBack`プロパティ。</span><span class="sxs-lookup"><span data-stu-id="c2127-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="c2127-185">([フルサイズのイメージを表示するをクリックして](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="c2127-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>


<span data-ttu-id="c2127-186">自動のポストバックが有効にすると、 `CheckBox` (AutoPostBack プロパティが true) を使用して、結果を制御`<input>`タグが処理しているスクリプトで ASP.NET イベントでレンダリングされてしたがってその`onclick`属性。</span><span class="sxs-lookup"><span data-stu-id="c2127-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="c2127-187">次に、フォームの送信の途中受信では、重大な変更が不正確な可能性のある文字列の置換を使用することによって発生する可能性のあるを回避することができ nonintrusively、ページに挿入する ASP.NET AJAX を使用できます。</span><span class="sxs-lookup"><span data-stu-id="c2127-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="c2127-188">これにより、さらに、*任意*UpdatePanel コンテナー内での使用をサポートするためにコードを追加せず、ASP.NET AJAX の電源を使用するカスタム コントロールを ASP.NET です。</span><span class="sxs-lookup"><span data-stu-id="c2127-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="c2127-189">`<triggers>` PageRequestManager の呼び出しで初期化される値に対応する機能\_updateControls (メモをメソッド、イベント、およびで始まるフィールド名、ASP.NET AJAX クライアント スクリプト ライブラリは、規則を利用して。アンダー スコアで内部としてマーク、およびライブラリ自体の外部で使用するためのものではありません)。</span><span class="sxs-lookup"><span data-stu-id="c2127-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="c2127-190">どのコントロールが AJAX ポストバックが発生するものではおを確認できます。</span><span class="sxs-lookup"><span data-stu-id="c2127-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="c2127-191">たとえば、みましょう 2 つ追加コントロールを追加 ページで、Updatepanel の外部で 1 つのコントロールを完全に終了して、UpdatePanel 内で 1 つの終了します。</span><span class="sxs-lookup"><span data-stu-id="c2127-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="c2127-192">上部の UpdatePanel 内にあるチェック ボックス コントロールを追加し、一覧内で定義されている色の数が、DropDownList をドロップおはします。</span><span class="sxs-lookup"><span data-stu-id="c2127-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="c2127-193">新しいマークアップを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c2127-193">Here is the new markup:</span></span>

<span data-ttu-id="c2127-194">**新しいマークアップの 3 を一覧表示する:**</span><span class="sxs-lookup"><span data-stu-id="c2127-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="c2127-195">また、新しい分離コードを次に示します。</span><span class="sxs-lookup"><span data-stu-id="c2127-195">And here is the new code-behind:</span></span>

<span data-ttu-id="c2127-196">**リスト 4: 分離コード**</span><span class="sxs-lookup"><span data-stu-id="c2127-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="c2127-197">このページの考え方は、ドロップダウン リストには 2 番目のラベルを表示する次の 3 つの色のいずれかが選択され、両方が太字かどうかと、ラベルに日付と時刻を表示するかどうかのチェック ボックスを決定することです。</span><span class="sxs-lookup"><span data-stu-id="c2127-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="c2127-198">チェック ボックスには、AJAX の更新する必要がありますされませんが、ドロップダウン リストは、UpdatePanel 内でない格納されている場合でも。</span><span class="sxs-lookup"><span data-stu-id="c2127-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="c2127-199">([フルサイズのイメージを表示するをクリックして](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="c2127-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>


<span data-ttu-id="c2127-200">上記のスクリーン ショットの見かけ上は、最新のボタンがクリックされるでした下部時間に依存しない、最上位の時間を更新更新このパネルの右のボタン。</span><span class="sxs-lookup"><span data-stu-id="c2127-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="c2127-201">日付もオフに切り替えるクリックの間で日付が下部にあるラベルに表示されます。</span><span class="sxs-lookup"><span data-stu-id="c2127-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="c2127-202">最後に目的の下部にあるラベルの色である: ラベルのテキストは、コントロールの状態が重要であることを示していますより最近更新されたされ、ユーザーは、AJAX ポストバックを通じて保持されます。</span><span class="sxs-lookup"><span data-stu-id="c2127-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="c2127-203">*ただし*時刻は更新されませんでした。</span><span class="sxs-lookup"><span data-stu-id="c2127-203">*However*, the time was not updated.</span></span> <span data-ttu-id="c2127-204">時間がの永続性を自動的に再生成、 \_\_コントロールは、サーバーに再表示されていたときに、ASP.NET ランタイムによって解釈されるページの VIEWSTATE フィールドです。</span><span class="sxs-lookup"><span data-stu-id="c2127-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="c2127-205">ASP.NET AJAX サーバー コードは状態を変更する方法、コントロールは認識されません。状態の表示から単純に再作成し、適切となるイベントを実行します。</span><span class="sxs-lookup"><span data-stu-id="c2127-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="c2127-206">これは、必要がありますで指摘、ただし、いたは初期化されているページ内で時間\_Load イベント時間とがインクリメント正しくです。</span><span class="sxs-lookup"><span data-stu-id="c2127-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="c2127-207">その結果、開発者を適切なイベント ハンドラーの中に適切なコードが実行されていることに注意してページの使用を避ける\_コントロールのイベント ハンドラーが適切ながある場合にロードします。</span><span class="sxs-lookup"><span data-stu-id="c2127-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="c2127-208">概要</span><span class="sxs-lookup"><span data-stu-id="c2127-208">Summary</span></span>

<span data-ttu-id="c2127-209">ASP.NET AJAX 拡張機能の UpdatePanel コントロールは汎用性の数を更新することが原因となる必要がありますコントロール イベントを識別するためのメソッドを利用できます。</span><span class="sxs-lookup"><span data-stu-id="c2127-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="c2127-210">子コントロールをによって自動的に更新されるをサポートしていますが、ページ上のコントロールのイベントにも応答できます。</span><span class="sxs-lookup"><span data-stu-id="c2127-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="c2127-211">サーバーの処理負荷が発生する可能性を減らすためには、ことを推奨、 `ChildrenAsTriggers` UpdatePanel のプロパティに設定する`false`、選択にはなく、既定で含まれているイベントがあるとします。</span><span class="sxs-lookup"><span data-stu-id="c2127-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="c2127-212">これにより、検証、および入力フィールドへの変更を含む可能性のある望ましくない影響の原因からも、不要なイベントが回避されます。</span><span class="sxs-lookup"><span data-stu-id="c2127-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="c2127-213">これらの種類のバグを分離する場合、ページは、ユーザーに透過的に更新し、原因したがってわかりにくいかもしれませんがすぐにためににくい場合があります。</span><span class="sxs-lookup"><span data-stu-id="c2127-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="c2127-214">確認するには、ASP.NET AJAX フォームの内部動作の途中受信モデルを投稿、ASP.NET によって既に提供されているフレームワークを利用することを確認することができました。</span><span class="sxs-lookup"><span data-stu-id="c2127-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="c2127-215">これにより、同じのフレームワークを使用して設計されているコントロールに関する最大の互換性を保持し、ページ用に記述された任意の追加の JavaScript の最小が関与します。</span><span class="sxs-lookup"><span data-stu-id="c2127-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="c2127-216">略歴</span><span class="sxs-lookup"><span data-stu-id="c2127-216">Bio</span></span>

<span data-ttu-id="c2127-217">Rob Paveza Terralever 上級の .NET アプリケーション開発者は、([www.terralever.com](http://www.terralever.com))、Tempe 弊社はアリゾナ州でマーケティング会社の主要な対話型</span><span class="sxs-lookup"><span data-stu-id="c2127-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="c2127-218">彼に到達できる[ robpaveza@gmail.com ](mailto:robpaveza@gmail.com)、彼のブログにあると[http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/)です。</span><span class="sxs-lookup"><span data-stu-id="c2127-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="c2127-219">Scott カテゴリは、1997 年以降の Microsoft の Web テクノロジの使用されているがあり、myKB.com の代表者 ([www.myKB.com](http://www.myKB.com))、専門分野は、ASP.NET の書き込みの際にベースのアプリケーションのナレッジ ベースのソフトウェア ソリューションに重点を置きます。</span><span class="sxs-lookup"><span data-stu-id="c2127-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="c2127-220">Scott が接続時に電子メール[ scott.cate@myKB.com ](mailto:scott.cate@myKB.com)または彼のブログで[ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="c2127-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="c2127-221">[前へ](understanding-partial-page-updates-with-asp-net-ajax.md)
[次へ](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="c2127-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
