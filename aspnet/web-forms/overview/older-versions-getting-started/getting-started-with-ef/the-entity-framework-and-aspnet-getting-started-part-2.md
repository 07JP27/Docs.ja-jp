---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
title: データベースの概要 Entity Framework 4.0 最初および ASP.NET 4 Web フォーム - パート 2 |Microsoft ドキュメント
author: tdykstra
description: Contoso 大学でサンプル web アプリケーションでは、Entity Framework を使用して ASP.NET Web フォーム アプリケーションを作成する方法を示します。 サンプル アプリケーションは、.
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: fb63a326-a4ae-4b0c-a4f5-412327197216
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
msc.type: authoredcontent
ms.openlocfilehash: a6c95a92aa77e2bb73aa513a207e0469d1aedbd2
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/06/2018
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-2"></a><span data-ttu-id="fefe8-104">データベースの概要 Entity Framework 4.0 最初および ASP.NET 4 Web フォーム - パート 2</span><span class="sxs-lookup"><span data-stu-id="fefe8-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 2</span></span>
====================
<span data-ttu-id="fefe8-105">によって[Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="fefe8-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="fefe8-106">Contoso 大学でサンプル web アプリケーションでは、Entity Framework 4.0 および Visual Studio 2010 を使用して ASP.NET Web フォーム アプリケーションを作成する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="fefe8-107">一連のチュートリアルについては、次を参照してください[系列内の最初のチュートリアル。](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="fefe8-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="the-entitydatasource-control"></a><span data-ttu-id="fefe8-108">EntityDataSource コントロール</span><span class="sxs-lookup"><span data-stu-id="fefe8-108">The EntityDataSource Control</span></span>

<span data-ttu-id="fefe8-109">前のチュートリアルでは、web サイト、データベース、およびデータ モデルを作成します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-109">In the previous tutorial you created a web site, a database, and a data model.</span></span> <span data-ttu-id="fefe8-110">このチュートリアルで使用する、`EntityDataSource`コントロールを Entity Framework データ モデルで作業しやすくために ASP.NET が用意されています。</span><span class="sxs-lookup"><span data-stu-id="fefe8-110">In this tutorial you work with the `EntityDataSource` control that ASP.NET provides in order to make it easy to work with an Entity Framework data model.</span></span> <span data-ttu-id="fefe8-111">作成、`GridView`を表示および編集学生データ コントロール、`DetailsView`新しい受講者を追加するためのコントロールと`DropDownList`部署 (関連付けられているコースを表示するため後で使用されます) を選択するためのコントロールです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-111">You'll create a `GridView` control for displaying and editing student data, a `DetailsView` control for adding new students, and a `DropDownList` control for selecting a department (which you'll use later for displaying associated courses).</span></span>

<span data-ttu-id="fefe8-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span></span>

<span data-ttu-id="fefe8-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span></span>

<span data-ttu-id="fefe8-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span></span>

<span data-ttu-id="fefe8-115">このアプリケーションではありませんに追加する入力の検証ページ、データベースを更新するように、実稼働アプリケーションで必要になるように堅牢なエラー処理の一部はできないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="fefe8-115">Note that in this application you won't be adding input validation to pages that update the database, and some of the error handling will not be as robust as would be required in a production application.</span></span> <span data-ttu-id="fefe8-116">Entity Framework に重点を置いて、チュートリアルを保持して作業が長すぎます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-116">That keeps the tutorial focused on the Entity Framework and keeps it from getting too long.</span></span> <span data-ttu-id="fefe8-117">これらの機能をアプリケーションに追加する方法の詳細については、「 [ASP.NET Web Pages でのユーザー入力の検証](https://msdn.microsoft.com/library/7kh55542.aspx)と[Error Handling in ASP.NET ページおよびアプリケーション](https://msdn.microsoft.com/library/w16865z6.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-117">For details about how to add these features to your application, see [Validating User Input in ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) and [Error Handling in ASP.NET Pages and Applications](https://msdn.microsoft.com/library/w16865z6.aspx).</span></span>

## <a name="adding-and-configuring-the-entitydatasource-control"></a><span data-ttu-id="fefe8-118">EntityDataSource コントロールの構成の追加と</span><span class="sxs-lookup"><span data-stu-id="fefe8-118">Adding and Configuring the EntityDataSource Control</span></span>

<span data-ttu-id="fefe8-119">構成から始めます、`EntityDataSource`を読み取るコントロール`Person`からエンティティ、`People`エンティティ セット。</span><span class="sxs-lookup"><span data-stu-id="fefe8-119">You'll begin by configuring an `EntityDataSource` control to read `Person` entities from the `People` entity set.</span></span>

<span data-ttu-id="fefe8-120">パート 1 で作成したプロジェクトを使用していることを開いて Visual Studio 有しを確認してください。</span><span class="sxs-lookup"><span data-stu-id="fefe8-120">Make sure you have Visual Studio open and that you're working with the project you created in part 1.</span></span> <span data-ttu-id="fefe8-121">データ モデルを作成するか、または最後の変更後に加えたからプロジェクトをビルドしていない場合は、今すぐプロジェクトをビルドします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-121">If you haven't built the project since you created the data model or since the last change you made to it, build the project now.</span></span> <span data-ttu-id="fefe8-122">データ モデルへの変更は入手されませんをデザイナーに、プロジェクトがビルドされるまでです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-122">Changes to the data model are not made available to the designer until the project is built.</span></span>

<span data-ttu-id="fefe8-123">新しい web ページを使用して、作成、**マスター ページを使用して Web フォーム**テンプレート、名前を付けます*Students.aspx*です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-123">Create a new web page using the **Web Form using Master Page** template, and name it *Students.aspx*.</span></span>

<span data-ttu-id="fefe8-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span></span>

<span data-ttu-id="fefe8-125">指定*Site.Master*マスター ページとします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-125">Specify *Site.Master* as the master page.</span></span> <span data-ttu-id="fefe8-126">このマスター ページを使用してのこれらのチュートリアルを作成するページのすべてがします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-126">All of the pages you create for these tutorials will use this master page.</span></span>

<span data-ttu-id="fefe8-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span></span>

<span data-ttu-id="fefe8-128">**ソース**ビューで、追加、`h2`に見出し、`Content`という名前のコントロール`Content2`次の例のように。</span><span class="sxs-lookup"><span data-stu-id="fefe8-128">In **Source** view, add an `h2` heading to the `Content` control named `Content2`, as shown in the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample1.aspx)]

<span data-ttu-id="fefe8-129">**データ**のタブ、**ツールボックス**、ドラッグ、`EntityDataSource`コントロールをページ、見出しの下にドロップする ID を変更`StudentsEntityDataSource`:</span><span class="sxs-lookup"><span data-stu-id="fefe8-129">From the **Data** tab of the **Toolbox**, drag an `EntityDataSource` control to the page, drop it below the heading, and change the ID to `StudentsEntityDataSource`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample2.aspx)]

<span data-ttu-id="fefe8-130">切り替える**デザイン**、データ ソース コントロールのスマート タグをクリックし、をクリックして**データ ソースの構成**を起動する、**データ ソースの構成**ウィザード。</span><span class="sxs-lookup"><span data-stu-id="fefe8-130">Switch to **Design** view, click the data source control's smart tag, and then click **Configure Data Source** to launch the **Configure Data Source** wizard.</span></span>

<span data-ttu-id="fefe8-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span></span>

<span data-ttu-id="fefe8-132">**構成 ObjectContext**ウィザード ステップで、 **SchoolEntities**の値として**という名前の接続**を選択して**SchoolEntities**として、 **DefaultContainerName**値。</span><span class="sxs-lookup"><span data-stu-id="fefe8-132">In the **Configure ObjectContext** wizard step, select **SchoolEntities** as the value for **Named Connection**, and select **SchoolEntities** as the **DefaultContainerName** value.</span></span> <span data-ttu-id="fefe8-133">その後、 **[次へ]**をクリックします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-133">Then click **Next**.</span></span>

<span data-ttu-id="fefe8-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span></span>

<span data-ttu-id="fefe8-135">注: この時点で、次のダイアログ ボックスが表示される場合がある続行する前に、プロジェクトをビルドします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-135">Note: If you get the following dialog box at this point, you have to build the project before proceeding.</span></span>

<span data-ttu-id="fefe8-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span></span>

<span data-ttu-id="fefe8-137">**データの選択を構成**手順で、**人**の値として**EntitySetName**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-137">In the **Configure Data Selection** step, select **People** as the value for **EntitySetName**.</span></span> <span data-ttu-id="fefe8-138">**選択**、ことを確認、 ** を選択**ll チェック ボックスをオンします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-138">Under **Select**, make sure the **Select A** ll check box is selected.</span></span> <span data-ttu-id="fefe8-139">更新プログラムを有効化および削除するオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-139">Then select the options to enable update and delete.</span></span> <span data-ttu-id="fefe8-140">完了したら、をクリックして**完了**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-140">When you're done, click **Finish**.</span></span>

<span data-ttu-id="fefe8-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span></span>

## <a name="configuring-database-rules-to-allow-deletion"></a><span data-ttu-id="fefe8-142">削除を許可するデータベースのルールを構成します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-142">Configuring Database Rules to Allow Deletion</span></span>

<span data-ttu-id="fefe8-143">受講者を削除できるようにページを作成する、`Person`を他のテーブルと 3 つのリレーションシップを持つテーブル (`Course`、 `StudentGrade`、および`OfficeAssignment`)。</span><span class="sxs-lookup"><span data-stu-id="fefe8-143">You'll be creating a page that lets users delete students from the `Person` table, which has three relationships with other tables (`Course`, `StudentGrade`, and `OfficeAssignment`).</span></span> <span data-ttu-id="fefe8-144">既定では、データベースは削除できないの行から`Person`他のテーブルの 1 つの関連する行がある場合。</span><span class="sxs-lookup"><span data-stu-id="fefe8-144">By default, the database will prevent you from deleting a row in `Person` if there are related rows in one of the other tables.</span></span> <span data-ttu-id="fefe8-145">関連する行を最初に、手動で削除できますか、削除するときに自動的に削除するデータベースを構成することができます、`Person`行です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-145">You can manually delete the related rows first, or you can configure the database to delete them automatically when you delete a `Person` row.</span></span> <span data-ttu-id="fefe8-146">学生のレコードがこのチュートリアルでは、関連するデータを自動的に削除するデータベースを構成します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-146">For student records in this tutorial, you'll configure the database to delete the related data automatically.</span></span> <span data-ttu-id="fefe8-147">受講者に行を関連付けることがあるためにのみ、`StudentGrade`テーブル、3 つのリレーションシップの 1 つだけを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-147">Because students can have related rows only in the `StudentGrade` table, you need to configure only one of the three relationships.</span></span>

<span data-ttu-id="fefe8-148">使用する場合、 *School.mdf*このチュートリアルでは、プロジェクトからダウンロードしたファイル、これらの構成変更が既に実行されているために、このセクションをスキップすることができます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-148">If you're using the *School.mdf* file that you downloaded from the project that goes with this tutorial, you can skip this section because these configuration changes have already been done.</span></span> <span data-ttu-id="fefe8-149">スクリプトを実行してデータベースを作成した場合は、次の手順を実行することによって、データベースを構成します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-149">If you created the database by running a script, configure the database by performing the following procedures.</span></span>

<span data-ttu-id="fefe8-150">**サーバー エクスプ ローラー**パート 1 で作成したデータベース ダイアグラムを開きます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-150">In **Server Explorer**, open the database diagram that you created in part 1.</span></span> <span data-ttu-id="fefe8-151">間のリレーションシップを右クリックして`Person`と`StudentGrade`(テーブルの間で行) を選択し、**プロパティ**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-151">Right-click the relationship between `Person` and `StudentGrade` (the line between tables), and then select **Properties**.</span></span>

<span data-ttu-id="fefe8-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span></span>

<span data-ttu-id="fefe8-153">**プロパティ**ウィンドウで、展開**INSERT および UPDATE の指定**設定と、 **DeleteRule**プロパティを**Cascade**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-153">In the **Properties** window, expand **INSERT and UPDATE Specification** and set the **DeleteRule** property to **Cascade**.</span></span>

<span data-ttu-id="fefe8-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span></span>

<span data-ttu-id="fefe8-155">保存して図を閉じます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-155">Save and close the diagram.</span></span> <span data-ttu-id="fefe8-156">クリックしてデータベースを更新するかどうかをたずねられたら場合**はい**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-156">If you're asked whether you want to update the database, click **Yes**.</span></span>

<span data-ttu-id="fefe8-157">モデルがデータベースを置いて動作との同期のメモリ内にあるエンティティを保持することを確認するには、データ モデルで対応するルールを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-157">To make sure that the model keeps entities that are in memory in sync with what the database is doing, you must set corresponding rules in the data model.</span></span> <span data-ttu-id="fefe8-158">開いている*SchoolModel.edmx*との間の関連行を右クリックして`Person`と`StudentGrade`、し、**プロパティ**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-158">Open *SchoolModel.edmx*, right-click the association line between `Person` and `StudentGrade`, and then select **Properties**.</span></span>

<span data-ttu-id="fefe8-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span></span>

<span data-ttu-id="fefe8-160">**プロパティ**ウィンドウで、設定**End1 OnDelete**に**Cascade**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-160">In the **Properties** window, set **End1 OnDelete** to **Cascade**.</span></span>

<span data-ttu-id="fefe8-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span></span>

<span data-ttu-id="fefe8-162">保存して閉じます、 *SchoolModel.edmx*ファイル、およびプロジェクトをリビルドします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-162">Save and close the *SchoolModel.edmx* file, and then rebuild the project.</span></span>

<span data-ttu-id="fefe8-163">一般に、データベースが変更されたときに、モデルを同期する方法のいくつかの選択肢があります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-163">In general, when the database changes, you have several choices for how to sync up the model:</span></span>

- <span data-ttu-id="fefe8-164">特定の (の追加やテーブル、ビュー、またはストアド プロシージャを更新する)、変更の種類をクリックし、デザイナー内を右クリックして**データベースからモデルを更新**にデザイナーの作成、変更に自動的にします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-164">For certain kinds of changes (such as adding or refreshing tables, views, or stored procedures), right-click in the designer and select **Update Model from Database** to have the designer make the changes automatically.</span></span>
- <span data-ttu-id="fefe8-165">データ モデルを再生成します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-165">Regenerate the data model.</span></span>
- <span data-ttu-id="fefe8-166">次のような手動の更新を行います。</span><span class="sxs-lookup"><span data-stu-id="fefe8-166">Make manual updates like this one.</span></span>

<span data-ttu-id="fefe8-167">フィールド名の変更を再度作成する必要があるが、ここでは、モデルを再生成でしたまたはリレーションシップの変更によって影響を受けるテーブルを更新する (から`FirstName`に`FirstMidName`)。</span><span class="sxs-lookup"><span data-stu-id="fefe8-167">In this case, you could have regenerated the model or refreshed the tables affected by the relationship change, but then you'd have to make the field-name change again (from `FirstName` to `FirstMidName`).</span></span>

## <a name="using-a-gridview-control-to-read-and-update-entities"></a><span data-ttu-id="fefe8-168">使用した GridView コントロールの読み取りし、エンティティを更新します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-168">Using a GridView Control to Read and Update Entities</span></span>

<span data-ttu-id="fefe8-169">このセクションでを使用して、`GridView`受講者を表示、更新、削除を制御します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-169">In this section you'll use a `GridView` control to display, update, or delete students.</span></span>

<span data-ttu-id="fefe8-170">開く、またはに切り替える*Students.aspx*に切り替えると**デザイン**ビュー。</span><span class="sxs-lookup"><span data-stu-id="fefe8-170">Open or switch to *Students.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="fefe8-171">**データ**のタブ、**ツールボックス**、ドラッグ、`GridView`コントロールの右側に、`EntityDataSource`制御、名前を付けます`StudentsGridView`、スマート タグをクリックし、 **StudentsEntityDataSource**データ ソースとして。</span><span class="sxs-lookup"><span data-stu-id="fefe8-171">From the **Data** tab of the **Toolbox**, drag a `GridView` control to the right of the `EntityDataSource` control, name it `StudentsGridView`, click the smart tag, and then select **StudentsEntityDataSource** as the data source.</span></span>

<span data-ttu-id="fefe8-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span></span>

<span data-ttu-id="fefe8-173">をクリックして**スキーマの更新**(をクリックして**はい**確認を求められた場合)、をクリックして**ページングを有効にする**、**並べ替えを有効にする**、 **編集を有効にする**、および**の削除を有効にする**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-173">Click **Refresh Schema** (click **Yes** if you're prompted to confirm), then click **Enable Paging**, **Enable Sorting**, **Enable Editing**, and **Enable Deleting**.</span></span>

<span data-ttu-id="fefe8-174">をクリックして**列の編集**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-174">Click **Edit Columns**.</span></span>

<span data-ttu-id="fefe8-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span></span>

<span data-ttu-id="fefe8-176">**選択されたフィールド**ボックスで、削除**PersonID**、 **LastName**、および**HireDate**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-176">In the **Selected fields** box, delete **PersonID**, **LastName**, and **HireDate**.</span></span> <span data-ttu-id="fefe8-177">通常しないレコード キー ユーザーに表示する、受講者、雇用された日付は無効とだけで済みます名前フィールドのいずれかのように、1 つのフィールド名の両方の部分を配置します。)</span><span class="sxs-lookup"><span data-stu-id="fefe8-177">You typically don't display a record key to users, hire date is not relevant to students, and you'll put both parts of the name in one field, so you only need one of the name fields.)</span></span>

<span data-ttu-id="fefe8-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span></span>

<span data-ttu-id="fefe8-179">選択、 **FirstMidName**フィールドし、をクリックして**このフィールドを TemplateField に変換**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-179">Select the **FirstMidName** field and then click **Convert this field into a TemplateField**.</span></span>

<span data-ttu-id="fefe8-180">同じ操作を行います**EnrollmentDate**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-180">Do the same for **EnrollmentDate**.</span></span>

<span data-ttu-id="fefe8-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span></span>

<span data-ttu-id="fefe8-182">をクリックして**OK**に切り替えて**ソース**ビュー。</span><span class="sxs-lookup"><span data-stu-id="fefe8-182">Click **OK** and then switch to **Source** view.</span></span> <span data-ttu-id="fefe8-183">残りの変更は、マークアップ内で直接実行しやすくなります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-183">The remaining changes will be easier to do directly in markup.</span></span> <span data-ttu-id="fefe8-184">`GridView`マークアップ今のような次の例を制御します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-184">The `GridView` control markup now looks like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample3.aspx)]

<span data-ttu-id="fefe8-185">コマンド フィールドは、テンプレート フィールドが現在後の最初の列には、最初の名前が表示されます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-185">The first column after the command field is a template field that currently displays the first name.</span></span> <span data-ttu-id="fefe8-186">次の例のようにこのテンプレート フィールドのマークアップを変更します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-186">Change the markup for this template field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample4.aspx)]

<span data-ttu-id="fefe8-187">表示モードで 2 つ`Label`コントロールは、最初と最後の名前を表示します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-187">In display mode, two `Label` controls display the first and last name.</span></span> <span data-ttu-id="fefe8-188">編集モードで 2 つのテキスト ボックスは、最初と最後の名前を変更できるように提供されます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-188">In edit mode, two text boxes are provided so you can change the first and last name.</span></span> <span data-ttu-id="fefe8-189">同様、`Label`内のコントロールの表示モードを使用する`Bind`と`Eval`したとおりに式が ASP.NET のデータ ソース コントロールのデータベースに直接接続するとします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-189">As with the `Label` controls in display mode, you use `Bind` and `Eval` expressions exactly as you would with ASP.NET data source controls that connect directly to databases.</span></span> <span data-ttu-id="fefe8-190">唯一の違いは、データベース列ではなくエンティティのプロパティを指定していることです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-190">The only difference is that you're specifying entity properties instead of database columns.</span></span>

<span data-ttu-id="fefe8-191">最後の列は、登録の日付を表示するテンプレートのフィールドです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-191">The last column is a template field that displays the enrollment date.</span></span> <span data-ttu-id="fefe8-192">次の例のようにこのフィールドのマークアップを変更します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-192">Change the markup for this field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample5.aspx)]

<span data-ttu-id="fefe8-193">両方の表示し、編集モード、書式文字列「{0, d}」、"short 日付"形式で表示される日付。</span><span class="sxs-lookup"><span data-stu-id="fefe8-193">In both display and edit mode, the format string "{0,d}" causes the date to be displayed in the "short date" format.</span></span> <span data-ttu-id="fefe8-194">(お使いのコンピューターは、このチュートリアルで示した画面イメージを異なる形式の表示を構成する場合があります)。</span><span class="sxs-lookup"><span data-stu-id="fefe8-194">(Your computer might be configured to display this format differently from the screen images shown in this tutorial.)</span></span>

<span data-ttu-id="fefe8-195">これらの各テンプレート フィールド、デザイナーは使用に注意してください、`Bind`既定では、式を変更する、`Eval`内の式、`ItemTemplate`要素。</span><span class="sxs-lookup"><span data-stu-id="fefe8-195">Notice that in each of these template fields, the designer used a `Bind` expression by default, but you've changed that to an `Eval` expression in the `ItemTemplate` elements.</span></span> <span data-ttu-id="fefe8-196">`Bind`式利用データで`GridView`コード内のデータにアクセスする必要がある場合に、プロパティを制御します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-196">The `Bind` expression makes the data available in `GridView` control properties in case you need to access the data in code.</span></span> <span data-ttu-id="fefe8-197">このページで使用できるように、コードでは、このデータにアクセスする必要はありません`Eval`、これはより効率的です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-197">In this page you don't need to access this data in code, so you can use `Eval`, which is more efficient.</span></span> <span data-ttu-id="fefe8-198">詳細については、次を参照してください。[データ コントロールからデータを取得](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-198">For more information, see [Getting your data out of the data controls](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span></span>

## <a name="revising-entitydatasource-control-markup-to-improve-performance"></a><span data-ttu-id="fefe8-199">パフォーマンスを向上させる EntityDataSource コントロールのマークアップの改訂</span><span class="sxs-lookup"><span data-stu-id="fefe8-199">Revising EntityDataSource Control Markup to Improve Performance</span></span>

<span data-ttu-id="fefe8-200">マークアップで、`EntityDataSource`コントロールを削除、`ConnectionString`と`DefaultContainerName`属性およびに置き換え、`ContextTypeName="ContosoUniversity.DAL.SchoolEntities"`属性。</span><span class="sxs-lookup"><span data-stu-id="fefe8-200">In the markup for the `EntityDataSource` control, remove the `ConnectionString` and `DefaultContainerName` attributes and replace them with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="fefe8-201">これは、変更を作成するたびにする必要があります、`EntityDataSource`オブジェクト コンテキスト クラス内でハードコーディングされているとは異なる接続を使用する必要がない場合を制御します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-201">This is a change you should make every time you create an `EntityDataSource` control, unless you need to use a connection that is different from the one that's hard-coded in the object context class.</span></span> <span data-ttu-id="fefe8-202">使用して、`ContextTypeName`属性は、次の利点を提供します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-202">Using the `ContextTypeName` attribute provides the following benefits:</span></span>

- <span data-ttu-id="fefe8-203">パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-203">Better performance.</span></span> <span data-ttu-id="fefe8-204">ときに、`EntityDataSource`データ モデルを使用して、このコントロールの初期化、`ConnectionString`と`DefaultContainerName`属性、追加の作業要求のたびにメタデータの読み込みを実行します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-204">When the `EntityDataSource` control initializes the data model using the `ConnectionString` and `DefaultContainerName` attributes, it performs additional work to load metadata on every request.</span></span> <span data-ttu-id="fefe8-205">これは必要ありませんを指定する場合、`ContextTypeName`属性。</span><span class="sxs-lookup"><span data-stu-id="fefe8-205">This isn't necessary if you specify the `ContextTypeName` attribute.</span></span>
- <span data-ttu-id="fefe8-206">遅延読み込みが生成されたオブジェクト コンテキスト クラス内の既定で有効に (など`SchoolEntities`このチュートリアルでは) 4.0 では Entity Framework。</span><span class="sxs-lookup"><span data-stu-id="fefe8-206">Lazy loading is turned on by default in generated object context classes (such as `SchoolEntities` in this tutorial) in Entity Framework 4.0.</span></span> <span data-ttu-id="fefe8-207">つまり、ナビゲーション プロパティが読み込まれる関連データに自動的に必要なときに右。</span><span class="sxs-lookup"><span data-stu-id="fefe8-207">This means that navigation properties are loaded with related data automatically right when you need it.</span></span> <span data-ttu-id="fefe8-208">遅延読み込みは、このチュートリアルで後でさらに詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-208">Lazy loading is explained in more detail later in this tutorial.</span></span>
- <span data-ttu-id="fefe8-209">オブジェクト コンテキスト クラスを適用したすべてのカスタマイズ (ここで、`SchoolEntities`クラス) を使用するコントロールに表示される、`EntityDataSource`コントロール。</span><span class="sxs-lookup"><span data-stu-id="fefe8-209">Any customizations that you've applied to the object context class (in this case, the `SchoolEntities` class) will be available to controls that use the `EntityDataSource` control.</span></span> <span data-ttu-id="fefe8-210">オブジェクト コンテキスト クラスのカスタマイズは、このチュートリアルの系列には対応できない高度なトピックです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-210">Customizing the object context class is an advanced topic that is not covered in this tutorial series.</span></span> <span data-ttu-id="fefe8-211">詳細については、次を参照してください。[エンティティ フレームワーク生成の種類の拡張](https://msdn.microsoft.com/library/dd456844.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-211">For more information, see [Extending Entity Framework Generated Types](https://msdn.microsoft.com/library/dd456844.aspx).</span></span>

<span data-ttu-id="fefe8-212">マークアップは (プロパティの順序が異なる可能性があります)、次の例のようになります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-212">The markup will now resemble the following example (the order of the properties might be different):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample6.aspx)]

<span data-ttu-id="fefe8-213">`EnableFlattening`属性は外部キー列がエンティティのプロパティとして公開されていないため、Entity Framework の以前のバージョンで必要だった機能を参照します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-213">The `EnableFlattening` attribute refers to a feature that was needed in earlier versions of the Entity Framework because foreign key columns were not exposed as entity properties.</span></span> <span data-ttu-id="fefe8-214">現在のバージョンを使用すること*外部キーの関連付け*、つまり、外部キー プロパティですが多対多のアソシエーションの公開されます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-214">The current version makes it possible to use *foreign key associations*, which means foreign key properties are exposed for all but many-to-many associations.</span></span> <span data-ttu-id="fefe8-215">外部キーのプロパティと いいえ、エンティティがある[複合型](https://msdn.microsoft.com/library/bb738472.aspx)、この属性に設定しておくことができます`False`です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-215">If your entities have foreign key properties and no [complex types](https://msdn.microsoft.com/library/bb738472.aspx), you can leave this attribute set to `False`.</span></span> <span data-ttu-id="fefe8-216">既定値があるため、マークアップから属性を削除しない`True`です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-216">Don't remove the attribute from the markup, because the default value is `True`.</span></span> <span data-ttu-id="fefe8-217">詳細については、次を参照してください。[フラット化オブジェクト (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-217">For more information, see [Flattening Objects (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span></span>

<span data-ttu-id="fefe8-218">ページを実行し、受講者と (をフィルター処理するだけの受講者の次のチュートリアルで) 従業員の一覧を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fefe8-218">Run the page and you see a list of students and employees (you'll filter for just students in the next tutorial).</span></span> <span data-ttu-id="fefe8-219">最初の名前と姓が一緒に表示されます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-219">The first name and last name are displayed together.</span></span>

<span data-ttu-id="fefe8-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span></span>

<span data-ttu-id="fefe8-221">並べ替えるには、表示を列名をクリックします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-221">To sort the display, click a column name.</span></span>

<span data-ttu-id="fefe8-222">をクリックして**編集**任意の行にします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-222">Click **Edit** in any row.</span></span> <span data-ttu-id="fefe8-223">最初と最後の名前を変更するテキスト ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-223">Text boxes are displayed where you can change the first and last name.</span></span>

<span data-ttu-id="fefe8-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span></span>

<span data-ttu-id="fefe8-225">**削除**も動作のボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-225">The **Delete** button also works.</span></span> <span data-ttu-id="fefe8-226">登録日のある行の削除 をクリックし、行は表示されなくなります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-226">Click delete for a row that has an enrollment date and the row disappears.</span></span> <span data-ttu-id="fefe8-227">(行登録日せず講習においてインストラクターを表し、参照整合性エラーが発生した可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-227">(Rows without an enrollment date represent instructors and you may get a referential integrity error.</span></span> <span data-ttu-id="fefe8-228">次のチュートリアルでをフィルター処理するだけで受講者を含めるには、このリスト。)</span><span class="sxs-lookup"><span data-stu-id="fefe8-228">In the next tutorial you'll filter this list to include just students.)</span></span>

## <a name="displaying-data-from-a-navigation-property"></a><span data-ttu-id="fefe8-229">ナビゲーション プロパティからデータを表示します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-229">Displaying Data from a Navigation Property</span></span>

<span data-ttu-id="fefe8-230">コースを受講する数を知りたいと各学生に登録されました。</span><span class="sxs-lookup"><span data-stu-id="fefe8-230">Now suppose you want to know how many courses each student is enrolled in.</span></span> <span data-ttu-id="fefe8-231">Entity Framework では、その情報を提供する、`StudentGrades`のナビゲーション プロパティ、`Person`エンティティです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-231">The Entity Framework provides that information in the `StudentGrades` navigation property of the `Person` entity.</span></span> <span data-ttu-id="fefe8-232">データベースのデザインが割り当てられているグレードをしなくても、コースに登録できる受講者を許可していないのでこのチュートリアルと仮定できますが導入された行、`StudentGrade`コースに関連付けられているテーブルの行は、コースに登録されていると同じです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-232">Because the database design does not allow a student to be enrolled in a course without having a grade assigned, for this tutorial you can assume that having a row in the `StudentGrade` table row that is associated with a course is the same as being enrolled in the course.</span></span> <span data-ttu-id="fefe8-233">(、`Courses`講習においてインストラクターだけのナビゲーション プロパティがあります)。</span><span class="sxs-lookup"><span data-stu-id="fefe8-233">(The `Courses` navigation property is only for instructors.)</span></span>

<span data-ttu-id="fefe8-234">使用すると、`ContextTypeName`の属性、`EntityDataSource`コントロール、Entity Framework を自動的に取得ナビゲーション プロパティの情報をそのプロパティにアクセスするとします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-234">When you use the `ContextTypeName` attribute of the `EntityDataSource` control, the Entity Framework automatically retrieves information for a navigation property when you access that property.</span></span> <span data-ttu-id="fefe8-235">これと呼ばれる*遅延読み込み*です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-235">This is called *lazy loading*.</span></span> <span data-ttu-id="fefe8-236">ただし、このことができます、効率的なためにできないを個別に呼び出して、データベースの各時間の追加情報が必要になります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-236">However, this can be inefficient, because it results in a separate call to the database each time additional information is needed.</span></span> <span data-ttu-id="fefe8-237">によって返されるすべてのエンティティのナビゲーション プロパティからのデータが必要があります、`EntityDataSource`コントロール、データベースに 1 回の呼び出しでは、エンティティ自体と共に、関連するデータを取得する方が効率的です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-237">If you need data from the navigation property for every entity returned by the `EntityDataSource` control, it's more efficient to retrieve the related data along with the entity itself in a single call to the database.</span></span> <span data-ttu-id="fefe8-238">これと呼ばれます*一括読み込み*、ナビゲーション プロパティの一括読み込みを設定して指定して、`Include`のプロパティ、`EntityDataSource`コントロール。</span><span class="sxs-lookup"><span data-stu-id="fefe8-238">This is called *eager loading*, and you specify eager loading for a navigation property by setting the `Include` property of the `EntityDataSource` control.</span></span>

<span data-ttu-id="fefe8-239">*Students.aspx*、全学生のコースの数を表示する場合、最適です。 そのための一括読み込みします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-239">In *Students.aspx*, you want to show the number of courses for every student, so eager loading is the best choice.</span></span> <span data-ttu-id="fefe8-240">すべての受講者を表示するが、コースの数を示す場合のみが必要とするマークアップに加えてコードの記述)、それらのいくつかの遅延読み込み場合があることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-240">If you were displaying all students but showing the number of courses only for a few of them (which would require writing some code in addition to the markup), lazy loading might be a better choice.</span></span>

<span data-ttu-id="fefe8-241">開く、またはに切り替える*Students.aspx*に切り替える**デザイン**ビューで、 `StudentsEntityDataSource`、し、、**プロパティ**ウィンドウのセット、 **Include**プロパティを**StudentGrades**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-241">Open or switch to *Students.aspx*, switch to **Design** view, select `StudentsEntityDataSource`, and in the **Properties** window set the **Include** property to **StudentGrades**.</span></span> <span data-ttu-id="fefe8-242">(複数のナビゲーション プロパティを取得する場合は、コンマで区切られた名前を指定できます: たとえば、 **StudentGrades、コース**)。</span><span class="sxs-lookup"><span data-stu-id="fefe8-242">(If you wanted to get multiple navigation properties, you could specify their names separated by commas — for example, **StudentGrades, Courses**.)</span></span>

<span data-ttu-id="fefe8-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span></span>

<span data-ttu-id="fefe8-244">切り替える**ソース**ビュー。</span><span class="sxs-lookup"><span data-stu-id="fefe8-244">Switch to **Source** view.</span></span> <span data-ttu-id="fefe8-245">`StudentsGridView` 、最後の後に、コントロール`asp:TemplateField`要素では、次の新しいテンプレートのフィールドを追加。</span><span class="sxs-lookup"><span data-stu-id="fefe8-245">In the `StudentsGridView` control, after the last `asp:TemplateField` element, add the following new template field:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample7.aspx)]

<span data-ttu-id="fefe8-246">`Eval`式では、ナビゲーション プロパティを参照する`StudentGrades`です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-246">In the `Eval` expression, you can reference the navigation property `StudentGrades`.</span></span> <span data-ttu-id="fefe8-247">このプロパティ コレクションが含まれているため、`Count`コースを受講者が登録されている数を表示する使用できるプロパティです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-247">Because this property contains a collection, it has a `Count` property that you can use to display the number of courses in which the student is enrolled.</span></span> <span data-ttu-id="fefe8-248">以降のチュートリアルでは、コレクションではなく 1 つのエンティティを含むナビゲーション プロパティからデータを表示する方法が表示されます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-248">In a later tutorial you'll see how to display data from navigation properties that contain single entities instead of collections.</span></span> <span data-ttu-id="fefe8-249">(使用することはできません注`BoundField`ナビゲーション プロパティからデータを表示する要素です)。</span><span class="sxs-lookup"><span data-stu-id="fefe8-249">(Note that you cannot use `BoundField` elements to display data from navigation properties.)</span></span>

<span data-ttu-id="fefe8-250">ページを実行し、どのくらいコースに受講者が登録されているが表示されます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-250">Run the page and you now see how many courses each student is enrolled in.</span></span>

<span data-ttu-id="fefe8-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span></span>

## <a name="using-a-detailsview-control-to-insert-entities"></a><span data-ttu-id="fefe8-252">DetailsView コントロールを使用してエンティティを挿入するには</span><span class="sxs-lookup"><span data-stu-id="fefe8-252">Using a DetailsView Control to Insert Entities</span></span>

<span data-ttu-id="fefe8-253">次の手順を持つページを作成するには、`DetailsView`新しい受講者を追加するために使用するコントロール。</span><span class="sxs-lookup"><span data-stu-id="fefe8-253">The next step is to create a page that has a `DetailsView` control that will let you add new students.</span></span> <span data-ttu-id="fefe8-254">ブラウザーを閉じて、新しい web ページを使用して、作成、 *Site.Master*マスター ページ。</span><span class="sxs-lookup"><span data-stu-id="fefe8-254">Close the browser and then create a new web page using the *Site.Master* master page.</span></span> <span data-ttu-id="fefe8-255">ページの名前を付けます*StudentsAdd.aspx*、しに切り替えると**ソース**ビュー。</span><span class="sxs-lookup"><span data-stu-id="fefe8-255">Name the page *StudentsAdd.aspx*, and then switch to **Source** view.</span></span>

<span data-ttu-id="fefe8-256">既存のマークアップを置き換えるには、次のマークアップを追加、`Content`という名前のコントロール`Content2`:</span><span class="sxs-lookup"><span data-stu-id="fefe8-256">Add the following markup to replace the existing markup for the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample8.aspx)]

<span data-ttu-id="fefe8-257">このマークアップを作成、`EntityDataSource`と似ていますで作成したコントロール*Students.aspx*これにより、カーソルを除き、します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-257">This markup creates an `EntityDataSource` control that is similar to the one you created in *Students.aspx*, except it enables insertion.</span></span> <span data-ttu-id="fefe8-258">同様、`GridView`のバインドされたフィールドを制御する、`DetailsView`コントロールは、コード化されたエンティティのプロパティを参照する点を除いて、データベースに直接接続されたデータ コントロールの場合と同じに正確にします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-258">As with the `GridView` control, the bound fields of the `DetailsView` control are coded exactly as they would be for a data control that connects directly to a database, except that they reference entity properties.</span></span> <span data-ttu-id="fefe8-259">ここで、`DetailsView`コントロールのみ使用される、行を挿入するため、既定のモードを設定する`Insert`です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-259">In this case, the `DetailsView` control is used only for inserting rows, so you have set the default mode to `Insert`.</span></span>

<span data-ttu-id="fefe8-260">ページを実行し、新しい学生を追加します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-260">Run the page and add a new student.</span></span>

<span data-ttu-id="fefe8-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span></span>

<span data-ttu-id="fefe8-262">新しい学生を挿入した後を実行する場合、何も起こりません*Students.aspx*、新しい学生情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-262">Nothing will happen after you insert a new student, but if you now run *Students.aspx*, you'll see the new student information.</span></span>

## <a name="displaying-data-in-a-drop-down-list"></a><span data-ttu-id="fefe8-263">ドロップダウン リストでデータを表示します。</span><span class="sxs-lookup"><span data-stu-id="fefe8-263">Displaying Data in a Drop-Down List</span></span>

<span data-ttu-id="fefe8-264">次の手順で学習 databind、`DropDownList`コントロールを使用して設定エンティティを`EntityDataSource`コントロール。</span><span class="sxs-lookup"><span data-stu-id="fefe8-264">In the following steps you'll databind a `DropDownList` control to an entity set using an `EntityDataSource` control.</span></span> <span data-ttu-id="fefe8-265">このチュートリアルでは、このリストに多くの操作も行いません。</span><span class="sxs-lookup"><span data-stu-id="fefe8-265">In this part of the tutorial, you won't do much with this list.</span></span> <span data-ttu-id="fefe8-266">以降の部分では、使用するリスト部門に関連付けられているコースを表示するのに部門を選択できるようにします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-266">In subsequent parts, though, you'll use the list to let users select a department to display courses associated with the department.</span></span>

<span data-ttu-id="fefe8-267">という名前の新しい web ページを作成する*Courses.aspx*です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-267">Create a new web page named *Courses.aspx*.</span></span> <span data-ttu-id="fefe8-268">**ソース**に見出しを追加、表示、`Content`というコントロール`Content2`:</span><span class="sxs-lookup"><span data-stu-id="fefe8-268">In **Source** view, add a heading to the `Content` control that's named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample9.aspx)]

<span data-ttu-id="fefe8-269">**デザイン**ビューで、追加、`EntityDataSource`ページにコントロールする前に、実行した方法でこの時間を除くという名前を付けます`DepartmentsEntityDataSource`です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-269">In **Design** view, add an `EntityDataSource` control to the page as you did before, except this time name it `DepartmentsEntityDataSource`.</span></span> <span data-ttu-id="fefe8-270">選択**部門**として、 **EntitySetName**値に設定して、のみを選択、 **DepartmentID**と**名前**プロパティです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-270">Select **Departments** as the **EntitySetName** value, and select only the **DepartmentID** and **Name** properties.</span></span>

<span data-ttu-id="fefe8-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span></span>

<span data-ttu-id="fefe8-272">**標準**のタブ、**ツールボックス**、ドラッグ、`DropDownList`コントロールをページに、名前、 `DepartmentsDropDownList`、スマート タグをクリックし、選択**データ ソースの選択**に開始、**データ ソース構成ウィザード**です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-272">From the **Standard** tab of the **Toolbox**, drag a `DropDownList` control to the page, name it `DepartmentsDropDownList`, click the smart tag, and select **Choose Data Source** to start the **DataSource Configuration Wizard**.</span></span>

<span data-ttu-id="fefe8-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span></span>

<span data-ttu-id="fefe8-274">**データ ソースを選択**手順で、 **DepartmentsEntityDataSource**をクリックして、データ ソースとして**スキーマの更新**、し、**名前**として表示するデータ フィールドと**DepartmentID**値のデータ フィールドとします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-274">In the **Choose a Data Source** step, select **DepartmentsEntityDataSource** as the data source, click **Refresh Schema**, and then select **Name** as the data field to display and **DepartmentID** as the value data field.</span></span> <span data-ttu-id="fefe8-275">**[OK]**をクリックします。</span><span class="sxs-lookup"><span data-stu-id="fefe8-275">Click **OK**.</span></span>

<span data-ttu-id="fefe8-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span></span>

<span data-ttu-id="fefe8-277">データ バインドする Entity Framework を使用して、コントロールを使用する方法は、他の ASP.NET データ エンティティとエンティティのプロパティ、を除き、ソース コントロールを指定するいると同じです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-277">The method you use to databind the control using the Entity Framework is the same as with other ASP.NET data source controls except you're specifying entities and entity properties.</span></span>

<span data-ttu-id="fefe8-278">切り替える**ソース**表示し、追加"部門を選択:"する直前に、`DropDownList`コントロール。</span><span class="sxs-lookup"><span data-stu-id="fefe8-278">Switch to **Source** view and add "Select a department:" immediately before the `DropDownList` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample10.aspx)]

<span data-ttu-id="fefe8-279">なおにのマークアップを変更する、`EntityDataSource`に置き換えることで、コントロールをこの時点で、`ConnectionString`と`DefaultContainerName`属性を`ContextTypeName="ContosoUniversity.DAL.SchoolEntities"`属性。</span><span class="sxs-lookup"><span data-stu-id="fefe8-279">As a reminder, change the markup for the `EntityDataSource` control at this point by replacing the `ConnectionString` and `DefaultContainerName` attributes with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="fefe8-280">変更する前に、データ ソース コントロールにリンクされているデータ バインド コントロールを作成した後にするまで待機することをおは多くの場合、`EntityDataSource`ため、変更を加えた後、デザイナーが用意されていませんが、マークアップを制御、**更新スキーマ**データ バインド コントロールでオプションです。</span><span class="sxs-lookup"><span data-stu-id="fefe8-280">It's often best to wait until after you've created the data-bound control that is linked to the data source control before you change the `EntityDataSource` control markup, because after you make the change, the designer will not provide you with a **Refresh Schema** option in the data-bound control.</span></span>

<span data-ttu-id="fefe8-281">ページを実行し、部門は、ドロップダウン リストから選択できます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-281">Run the page and you can select a department from the drop-down list.</span></span>

<span data-ttu-id="fefe8-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="fefe8-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span></span>

<span data-ttu-id="fefe8-283">これで完了使用の概要、`EntityDataSource`コントロール。</span><span class="sxs-lookup"><span data-stu-id="fefe8-283">This completes the introduction to using the `EntityDataSource` control.</span></span> <span data-ttu-id="fefe8-284">このコントロールの操作は、エンティティとテーブルと列ではなくプロパティを参照できるようにする点を除いて一般的に使用可能なその他の ASP.NET データ ソース コントロールから変わりませんいます。</span><span class="sxs-lookup"><span data-stu-id="fefe8-284">Working with this control is generally no different from working with other ASP.NET data source controls, except that you reference entities and properties instead of tables and columns.</span></span> <span data-ttu-id="fefe8-285">唯一の例外は、ナビゲーション プロパティにアクセスする場合です。</span><span class="sxs-lookup"><span data-stu-id="fefe8-285">The only exception is when you want to access navigation properties.</span></span> <span data-ttu-id="fefe8-286">次のチュートリアルが表示されます、構文を使用することで`EntityDataSource`フィルター、グループ、およびデータの並べ替え時にコントロールが他のデータ ソース コントロールから異なるも場合があります。</span><span class="sxs-lookup"><span data-stu-id="fefe8-286">In the next tutorial you'll see that the syntax you use with `EntityDataSource` control might also differ from other data source controls when you filter, group, and order data.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="fefe8-287">[前へ](the-entity-framework-and-aspnet-getting-started-part-1.md)
> [次へ](the-entity-framework-and-aspnet-getting-started-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="fefe8-287">[Previous](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-3.md)</span></span>
