---
uid: web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
title: "入れ子になったマスター ページ (c#) |Microsoft ドキュメント"
author: rick-anderson
description: "他の中で 1 つのマスター ページを入れ子にする方法を示します。"
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/28/2008
ms.topic: article
ms.assetid: 32b7fb6e-d74b-4048-91f8-70631b2523ee
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 97513a5a6ac7a958a03626f16a328ecb0b85c03f
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2018
---
<a name="nested-master-pages-c"></a><span data-ttu-id="4a6f4-103">入れ子になったマスター ページ (c#)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-103">Nested Master Pages (C#)</span></span>
====================
<span data-ttu-id="4a6f4-104">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4a6f4-105">[コードをダウンロードする](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip)または[PDF のダウンロード](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-105">[Download Code](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) or [Download PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span></span>

> <span data-ttu-id="4a6f4-106">他の中で 1 つのマスター ページを入れ子にする方法を示します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-106">Shows how to nest one master page within another.</span></span>


## <a name="introduction"></a><span data-ttu-id="4a6f4-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="4a6f4-107">Introduction</span></span>

<span data-ttu-id="4a6f4-108">過去の 9 つのチュートリアルの過程でマスター ページをサイト全体のレイアウトを実装する方法を説明しました。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-108">Over the course of the past nine tutorials we have seen how to implement a site-wide layout with master pages.</span></span> <span data-ttu-id="4a6f4-109">簡単に言うと、マスター ページにより、開発者は、マスター ページ コンテンツのページ コンテンツ ページごとにカスタマイズ可能な特定の地域とで一般的なマークアップを定義するページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-109">In a nutshell, master pages allow us, the page developer, to define common markup in the master page along with specific regions that can be customized on a content page-by-content page basis.</span></span> <span data-ttu-id="4a6f4-110">マスター ページ内のプレース ホルダー コントロールのカスタマイズ可能な領域を示します。ContentPlaceHolder のコントロールのカスタマイズされたマークアップは、コンテンツ コントロールを使用してコンテンツ ページで定義されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-110">The ContentPlaceHolder controls in a master page indicate the customizable regions; the customized markup for the ContentPlaceHolder controls are defined in the content page via Content controls.</span></span>

<span data-ttu-id="4a6f4-111">これまでに調査したマスター ページ手法は、サイト全体にわたって使用される単一のレイアウトがある場合は、優れたです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-111">The master page techniques we've explored thus far are great if you have a single layout used across the entire site.</span></span> <span data-ttu-id="4a6f4-112">ただし、多くの大規模な web サイトでは、さまざまなセクション全体にカスタマイズされているサイトのレイアウトがあります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-112">However, many large websites have a site layout that is customized across various sections.</span></span> <span data-ttu-id="4a6f4-113">たとえば、病院スタッフ患者の情報、アクティビティ、および課金を管理するために使用する医療アプリケーションがあるとします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-113">For example, consider a health care application used by hospital staff to manage patient information, activities, and billing.</span></span> <span data-ttu-id="4a6f4-114">このアプリケーションの web ページの次の 3 つの型である可能性があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-114">There may be three types of web pages in this application:</span></span>

- <span data-ttu-id="4a6f4-115">スタッフのメンバーが、可用性を更新できますスタッフ メンバーに固有のページでは、スケジュール、表示されます。 または、休暇時間を要求します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-115">Staff member-specific pages where staff members can update availability, view schedules, or request vacation time.</span></span>
- <span data-ttu-id="4a6f4-116">患者固有のページ、スタッフのメンバーの表示または特定の患者の情報を編集します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-116">Patient-specific pages where staff members view or edit information for a specific patient.</span></span>
- <span data-ttu-id="4a6f4-117">課金固有のページで経理が現在確認は、表示される状態および財務レポートを要求します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-117">Billing-specific pages where accountants review current claim statuses and financial reports.</span></span>

<span data-ttu-id="4a6f4-118">すべてのページには、上部と下部にある頻繁に使用されるリンクの系列の間でメニューなどの一般的なレイアウトを共有可能性があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-118">Every page might share a common layout, such as a menu across the top and a series of frequently used links along the bottom.</span></span> <span data-ttu-id="4a6f4-119">スタッフ、患者情報、および請求固有のページは、この一般的なレイアウトをカスタマイズする必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-119">But the staff-, patient-, and billing-specific pages may need to customize this generic layout.</span></span> <span data-ttu-id="4a6f4-120">たとえば、スタッフ固有のページなどは、予定表、タスクが一覧に現在ログオンしているユーザーの可用性と毎日のスケジュールを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-120">For example, perhaps all staff-specific pages should include a calendar and task list showing the currently logged on user's availability and daily schedule.</span></span> <span data-ttu-id="4a6f4-121">おそらくの患者情報に固有のすべてのページは、名前、アドレス、および、患者の情報を含む、編集中の保険情報を表示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-121">Perhaps all patient-specific pages need to show the name, address, and insurance information for the patient whose information is being edited.</span></span>

<span data-ttu-id="4a6f4-122">使用してこのようなカスタマイズされたレイアウトを作成することは*入れ子になったマスター ページ*です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-122">It's possible to create such customized layouts by using *nested master pages*.</span></span> <span data-ttu-id="4a6f4-123">上記のシナリオを実装するのには、contentplaceholders にカスタマイズ可能な領域を定義すると、サイト全体のレイアウト、メニューとページ フッターのコンテンツを定義するマスター ページを作成して開始します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-123">To implement the above scenario, we would start by creating a master page that defined the site-wide layout, the menu and footer content, with ContentPlaceHolders defining the customizable regions.</span></span> <span data-ttu-id="4a6f4-124">次の 3 つ入れ子になったマスター ページ、web ページの種類ごとに 1 つは作成します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-124">We would then create three nested master pages, one for each type of web page.</span></span> <span data-ttu-id="4a6f4-125">入れ子になった各マスター ページには、マスター ページを使用するコンテンツ ページの種類間でコンテンツを定義します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-125">Each nested master page would define the content among the type of content pages that use the master page.</span></span> <span data-ttu-id="4a6f4-126">つまり、マークアップと編集されている患者に関する情報を表示するプログラム ロジックの患者情報に固有のコンテンツ ページの入れ子になったマスター ページが含まれます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-126">In other words, the nested master page for patient-specific content pages would include markup and programmatic logic for displaying information about the patient being edited.</span></span> <span data-ttu-id="4a6f4-127">新しい患者固有のページを作成するときに、この入れ子になったマスター ページにバインドおとします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-127">When creating a new patient-specific page we would bind it to this nested master page.</span></span>

<span data-ttu-id="4a6f4-128">このチュートリアルは、入れ子になったマスター ページの利点を強調表示して起動します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-128">This tutorial starts by highlighting the benefits of nested master pages.</span></span> <span data-ttu-id="4a6f4-129">作成し、入れ子になったマスター ページを使用する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-129">It then shows how to create and use nested master pages.</span></span>

> [!NOTE]
> <span data-ttu-id="4a6f4-130">.NET Framework のバージョン 2.0 以降可能であった入れ子になったマスター ページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-130">Nested master pages have been possible since version 2.0 of the .NET Framework.</span></span> <span data-ttu-id="4a6f4-131">ただし、Visual Studio 2005 では、入れ子になったマスター ページのデザイン時サポートが含まれませんでした。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-131">However, Visual Studio 2005 did not include design-time support for nested master pages.</span></span> <span data-ttu-id="4a6f4-132">良いニュースは、Visual Studio 2008 が入れ子になったマスター ページのデザイン時の機能豊富なエクスペリエンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-132">The good news is that Visual Studio 2008 offers a rich design-time experience for nested master pages.</span></span> <span data-ttu-id="4a6f4-133">入れ子になったマスター ページを使用して関心のある Visual Studio 2005 を引き続き使用している場合は、チェック アウト[Scott Guthrie](https://weblogs.asp.net/scottgu/)のブログ エントリ「 [VS 2005 のデザイン時入れ子になったマスター ページのヒント](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-133">If you are interested in using nested master pages but are still using Visual Studio 2005, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry, [Tips for Nested Master Pages in VS 2005 Design-Time](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span></span>


## <a name="the-benefits-of-nested-master-pages"></a><span data-ttu-id="4a6f4-134">入れ子になったマスター ページの利点</span><span class="sxs-lookup"><span data-stu-id="4a6f4-134">The Benefits of Nested Master Pages</span></span>

<span data-ttu-id="4a6f4-135">多くの web サイトがある、包括的なサイトの設計とカスタマイズされたデザイン複数ページの特定の種類に固有です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-135">Many websites have an overarching site design as well as more customized designs specific to certain types of pages.</span></span> <span data-ttu-id="4a6f4-136">たとえば、web アプリケーションではデモ作成しました基本的な管理セクション (内のページ、`~/Admin`フォルダー)。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-136">For instance, in our demo web application we have created a rudimentary Administration section (the pages in the `~/Admin` folder).</span></span> <span data-ttu-id="4a6f4-137">現在、web ページで、`~/Admin`フォルダーは、[管理] セクションではなく、これらのページとして同じマスター ページを使用して (つまり、`Site.master`または`Alternate.master`ユーザーの選択に応じて、)。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-137">Currently the web pages in the `~/Admin` folder use the same master page as those pages not in the administration section (namely, `Site.master` or `Alternate.master`, depending on the user's selection).</span></span>

> [!NOTE]
> <span data-ttu-id="4a6f4-138">ここには、マイクロソフトのサイトが 1 つのマスター ページとして扱わ`Site.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-138">For now, pretend that our site has just one master page, `Site.master`.</span></span> <span data-ttu-id="4a6f4-139">このチュートリアルの後半で 2 つ (以上) のマスター ページを使用して、「を使用して、入れ子になったマスター ページの 管理セクション」で始まるを入れ子になったマスター ページを使用してお対処します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-139">We'll address using nested master pages with two (or more) master pages starting with "Using a Nested Master Page for the Administration Section" later in this tutorial.</span></span>


<span data-ttu-id="4a6f4-140">追加情報や、それ以外の場合はありません、サイトの他のページ内に存在するリンクを含める [管理] ページのレイアウトをカスタマイズするように求められたことを想像してください。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-140">Imagine that we were asked to customize the layout of the Administration pages to include additional information or links that would not otherwise be present in other pages in the site.</span></span> <span data-ttu-id="4a6f4-141">この要件を実装する次の 4 つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-141">There are four techniques to implement this requirement:</span></span>

1. <span data-ttu-id="4a6f4-142">すべてのコンテンツ ページに、管理に固有の情報とリンクを手動で追加、`~/Admin`フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-142">Manually add the Administration-specific information and links to every content page in the `~/Admin` folder.</span></span>
2. <span data-ttu-id="4a6f4-143">更新プログラム、`Site.master`管理セクションに固有の情報とリンクを含めるし、これらのセクションでは、非表示のマスター ページにコードを追加するマスター ページで、[管理] ページのいずれかが参照されているかどうかに基づいて。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-143">Update the `Site.master` master page to include the Administration section-specific information and links, and then add code to the master page to show or hide these sections based on whether one of the Administration pages is being visited.</span></span>
3. <span data-ttu-id="4a6f4-144">新しいマスター ページを作成する具体的には、[管理] セクションをコピーからのマークアップを`Site.master`管理セクションに固有の情報とリンクについては、追加、およびコンテンツのページを更新、`~/Admin`新しいマスターが使用するフォルダーページです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-144">Create a new master page specifically for the Administration section, copy over the markup from `Site.master`, add the Administration section-specific information and links, and then update the content pages in the `~/Admin` folder to use this new master page.</span></span>
4. <span data-ttu-id="4a6f4-145">入れ子になったマスター ページにバインドを作成して`Site.master`内でコンテンツ ページを持つ、`~/Admin`入れ子になったマスター ページをこの新しいフォルダー使用します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-145">Create a nested master page that binds to `Site.master` and have the content pages in the `~/Admin` folder use this new nested master page.</span></span> <span data-ttu-id="4a6f4-146">この入れ子になったマスター ページの追加情報と管理ページに特定のリンクだけが含まれますで既に定義されているマークアップを繰り返す必要はありません`Site.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-146">This nested master page would include just the additional information and links specific to the Administration pages and would not need to repeat the markup already defined in `Site.master`.</span></span>

<span data-ttu-id="4a6f4-147">最初のオプションは、適切です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-147">The first option is the least palatable.</span></span> <span data-ttu-id="4a6f4-148">マスター ページを使用して、あらゆる部分を手動でコピーして、新規の ASP.NET ページに共通のマークアップを貼り付けることから離れた場所に移動を開始します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-148">The whole point of using master pages is to move away from having to manually copy and paste common markup to new ASP.NET pages.</span></span> <span data-ttu-id="4a6f4-149">2 番目のオプションは、許容ですがときどきのみが表示され、開発者マスター ページの編集このマークアップを回避してとにする必要があるマークアップを使用してマスター ページをレイアウトやバルクことと保守性が低下するため、アプリケーション正確に特定マークアップは、非表示にされてときと表示されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-149">The second option is acceptable, but makes the application less maintainable as it bulks up the master pages with markup that is only occasionally displayed and requires developers editing the master page to work around this markup and to have to remember when, exactly, certain markup is displayed versus when it is hidden.</span></span> <span data-ttu-id="4a6f4-150">この方法は、この単一のマスター ページでは対応に必要な web ページの詳細と詳細の種類のカスタマイズと小さい tenable があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-150">This approach would be less tenable as customizations from more and more types of web pages needed to be accommodated by this single master page.</span></span>

<span data-ttu-id="4a6f4-151">3 番目のオプションが煩雑さを削除し、2 番目のオプションと、複雑性の問題、提示します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-151">The third option removes the clutter and complexity issues the surfaced with the second option.</span></span> <span data-ttu-id="4a6f4-152">ただし、3 つのオプションの主な欠点は、コピーしてから、一般的なレイアウトを貼り付けることが必要なこと`Site.master`新しい管理セクションに固有のマスター ページにします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-152">However, option three's main drawback is that it requires us to copy and paste the common layout from `Site.master` to the new Administration section-specific master page.</span></span> <span data-ttu-id="4a6f4-153">場合後でサイト全体のレイアウトを変更するお必要がありますに 2 つの場所を変更することに注意してください。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-153">If we later decide to change the site-wide layout we have to remember to change it in two places.</span></span>

<span data-ttu-id="4a6f4-154">4 番目のオプションは、マスター ページを入れ子にされた、2 番目と 3 番目のオプションの最適な意見をお持ちです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-154">The fourth option, nested master pages, give us the best of the second and third options.</span></span> <span data-ttu-id="4a6f4-155">特定の地域に固有のコンテンツが別のファイルに分割中に、1 つのファイルの最上位レベルのマスター ページ - サイト全体のレイアウト情報が保持されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-155">The site-wide layout information is maintained in one file - the top-level master page - while the content specific to particular regions is separated out into different files.</span></span>

<span data-ttu-id="4a6f4-156">このチュートリアルは、作成して、単純な入れ子になったマスター ページを使用してを見てを開始します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-156">This tutorial starts with a look at creating and using a simple nested master page.</span></span> <span data-ttu-id="4a6f4-157">まったく新しいトップ レベルのマスター ページ、2 つの入れ子になったマスター ページ、および 2 つのコンテンツ ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-157">We create a brand new top-level master page, two nested master pages, and two content pages.</span></span> <span data-ttu-id="4a6f4-158">「を使用して、入れ子になったマスター ページの 管理セクション」から始めて、入れ子になったマスター ページを使用するように、既存のマスター ページ アーキテクチャの更新について説明します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-158">Starting with "Using a Nested Master Page for the Administration Section," we look at updating our existing master page architecture to include the use of nested master pages.</span></span> <span data-ttu-id="4a6f4-159">具体的には、入れ子になったマスター ページを作成し、コンテンツ ページの追加のカスタム コンテンツを追加することを使用して、`~/Admin`フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-159">Specifically, we create a nested master page and use it to include additional custom content for the content pages in the `~/Admin` folder.</span></span>

## <a name="step-1-creating-a-simple-top-level-master-page"></a><span data-ttu-id="4a6f4-160">手順 1: 単純な最上位レベルのマスター ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-160">Step 1: Creating a Simple Top-Level Master Page</span></span>

<span data-ttu-id="4a6f4-161">入れ子になったマスターを作成するのいずれかに基づいて、既存のマスター ページと、既存のコンテンツ ページが既に特定予定ために、多少複雑なをオーバーヘッドが最上位レベルのマスター ページではなく、この新しい入れ子になったマスター ページを使用する既存のコンテンツ ページを更新ContentPlaceHolder の最上位レベルのマスター ページで定義されているコントロール。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-161">Creating a nested master based on one of the existing master pages and then updating an existing content page to use this new nested master page instead of the top-level master page entails some complexity because the existing content pages already expect certain ContentPlaceHolder controls defined in the top-level master page.</span></span> <span data-ttu-id="4a6f4-162">したがって、入れ子になったマスター ページには、同じ名前を持つ同じ ContentPlaceHolder コントロールおく必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-162">Therefore, the nested master page must also include the same ContentPlaceHolder controls with the same names.</span></span> <span data-ttu-id="4a6f4-163">さらに、特定のデモ アプリケーションに含まれる 2 つマスター ページ (`Site.master`と`Alternate.master`) このような複雑さをさらに追加するユーザーの設定に基づくコンテンツ ページに動的に割り当てられています。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-163">Furthermore, our particular demo application has two master pages (`Site.master` and `Alternate.master`) that are dynamically assigned to a content page based on a user's preferences, which further adds to this complexity.</span></span> <span data-ttu-id="4a6f4-164">このチュートリアルの後半で入れ子になったマスター ページを使用する既存のアプリケーションの更新に見ていきますが、マスター ページの例が、単純なに焦点を最初に入れ子になったみましょう。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-164">We will look at updating the existing application to use nested master pages later in this tutorial, but let's first focus on a simple nested master pages example.</span></span>

<span data-ttu-id="4a6f4-165">という名前の新しいフォルダーを作成する`NestedMasterPages`し、そのフォルダーに新しいマスター ページ ファイルを追加`Simple.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-165">Create a new folder named `NestedMasterPages` and then add a new master page file to that folder named `Simple.master`.</span></span> <span data-ttu-id="4a6f4-166">(図 1 の参照、ソリューション エクスプ ローラーのスクリーン ショットこのフォルダーとファイルを追加した後です。)ドラッグ、`AlternateStyles.css`ソリューション エクスプ ローラー、デザイナーからのスタイル シート ファイル。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-166">(See Figure 1 for a screen shot of the Solution Explorer after this folder and file have been added.) Drag the `AlternateStyles.css` style sheet file from the Solution Explorer onto the Designer.</span></span> <span data-ttu-id="4a6f4-167">これを追加、`<link>`要素のスタイル シート ファイルを`<head>`要素の後に、マスター ページの`<head>`要素のマークアップのようになります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-167">This adds a `<link>` element to the style sheet file in the `<head>` element, after which the master page's `<head>` element's markup should look like:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="4a6f4-168">次に、追加の Web フォーム内で次のマークアップ`Simple.master`:</span><span class="sxs-lookup"><span data-stu-id="4a6f4-168">Next, add the following markup within the Web Form of `Simple.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="4a6f4-169">このマークアップでは、ネイビー カラーのバック グラウンドで大きな白いフォント内のページの上部にある「入れ子になったマスター ページ (単純)」というリンクが表示されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-169">This markup displays a link titled "Nested Master Pages (Simple)" at the top of the page in a large white font on a navy background.</span></span> <span data-ttu-id="4a6f4-170">下には、 `MainContent` ContentPlaceHolder です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-170">Beneath that is the `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="4a6f4-171">図 1 は、 `Simple.master` Visual Studio デザイナーで読み込まれるときに、マスター ページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-171">Figure 1 shows the `Simple.master` master page when loaded in the Visual Studio Designer.</span></span>


<span data-ttu-id="4a6f4-172">[![入れ子になったマスター ページ、[管理] セクション内のページに特定のコンテンツを定義します。](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-172">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="4a6f4-173">**図 01**:、入れ子になったマスター ページを定義コンテンツ特定 [管理] セクション内のページ ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-173">**Figure 01**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image3.png))</span></span>


## <a name="step-2-creating-a-simple-nested-master-page"></a><span data-ttu-id="4a6f4-174">手順 2: 単純な入れ子になったマスター ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-174">Step 2: Creating a Simple Nested Master Page</span></span>

<span data-ttu-id="4a6f4-175">`Simple.master`ContentPlaceHolder の 2 つのコントロールが含まれています。 `MainContent` ContentPlaceHolder と共に Web フォーム内で追加されました、`head`で ContentPlaceHolder、`<head>`要素。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-175">`Simple.master` contains two ContentPlaceHolder controls: the `MainContent` ContentPlaceHolder we added within the Web Form along with the `head` ContentPlaceHolder in the `<head>` element.</span></span> <span data-ttu-id="4a6f4-176">コンテンツ ページを作成しにバインドした場合`Simple.master`コンテンツ ページで次の 2 つの contentplaceholders に参照する 2 つのコンテンツ コントロールが必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-176">If we were to create a content page and bind it to `Simple.master` the content page would have two Content controls referencing the two ContentPlaceHolders.</span></span> <span data-ttu-id="4a6f4-177">同様に、入れ子になったマスター ページを作成し、バインドにかどうか`Simple.master`の場合、入れ子になったマスター ページは次の 2 つのコンテンツ コントロールです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-177">Similarly, if we create a nested master page and bind it to `Simple.master` then the nested master page will have two Content controls.</span></span>

<span data-ttu-id="4a6f4-178">新しい入れ子になったマスター ページを追加してみましょう。、`NestedMasterPages`という名前のフォルダー`SimpleNested.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-178">Let's add a new nested master page to the `NestedMasterPages` folder named `SimpleNested.master`.</span></span> <span data-ttu-id="4a6f4-179">右クリックし、`NestedMasterPages`フォルダーと、新しい項目の追加を選択します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-179">Right-click on the `NestedMasterPages` folder and choose Add New Item.</span></span> <span data-ttu-id="4a6f4-180">図 2 に示すように、新しい項目の追加 ダイアログ ボックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-180">This brings up the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="4a6f4-181">マスター ページ テンプレートの種類を選択して、新しいマスター ページの名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-181">Select the Master Page template type and type in the name of the new master page.</span></span> <span data-ttu-id="4a6f4-182">指定すること、新しいマスター ページは、入れ子になったマスター ページ、するには、「マスター ページを選択」チェック ボックスを確認します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-182">To indicate that the new master page should be a nested master page, check the "Select master page" checkbox.</span></span>

<span data-ttu-id="4a6f4-183">次に、[追加] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-183">Next, click the Add button.</span></span> <span data-ttu-id="4a6f4-184">同じ Select マスター ページに、コンテンツ ページをバインドするときを参照してください、マスター ページ ダイアログ ボックスが表示されます (図 3 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-184">This will display the same Select a Master Page dialog box you see when binding a content page to a master page (see Figure 3).</span></span> <span data-ttu-id="4a6f4-185">選択、`Simple.master`マスター ページで、`NestedMasterPages`フォルダー OK をクリックします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-185">Choose the `Simple.master` master page in the `NestedMasterPages` folder and click OK.</span></span>

> [!NOTE]
> <span data-ttu-id="4a6f4-186">Web サイト プロジェクトのモデルではなく、Web アプリケーション プロジェクト モデルを使用して、ASP.NET web サイトを作成する場合は図 2 に示すように新しい項目の追加 ダイアログ ボックスで"Select マスター ページ"チェック ボックスは表示されません。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-186">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="4a6f4-187">Web アプリケーション プロジェクトのモデルを使用するときに、入れ子になったマスター ページを作成するには、(テンプレートの代わりに、マスター ページ) 入れ子になったマスター ページ テンプレートを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-187">To create a nested master page when using the Web Application Project model you must choose the Nested Master Page template (instead of the Master Page template).</span></span> <span data-ttu-id="4a6f4-188">マスター ページの入れ子になったテンプレートを選択すると、追加をクリックして、後に同じは、図 3 に示すようにダイアログ ボックスが表示されますマスター ページを選択します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-188">After selecting the Nested Master Page template and clicking Add, the same Select a Master Page dialog box shown in Figure 3 will appear.</span></span>


<span data-ttu-id="4a6f4-189">[![チェック、&quot;マスター ページを選択&quot;入れ子になったマスター ページを追加する チェック ボックス](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-189">[![Check the &quot;Select master page&quot; Checkbox to Add a Nested Master Page](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span></span>

<span data-ttu-id="4a6f4-190">**図 02**: 入れ子になったマスター ページを追加する「マスター ページの選択」チェック ボックスをオン ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-190">**Figure 02**: Check the "Select master page" Checkbox to Add a Nested Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image6.png))</span></span>


<span data-ttu-id="4a6f4-191">[![入れ子になったマスター ページを Simple.master マスター ページにバインドします。](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-191">[![Bind the Nested Master Page to the Simple.master Master Page](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span></span>

<span data-ttu-id="4a6f4-192">**図 03**: 入れ子になったマスター ページへのバインド、`Simple.master`マスター ページ ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-192">**Figure 03**: Bind the Nested Master Page to the `Simple.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image9.png))</span></span>


<span data-ttu-id="4a6f4-193">入れ子になったマスター ページの宣言型マークアップ次に示すにはには、2 つのコンテンツ コントロールがマスター ページの最上位レベルの 2 つのプレース ホルダー コントロールの参照が含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-193">The nested master page's declarative markup, shown below, contains two Content controls referencing the top-level master page's two ContentPlaceHolder controls.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample3.aspx)]

<span data-ttu-id="4a6f4-194">を除き、`<%@ Master %>`ディレクティブを入れ子になったマスター ページの初期宣言型マークアップは、コンテンツ ページを同じ最上位レベルのマスター ページにバインドするときに最初に生成されたマークアップと同じです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-194">Except for the `<%@ Master %>` directive, the nested master page's initial declarative markup is identical to the markup that is initially generated when binding a content page to the same top-level master page.</span></span> <span data-ttu-id="4a6f4-195">などのコンテンツ ページの`<%@ Page %>`ディレクティブ、`<%@ Master %>`ディレクティブは、ここに含まれています、`MasterPageFile`入れ子になったマスター ページの親のマスター ページを指定する属性。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-195">Like a content page's `<%@ Page %>` directive, the `<%@ Master %>` directive here includes a `MasterPageFile` attribute that specifies the nested master page's parent master page.</span></span> <span data-ttu-id="4a6f4-196">入れ子になったマスター ページと同じ最上位レベルのマスター ページにバインドされているコンテンツ ページの主な違いは、入れ子になったマスター ページが ContentPlaceHolder コントロールを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-196">The main difference between the nested master page and a content page bound to the same top-level master page is that the nested master page can include ContentPlaceHolder controls.</span></span> <span data-ttu-id="4a6f4-197">入れ子になったマスター ページの ContentPlaceHolder コントロールは、コンテンツ ページがマークアップをカスタマイズできる領域を定義します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-197">The nested master page's ContentPlaceHolder controls define the regions where the content pages can customize the markup.</span></span>

<span data-ttu-id="4a6f4-198">テキスト「こんにちは, from SimpleNested!」を表示するように、この入れ子になったマスター ページを更新します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-198">Update this nested master page so that it displays the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="4a6f4-199">対応するコンテンツ コントロールに、 `MainContent` ContentPlaceHolder コントロール。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-199">in the Content control that corresponds to the `MainContent` ContentPlaceHolder control.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample4.aspx)]

<span data-ttu-id="4a6f4-200">この追加した場合、入れ子になったマスター ページを保存しを新しいコンテンツ ページを追加、`NestedMasterPages`という名前のフォルダー`Default.aspx`にバインドし、`SimpleNested.master`マスター ページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-200">After making this addition, save the nested master page and then add a new content page to the `NestedMasterPages` folder named `Default.aspx`, and bind it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="4a6f4-201">このページを追加するのには、驚くことが含まれていない (図 4 を参照してください) のコンテンツ コントロールを表示する場合があります!</span><span class="sxs-lookup"><span data-stu-id="4a6f4-201">Upon adding this page you may be surprised to see that it contains no Content controls (see Figure 4)!</span></span> <span data-ttu-id="4a6f4-202">コンテンツ ページにのみアクセスできますその*親*マスター ページの contentplaceholders にします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-202">A content page can only access its *parent* master page's ContentPlaceHolders.</span></span> <span data-ttu-id="4a6f4-203">`SimpleNested.master`ContentPlaceHolder コントロール; が含まれていません。そのため、このマスター ページにバインドされている任意のコンテンツ ページでは、すべてのコンテンツ コントロールを含めることはできません。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-203">`SimpleNested.master` does not contain any ContentPlaceHolder controls; therefore, any content page bound to this master page cannot contain any Content controls.</span></span>


<span data-ttu-id="4a6f4-204">[![新しいコンテンツ ページにコンテンツ コントロールが含まれていません。](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-204">[![The New Content Page Contains No Content Controls](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span></span>

<span data-ttu-id="4a6f4-205">**図 04**:、新しいコンテンツ ページを含むいいえコンテンツ コントロール ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-205">**Figure 04**: The New Content Page Contains No Content Controls ([Click to view full-size image](nested-master-pages-cs/_static/image12.png))</span></span>


<span data-ttu-id="4a6f4-206">入れ子になったマスター ページの更新が行う必要があります (`SimpleNested.master`) プレース ホルダー コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-206">What we need to do is update the nested master page (`SimpleNested.master`) to include ContentPlaceHolder controls.</span></span> <span data-ttu-id="4a6f4-207">通常、各 ContentPlaceHolder の親のマスター ページで定義できるため、その子マスター ページまたはマスター ページの最上位の ContentPlaceHolder のいずれかを使用するコンテンツ ページのプレース ホルダーを追加する場合は、入れ子になったマスター ページを場合もあります。制御します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-207">Typically you'll want your nested master pages to include a ContentPlaceHolder for each ContentPlaceHolder defined by its parent master page, thereby allowing its child master page or content page to work with any of the top-level master page's ContentPlaceHolder controls.</span></span>

<span data-ttu-id="4a6f4-208">更新プログラム、`SimpleNested.master`マスター ページ、ContentPlaceHolder は、その 2 つのコンテンツ コントロールにします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-208">Update the `SimpleNested.master` master page to include a ContentPlaceHolder in its two Content controls.</span></span> <span data-ttu-id="4a6f4-209">ContentPlaceHolder のコントロールのコンテンツ コントロールを指す ContentPlaceHolder コントロールと同じ名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-209">Give the ContentPlaceHolder controls the same name as the ContentPlaceHolder control their Content control refers to.</span></span> <span data-ttu-id="4a6f4-210">つまり、という名前のプレース ホルダー コントロールを追加`MainContent`コンテンツを制御するのに`SimpleNested.master`を参照する、`MainContent`で ContentPlaceHolder`Simple.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-210">That is, add a ContentPlaceHolder control named `MainContent` to the Content control in `SimpleNested.master` that references the `MainContent` ContentPlaceHolder in `Simple.master`.</span></span> <span data-ttu-id="4a6f4-211">参照するコンテンツ コントロールに同じ処理を行う、 `head` ContentPlaceHolder です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-211">Do the same thing in the Content control that references the `head` ContentPlaceHolder.</span></span>

> [!NOTE]
> <span data-ttu-id="4a6f4-212">入れ子になったマスター ページ内のプレース ホルダー コントロールをトップレベルのマスター ページで contentplaceholders と同じ名前付けをお勧め、中にこの名前付けの対称性は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-212">While I recommend naming the ContentPlaceHolder controls in the nested master page the same as the ContentPlaceHolders in the top-level master page, this naming symmetry is not required.</span></span> <span data-ttu-id="4a6f4-213">任意の名前で、入れ子になったマスター ページ プレース ホルダー コントロールを付与できます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-213">You can give the ContentPlaceHolder controls in your nested master page any name you like.</span></span> <span data-ttu-id="4a6f4-214">ただし、ほうが簡単に対応して contentplaceholders に注意してください 最上位レベルのマスター ページや入れ子になったマスター ページは、同じ名前を使用する場合、ページのどの領域です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-214">However, I find it easier to remember what ContentPlaceHolders correspond with what regions of the page if my top-level master page and nested master pages use the same names.</span></span>


<span data-ttu-id="4a6f4-215">これらの追加を行った後、`SimpleNested.master`マスター ページの宣言型マークアップは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-215">After making these additions your `SimpleNested.master` master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="4a6f4-216">削除、`Default.aspx`コンテンツ ページを作成したばかりにし、再度追加して、バインドにするには、`SimpleNested.master`マスター ページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-216">Delete the `Default.aspx` content page we just created and then re-add it, binding it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="4a6f4-217">今度は Visual Studio 2 つ追加のコンテンツ コントロールを`Default.aspx`、内で定義され、contentplaceholders に参照する`SimpleNested.master`(図 6 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-217">This time Visual Studio adds two Content controls to the `Default.aspx`, referencing the ContentPlaceHolders now defined in `SimpleNested.master` (see Figure 6).</span></span> <span data-ttu-id="4a6f4-218">テキスト「こんにちは, from Default.aspx!」を追加します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-218">Add the text, "Hello, from Default.aspx!"</span></span> <span data-ttu-id="4a6f4-219">コンテンツの制御参照`MainContent`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-219">in the Content control that referenced `MainContent`.</span></span>

<span data-ttu-id="4a6f4-220">図 5 は、ここでは、関与する 3 つのエンティティ`Simple.master`、 `SimpleNested.master`、および`Default.aspx`- と相互に関連付ける方法。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-220">Figure 5 shows the three entities involved here - `Simple.master`, `SimpleNested.master`, and `Default.aspx` - and how they relate to one another.</span></span> <span data-ttu-id="4a6f4-221">図に示す入れ子になったマスター ページは、その親の ContentPlaceHolder のコンテンツ コントロールを実装します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-221">As the diagram shows, the nested master page implements Content controls for its parent's ContentPlaceHolder.</span></span> <span data-ttu-id="4a6f4-222">これらの領域は、コンテンツ ページにアクセスできるようにする必要がある場合、入れ子になったマスター ページは、コンテンツ コントロールに、独自の contentplaceholders を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-222">If these regions need to be accessible to the content page, the nested master page must add its own ContentPlaceHolders to the Content controls.</span></span>


<span data-ttu-id="4a6f4-223">[![最上位レベルと入れ子になったマスター ページ コンテンツ ページのレイアウトを決定します。](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-223">[![The Top-Level and Nested Master Pages Dictate the Content Page's Layout](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span></span>

<span data-ttu-id="4a6f4-224">**図 05**: マスター ページの最上位レベルと入れ子になったディクテーション コンテンツ ページのレイアウト ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-224">**Figure 05**: The Top-Level and Nested Master Pages Dictate the Content Page's Layout ([Click to view full-size image](nested-master-pages-cs/_static/image15.png))</span></span>


<span data-ttu-id="4a6f4-225">この動作は、どのコンテンツ ページまたはマスター ページはその親のマスター ページの認識を示しています。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-225">This behavior illustrates how a content page or master page is only cognizant of its parent master page.</span></span> <span data-ttu-id="4a6f4-226">この動作は、Visual Studio デザイナーによっても示されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-226">This behavior is also indicated by the Visual Studio Designer.</span></span> <span data-ttu-id="4a6f4-227">図 6 は、Designer for`Default.aspx`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-227">Figure 6 shows the Designer for `Default.aspx`.</span></span> <span data-ttu-id="4a6f4-228">デザイナーは、どのような領域がコンテンツ ページの編集可能であり、特定の部分がないを明確に示しています、中はあいまいさを解消編集不可能な領域が、入れ子になったマスター ページからは、領域は、最上位レベルのマスター ページからです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-228">While the Designer clearly shows what regions are editable from the content page and what portions aren't, it doesn't disambiguate what non-editable regions are from the nested master page and what regions are from the top-level master page.</span></span>


<span data-ttu-id="4a6f4-229">[![コンテンツ ページここには、入れ子になったマスター ページの contentplaceholders ににはコンテンツ コントロールが含まれています](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-229">[![The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span></span>

<span data-ttu-id="4a6f4-230">**図 06**:、コンテンツ ページようになりましたが含まれていますコンテンツ コントロールの入れ子になったマスター ページの contentplaceholders に ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-230">**Figure 06**: The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders ([Click to view full-size image](nested-master-pages-cs/_static/image18.png))</span></span>


## <a name="step-3-adding-a-second-simple-nested-master-page"></a><span data-ttu-id="4a6f4-231">手順 3: 単純な入れ子になったマスターのページは、2 番目の追加</span><span class="sxs-lookup"><span data-stu-id="4a6f4-231">Step 3: Adding a Second Simple Nested Master Page</span></span>

<span data-ttu-id="4a6f4-232">入れ子になったマスター ページの利点は、複数の入れ子になったマスター ページがある場合に顕著です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-232">The benefit of nested master pages is more evident when there are multiple nested master pages.</span></span> <span data-ttu-id="4a6f4-233">この利点を示すためには、別の入れ子になったマスター ページを作成、`NestedMasterPages`フォルダー以外の名前をこの新しい入れ子になったマスター ページ`SimpleNestedAlternate.master`にバインドし、`Simple.master`マスター ページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-233">To illustrate this benefit, create another nested master page in the `NestedMasterPages` folder; name this new nested master page `SimpleNestedAlternate.master` and bind it to the `Simple.master` master page.</span></span> <span data-ttu-id="4a6f4-234">手順 2 で行ったように、2 つのコンテンツ コントロールを入れ子になったマスター ページの ContentPlaceHolder コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-234">Add ContentPlaceHolder controls in the nested master page's two Content controls like we did in Step 2.</span></span> <span data-ttu-id="4a6f4-235">また、テキストを「こんにちは, from SimpleNestedAlternate!」を追加します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-235">Also add the text, "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="4a6f4-236">マスター ページの最上位レベルに対応するコンテンツ コントロールに`MainContent`ContentPlaceHolder です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-236">in the Content control that corresponds to the top-level master page's `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="4a6f4-237">これらの変更を行った後、新しい入れ子になったマスター ページの宣言型マークアップを次のようになります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-237">After making these changes your new nested master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample6.aspx)]

<span data-ttu-id="4a6f4-238">という名前のコンテンツ ページを作成する`Alternate.aspx`で、`NestedMasterPages`フォルダーにそれをバインドし、`SimpleNestedAlternate.master`入れ子になったマスター ページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-238">Create a content page named `Alternate.aspx` in the `NestedMasterPages` folder and bind it to the `SimpleNestedAlternate.master` nested master page.</span></span> <span data-ttu-id="4a6f4-239">テキスト「こんにちは, from 代替!」を追加します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-239">Add the text, "Hello, from Alternate!"</span></span> <span data-ttu-id="4a6f4-240">対応するコンテンツ コントロールに`MainContent`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-240">in the Content control that corresponds to `MainContent`.</span></span> <span data-ttu-id="4a6f4-241">図 7 は`Alternate.aspx`Visual Studio デザイナーで表示したときにします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-241">Figure 7 shows `Alternate.aspx` when viewed through the Visual Studio Designer.</span></span>


<span data-ttu-id="4a6f4-242">[![Alternate.aspx が SimpleNestedAlternate.master マスター ページにバインドされています。](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-242">[![Alternate.aspx is Bound to the SimpleNestedAlternate.master Master Page](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span></span>

<span data-ttu-id="4a6f4-243">**図 07**:`Alternate.aspx`にバインドされて、`SimpleNestedAlternate.master`マスター ページ ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-243">**Figure 07**: `Alternate.aspx` is Bound to the `SimpleNestedAlternate.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image21.png))</span></span>


<span data-ttu-id="4a6f4-244">図 6 でデザイナーに図 7 に、デザイナーを比較します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-244">Compare the Designer in Figure 7 to the Designer in Figure 6.</span></span> <span data-ttu-id="4a6f4-245">両方のコンテンツ ページは、最上位レベルのマスター ページで定義されている同じレイアウトを共有 (`Simple.master`)、つまり"入れ子になったマスター ページ Tutorial (単純)"タイトルです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-245">Both content pages share the same layout defined in the top-level master page (`Simple.master`), namely the "Nested Master Pages Tutorial (Simple)" title.</span></span> <span data-ttu-id="4a6f4-246">個別のコンテンツがその親のマスター ページ - で定義されているテキスト「こんにちは, from SimpleNested!」があるどちらもまだ</span><span class="sxs-lookup"><span data-stu-id="4a6f4-246">Yet both have distinct content defined in their parent master pages - the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="4a6f4-247">図 6 で「こんにちは, from SimpleNestedAlternate!」</span><span class="sxs-lookup"><span data-stu-id="4a6f4-247">in Figure 6 and "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="4a6f4-248">図 7 です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-248">in Figure 7.</span></span> <span data-ttu-id="4a6f4-249">確かに、これらの相違をここでは、単純なが、意味のある相違点を含めるには、この例を拡張できます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-249">Granted, these differences here are trivial, but you could extend this example to include more meaningful differences.</span></span> <span data-ttu-id="4a6f4-250">インスタンス、`SimpleNested.master`一方、ページはそのコンテンツ ページに固有のオプションのメニューを含めることが`SimpleNestedAlternate.master`にバインドするコンテンツのページに関連する情報があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-250">For instance, the `SimpleNested.master` page might include a menu with options specific to its content pages, whereas `SimpleNestedAlternate.master` might have information pertinent to the content pages that bind to it.</span></span>

<span data-ttu-id="4a6f4-251">ここで、サイトの包括的なレイアウトを変更する必要がありましたを想像してください。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-251">Now, imagine that we needed to make a change to the overarching site layout.</span></span> <span data-ttu-id="4a6f4-252">たとえばを想像すべてのコンテンツ ページに共通のリンクの一覧を追加します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-252">For example, imagine that we wanted to add a list of common links to all content pages.</span></span> <span data-ttu-id="4a6f4-253">最上位レベルのマスター ページを更新これを実現する`Simple.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-253">To accomplish this we update the top-level master page, `Simple.master`.</span></span> <span data-ttu-id="4a6f4-254">その入れ子になったマスター ページで、拡張機能、そのコンテンツ ページで、すべての変更がありますがすぐに反映されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-254">Any changes there are immediately reflected in its nested master pages and, by extension, their content pages.</span></span>

<span data-ttu-id="4a6f4-255">簡単に使用するは、サイトの包括的なレイアウトを変更できますを示すためには、開く、`Simple.master`マスター ページとの間で、次のマークアップを追加、`topContent`と`mainContent``<div>`要素。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-255">To demonstrate the ease with which we can change the overarching site layout, open the `Simple.master` master page and add the following markup between the `topContent` and `mainContent` `<div>` elements:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample7.aspx)]

<span data-ttu-id="4a6f4-256">これにバインドする各ページの上部に 2 つのリンクを追加`Simple.master`、 `SimpleNested.master`、または`SimpleNestedAlternate.master`; 入れ子になったすべてのマスター ページとそのコンテンツ ページに即座にこれらの変更が適用されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-256">This adds two links to the top of every page that binds to `Simple.master`, `SimpleNested.master`, or `SimpleNestedAlternate.master`; these changes apply to all nested master pages and their content pages immediately.</span></span> <span data-ttu-id="4a6f4-257">図 8 は`Alternate.aspx`ブラウザーで表示したときにします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-257">Figure 8 shows `Alternate.aspx` when viewed through a browser.</span></span> <span data-ttu-id="4a6f4-258">(図 7 と比べると)、ページの上部にあるリンクの追加に注意してください。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-258">Note the addition of the links at the top of the page (compared to Figure 7).</span></span>


<span data-ttu-id="4a6f4-259">[![その入れ子になったマスター ページとそのコンテンツ ページですぐに反映されますが、最上位のマスター ページに変更](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-259">[![Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span></span>

<span data-ttu-id="4a6f4-260">**図 08**: その入れ子になったマスター ページとそのコンテンツ ページですぐに反映されますが、最上位のマスター ページに変更 ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-260">**Figure 08**: Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages ([Click to view full-size image](nested-master-pages-cs/_static/image24.png))</span></span>


## <a name="using-a-nested-master-page-for-the-administration-section"></a><span data-ttu-id="4a6f4-261">[管理] セクションの入れ子になったマスター ページを使用します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-261">Using a Nested Master Page for the Administration Section</span></span>

<span data-ttu-id="4a6f4-262">この時点で入れ子になったマスターの利点にページが検査しを作成し、ASP.NET アプリケーションで使用する方法について説明しました。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-262">At this point we have looked at the advantages of nested master pages and have seen how to create and use them in an ASP.NET application.</span></span> <span data-ttu-id="4a6f4-263">手順 1、2、および 3 の例では、新しい最上位レベルのマスター ページ、新しい入れ子になったマスター ページ、および新しいコンテンツ ページを作成するただし、関係しています。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-263">The examples in Steps 1, 2, and 3, however, involved creating a new top-level master page, new nested master pages, and new content pages.</span></span> <span data-ttu-id="4a6f4-264">では、新しい入れ子になったマスター ページの web サイトに最上位レベルの既存のマスター ページで、コンテンツ ページを追加しますか。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-264">What about adding a new nested master page to a website with an existing top-level master page and content pages?</span></span>

<span data-ttu-id="4a6f4-265">入れ子になったマスター ページを既存の web サイトに統合し、既存のコンテンツ ページに関連付けるには、最初から開始するよりも少し多くの労力が必要です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-265">Integrating a nested master page into an existing website and associating it with existing content pages requires a bit more effort than starting from scratch.</span></span> <span data-ttu-id="4a6f4-266">手順 4、5、6、7 がという名前の新しい入れ子になったマスター ページを含めるデモ アプリケーションを補強およう、これらの課題を探索`AdminNested.master`内の ASP.NET ページによって使用され、管理者の手順を説明する、`~/Admin`フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-266">Steps 4, 5, 6, and 7 explore these challenges as we augment our demo application to include a new nested master page named `AdminNested.master` that contains instructions for the administrator and is used by the ASP.NET pages in the `~/Admin` folder.</span></span>

<span data-ttu-id="4a6f4-267">デモ アプリケーションに入れ子になったマスター ページを統合するには、次の難関が導入されています。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-267">Integrating a nested master page into our demo application introduces the following hurdles:</span></span>

- <span data-ttu-id="4a6f4-268">既存のコンテンツのページ、`~/Admin`フォルダーがある、マスター ページから特定の期待します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-268">The existing content pages in the `~/Admin` folder have certain expectations from their master page.</span></span> <span data-ttu-id="4a6f4-269">まず、存在する特定のプレース ホルダー コントロールを享受できます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-269">For starters, they expect certain ContentPlaceHolder controls to be present.</span></span> <span data-ttu-id="4a6f4-270">さらに、`~/Admin/AddProduct.aspx`と`~/Admin/Products.aspx`ページは、マスター ページの公開を呼び出す`RefreshRecentProductsGrid`方法、設定、`GridMessageText`プロパティのイベント ハンドラーを設定またはその`PricesDoubled`イベント。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-270">Furthermore, the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages call the master page's public `RefreshRecentProductsGrid` method, set its `GridMessageText` property, or have an event handler for its `PricesDoubled` event.</span></span> <span data-ttu-id="4a6f4-271">その結果、入れ子になったマスター ページでは、同じ contentplaceholders とパブリック メンバーを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-271">Consequently, our nested master page must provide the same ContentPlaceHolders and public members.</span></span>
- <span data-ttu-id="4a6f4-272">前のチュートリアルでは強化されて、`BasePage`を動的に設定するクラス、`Page`オブジェクトの`MasterPageFile`プロパティ セッション変数に基づきます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-272">In the preceding tutorial we enhanced the `BasePage` class to dynamically set the `Page` object's `MasterPageFile` property based on a Session variable.</span></span> <span data-ttu-id="4a6f4-273">方法をサポート動的なマスター ページ入れ子になったマスター ページを使用する場合ですか。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-273">How to we support dynamic master pages when using nested master pages?</span></span>

<span data-ttu-id="4a6f4-274">入れ子になったマスター ページを作成し、既存のコンテンツ ページから使用すると、これら 2 つの課題が現れます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-274">These two challenges will surface as we build the nested master page and use it from our existing content pages.</span></span> <span data-ttu-id="4a6f4-275">調査うまくし、発生すると、これらの問題を克服します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-275">We'll investigate and surmount these issues as they arise.</span></span>

## <a name="step-4-creating-the-nested-master-page"></a><span data-ttu-id="4a6f4-276">手順 4: 入れ子になったマスター ページの作成</span><span class="sxs-lookup"><span data-stu-id="4a6f4-276">Step 4: Creating the Nested Master Page</span></span>

<span data-ttu-id="4a6f4-277">最初のタスクでは、[管理] ページで使用する場合は、入れ子になったマスター ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-277">Our first task is to create the nested master page to be used by the pages in the Administration section.</span></span> <span data-ttu-id="4a6f4-278">マスター ページの追加、新しい入れ子になったときに手順 2 で示したように、入れ子になったマスター ページの親のマスター ページを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-278">As we saw in Step 2, when adding a new nested master page we need to specify the nested master page's parent master page.</span></span> <span data-ttu-id="4a6f4-279">2 つの最上位レベルのマスター ページがお:`Site.master`と`Alternate.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-279">But we have two top-level master pages: `Site.master` and `Alternate.master`.</span></span> <span data-ttu-id="4a6f4-280">作成した再呼び出し`Alternate.master`前のチュートリアルでコードを記述し、`BasePage`セット ページ オブジェクトのクラス`MasterPageFile`するか、実行時にプロパティ`Site.master`または`Alternate.master`の値に応じて、 `MyMasterPage`セッション変数です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-280">Recall that we created `Alternate.master` in the preceding tutorial and wrote code in the `BasePage` class that set the Page object's `MasterPageFile` property at runtime to either `Site.master` or `Alternate.master` depending on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="4a6f4-281">操作方法構成する、入れ子になったマスター ページ、適切な最上位レベルのマスター ページを使用するようにしますか。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-281">How do we configure our nested master page so that it uses the appropriate top-level master page?</span></span> <span data-ttu-id="4a6f4-282">2 つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-282">We have two options:</span></span>

- <span data-ttu-id="4a6f4-283">2 つの入れ子になったマスター ページを作成する`AdminNestedSite.master`と`AdminNestedAlternate.master`、し、最上位レベルのマスター ページにバインド`Site.master`と`Alternate.master`、それぞれします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-283">Create two nested master pages, `AdminNestedSite.master` and `AdminNestedAlternate.master`, and bind them to the top-level master pages `Site.master` and `Alternate.master`, respectively.</span></span> <span data-ttu-id="4a6f4-284">`BasePage`を設定し、`Page`オブジェクトの`MasterPageFile`適切な入れ子になったマスター ページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-284">In `BasePage`, then, we'd set the `Page` object's `MasterPageFile` to the appropriate nested master page.</span></span>
- <span data-ttu-id="4a6f4-285">1 つの入れ子になったマスター ページを作成し、この特定のマスター ページを使用してコンテンツのページがあります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-285">Create a single nested master page and have the content pages use this particular master page.</span></span> <span data-ttu-id="4a6f4-286">次に、実行時に、ような入れ子になったマスター ページの設定`MasterPageFile`実行時に適切な最上位レベルのマスター ページのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-286">Then, at runtime, we'd need to set the nested master page's `MasterPageFile` property to the appropriate top-level master page at runtime.</span></span> <span data-ttu-id="4a6f4-287">(可能性がありますが理解ここまでで、マスター ページもある、`MasterPageFile`プロパティです)。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-287">(As you might have figured out by now, master pages also have a `MasterPageFile` property.)</span></span>

<span data-ttu-id="4a6f4-288">2 番目のオプションを使用してみましょう。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-288">Let's use the second option.</span></span> <span data-ttu-id="4a6f4-289">1 つ入れ子になったマスター ページでファイルを作成、`~/Admin`という名前のフォルダー`AdminNested.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-289">Create a single nested master page file in the `~/Admin` folder named `AdminNested.master`.</span></span> <span data-ttu-id="4a6f4-290">両方`Site.master`と`Alternate.master`ContentPlaceHolder コントロールのセットが同じ、関係ありませんマスター ページをバインドするにバインドすることをお勧めは`Site.master`整合性のためです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-290">Because both `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls, it doesn't matter what master page you bind it to, although I encourage you to bind it to `Site.master` for consistency's sake.</span></span>


<span data-ttu-id="4a6f4-291">[![~/Admin フォルダーに入れ子になったマスター ページを追加します。](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-291">[![Add a Nested Master Page to the ~/Admin Folder.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span></span>

<span data-ttu-id="4a6f4-292">**図 09**: する入れ子になったマスター ページの追加、`~/Admin`フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-292">**Figure 09**: Add a Nested Master Page to the `~/Admin` Folder.</span></span> <span data-ttu-id="4a6f4-293">([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-293">([Click to view full-size image](nested-master-pages-cs/_static/image27.png))</span></span>


<span data-ttu-id="4a6f4-294">Visual Studio は 4 つに追加して、入れ子になったマスター ページが 4 つのプレース ホルダー コントロールでのマスター ページにバインドされているため、新しい入れ子になったマスター ページファイルの初期のマークアップにコントロールのコンテンツします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-294">Because the nested master page is bound to a master page with four ContentPlaceHolder controls, Visual Studio adds four Content controls to the new nested master page file's initial markup.</span></span> <span data-ttu-id="4a6f4-295">同様上位レベルのマスター ページ プレース ホルダー コントロールと同じ名前を与える手順 2. および 3.、各コンテンツ コントロールに ContentPlaceHolder コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-295">Like we did in Steps 2 and 3, add a ContentPlaceHolder control in each Content control, giving it the same name as the top-level master page's ContentPlaceHolder control.</span></span> <span data-ttu-id="4a6f4-296">対応するコンテンツ コントロールに、次のマークアップを追加しても、 `MainContent` ContentPlaceHolder:</span><span class="sxs-lookup"><span data-stu-id="4a6f4-296">Also add the following markup to the Content control that corresponds to the `MainContent` ContentPlaceHolder:</span></span>


[!code-html[Main](nested-master-pages-cs/samples/sample8.html)]

<span data-ttu-id="4a6f4-297">次に、定義、 `instructions` CSS クラスの`Styles.css`と`AlternateStyles.css`CSS ファイル。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-297">Next, define the `instructions` CSS class in the `Styles.css` and `AlternateStyles.css` CSS files.</span></span> <span data-ttu-id="4a6f4-298">次の CSS 規則とスタイルの HTML 要素が発生する、`instructions`明るい黄色の背景色と黒い実線の境界線を表示するクラス。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-298">The following CSS rules cause HTML elements styled with the `instructions` class to be displayed with a light yellow background color and a black, solid border:</span></span>


[!code-css[Main](nested-master-pages-cs/samples/sample9.css)]

<span data-ttu-id="4a6f4-299">入れ子になったマスター ページには、このマークアップが追加された、この入れ子になったマスター ページ (つまり、[管理] ページ) を使用してこれらのページにのみ表示されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-299">Because this markup has been added to the nested master page, it will only appear in those pages that use this nested master page (namely, the pages in the Administration section).</span></span>

<span data-ttu-id="4a6f4-300">入れ子になったマスター ページへの追加を行った後の宣言型マークアップを次のようになります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-300">After making these additions to your nested master page, its declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample10.aspx)]

<span data-ttu-id="4a6f4-301">各コンテンツ コントロールは ContentPlaceHolder 制御し、ContentPlaceHolder のコントロールの`ID`プロパティには、最上位レベルのマスター ページ内の対応する ContentPlaceHolder コントロールと同じ値が割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-301">Note that each Content control has a ContentPlaceHolder control and that the ContentPlaceHolder controls' `ID` properties are assigned the same values as the corresponding ContentPlaceHolder controls in the top-level master page.</span></span> <span data-ttu-id="4a6f4-302">管理セクション固有のマークアップがさらに、表示、 `MainContent` ContentPlaceHolder です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-302">Moreover, the Administration section-specific markup appears in the `MainContent` ContentPlaceHolder.</span></span>

<span data-ttu-id="4a6f4-303">図 10 を示しています、 `AdminNested.master` Visual Studio のデザイナーを表示したときにマスター ページを入れ子になった。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-303">Figure 10 shows the `AdminNested.master` nested master page when viewed through Visual Studio's Designer.</span></span> <span data-ttu-id="4a6f4-304">黄色のボックスの上部にある手順を参照してできます、`MainContent`コンテンツ コントロールです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-304">You can see the instructions in the yellow box at the top of the `MainContent` Content control.</span></span>


<span data-ttu-id="4a6f4-305">[![入れ子になったマスター ページでは、管理者の手順を付属する上位レベルのマスター ページを拡張します。](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-305">[![The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span></span>

<span data-ttu-id="4a6f4-306">**図 10**: 入れ子になったマスター ページは、管理者の手順を付属する上位レベルのマスター ページを拡張します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-306">**Figure 10**: The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.</span></span> <span data-ttu-id="4a6f4-307">([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-307">([Click to view full-size image](nested-master-pages-cs/_static/image30.png))</span></span>


## <a name="step-5-updating-the-existing-content-pages-to-use-the-new-nested-master-page"></a><span data-ttu-id="4a6f4-308">手順 5: 新しい入れ子になったマスター ページを使用する既存のコンテンツ ページを更新します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-308">Step 5: Updating the Existing Content Pages to Use the New Nested Master Page</span></span>

<span data-ttu-id="4a6f4-309">バインドする必要があります [管理] セクションに新しいコンテンツ ページを追加お常、`AdminNested.master`マスター ページを作成したばかりです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-309">Anytime we add a new content page to the Administration section we need to bind it to the `AdminNested.master` master page we just created.</span></span> <span data-ttu-id="4a6f4-310">しかし、ページのコンテンツについて、既存のでしょうか。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-310">But what about the existing content pages?</span></span> <span data-ttu-id="4a6f4-311">現時点から派生して、サイト内のすべてのコンテンツ ページ、`BasePage`クラスは、プログラムによって実行時に、コンテンツ ページのマスター ページを設定します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-311">Currently, all content pages in the site derive from the `BasePage` class, which programmatically sets the content page's master page at runtime.</span></span> <span data-ttu-id="4a6f4-312">[管理] セクションのコンテンツ ページの想定どおりの動作ではありません。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-312">This is not the behavior we want for the content pages in the Administration section.</span></span> <span data-ttu-id="4a6f4-313">これらのコンテンツ ページを常に使用する代わりに、`AdminNested.master`ページ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-313">Instead, we want these content pages to always use the `AdminNested.master` page.</span></span> <span data-ttu-id="4a6f4-314">実行時に右最上位レベル コンテンツ ページを選択する場合は、入れ子になったマスター ページの責任があります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-314">It will be the responsibility of the nested master page to choose the right top-level content page at runtime.</span></span>

<span data-ttu-id="4a6f4-315">最善の方法をこの目的の動作はという名前の新しいカスタムの基本ページ クラスを作成する`AdminBasePage`自身を拡張する、`BasePage`クラスです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-315">To best way to achieve this desired behavior is to create a new custom base page class named `AdminBasePage` that extends the `BasePage` class.</span></span> <span data-ttu-id="4a6f4-316">`AdminBasePage`オーバーライドし、`SetMasterPageFile`設定と、`Page`オブジェクトの`MasterPageFile`ハード コーディングされた値に"~/Admin/AdminNested.master"です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-316">`AdminBasePage` can then override the `SetMasterPageFile` and set the `Page` object's `MasterPageFile` to the hard-coded value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="4a6f4-317">この方法で任意のページから派生した`AdminBasePage`が使用されます`AdminNested.master`から派生した任意のページに対して`BasePage`がその`MasterPageFile`いずれかに動的にプロパティが設定"~/Site.master"または"~/Alternate.master"の値に基づいて、`MyMasterPage`セッション変数。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-317">In this way, any page that derives from `AdminBasePage` will use `AdminNested.master`, whereas any page that derives from `BasePage` will have its `MasterPageFile` property set dynamically to either "~/Site.master" or "~/Alternate.master" based on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="4a6f4-318">新しいクラス ファイルを追加することで開始、`App_Code`という名前のフォルダー`AdminBasePage.cs`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-318">Start by adding a new class file to the `App_Code` folder named `AdminBasePage.cs`.</span></span> <span data-ttu-id="4a6f4-319">`AdminBasePage`拡張`BasePage`をオーバーライドし、`SetMasterPageFile`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-319">Have `AdminBasePage` extend `BasePage` and then override the `SetMasterPageFile` method.</span></span> <span data-ttu-id="4a6f4-320">そのメソッドで割り当てる、`MasterPageFile`値"~/Admin/AdminNested.master"です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-320">In that method assign the `MasterPageFile` the value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="4a6f4-321">クラスのこれらの変更を行った後ファイルを次のようになります。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-321">After making these changes your class file should look similar to the following:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample11.cs)]

<span data-ttu-id="4a6f4-322">派生してセクションの管理で、既存のコンテンツ ページに今すぐ必要があります`AdminBasePage`の代わりに`BasePage`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-322">We now need to have the existing content pages in the Administration section derive from `AdminBasePage` instead of `BasePage`.</span></span> <span data-ttu-id="4a6f4-323">コンテンツ ページごとに分離コード クラス ファイルに移動して、`~/Admin`フォルダーこの変更を加えます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-323">Go to the code-behind class file for each content page in the `~/Admin` folder and make this change.</span></span> <span data-ttu-id="4a6f4-324">たとえば、`~/Admin/Default.aspx`から分離コード クラスの宣言を変更するとします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-324">For example, in `~/Admin/Default.aspx` you'd change the code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample12.cs)]

<span data-ttu-id="4a6f4-325">移動先:</span><span class="sxs-lookup"><span data-stu-id="4a6f4-325">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample13.cs)]

<span data-ttu-id="4a6f4-326">図 11 を示して 方法、最上位レベルのマスター ページ (`Site.master`または`Alternate.master`)、入れ子になったマスター ページ (`AdminNested.master`)、し、管理セクションのコンテンツ ページを相互に関連付けます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-326">Figure 11 depicts how the top-level master page (`Site.master` or `Alternate.master`), the nested master page (`AdminNested.master`), and the Administration section content pages relate to one another.</span></span>


<span data-ttu-id="4a6f4-327">[![入れ子になったマスター ページ、[管理] セクション内のページに特定のコンテンツを定義します。](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-327">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span></span>

<span data-ttu-id="4a6f4-328">**図 11**:、入れ子になったマスター ページを定義コンテンツ特定 [管理] セクション内のページ ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-328">**Figure 11**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image33.png))</span></span>


## <a name="step-6-mirroring-the-master-pages-public-methods-and-properties"></a><span data-ttu-id="4a6f4-329">手順 6: ミラーリングのマスター ページのパブリック メソッドとプロパティ</span><span class="sxs-lookup"><span data-stu-id="4a6f4-329">Step 6: Mirroring the Master Page's Public Methods and Properties</span></span>

<span data-ttu-id="4a6f4-330">注意してください、`~/Admin/AddProduct.aspx`と`~/Admin/Products.aspx`マスター ページとプログラム ページの操作:`~/Admin/AddProduct.aspx`呼び出しマスター ページのパブリック`RefreshRecentProductsGrid`メソッドとセットその`GridMessageText`プロパティです。`~/Admin/Products.aspx`のイベント ハンドラーを持つ、`PricesDoubled`イベント。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-330">Recall that the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages interact programmatically with the master page: `~/Admin/AddProduct.aspx` calls the master page's public `RefreshRecentProductsGrid` method and sets its `GridMessageText` property; `~/Admin/Products.aspx` has an event handler for the `PricesDoubled` event.</span></span> <span data-ttu-id="4a6f4-331">前のチュートリアルで抽象を作成しました`BaseMasterPage`クラスが、これらのパブリック メンバーを定義します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-331">In the preceding tutorial we created an abstract `BaseMasterPage` class that defined these public members.</span></span>

<span data-ttu-id="4a6f4-332">`~/Admin/AddProduct.aspx`と`~/Admin/Products.aspx`がマスター ページから派生しているページがあると、`BaseMasterPage`クラスです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-332">The `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages assume that their master page derives from the `BaseMasterPage` class.</span></span> <span data-ttu-id="4a6f4-333">`AdminNested.master`  ページで、ただし、現在は拡張、`System.Web.UI.MasterPage`クラスです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-333">The `AdminNested.master` page, however, currently extends the `System.Web.UI.MasterPage` class.</span></span> <span data-ttu-id="4a6f4-334">アクセスすると、結果として`~/Admin/Products.aspx`、`InvalidCastException`メッセージと共にスローされます:"型のオブジェクトをキャストできません 'ASP.admin\_adminnested\_マスター' を 'BaseMasterPage' を入力します"。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-334">As a result, when visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown with the message: "Unable to cast object of type 'ASP.admin\_adminnested\_master' to type 'BaseMasterPage'."</span></span>

<span data-ttu-id="4a6f4-335">必要ですがこれを解決する、`AdminNested.master`分離コード クラスを拡張`BaseMasterPage`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-335">To fix this we need to have the `AdminNested.master` code-behind class extend `BaseMasterPage`.</span></span> <span data-ttu-id="4a6f4-336">入れ子になったマスター ページの分離コード クラスの宣言を更新します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-336">Update the nested master page's code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample14.cs)]

<span data-ttu-id="4a6f4-337">移動先:</span><span class="sxs-lookup"><span data-stu-id="4a6f4-337">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample15.cs)]

<span data-ttu-id="4a6f4-338">まだ完了していません。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-338">We're not done yet.</span></span> <span data-ttu-id="4a6f4-339">`BaseMasterPage`クラスは抽象クラスでオーバーライドする必要があります、`abstract`メンバー、`RefreshRecentProductsGrid`と`GridMessageText`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-339">Because the `BaseMasterPage` class is abstract, we need to override the `abstract` members, `RefreshRecentProductsGrid` and `GridMessageText`.</span></span> <span data-ttu-id="4a6f4-340">これらのメンバーは、そのユーザー インターフェイスを更新する最上位レベルのマスター ページで使用されます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-340">These members are used by the top-level master pages to update their user interfaces.</span></span> <span data-ttu-id="4a6f4-341">(実際には、専用の`Site.master`両方最上位レベルのマスター ページは、両方を拡張するためにこれらのメソッドを実装がマスター ページは、これらのメソッドを使用して`BaseMasterPage`)。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-341">(Actually, only the `Site.master` master page uses these methods, although both top-level master pages implement these methods, since both extend `BaseMasterPage`.)</span></span>

<span data-ttu-id="4a6f4-342">これらのメンバーを実装する必要があります、`AdminNested.master`を行うには、これらの実装が必要なは、入れ子になったマスター ページで使用される最上位レベルのマスター ページで、同じメンバーを呼び出すだけです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-342">While we need to implement these members in `AdminNested.master`, all these implementations need to do is simply call the same member in the top-level master page used by the nested master page.</span></span> <span data-ttu-id="4a6f4-343">たとえば、[管理] セクションのコンテンツのページが、入れ子になったマスター ページを呼び出すときに`RefreshRecentProductsGrid`メソッド、入れ子になったマスター ページのために必要なすべてが、さらに、呼び出す`Site.master`または`Alternate.master`の`RefreshRecentProductsGrid`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-343">For instance, when a content page in the Administration section calls the nested master page's `RefreshRecentProductsGrid` method, all the nested master page needs to do is, in turn, call `Site.master` or `Alternate.master`'s `RefreshRecentProductsGrid` method.</span></span>

<span data-ttu-id="4a6f4-344">これを実現する、次を追加することによって開始`@MasterType`の最上位にディレクティブ`AdminNested.master`:</span><span class="sxs-lookup"><span data-stu-id="4a6f4-344">To achieve this, start by adding the following `@MasterType` directive to the top of `AdminNested.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample16.aspx)]

<span data-ttu-id="4a6f4-345">注意してください、`@MasterType`ディレクティブは、という名前の分離コード クラスを厳密に型指定されたプロパティを追加`Master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-345">Recall that the `@MasterType` directive adds a strongly-typed property to the code-behind class named `Master`.</span></span> <span data-ttu-id="4a6f4-346">オーバーライドして、`RefreshRecentProductsGrid`と`GridMessageText`メンバーへの呼び出しを単純に委任し、`Master`メソッドの対応します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-346">Then override the `RefreshRecentProductsGrid` and `GridMessageText` members and simply delegate the call to the `Master`'s corresponding method:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample17.cs)]

<span data-ttu-id="4a6f4-347">このコードにアクセスし、[管理] セクションのコンテンツ ページを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-347">With this code in place, you should be able to visit and use the content pages in the Administration section.</span></span> <span data-ttu-id="4a6f4-348">図 12 を示しています、`~/Admin/Products.aspx`ページをブラウザーで表示する場合。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-348">Figure 12 shows the `~/Admin/Products.aspx` page when viewed through a browser.</span></span> <span data-ttu-id="4a6f4-349">ご覧のように、ページには、管理手順ボックスで、入れ子になったマスター ページで定義されているが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-349">As you can see, the page includes the Administration Instructions box, which is defined in the nested master page.</span></span>


<span data-ttu-id="4a6f4-350">[![コンテンツ管理 セクションの内容を含む各ページの上部にある手順](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-350">[![The Content Pages in the Administration Section Include Instructions at the Top of Each Page](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span></span>

<span data-ttu-id="4a6f4-351">**図 12**: 各ページの上部にある管理セクションを含める手順では、コンテンツ ページ ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-351">**Figure 12**: The Content Pages in the Administration Section Include Instructions at the Top of Each Page ([Click to view full-size image](nested-master-pages-cs/_static/image36.png))</span></span>


## <a name="step-7-using-the-appropriate-top-level-master-page-at-runtime"></a><span data-ttu-id="4a6f4-352">手順 7: 実行時に、適切な最上位レベルのマスター ページを使用します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-352">Step 7: Using the Appropriate Top-Level Master Page at Runtime</span></span>

<span data-ttu-id="4a6f4-353">すべて同じ最上位レベルのマスター ページを使用しのユーザーによって選択されたマスター ページを無視して、[管理] セクションのすべてのコンテンツ ページは完全に機能が、`ChooseMasterPage.aspx`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-353">While all the content pages in the Administration section are fully functional, they all use the same top-level master page and ignore the master page selected by the user at `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="4a6f4-354">この動作は、入れ子になったマスター ページがあるという事実のというその`MasterPageFile`プロパティに静的に設定`Site.master`でその`<%@ Master %>`ディレクティブです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-354">This behavior is due to the fact that the nested master page has its `MasterPageFile` property statically set to `Site.master` in its `<%@ Master %>` directive.</span></span>

<span data-ttu-id="4a6f4-355">設定する必要があります、エンドユーザーが選択した最上位レベルのマスター ページを使用する、`AdminNested.master`の`MasterPageFile`プロパティの値を`MyMasterPage`セッション変数。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-355">To use the top-level master page selected by the end user we need to set the `AdminNested.master`'s `MasterPageFile` property to the value in the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="4a6f4-356">コンテンツ ページの設定するため`MasterPageFile`プロパティ`BasePage`、こと、入れ子になったマスター ページの設定と思われる場合があります`MasterPageFile`プロパティに`BaseMasterPage`または、`AdminNested.master`の分離コード クラスです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-356">Because we set the content pages' `MasterPageFile` properties in `BasePage`, you may think that we would set the nested master page's `MasterPageFile` property in `BaseMasterPage` or in the `AdminNested.master`'s code-behind class.</span></span> <span data-ttu-id="4a6f4-357">これは、ために、機能しません、ただし、設定する必要があります、`MasterPageFile`プロパティ PreInit ステージが終了します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-357">This won't work, however, because we need to have set the `MasterPageFile` property by the end of the PreInit stage.</span></span> <span data-ttu-id="4a6f4-358">マスター ページからページのライフ サイクルにプログラムでタップお最初の時刻は、(PreInit 段階の後に発生します) を初期化段階です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-358">The earliest time that we can programmatically tap into the page lifecycle from a master page is the Init stage (which occurs after the PreInit stage).</span></span>

<span data-ttu-id="4a6f4-359">そのため、入れ子になったのマスター ページを設定する必要があります`MasterPageFile`コンテンツ ページのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-359">Therefore, we need to set the nested master page's `MasterPageFile` property from the content pages.</span></span> <span data-ttu-id="4a6f4-360">だけのコンテンツ ページを使用する、`AdminNested.master`から派生してマスター ページ`AdminBasePage`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-360">The only content pages that use the `AdminNested.master` master page derive from `AdminBasePage`.</span></span> <span data-ttu-id="4a6f4-361">そのため、このロジックをある配置おことができます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-361">Therefore, we can put this logic there.</span></span> <span data-ttu-id="4a6f4-362">私たちが手順 5. で、`SetMasterPageFile`設定メソッド、`Page`オブジェクトの`MasterPageFile`プロパティを"~/Admin/AdminNested.master"です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-362">In Step 5 we overrode the `SetMasterPageFile` method, setting the `Page` object's `MasterPageFile` property to "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="4a6f4-363">更新`SetMasterPageFile`も、マスター ページを設定する`MasterPageFile`セッションに格納されている結果のプロパティ。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-363">Update `SetMasterPageFile` to also set the master page's `MasterPageFile` property to the result stored in Session:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample18.cs)]

<span data-ttu-id="4a6f4-364">`GetMasterPageFileFromSession`に追加するメソッド、`BasePage`クラスには、前のチュートリアルでは、セッション変数の値に基づいて、適切なマスター ページファイルのパスを返します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-364">The `GetMasterPageFileFromSession` method, which we added to the `BasePage` class in the preceding tutorial, returns the appropriate master page file path based on the Session variable value.</span></span>

<span data-ttu-id="4a6f4-365">配置でこの変更により、ユーザーのマスター ページの選択は、[管理] セクションに引き継がです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-365">With this change in place, the user's master page selection carries over to the Administration section.</span></span> <span data-ttu-id="4a6f4-366">図 13 図 12 ですが、ユーザーが、マスター ページの選択範囲を変更した後、同じページを示しています`Alternate.master`です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-366">Figure 13 shows the same page as Figure 12, but after the user has changed their master page selection to `Alternate.master`.</span></span>


<span data-ttu-id="4a6f4-367">[![入れ子になった管理ページが、ユーザーが選択した最上位レベルのマスター ページを使用します。](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-367">[![The Nested Administration Page Uses the Top-Level Master Page Selected by the User](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span></span>

<span data-ttu-id="4a6f4-368">**図 13**: トップレベル マスター ページで選択されて、ユーザーは、入れ子になった管理ページを使用して ([フルサイズのイメージを表示するをクリックして](nested-master-pages-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="4a6f4-368">**Figure 13**: The Nested Administration Page Uses the Top-Level Master Page Selected by the User ([Click to view full-size image](nested-master-pages-cs/_static/image39.png))</span></span>


## <a name="summary"></a><span data-ttu-id="4a6f4-369">まとめ</span><span class="sxs-lookup"><span data-stu-id="4a6f4-369">Summary</span></span>

<span data-ttu-id="4a6f4-370">Like 程度コンテンツ ページは、マスター ページにバインドできる、可能であれば入れ子になったを作成する子のマスター ページ、マスター ページが親のマスター ページにバインドします。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-370">Much like how content pages can bind to a master page, it is possible to create nested master pages by having a child master page bind to a parent master page.</span></span> <span data-ttu-id="4a6f4-371">子マスター ページは、親の contentplaceholders に; の各コンテンツ コントロールを定義することがあります。これらのコンテンツ コントロールを独自のプレース ホルダー コントロール (およびその他のマークアップ) し、追加できます。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-371">The child master page may define Content controls for each of its parent's ContentPlaceHolders; it can then add its own ContentPlaceHolder controls (as well as other markup) to these Content controls.</span></span> <span data-ttu-id="4a6f4-372">入れ子になったマスター ページは、大規模な web アプリケーションをすべてのページが、包括的なルック アンド フィールを共有しながら特定のセクションでは、サイトの一意のカスタマイズが必要で非常に便利です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-372">Nested master pages are quite useful in large web applications where all pages share an overarching look and feel, yet certain sections of the site require unique customizations.</span></span>

<span data-ttu-id="4a6f4-373">満足プログラミング!</span><span class="sxs-lookup"><span data-stu-id="4a6f4-373">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="4a6f4-374">関連項目</span><span class="sxs-lookup"><span data-stu-id="4a6f4-374">Further Reading</span></span>

<span data-ttu-id="4a6f4-375">このチュートリアルで説明したトピックの詳細については、次の情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-375">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="4a6f4-376">入れ子になった ASP.NET マスター ページ</span><span class="sxs-lookup"><span data-stu-id="4a6f4-376">Nested ASP.NET Master Pages</span></span>](https://msdn.microsoft.com/library/x2b3ktt7.aspx)
- [<span data-ttu-id="4a6f4-377">入れ子になったマスター ページと VS 2005 のデザイン時のヒント</span><span class="sxs-lookup"><span data-stu-id="4a6f4-377">Tips for Nested Master Pages and VS 2005 Design-Time</span></span>](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)
- [<span data-ttu-id="4a6f4-378">VS 2008 には、マスター ページのサポートが入れ子になった</span><span class="sxs-lookup"><span data-stu-id="4a6f4-378">VS 2008 Nested Master Page Support</span></span>](https://weblogs.asp.net/scottgu/archive/2007/07/09/vs-2008-nested-master-page-support.aspx)

### <a name="about-the-author"></a><span data-ttu-id="4a6f4-379">作成者について</span><span class="sxs-lookup"><span data-stu-id="4a6f4-379">About the Author</span></span>

<span data-ttu-id="4a6f4-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、作成者複数受け取ります書籍や 4GuysFromRolla.com の創設者を操作した Microsoft Web テクノロジ 1998 年です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="4a6f4-381">Scott は、コンサルタント、トレーナー、ライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-381">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="4a6f4-382">最新の著書[ *Sam 学べる自分で ASP.NET 3.5 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco)です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-382">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="4a6f4-383">Scott に到達できる[ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com)または彼のブログでを介して[http://ScottOnWriting.NET](http://scottonwriting.net/)です。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-383">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="4a6f4-384">感謝の特別な</span><span class="sxs-lookup"><span data-stu-id="4a6f4-384">Special Thanks To</span></span>

<span data-ttu-id="4a6f4-385">このチュートリアルの系列は既に多くの便利なレビュー担当者によって確認済みです。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-385">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="4a6f4-386">今後、MSDN の記事を確認することに関心のあるですか。</span><span class="sxs-lookup"><span data-stu-id="4a6f4-386">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="4a6f4-387">場合は、ドロップ me 一度に 1 行ずつ[mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-387">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="4a6f4-388">[前へ](specifying-the-master-page-programmatically-cs.md)
[次へ](creating-a-site-wide-layout-using-master-pages-vb.md)</span><span class="sxs-lookup"><span data-stu-id="4a6f4-388">[Previous](specifying-the-master-page-programmatically-cs.md)
[Next](creating-a-site-wide-layout-using-master-pages-vb.md)</span></span>
