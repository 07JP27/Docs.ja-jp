---
uid: web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
title: "フォーム認証 (c#) の概要 |Microsoft ドキュメント"
author: rick-anderson
description: "カスタム ルートの作成"
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/14/2008
ms.topic: article
ms.assetid: de2d65b9-aadc-42ba-abe1-4e87e66521a0
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
msc.type: authoredcontent
ms.openlocfilehash: d386a3b6328675fe21f989f8fd36bfc91fc08b32
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2018
---
<a name="an-overview-of-forms-authentication-c"></a><span data-ttu-id="9f768-103">フォーム認証 (c#) の概要</span><span class="sxs-lookup"><span data-stu-id="9f768-103">An Overview of Forms Authentication (C#)</span></span>
====================
<span data-ttu-id="9f768-104">によって[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9f768-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9f768-105">[コードをダウンロードする](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip)または[PDF のダウンロード](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="9f768-105">[Download Code](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip) or [Download PDF](http://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span></span>

> <span data-ttu-id="9f768-106">このチュートリアルでは単なるディスカッションからに移る実装です。具体的には、フォーム認証の実装で見ていきます。</span><span class="sxs-lookup"><span data-stu-id="9f768-106">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="9f768-107">まず、このチュートリアルで構築する web アプリケーションは引き続き、以降のチュートリアルでは、構築するのには単純なフォーム認証からのメンバーシップおよびロールに移動します。</span><span class="sxs-lookup"><span data-stu-id="9f768-107">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>
> 
> <span data-ttu-id="9f768-108">このトピックの詳細については、このビデオを参照してください: [ASP.NET での基本的なフォーム認証の使用](# "using-basic-forms-authentication-in-aspnet")です。</span><span class="sxs-lookup"><span data-stu-id="9f768-108">Please see this video for more information on this topic: [Using Basic Forms Authentication in ASP.NET](# "using-basic-forms-authentication-in-aspnet").</span></span>


## <a name="introduction"></a><span data-ttu-id="9f768-109">はじめに</span><span class="sxs-lookup"><span data-stu-id="9f768-109">Introduction</span></span>

<span data-ttu-id="9f768-110">[前のチュートリアル](security-basics-and-asp-net-support-cs.md)ASP.NET によって提供される各種の認証、承認、およびユーザー アカウントのオプションについて説明しました。</span><span class="sxs-lookup"><span data-stu-id="9f768-110">In the [preceding tutorial](security-basics-and-asp-net-support-cs.md) we discussed the various authentication, authorization, and user account options provided by ASP.NET.</span></span> <span data-ttu-id="9f768-111">このチュートリアルでは単なるディスカッションからに移る実装です。具体的には、フォーム認証の実装で見ていきます。</span><span class="sxs-lookup"><span data-stu-id="9f768-111">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="9f768-112">まず、このチュートリアルで構築する web アプリケーションは引き続き、以降のチュートリアルでは、構築するのには単純なフォーム認証からのメンバーシップおよびロールに移動します。</span><span class="sxs-lookup"><span data-stu-id="9f768-112">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>

<span data-ttu-id="9f768-113">このチュートリアルは、フォーム認証のワークフロー、前のチュートリアルで時に説明したトピックを掘り下げて見てから始まります。</span><span class="sxs-lookup"><span data-stu-id="9f768-113">This tutorial begins with an in-depth look at the forms authentication workflow, a topic we touched upon in the previous tutorial.</span></span> <span data-ttu-id="9f768-114">次に、フォーム認証の概念をデモするための ASP.NET web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-114">Following that, we will create an ASP.NET website through which to demo the concepts of forms authentication.</span></span> <span data-ttu-id="9f768-115">次に、フォーム認証を使用して、簡単なログイン ページを作成およびを決定する方法、コードでは、ユーザーが認証され場合は、ユーザー名、ログオンに使用するかどうかを参照してください。 サイトは構成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-115">Next, we will configure the site to use forms authentication, create a simple login page, and see how to determine, in code, whether a user is authenticated and, if so, the username they logged in with.</span></span>

<span data-ttu-id="9f768-116">認証ワークフロー、web アプリケーションで有効にして、ログイン時とログオフ時のページを作成するユーザー アカウントをサポートし、web ページを使用してユーザーを認証する ASP.NET アプリケーションのビルドのすべての重要な手順は、フォームを理解できます。</span><span class="sxs-lookup"><span data-stu-id="9f768-116">Understanding the forms authentication workflow, enabling it in a web application, and creating the login and logoff pages are all vital steps in building an ASP.NET application that supports user accounts and authenticates users through a web page.</span></span> <span data-ttu-id="9f768-117">この – ためこれらのチュートリアル - 別の時に作成されているためお勧めの過去のプロジェクトのフォーム認証を既にお持ちのエクスペリエンスを構成する場合でも、次のいずれかに進む前に、完全には、このチュートリアルを実行します。</span><span class="sxs-lookup"><span data-stu-id="9f768-117">Because of this – and because these tutorials build upon one another - I would encourage you to work through this tutorial in full before moving on to the next one even if you already have had experience configuring forms authentication in past projects.</span></span>

## <a name="understanding-the-forms-authentication-workflow"></a><span data-ttu-id="9f768-118">フォーム認証のワークフローを理解します。</span><span class="sxs-lookup"><span data-stu-id="9f768-118">Understanding the Forms Authentication Workflow</span></span>

<span data-ttu-id="9f768-119">ASP.NET ランタイムが ASP.NET ページや ASP.NET Web サービスなど、ASP.NET リソースの要求を処理するときに、要求のライフ サイクル中に多数のイベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="9f768-119">When the ASP.NET runtime processes a request for an ASP.NET resource, such as an ASP.NET page or ASP.NET Web service, the request raises a number of events during its lifecycle.</span></span> <span data-ttu-id="9f768-120">要求が認証されると、承認されると、未処理の例外となどの場合に発生するイベントのときに発生するものと、要求の非常に開始し、非常に最後に発生するイベントがあります。</span><span class="sxs-lookup"><span data-stu-id="9f768-120">There are events raised at the very beginning and very end of the request, ones raised when the request is being authenticated and authorized, an event raised in the case of an unhandled exception, and so forth.</span></span> <span data-ttu-id="9f768-121">イベントの完全な一覧を表示するを参照してください、 [HttpApplication オブジェクトのイベント](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-121">To see a complete listing of the events, refer to the [HttpApplication object's events](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx).</span></span>

<span data-ttu-id="9f768-122">*HTTP モジュール*マネージ クラスのコードを持つは要求のライフ サイクルの特定のイベントに応答して実行します。</span><span class="sxs-lookup"><span data-stu-id="9f768-122">*HTTP Modules* are managed classes whose code is executed in response to a particular event in the request lifecycle.</span></span> <span data-ttu-id="9f768-123">ASP.NET は、バック グラウンドでの必須のタスクを実行する HTTP モジュールの数が付属しています。</span><span class="sxs-lookup"><span data-stu-id="9f768-123">ASP.NET ships with a number of HTTP Modules that perform essential tasks behind the scenes.</span></span> <span data-ttu-id="9f768-124">ここに特に関連する 2 つの組み込み HTTP モジュールは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="9f768-124">Two built-in HTTP Modules that are especially relevant to our discussion are:</span></span>

- <span data-ttu-id="9f768-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)**– は、通常、ユーザーのクッキー コレクションに含まれる、フォーム認証チケットを調べることによって、ユーザーを認証します。</span><span class="sxs-lookup"><span data-stu-id="9f768-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** – authenticates the user by inspecting the forms authentication ticket, which is typically included in the user's cookies collection.</span></span> <span data-ttu-id="9f768-126">フォーム認証チケットが存在しない場合、ユーザーは匿名です。</span><span class="sxs-lookup"><span data-stu-id="9f768-126">If no forms authentication ticket is present, the user is anonymous.</span></span>
- <span data-ttu-id="9f768-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)**– 現在のユーザーが要求された URL にアクセスする承認されたかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="9f768-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** – determines whether or not the current user is authorized to access the requested URL.</span></span> <span data-ttu-id="9f768-128">このモジュールは、アプリケーションの構成ファイルで指定された承認規則を参照して、権限を決定します。</span><span class="sxs-lookup"><span data-stu-id="9f768-128">This module determines the authority by consulting the authorization rules specified in the application's configuration files.</span></span> <span data-ttu-id="9f768-129">ASP.NET も含まれています、 [ `FileAuthorizationModule` ](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx)要求されたファイルの Acl を参照して機関を指定します。</span><span class="sxs-lookup"><span data-stu-id="9f768-129">ASP.NET also includes the [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx) that determines authority by consulting the requested file(s) ACLs.</span></span>

<span data-ttu-id="9f768-130">`FormsAuthenticationModule`前にユーザーを認証しようとしています、 `UrlAuthorizationModule` (および`FileAuthorizationModule`) を実行します。</span><span class="sxs-lookup"><span data-stu-id="9f768-130">The `FormsAuthenticationModule` attempts to authenticate the user prior to the `UrlAuthorizationModule` (and `FileAuthorizationModule`) executing.</span></span> <span data-ttu-id="9f768-131">承認モジュールが、要求を終了しを返します、要求を行うユーザーが要求されたリソースにアクセスする権限がない場合、 [HTTP 401 Unauthorized](http://www.checkupdown.com/status/E401.html)状態です。</span><span class="sxs-lookup"><span data-stu-id="9f768-131">If the user making the request is not authorized to access the requested resource, the authorization module terminates the request and returns an [HTTP 401 Unauthorized](http://www.checkupdown.com/status/E401.html) status.</span></span> <span data-ttu-id="9f768-132">Windows 認証のシナリオでは、ブラウザーに HTTP 401 ステータスが返されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-132">In Windows authentication scenarios, the HTTP 401 status is returned to the browser.</span></span> <span data-ttu-id="9f768-133">この状態コードは、モーダル ダイアログ ボックスを使用して資格情報をユーザー入力を求めるブラウザーをによりします。</span><span class="sxs-lookup"><span data-stu-id="9f768-133">This status code causes the browser to prompt the user for their credentials via a modal dialog box.</span></span> <span data-ttu-id="9f768-134">フォーム認証では、ただし、HTTP 401 Unauthorized ステータスは送信されません、ブラウザーに、FormsAuthenticationModule がこの状態が検出され、変更する代わりに、ユーザーをログイン ページにリダイレクトするため (を使用して、 [HTTP 302 リダイレクト](http://www.checkupdown.com/status/E302.html)状態)。</span><span class="sxs-lookup"><span data-stu-id="9f768-134">With forms authentication, however, the HTTP 401 Unauthorized status is never sent to the browser because the FormsAuthenticationModule detects this status and modifies it to redirect the user to the login page instead (via an [HTTP 302 Redirect](http://www.checkupdown.com/status/E302.html) status).</span></span>

<span data-ttu-id="9f768-135">ログイン ページの責任では、ユーザーの資格情報が有効と場合は、フォーム認証チケットを作成し、ユーザーをページにリダイレクトされたしようとしているビジットするかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="9f768-135">The login page's responsibility is to determine if the user's credentials are valid and, if so, to create a forms authentication ticket and redirect the user back to the page they were attempting to visit.</span></span> <span data-ttu-id="9f768-136">認証チケットが、web サイト上のページへの後続の要求に含まれている、`FormsAuthenticationModule`を使用してユーザーを識別します。</span><span class="sxs-lookup"><span data-stu-id="9f768-136">The authentication ticket is included in subsequent requests to the pages on the website, which the `FormsAuthenticationModule` uses to identify the user.</span></span>


![フォーム認証のワークフロー](an-overview-of-forms-authentication-cs/_static/image1.png)

<span data-ttu-id="9f768-138">**図 1**: フォーム認証のワークフロー</span><span class="sxs-lookup"><span data-stu-id="9f768-138">**Figure 1**: The Forms Authentication Workflow</span></span>


### <a name="remembering-the-authentication-ticket-across-page-visits"></a><span data-ttu-id="9f768-139">ページのビジットの間で認証チケットを記憶</span><span class="sxs-lookup"><span data-stu-id="9f768-139">Remembering the Authentication Ticket Across Page Visits</span></span>

<span data-ttu-id="9f768-140">ログに記録して、フォーム認証チケット必要がありますに返される要求のたびに、web サーバーが、サイトを閲覧する際、ユーザーがログインしている残るようです。</span><span class="sxs-lookup"><span data-stu-id="9f768-140">After logging in, the forms authentication ticket must be sent back to the web server on each request so that the user remains logged in as they browse the site.</span></span> <span data-ttu-id="9f768-141">これは通常、ユーザーのクッキー コレクションに認証チケットを配置することによって行います。</span><span class="sxs-lookup"><span data-stu-id="9f768-141">This is typically accomplished by placing the authentication ticket in the user's cookies collection.</span></span> <span data-ttu-id="9f768-142">[Cookie](http://en.wikipedia.org/wiki/HTTP_cookie)されるユーザーのコンピューター上に存在し、cookie を作成した web サイトへの各要求で HTTP ヘッダーで送信される小さなテキスト ファイルです。</span><span class="sxs-lookup"><span data-stu-id="9f768-142">[Cookies](http://en.wikipedia.org/wiki/HTTP_cookie) are small text files that reside on the user's computer and are transmitted in the HTTP headers on each request to the website that created the cookie.</span></span> <span data-ttu-id="9f768-143">そのため、フォーム認証チケットが作成され、ブラウザーの cookie に格納されて、そのサイトへの後アクセスは、ユーザーを識別するため、要求と共に認証チケットを送信します。</span><span class="sxs-lookup"><span data-stu-id="9f768-143">Therefore, once the forms authentication ticket has been created and stored in the browser's cookies, each subsequent visit to that site sends the authentication ticket along with the request, thereby identifying the user.</span></span>

<span data-ttu-id="9f768-144">Cookie の 1 つは、有効期限が切れる日付と時刻のブラウザーが cookie を破棄するには、します。</span><span class="sxs-lookup"><span data-stu-id="9f768-144">One aspect of cookies is their expiration, which is the date and time at which the browser discards the cookie.</span></span> <span data-ttu-id="9f768-145">フォーム認証 cookie の期限が切れると、ユーザー不要になった認証およびため匿名のようになります。</span><span class="sxs-lookup"><span data-stu-id="9f768-145">When the forms authentication cookie expires, the user can no longer be authenticated and therefore become anonymous.</span></span> <span data-ttu-id="9f768-146">公共の端末からユーザーを訪問しているときに、認証チケットのブラウザーを閉じるときに期限切れにする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-146">When a user is visiting from a public terminal, chances are they want their authentication ticket to expire when they close their browser.</span></span> <span data-ttu-id="9f768-147">自宅からオフィスを訪れた、ただし、その同じユーザー場合、認証チケットがあるないように、ブラウザーの再起動の間で記憶される、サイトにアクセスするたびに再ログインします。</span><span class="sxs-lookup"><span data-stu-id="9f768-147">When visiting from home, however, that same user might want the authentication ticket to be remembered across browser restarts so that they do not have to re-log in each time they visit the site.</span></span> <span data-ttu-id="9f768-148">この決定は多くの場合、ユーザーによる、「次回」の形式でログイン ページでチェック ボックスをオンします。</span><span class="sxs-lookup"><span data-stu-id="9f768-148">This decision is often made by the user in the form of a "Remember me" checkbox on the login page.</span></span> <span data-ttu-id="9f768-149">手順 3 では、ログイン ページに「次回の」チェック ボックスを実装する方法を検討します。</span><span class="sxs-lookup"><span data-stu-id="9f768-149">In Step 3 we will examine how to implement a "Remember me" checkbox in the login page.</span></span> <span data-ttu-id="9f768-150">次のチュートリアルでは、認証チケットのタイムアウト設定の詳細を説明します。</span><span class="sxs-lookup"><span data-stu-id="9f768-150">The following tutorial addresses the authentication ticket timeout settings in detail.</span></span>

> [!NOTE]
> <span data-ttu-id="9f768-151">Web サイトにログオンするために使用するユーザー エージェントが cookie をサポートしていないことができます。</span><span class="sxs-lookup"><span data-stu-id="9f768-151">It is possible that the user agent used to log on to the website may not support cookies.</span></span> <span data-ttu-id="9f768-152">このような場合は、ASP.NET が cookie なしのフォーム認証チケットを使用できます。</span><span class="sxs-lookup"><span data-stu-id="9f768-152">In such a case, ASP.NET can use cookieless forms authentication tickets.</span></span> <span data-ttu-id="9f768-153">このモードでは、認証チケットを URL にエンコードされます。</span><span class="sxs-lookup"><span data-stu-id="9f768-153">In this mode, the authentication ticket is encoded into the URL.</span></span> <span data-ttu-id="9f768-154">Cookie なしの認証チケットを使用する場合と、作成され、次のチュートリアルでは管理の方法を紹介します。</span><span class="sxs-lookup"><span data-stu-id="9f768-154">We will look at when cookieless authentication tickets are used and how they are created and managed in the next tutorial.</span></span>


### <a name="the-scope-of-forms-authentication"></a><span data-ttu-id="9f768-155">フォーム認証のスコープ</span><span class="sxs-lookup"><span data-stu-id="9f768-155">The Scope of Forms Authentication</span></span>

<span data-ttu-id="9f768-156">`FormsAuthenticationModule`はマネージ コードは、ASP.NET ランタイムの一部であります。</span><span class="sxs-lookup"><span data-stu-id="9f768-156">The `FormsAuthenticationModule` is managed code that is part of the ASP.NET runtime.</span></span> <span data-ttu-id="9f768-157">前の Microsoft のバージョン 7[インターネット インフォメーション サービス (IIS)](https://www.iis.net/) web サーバー IIS の HTTP パイプラインと、ASP.NET ランタイムのパイプラインの間で異なるバリアが発生しました。</span><span class="sxs-lookup"><span data-stu-id="9f768-157">Prior to version 7 of Microsoft's [Internet Information Services (IIS)](https://www.iis.net/) web server, there was a distinct barrier between IIS's HTTP pipeline and the ASP.NET runtime's pipeline.</span></span> <span data-ttu-id="9f768-158">つまり、IIS 6 以前のバージョンで、 `FormsAuthenticationModule` ASP.NET ランタイムを IIS からの要求が委任されて場合にのみ実行します。</span><span class="sxs-lookup"><span data-stu-id="9f768-158">In short, in IIS 6 and earlier, the `FormsAuthenticationModule` only executes when a request is delegated from IIS to the ASP.NET runtime.</span></span> <span data-ttu-id="9f768-159">既定では、拡張子が .aspx、.asmx、または .ashx のページが要求されたときに、IIS は HTML ページと CSS およびイメージ ファイル – ASP.NET ランタイムへの要求を振り分けます。 唯一のように静的なコンテンツ – 自体を処理します。</span><span class="sxs-lookup"><span data-stu-id="9f768-159">By default, IIS processes static content itself – like HTML pages and CSS and image files – and only hands off requests to the ASP.NET runtime when a page with an extension of .aspx, .asmx, or .ashx is requested.</span></span>

<span data-ttu-id="9f768-160">IIS 7 では、ただしでは、統合された IIS と ASP.NET パイプライン。</span><span class="sxs-lookup"><span data-stu-id="9f768-160">IIS 7, however, allows for integrated IIS and ASP.NET pipelines.</span></span> <span data-ttu-id="9f768-161">IIS 7 の FormsAuthenticationModule を呼び出すをセットアップするいくつかの構成設定で*すべて*要求します。</span><span class="sxs-lookup"><span data-stu-id="9f768-161">With a few configuration settings you can setup IIS 7 to invoke the FormsAuthenticationModule for *all* requests.</span></span> <span data-ttu-id="9f768-162">さらに、IIS 7 では、任意の種類のファイルに対する URL 承認規則を定義できます。</span><span class="sxs-lookup"><span data-stu-id="9f768-162">Furthermore, with IIS 7 you can define URL authorization rules for files of any type.</span></span> <span data-ttu-id="9f768-163">詳細については、次を参照してください。 [IIS6 間での変更と IIS7 セキュリティ](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above)、 [Web プラットフォーム セキュリティ](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements)、および[Understanding IIS7 URL 承認](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-163">For more information, see [Changes Between IIS6 and IIS7 Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above), [Your Web Platform Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements), and [Understanding IIS7 URL Authorization](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span></span>

<span data-ttu-id="9f768-164">手短、IIS 7 以前のバージョンで、ASP.NET ランタイムによって処理されるリソースを保護するのにフォーム認証を使用することができますのみです。</span><span class="sxs-lookup"><span data-stu-id="9f768-164">Long story short, in versions prior to IIS 7, you can only use forms authentication to protect resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="9f768-165">同様に、URL 承認規則は、ASP.NET ランタイムによって処理されるリソースにのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-165">Likewise, URL authorization rules are only applied to resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="9f768-166">しかし、IIS 7 FormsAuthenticationModule と UrlAuthorizationModule をすべての要求にこの機能を拡張するため、IIS の HTTP パイプラインに統合することがします。</span><span class="sxs-lookup"><span data-stu-id="9f768-166">But with IIS 7 it is possible to integrate the FormsAuthenticationModule and UrlAuthorizationModule into IIS's HTTP pipeline, thereby extending this functionality to all requests.</span></span>

## <a name="step-1-creating-an-aspnet-website-for-this-tutorial-series"></a><span data-ttu-id="9f768-167">手順 1: このチュートリアルの一連の ASP.NET web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-167">Step 1: Creating an ASP.NET Website for this Tutorial Series</span></span>

<span data-ttu-id="9f768-168">Visual Studio 2008 の Microsoft の無料版の最も長い可能な対象ユーザーを達成するためにこの系列全体で構築することに ASP.NET web サイトが作成されます[Visual Web Developer 2008](https://www.microsoft.com/express/vwd/)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-168">In order to reach the widest possible audience, the ASP.NET website we will be building throughout this series will be created with Microsoft's free version of Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span></span> <span data-ttu-id="9f768-169">実装します。、`SqlMembershipProvider`ユーザー ストアに、 [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx)データベース。</span><span class="sxs-lookup"><span data-stu-id="9f768-169">We will implement the `SqlMembershipProvider` user store in a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database.</span></span> <span data-ttu-id="9f768-170">Visual Studio 2005 または Visual Studio 2008 または SQL Server の別のエディションを使用している場合心配 - 手順はほぼ同一であると、重要な相違点で指摘されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-170">If you are using Visual Studio 2005 or a different edition of Visual Studio 2008 or SQL Server, don't worry - the steps will be nearly identical and any non-trivial differences will be pointed out.</span></span>

> [!NOTE]
> <span data-ttu-id="9f768-171">それぞれのチュートリアルで使用するデモ web アプリケーションはダウンロードです。</span><span class="sxs-lookup"><span data-stu-id="9f768-171">The demo web application used in each tutorial is available as a download.</span></span> <span data-ttu-id="9f768-172">このダウンロード可能なアプリケーションは、.NET Framework version 3.5 を対象と Visual Web Developer 2008 で作成されました。</span><span class="sxs-lookup"><span data-stu-id="9f768-172">This downloadable application was created with Visual Web Developer 2008 targeted for the .NET Framework version 3.5.</span></span> <span data-ttu-id="9f768-173">アプリケーションが .NET 3.5 を対象となるので、Web.config ファイルには、追加の 3.5 に固有の構成要素が含まれます。</span><span class="sxs-lookup"><span data-stu-id="9f768-173">Since the application is targeted for .NET 3.5, its Web.config file includes additional, 3.5-specific configuration elements.</span></span> <span data-ttu-id="9f768-174">手短、.NET 3.5 をインストール、ダウンロード可能な web アプリケーションでは、コンピューターにまだがある場合は、web.config ファイルから 3.5 固有のマークアップを削除せずは機能しません。</span><span class="sxs-lookup"><span data-stu-id="9f768-174">Long story short, if you have yet to install .NET 3.5 on your computer then the downloadable web application will not work without first removing the 3.5-specific markup from Web.config.</span></span>


<span data-ttu-id="9f768-175">フォーム認証を構成して、前に、ASP.NET web サイトが最初に必要です。</span><span class="sxs-lookup"><span data-stu-id="9f768-175">Before we can configure forms authentication, we first need an ASP.NET website.</span></span> <span data-ttu-id="9f768-176">まず、新しいファイル システムに基づく ASP.NET web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-176">Start by creating a new file system-based ASP.NET website.</span></span> <span data-ttu-id="9f768-177">これを実現するには、Visual Web Developer を起動し、ファイル メニューに移動し、選択新しい Web サイトを新しい Web サイト ダイアログ ボックスを表示します。</span><span class="sxs-lookup"><span data-stu-id="9f768-177">To accomplish this, launch Visual Web Developer and then go to the File menu and choose New Web Site, displaying the New Web Site dialog box.</span></span> <span data-ttu-id="9f768-178">ASP.NET Web サイト テンプレートの選択、ファイル システムに場所ドロップダウン リストを設定、web サイトを配置するフォルダーを選択および言語は C# の場合に設定します。</span><span class="sxs-lookup"><span data-stu-id="9f768-178">Choose the ASP.NET Web Site template, set the Location drop-down list to File System, choose a folder to place the web site, and set the language to C#.</span></span> <span data-ttu-id="9f768-179">これには、Default.aspx ASP.NET ページで、アプリで新しい web サイトを作成は\_データ フォルダーと Web.config ファイルです。</span><span class="sxs-lookup"><span data-stu-id="9f768-179">This will create a new web site with a Default.aspx ASP.NET page, an App\_Data folder, and a Web.config file.</span></span>

> [!NOTE]
> <span data-ttu-id="9f768-180">Visual Studio には、プロジェクト管理の 2 つのモードがサポートされています。 Web サイト プロジェクトと Web アプリケーション プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="9f768-180">Visual Studio supports two modes of project management: Web Site Projects and Web Application Projects.</span></span> <span data-ttu-id="9f768-181">Web サイト プロジェクトでは、Web アプリケーション プロジェクトがプロジェクトのアーキテクチャ Visual Studio .NET 2002年/2003 を模倣: プロジェクト ファイルをインクルードし、プロジェクトのソース コードを/bin フォルダーに配置されている単一のアセンブリにコンパイルされ、プロジェクト ファイルが不足しています。</span><span class="sxs-lookup"><span data-stu-id="9f768-181">Web Site Projects lack a project file, whereas Web Application Projects mimic the project architecture in Visual Studio .NET 2002/2003 – they include a project file and compile the project's source code into a single assembly, which is placed in the /bin folder.</span></span> <span data-ttu-id="9f768-182">Visual Studio 2005 最初に唯一のサポートされている Web サイト プロジェクト、Web アプリケーション プロジェクト モデルは、Service Pack 1; 再導入されましたが、Visual Studio 2008 には、両方のプロジェクト モデルが用意されています。</span><span class="sxs-lookup"><span data-stu-id="9f768-182">Visual Studio 2005 initially only supported Web Site Projects, although the Web Application Project model was reintroduced with Service Pack 1; Visual Studio 2008 offers both project models.</span></span> <span data-ttu-id="9f768-183">Visual Web Developer 2005 および 2008 のエディションはサポート Web サイト プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="9f768-183">The Visual Web Developer 2005 and 2008 editions, however, only support Web Site Projects.</span></span> <span data-ttu-id="9f768-184">Web サイト プロジェクトのモデルを使用するされます。</span><span class="sxs-lookup"><span data-stu-id="9f768-184">I will be using the Web Site Project model.</span></span> <span data-ttu-id="9f768-185">Express 以外のエディションを使用しているし、使用するかどうか、 [Web アプリケーション プロジェクト モデル](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx)代わりに、自由にこれがあることをいくつかの相違点、画面とではなく実行する必要があります手順で表示されるものの間に注意してください、スクリーン ショットに表示し、これらのチュートリアルで説明する手順。</span><span class="sxs-lookup"><span data-stu-id="9f768-185">If you are using a non-Express edition and want to use the [Web Application Project model](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx) instead, feel free to do so but be aware that there may be some discrepancies between what you see on your screen and the steps you must take versus the screen shots shown and instructions provided in these tutorials.</span></span>


<span data-ttu-id="9f768-186">[![新しいファイル システムに基づいた Web サイトを作成します。](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-186">[![Create a New File System-Based Web Site](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span></span>

<span data-ttu-id="9f768-187">**図 2**: New File System-Based Web サイトの作成 ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-187">**Figure 2**: Create a New File System-Based Web Site ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image4.png))</span></span>


### <a name="adding-a-master-page"></a><span data-ttu-id="9f768-188">マスター ページを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-188">Adding a Master Page</span></span>

<span data-ttu-id="9f768-189">次に、Site.master をという名前のルート ディレクトリ内のサイトに新しいマスター ページを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-189">Next, add a new Master Page to the site in the root directory named Site.master.</span></span> <span data-ttu-id="9f768-190">[マスター ページ](https://msdn.microsoft.com/library/wtxbf3hh.aspx)ASP.NET ページに適用できるサイトのテンプレートを定義するページの開発者を有効にします。</span><span class="sxs-lookup"><span data-stu-id="9f768-190">[Master pages](https://msdn.microsoft.com/library/wtxbf3hh.aspx) enable a page developer to define a site-wide template that can be applied to ASP.NET pages.</span></span> <span data-ttu-id="9f768-191">マスター ページの主な利点、サイトの全体的な外観できますは定義されている 1 つの場所でしやすくための更新や、サイトのレイアウトを調整します。</span><span class="sxs-lookup"><span data-stu-id="9f768-191">The main benefit of master pages is that the site's overall appearance can be defined in a single location, thereby making it easy to update or tweak the site's layout.</span></span>


<span data-ttu-id="9f768-192">[![マスター ページを追加するという名前の web サイトに Site.master](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-192">[![Add a Master Page Named Site.master to the Website](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span></span>

<span data-ttu-id="9f768-193">**図 3**: マスター ページという Site.master、web サイトに追加 ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-193">**Figure 3**: Add a Master Page Named Site.master to the Website ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image7.png))</span></span>


<span data-ttu-id="9f768-194">マスター ページで、ここで、サイト全体のページ レイアウトを定義します。</span><span class="sxs-lookup"><span data-stu-id="9f768-194">Define the site-wide page layout here in the master page.</span></span> <span data-ttu-id="9f768-195">デザイン ビューを使用して、必要なレイアウトまたは Web コントロールを追加または、ソース ビューで手動でマークアップを手動で追加することができます。</span><span class="sxs-lookup"><span data-stu-id="9f768-195">You can use the Design view and add whatever Layout or Web controls you need, or you can manually add the markup by hand in the Source view.</span></span> <span data-ttu-id="9f768-196">使用されるレイアウトを模倣するために、マスター ページのレイアウトを構造化した my  *[ASP.NET 2.0 のデータを扱う](../../data-access/index.md)*チュートリアル シリーズの (図 4 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="9f768-196">I structured my master page's layout to mimic the layout used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series (see Figure 4).</span></span> <span data-ttu-id="9f768-197">マスター ページを使用して[カスケード スタイル シート](http://www.w3schools.com/css/default.asp)の配置とスタイル (このチュートリアルの関連するダウンロードに含まれています) を Style.css ファイルで定義された CSS 設定を使用します。</span><span class="sxs-lookup"><span data-stu-id="9f768-197">The master page uses [cascading style sheets](http://www.w3schools.com/css/default.asp) for positioning and styles with the CSS settings defined in the file Style.css (which is included in this tutorial's associated download).</span></span> <span data-ttu-id="9f768-198">CSS 規則が定義されているマークアップを次に示すのかを判断できないときにするよう、ナビゲーション&lt;div&gt;の左側に表示し、200 ピクセルの固定幅ができるように、コンテンツが絶対位置に配置します。</span><span class="sxs-lookup"><span data-stu-id="9f768-198">While you cannot tell from the markup shown below, the CSS rules are defined such that the navigation &lt;div&gt;'s content is absolutely positioned so that it appears on the left and has a fixed width of 200 pixels.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample1.aspx)]

<span data-ttu-id="9f768-199">マスター ページは、静的ページ レイアウトやマスター ページを使用する ASP.NET ページが編集可能な領域の両方を定義します。</span><span class="sxs-lookup"><span data-stu-id="9f768-199">A master page defines both the static page layout and the regions that can be edited by the ASP.NET pages that use the master page.</span></span> <span data-ttu-id="9f768-200">これらのコンテンツの編集可能な領域がによって示される、`ContentPlaceHolder`コントロールで、内容を確認することができます&lt;div&gt;です。</span><span class="sxs-lookup"><span data-stu-id="9f768-200">These content editable regions are indicated by the `ContentPlaceHolder` control, which can be seen within the content &lt;div&gt;.</span></span> <span data-ttu-id="9f768-201">マスター ページが、1 つ`ContentPlaceHolder`(メイン)、マスター ページが複数 contentplaceholders にあります。</span><span class="sxs-lookup"><span data-stu-id="9f768-201">Our master page has a single `ContentPlaceHolder` (MainContent), but master page's may have multiple ContentPlaceHolders.</span></span>

<span data-ttu-id="9f768-202">上記で入力したマークアップを含む、デザイン ビューに切り替えると、マスター ページのレイアウトを示します。</span><span class="sxs-lookup"><span data-stu-id="9f768-202">With the markup entered above, switching to the Design view shows the master page's layout.</span></span> <span data-ttu-id="9f768-203">このマスター ページを使用するすべての ASP.NET ページのマークアップを指定することでこの統一されたレイアウトになります、`MainContent`領域。</span><span class="sxs-lookup"><span data-stu-id="9f768-203">Any ASP.NET pages that use this master page will have this uniform layout, with the ability to specify the markup for the `MainContent` region.</span></span>


<span data-ttu-id="9f768-204">[![デザイン ビューで表示したときに、マスター ページ](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-204">[![The Master Page, When Viewed Through the Design View](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span></span>

<span data-ttu-id="9f768-205">**図 4**:、マスター ページ、ときに表示をデザイン ビュー ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-205">**Figure 4**: The Master Page, When Viewed Through the Design View ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image10.png))</span></span>


### <a name="creating-content-pages"></a><span data-ttu-id="9f768-206">コンテンツ ページを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-206">Creating Content Pages</span></span>

<span data-ttu-id="9f768-207">この時点で Default.aspx ページでマイクロソフト web サイトが作成したばかりのマスター ページを使用しません。</span><span class="sxs-lookup"><span data-stu-id="9f768-207">At this point we have a Default.aspx page in our website, but it does not use the master page we just created.</span></span> <span data-ttu-id="9f768-208">ページには、コンテンツが含まれていない場合は、マスター ページを使用する web ページの宣言型マークアップを操作することができますがまだは簡単にだけ、ページを削除して再使用するマスター ページを指定する、プロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-208">While it is possible to manipulate the declarative markup of a web page to use a master page, if the page doesn't contain any content yet it is easier to just delete the page and re-add it to the project, specifying the master page to use.</span></span> <span data-ttu-id="9f768-209">そのため、Default.aspx をプロジェクトから削除することによって開始します。</span><span class="sxs-lookup"><span data-stu-id="9f768-209">Therefore, start by deleting Default.aspx from the project.</span></span>

<span data-ttu-id="9f768-210">次に、ソリューション エクスプ ローラーでプロジェクト名を右クリックし、Default.aspx という名前の新しい Web フォームの追加を選択します。</span><span class="sxs-lookup"><span data-stu-id="9f768-210">Next, right-click on the project name in the Solution Explorer and choose to add a new Web Form named Default.aspx.</span></span> <span data-ttu-id="9f768-211">このとき、チェック ボックスを「マスター ページの選択」を一覧から Site.master マスター ページを選択します。</span><span class="sxs-lookup"><span data-stu-id="9f768-211">This time, check the "Select master page" checkbox and choose the Site.master master page from the list.</span></span>


<span data-ttu-id="9f768-212">[![マスター ページの選択 を選択する新しい Default.aspx ページを追加します。](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-212">[![Add a New Default.aspx Page Choosing to Select a Master Page](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span></span>

<span data-ttu-id="9f768-213">**図 5**: 追加、新しい Default.aspx ページを選択するマスター ページの選択 ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-213">**Figure 5**: Add a New Default.aspx Page Choosing to Select a Master Page ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image13.png))</span></span>


![Site.master マスター ページを使用してください。](an-overview-of-forms-authentication-cs/_static/image14.png)

<span data-ttu-id="9f768-215">**図 6**: Site.master マスター ページを使用して</span><span class="sxs-lookup"><span data-stu-id="9f768-215">**Figure 6**: Use the Site.master Master Page</span></span>


> [!NOTE]
> <span data-ttu-id="9f768-216">Web アプリケーション プロジェクトのモデルを使用している場合、新しい項目の追加 ダイアログ ボックスでは「マスター ページの選択」のチェック ボックスが含まれません。</span><span class="sxs-lookup"><span data-stu-id="9f768-216">If you are using the Web Application Project Model the Add New Item dialog box does not include a "Select master page" checkbox.</span></span> <span data-ttu-id="9f768-217">代わりに、「Web コンテンツ形式」の種類のアイテムを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-217">Instead, you need to add an item of type "Web Content Form."</span></span> <span data-ttu-id="9f768-218">「Web コンテンツ形式」オプションを選択すると、追加 をクリックして、Visual Studio がマスターの同じ選択を表示 ダイアログ ボックスの図 6 に示すようにします。</span><span class="sxs-lookup"><span data-stu-id="9f768-218">After choosing the "Web Content Form" option and clicking Add, Visual Studio will display the same Select a Master dialog box shown in Figure 6.</span></span>


<span data-ttu-id="9f768-219">新しい Default.aspx ページの宣言型マークアップにだけが含まれています、@Pageマスターへのパスを指定するディレクティブ、マスター ページのメイン ContentPlaceHolder のファイルとコンテンツ コントロールをページします。</span><span class="sxs-lookup"><span data-stu-id="9f768-219">The new Default.aspx page's declarative markup includes just a @Page directive specifying the path to the master page file and a Content control for the master page's MainContent ContentPlaceHolder.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample2.aspx)]

<span data-ttu-id="9f768-220">ここでは、Default.aspx を空のままにします。</span><span class="sxs-lookup"><span data-stu-id="9f768-220">For now, leave Default.aspx empty.</span></span> <span data-ttu-id="9f768-221">おについては、コンテンツを追加するには、このチュートリアルの後半でそれに戻ります。</span><span class="sxs-lookup"><span data-stu-id="9f768-221">We will return to it later in this tutorial to add content.</span></span>

> [!NOTE]
> <span data-ttu-id="9f768-222">このマスター ページには、メニューやその他のナビゲーション インターフェイスのセクションが含まれています。</span><span class="sxs-lookup"><span data-stu-id="9f768-222">Our master page includes a section for a menu or some other navigation interface.</span></span> <span data-ttu-id="9f768-223">今後のチュートリアルでこのようなインターフェイスを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-223">We will create such an interface in a future tutorial.</span></span>

## <a name="step-2-enabling-forms-authentication"></a><span data-ttu-id="9f768-224">手順 2:、フォーム認証が有効にします。</span><span class="sxs-lookup"><span data-stu-id="9f768-224">Step 2: Enabling Forms Authentication</span></span>

<span data-ttu-id="9f768-225">ASP.NET web サイトを作成して、[次へ] タスクは、フォーム認証を有効にするのには。</span><span class="sxs-lookup"><span data-stu-id="9f768-225">With the ASP.NET website created, our next task is to enable forms authentication.</span></span> <span data-ttu-id="9f768-226">アプリケーションの認証構成を指定、 [ `<authentication>`要素](https://msdn.microsoft.com/library/532aee0e.aspx)Web.config でします。`<authentication>`要素には、アプリケーションによって使用される認証モデルを指定する mode という名前の 1 つの属性が含まれています。</span><span class="sxs-lookup"><span data-stu-id="9f768-226">The application's authentication configuration is specified through the [`<authentication>` element](https://msdn.microsoft.com/library/532aee0e.aspx) in Web.config. The `<authentication>` element contains a single attribute named mode that specifies the authentication model used by the application.</span></span> <span data-ttu-id="9f768-227">この属性は、次の 4 つの値のいずれかを持つことができます。</span><span class="sxs-lookup"><span data-stu-id="9f768-227">This attribute can have one of the following four values:</span></span>

- <span data-ttu-id="9f768-228">**Windows** – 訪問者の認証に、web サーバーの役割は Windows 認証を使用するアプリケーションで、前のチュートリアルで説明したようにし、通常これには Basic、Digest または統合 Windows認証します。</span><span class="sxs-lookup"><span data-stu-id="9f768-228">**Windows** – as discussed in the preceding tutorial, when an application uses Windows authentication it is the web server's responsibility to authenticate the visitor, and this is usually done through Basic, Digest, or Integrated Windows authentication.</span></span>
- <span data-ttu-id="9f768-229">**フォーム**– ユーザーは web ページ上のフォームを使用して認証されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-229">**Forms**– users are authenticated via a form on a web page.</span></span>
- <span data-ttu-id="9f768-230">**Passport**– ユーザーは、Microsoft の Passport Network を使用して認証されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-230">**Passport**– users are authenticated using Microsoft's Passport Network.</span></span>
- <span data-ttu-id="9f768-231">**None**– 認証モデルが使用されていない、すべての訪問者は匿名です。</span><span class="sxs-lookup"><span data-stu-id="9f768-231">**None**– no authentication model is used; all visitors are anonymous.</span></span>

<span data-ttu-id="9f768-232">既定では、ASP.NET アプリケーションは、Windows 認証を使用します。</span><span class="sxs-lookup"><span data-stu-id="9f768-232">By default, ASP.NET applications use Windows authentication.</span></span> <span data-ttu-id="9f768-233">フォーム認証を認証の種類を変更し、必要がありますを変更する、`<authentication>`フォームに要素の mode 属性。</span><span class="sxs-lookup"><span data-stu-id="9f768-233">To change the authentication type to forms authentication, then, we need to modify the `<authentication>` element's mode attribute to Forms.</span></span>

<span data-ttu-id="9f768-234">プロジェクトに Web.config ファイルがまだ含まれない場合は、1 つ今すぐを右クリックして、ソリューション エクスプ ローラーでプロジェクト名を新しい項目の追加 を選択して Web 構成ファイルを追加しを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-234">If your project does not yet contain a Web.config file, add one now by right-clicking on the project name in the Solution Explorer, choosing Add New Item, and then adding a Web Configuration file.</span></span>


<span data-ttu-id="9f768-235">[![プロジェクトがまだ Web.config を行わない場合は、今すぐ追加します。](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-235">[![If Your Project Does Not Yet Include Web.config, Add It Now](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span></span>

<span data-ttu-id="9f768-236">**図 7**: 場合、プロジェクトはありませんまだ含める Web.config、今すぐ追加 ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-236">**Figure 7**: If Your Project Does Not Yet Include Web.config, Add It Now ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image17.png))</span></span>


<span data-ttu-id="9f768-237">次に、検索、`<authentication>`要素およびフォーム認証で使用するように更新します。</span><span class="sxs-lookup"><span data-stu-id="9f768-237">Next, locate the `<authentication>` element and update it to use forms authentication.</span></span> <span data-ttu-id="9f768-238">この変更後に、Web.config ファイルのマークアップを次のようになります。</span><span class="sxs-lookup"><span data-stu-id="9f768-238">After this change, your Web.config file's markup should look similar to the following:</span></span>

[!code-xml[Main](an-overview-of-forms-authentication-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="9f768-239">Web.config は、XML ファイルには、大文字小文字の区別が重要です。</span><span class="sxs-lookup"><span data-stu-id="9f768-239">Since Web.config is an XML file, casing is important.</span></span> <span data-ttu-id="9f768-240">大文字の"F"、フォームにモード属性を設定することを確認します。</span><span class="sxs-lookup"><span data-stu-id="9f768-240">Make sure that you set the mode attribute to Forms, with a capital "F".</span></span> <span data-ttu-id="9f768-241">"Forms"など、別の文字種を使用する場合、ブラウザーを使用してサイトにアクセスしたときに構成エラーを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="9f768-241">If you use a different casing, such as "forms", you'll receive a configuration error when visiting the site through a browser.</span></span>


<span data-ttu-id="9f768-242">`<authentication>`要素には、必要に応じて、`<forms>`フォーム認証に固有の設定が含まれる子要素です。</span><span class="sxs-lookup"><span data-stu-id="9f768-242">The `<authentication>` element may optionally include a `<forms>` child element that contains forms authentication-specific settings.</span></span> <span data-ttu-id="9f768-243">ここでは、みましょうだけを使用して既定のフォーム認証設定。</span><span class="sxs-lookup"><span data-stu-id="9f768-243">For now, let's just use the default forms authentication settings.</span></span> <span data-ttu-id="9f768-244">について学びます、`<forms>`子要素を次のチュートリアルで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="9f768-244">We will explore the `<forms>` child element in more detail in the next tutorial.</span></span>

## <a name="step-3-building-the-login-page"></a><span data-ttu-id="9f768-245">手順 3: ログイン ページの作成</span><span class="sxs-lookup"><span data-stu-id="9f768-245">Step 3: Building the Login Page</span></span>

<span data-ttu-id="9f768-246">フォーム認証をサポートするためには、当社の web サイトには、ログイン ページが必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-246">In order to support forms authentication our website needs a login page.</span></span> <span data-ttu-id="9f768-247">「について、フォーム認証のワークフロー」セクションで説明したように、`FormsAuthenticationModule`は自動的にユーザー ログイン ページにリダイレクトされていないページへのアクセスを試みた場合を表示する権限です。</span><span class="sxs-lookup"><span data-stu-id="9f768-247">As discussed in the "Understanding the Forms Authentication Workflow" section, the `FormsAuthenticationModule` will automatically redirect the user to the login page if they attempt to access a page that they are not authorized to view.</span></span> <span data-ttu-id="9f768-248">匿名ユーザーにログイン ページへのリンクを表示する ASP.NET Web コントロールがあります。</span><span class="sxs-lookup"><span data-stu-id="9f768-248">There are also ASP.NET Web controls that will display a link to the login page to anonymous users.</span></span> <span data-ttu-id="9f768-249">もっとも、「ログイン ページの URL は何ですか?」</span><span class="sxs-lookup"><span data-stu-id="9f768-249">This begs the question, "What is the URL of the login page?"</span></span>

<span data-ttu-id="9f768-250">既定では、フォーム認証システムは Login.aspx 名前を指定する、ログイン ページが必要ですし、web アプリケーションのルート ディレクトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-250">By default, the forms authentication system expects the login page to be named Login.aspx and placed in the root directory of the web application.</span></span> <span data-ttu-id="9f768-251">別のログイン ページの URL を使用する場合は、これを行う Web.config で指定しています。これ以降のチュートリアルを実行する方法が表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-251">If you want to use a different login page URL, you can do so by specifying it in Web.config. We will see how to do this in the subsequent tutorial.</span></span>

<span data-ttu-id="9f768-252">ログイン ページには、3 つの役割があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-252">The login page has three responsibilities:</span></span>

1. <span data-ttu-id="9f768-253">自分の資格情報を入力するビジターをできるようにするインターフェイスを提供します。</span><span class="sxs-lookup"><span data-stu-id="9f768-253">Provide an interface that allows the visitor to enter their credentials.</span></span>
2. <span data-ttu-id="9f768-254">送信された資格情報が有効なかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="9f768-254">Determine if the submitted credentials are valid.</span></span>
3. <span data-ttu-id="9f768-255">「ログイン」ユーザー フォーム認証チケットを作成することでします。</span><span class="sxs-lookup"><span data-stu-id="9f768-255">"Log in" the user by creating the forms authentication ticket.</span></span>

### <a name="creating-the-login-pages-user-interface"></a><span data-ttu-id="9f768-256">ログイン ページのユーザー インターフェイスを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-256">Creating the Login Page's User Interface</span></span>

<span data-ttu-id="9f768-257">最初のタスクを開始しましょう。</span><span class="sxs-lookup"><span data-stu-id="9f768-257">Let's get started with the first task.</span></span> <span data-ttu-id="9f768-258">Login.aspx をという名前のサイトのルート ディレクトリに新しい ASP.NET ページを追加し、Site.master マスター ページと関連付けます。</span><span class="sxs-lookup"><span data-stu-id="9f768-258">Add a new ASP.NET page to the site's root directory named Login.aspx and associate it with the Site.master master page.</span></span>


<span data-ttu-id="9f768-259">[![新しい ASP.NET ページの追加 Login.aspx という名前](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-259">[![Add a New ASP.NET Page Named Login.aspx](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span></span>

<span data-ttu-id="9f768-260">**図 8**: 新しい ASP.NET ページという Login.aspx に追加 ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-260">**Figure 8**: Add a New ASP.NET Page Named Login.aspx ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image20.png))</span></span>


<span data-ttu-id="9f768-261">典型的なログイン ページのインターフェイスは、次の 2 つのテキスト ボックス – ユーザーの名前のいずれか、– パスワードとフォームを送信するためのボタンに 1 つで構成されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-261">The typical login page interface consists of two textboxes – one for the user's name, one for their password – and a button to submit the form.</span></span> <span data-ttu-id="9f768-262">Web サイトには、多くの場合、「次回の」チェック ボックスをオンの場合、ブラウザーの再起動前後で、結果として得られる認証チケットが引き続き発生することが含まれます。</span><span class="sxs-lookup"><span data-stu-id="9f768-262">Websites oftentimes include a "Remember me" checkbox that, if checked, persists the resulting authentication ticket across browser restarts.</span></span>

<span data-ttu-id="9f768-263">Login.aspx およびセットに 2 つのテキスト ボックスを追加、`ID`プロパティ名とパスワードをそれぞれします。</span><span class="sxs-lookup"><span data-stu-id="9f768-263">Add two TextBoxes to Login.aspx and set their `ID` properties to UserName and Password, respectively.</span></span> <span data-ttu-id="9f768-264">パスワードのも設定`TextMode`パスワードのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="9f768-264">Also set Password's `TextMode` property to Password.</span></span> <span data-ttu-id="9f768-265">次に、設定、CheckBox コントロールを追加、 `ID` RememberMe にプロパティとその`Text`プロパティを「次回」です。</span><span class="sxs-lookup"><span data-stu-id="9f768-265">Next, add a CheckBox control, setting its `ID` property to RememberMe and its `Text` property to "Remember Me".</span></span> <span data-ttu-id="9f768-266">次に、追加のログイン ボタンをという名前のボタンが`Text`プロパティが"Login"に設定します。</span><span class="sxs-lookup"><span data-stu-id="9f768-266">Following that, add a Button named LoginButton whose `Text` property is set to "Login".</span></span> <span data-ttu-id="9f768-267">最後に、ラベルの Web コントロールの追加し、設定、 `ID` InvalidCredentialsMessage、プロパティ、`Text`プロパティを"ユーザー名またはパスワードが無効です。</span><span class="sxs-lookup"><span data-stu-id="9f768-267">And finally, add a Label Web control and set its `ID` property to InvalidCredentialsMessage, its `Text` property to "Your username or password is invalid.</span></span> <span data-ttu-id="9f768-268">もう一度やり直してください。"、その`ForeColor`赤にプロパティとその`Visible`プロパティを False にします。</span><span class="sxs-lookup"><span data-stu-id="9f768-268">Please try again.", its `ForeColor` property to Red, and its `Visible` property to False.</span></span>

<span data-ttu-id="9f768-269">この時点で、画面を図 9 でスクリーン ショットのようになり、ページの宣言の構文は、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="9f768-269">At this point your screen should look similar to the screen shot in Figure 9, and your page's declarative syntax should like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample4.aspx)]


<span data-ttu-id="9f768-270">[![ログイン ページには、次の 2 つのテキスト ボックス、チェック ボックス、ボタン、およびラベルが含まれています。](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-270">[![The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span></span>

<span data-ttu-id="9f768-271">**図 9**:、ログイン ページを含む 2 つのテキスト ボックス、チェック ボックス、ボタン、およびラベル ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-271">**Figure 9**: The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image23.png))</span></span>


<span data-ttu-id="9f768-272">最後に、ログイン ボタンのクリック イベント ハンドラーを作成イベントです。</span><span class="sxs-lookup"><span data-stu-id="9f768-272">Finally, create an event handler for the LoginButton's Click event.</span></span> <span data-ttu-id="9f768-273">デザイナーで、このイベント ハンドラーを作成するボタン コントロール をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="9f768-273">From the Designer, simply double-click the Button control to create this event handler.</span></span>

### <a name="determining-if-the-supplied-credentials-are-valid"></a><span data-ttu-id="9f768-274">かどうか、指定された資格情報が有効期間を決定します。</span><span class="sxs-lookup"><span data-stu-id="9f768-274">Determining If the Supplied Credentials are Valid</span></span>

<span data-ttu-id="9f768-275">これで、ボタンのクリックで 2 のタスクを実装する必要があります: 指定された資格情報が有効かどうかを決定する、イベント ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="9f768-275">We now need to implement task 2 in the Button's Click event handler – determining whether the supplied credentials are valid.</span></span> <span data-ttu-id="9f768-276">このために指定された資格情報を一致させる既知の資格情報を持つことを確認できるように、すべてのユーザーの資格情報を保持するユーザー ストアを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-276">In order to do this there needs to be a user store that holds all of the users' credentials so that we can determine if the supplied credentials match up with any known credentials.</span></span>

<span data-ttu-id="9f768-277">ASP.NET 2.0 では、前に開発者が独自のユーザー ストアの両方を実装して、ストアに対して指定された資格情報を検証するコードの記述を担当します。</span><span class="sxs-lookup"><span data-stu-id="9f768-277">Prior to ASP.NET 2.0, developers were responsible for implementing both their own user stores and writing the code to validate the supplied credentials against the store.</span></span> <span data-ttu-id="9f768-278">ほとんどの開発者ストアを実装ユーザー データベースでは、ユーザー名、パスワード、電子メール、LastLoginDate などのように列を持つユーザーをという名前のテーブルを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-278">Most developers would implement the user store in a database, creating a table named Users with columns like UserName, Password, Email, LastLoginDate, and so forth.</span></span> <span data-ttu-id="9f768-279">次に、次の表は、ユーザー アカウントごとに 1 つのレコードがあります。</span><span class="sxs-lookup"><span data-stu-id="9f768-279">This table, then, would have one record per user account.</span></span> <span data-ttu-id="9f768-280">ユーザーの指定された資格情報の検証が行われます。 一致するユーザー名のデータベースのクエリを実行して、データベース内のパスワードが指定されたパスワードに当てはめて考えることを確認します。</span><span class="sxs-lookup"><span data-stu-id="9f768-280">Verifying a user's supplied credentials would involve querying the database for a matching username and then ensuring that the password in the database corresponded to the supplied password.</span></span>

<span data-ttu-id="9f768-281">ASP.NET 2.0 では、開発者必要がありますを使用してメンバーシップ プロバイダーのいずれかのユーザー ストアを管理します。</span><span class="sxs-lookup"><span data-stu-id="9f768-281">With ASP.NET 2.0, developers should use one of the Membership providers to manage the user store.</span></span> <span data-ttu-id="9f768-282">このチュートリアルの系列に使用するユーザー ストアの SQL Server データベースを使用すると、SqlMembershipProvider です。</span><span class="sxs-lookup"><span data-stu-id="9f768-282">In this tutorial series we will be using the SqlMembershipProvider, which uses a SQL Server database for the user store.</span></span> <span data-ttu-id="9f768-283">SqlMembershipProvider を使用する場合、テーブル、ビュー、およびプロバイダーで想定されているストアド プロシージャを含む特定のデータベース スキーマを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-283">When using the SqlMembershipProvider we need to implement a specific database schema that includes the tables, views, and stored procedures expected by the provider.</span></span> <span data-ttu-id="9f768-284">このスキーマを実装する方法については、***メンバーシップ スキーマを作成する SQL Server で***チュートリアルです。</span><span class="sxs-lookup"><span data-stu-id="9f768-284">We will examine how to implement this schema in the ***Creating the Membership Schema in SQL Server*** tutorial.</span></span> <span data-ttu-id="9f768-285">インプレース メンバーシップ プロバイダーは、ユーザーの資格情報を検証するほど単純では呼び出すことと、[メンバーシップ クラス](https://msdn.microsoft.com/library/system.web.security.membership.aspx)の[ValidateUser (*username*、*パスワード*)メソッド](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx)を示すブール値を返すことをするかどうかの有効性、 *username*と*パスワード*の組み合わせ。</span><span class="sxs-lookup"><span data-stu-id="9f768-285">With the Membership provider in place, validating the user's credentials is as simple as calling the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx)'s [ValidateUser(*username*, *password*) method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx), which returns a Boolean value indicating whether the validity of the *username* and *password* combination.</span></span> <span data-ttu-id="9f768-286">おを実装していない SqlMembershipProvider のユーザーのストア、表示されるようにこの時点でのメンバーシップ クラスは、ValidateUser メソッドを使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="9f768-286">Seeing as we have not yet implemented the SqlMembershipProvider's user store, we cannot use the Membership class's ValidateUser method at this time.</span></span>

<span data-ttu-id="9f768-287">時間がかかる場合、テーブルの構築に自社カスタム ユーザー データベース (お、SqlMembershipProvider が実装された後に古いなります) をみましょう代わりにハード コードではなくログイン内で有効な資格情報ページします。</span><span class="sxs-lookup"><span data-stu-id="9f768-287">Rather than take the time to build our own custom Users database table (which would be obsolete once we implemented the SqlMembershipProvider), let's instead hard-code the valid credentials within the login page itself.</span></span> <span data-ttu-id="9f768-288">ログイン ボタンのでは、イベント ハンドラーをクリックして、次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-288">In the LoginButton's Click event handler, add the following code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample5.cs)]

<span data-ttu-id="9f768-289">ご覧のように、– Scott、Jisun、および Sam – 3 つの有効なユーザー アカウントがあるし、3 つすべてが、同じパスワード ("") があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-289">As you can see, there are three valid user accounts – Scott, Jisun, and Sam – and all three have the same password ("password").</span></span> <span data-ttu-id="9f768-290">コードは、有効なユーザー名とパスワードと一致するユーザー名およびパスワードの配列をループします。</span><span class="sxs-lookup"><span data-stu-id="9f768-290">The code loops through the users and passwords arrays looking for a valid username and password match.</span></span> <span data-ttu-id="9f768-291">ユーザー名とパスワードの両方が有効な場合は、ユーザーをログインし、それらを適切なページにリダイレクトする必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-291">If both the username and password are valid, we need to login the user and then redirect them to the appropriate page.</span></span> <span data-ttu-id="9f768-292">資格情報が有効でない場合 InvalidCredentialsMessage ラベルを表示します。</span><span class="sxs-lookup"><span data-stu-id="9f768-292">If the credentials are invalid, then we display the InvalidCredentialsMessage Label.</span></span>

<span data-ttu-id="9f768-293">有効な資格情報を入力すると、ときに説明したように、「適切なページ」にはリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="9f768-293">When a user enters valid credentials, I mentioned that they are then redirected to the "appropriate page."</span></span> <span data-ttu-id="9f768-294">ただし、適切なページとは?</span><span class="sxs-lookup"><span data-stu-id="9f768-294">What is the appropriate page, though?</span></span> <span data-ttu-id="9f768-295">すると、ユーザーは、表示、承認されていないページにアクセスを FormsAuthenticationModule 自動的にリダイレクトされログイン ページに注意してください。</span><span class="sxs-lookup"><span data-stu-id="9f768-295">Recall that when a user visits a page they are not authorized to view, the FormsAuthenticationModule automatically redirects them to the login page.</span></span> <span data-ttu-id="9f768-296">これにより、ReturnUrl パラメーターを使用して、クエリ文字列の要求された URL が含まれます。</span><span class="sxs-lookup"><span data-stu-id="9f768-296">In doing so, it includes the requested URL in the querystring via the ReturnUrl parameter.</span></span> <span data-ttu-id="9f768-297">つまり、ユーザーが、ProtectedPage.aspx にアクセスしようとしています。 そのためには、承認されていない場合は、FormsAuthenticationModule がリダイレクトするとします。</span><span class="sxs-lookup"><span data-stu-id="9f768-297">That is, if a user attempted to visit ProtectedPage.aspx, and they were not authorized to do so, the FormsAuthenticationModule would redirect them to:</span></span>

<span data-ttu-id="9f768-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span><span class="sxs-lookup"><span data-stu-id="9f768-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span></span>

<span data-ttu-id="9f768-299">ログインすると、ProtectedPage.aspx にユーザーをリダイレクトする必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-299">Upon successfully logging in, the user should be redirected back to ProtectedPage.aspx.</span></span> <span data-ttu-id="9f768-300">または、ユーザーには、独自 volition でログイン ページが参照してください可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-300">Alternatively, users may visit the login page on their own volition.</span></span> <span data-ttu-id="9f768-301">その場合は、ユーザーにログインした後を送信するルート フォルダーの Default.aspx ページに。</span><span class="sxs-lookup"><span data-stu-id="9f768-301">In that case, after logging in the user they should be sent to the root folder's Default.aspx page.</span></span>

### <a name="logging-in-the-user"></a><span data-ttu-id="9f768-302">ユーザーのログイン</span><span class="sxs-lookup"><span data-stu-id="9f768-302">Logging In the User</span></span>

<span data-ttu-id="9f768-303">指定された資格情報は、有効なは、想定される必要があります、フォーム認証チケットを作成するこれによりユーザーが、サイトでのログ記録します。</span><span class="sxs-lookup"><span data-stu-id="9f768-303">Assuming that the supplied credentials are valid, we need to create a forms authentication ticket, thereby logging in the user to the site.</span></span> <span data-ttu-id="9f768-304">[FormsAuthentication クラス](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx)で、 [System.Web.Security 名前空間](https://msdn.microsoft.com/library/system.web.security.aspx)認証システムとでは、フォームを使用してユーザーをログにログ記録用のさまざまなメソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="9f768-304">The [FormsAuthentication class](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx) in the [System.Web.Security namespace](https://msdn.microsoft.com/library/system.web.security.aspx) provides assorted methods for logging in and logging out users via the forms authentication system.</span></span> <span data-ttu-id="9f768-305">FormsAuthentication クラスでは、いくつかの方法がありますが、ここではこの時点で、3 つには。</span><span class="sxs-lookup"><span data-stu-id="9f768-305">While there are several methods in the FormsAuthentication class, the three we are interested in at this juncture are:</span></span>

- <span data-ttu-id="9f768-306">[GetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – creates a forms authentication ticket for the supplied name *username*.</span><span class="sxs-lookup"><span data-stu-id="9f768-306">[GetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – creates a forms authentication ticket for the supplied name *username*.</span></span> <span data-ttu-id="9f768-307">次に、このメソッドは、作成し、認証チケットの内容を保持する HttpCookie オブジェクトを返します。</span><span class="sxs-lookup"><span data-stu-id="9f768-307">Next, this method creates and returns an HttpCookie object that holds the contents of the authentication ticket.</span></span> <span data-ttu-id="9f768-308">場合*persistCookie*が true の場合、永続的な cookie が作成されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-308">If *persistCookie* is true, a persistent cookie is created.</span></span>
- <span data-ttu-id="9f768-309">[SetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) – calls the GetAuthCookie(*username*, *persistCookie*) method to generate the forms authentication cookie.</span><span class="sxs-lookup"><span data-stu-id="9f768-309">[SetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) – calls the GetAuthCookie(*username*, *persistCookie*) method to generate the forms authentication cookie.</span></span> <span data-ttu-id="9f768-310">このメソッドは、(使用されます。 それ以外の場合、cookie ベースのフォーム認証されている、このメソッドが cookie なしのチケットのロジックを処理する内部クラスを呼び出すと仮定した場合) の Cookie のコレクションに GetAuthCookie から返されるクッキーを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-310">This method then adds the cookie returned by GetAuthCookie to the Cookies collection (assuming cookies-based forms authentication is being used; otherwise, this method calls an internal class that handles the cookieless ticket logic).</span></span>
- <span data-ttu-id="9f768-311">[RedirectFromLoginPage(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – this method calls SetAuthCookie(*username*, *persistCookie*), and then redirects the user to the appropriate page.</span><span class="sxs-lookup"><span data-stu-id="9f768-311">[RedirectFromLoginPage(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – this method calls SetAuthCookie(*username*, *persistCookie*), and then redirects the user to the appropriate page.</span></span>

<span data-ttu-id="9f768-312">GetAuthCookie は、Cookie のコレクションに、cookie の書き込み前に認証チケットを変更する必要がある場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="9f768-312">GetAuthCookie is handy when you need to modify the authentication ticket before writing the cookie out to the Cookies collection.</span></span> <span data-ttu-id="9f768-313">SetAuthCookie は、フォーム認証チケットを作成し、Cookie のコレクションに追加するが、適切なページにユーザーをリダイレクトしたくない場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="9f768-313">SetAuthCookie is useful if you want to create the forms authentication ticket and add it to the Cookies collection, but do not want to redirect the user to the appropriate page.</span></span> <span data-ttu-id="9f768-314">おそらくするいくつかの代替のページに送信したり、ログイン ページに保存します。</span><span class="sxs-lookup"><span data-stu-id="9f768-314">Perhaps you want to keep them on the login page or send them to some alternate page.</span></span>

<span data-ttu-id="9f768-315">ユーザーにログインし、適切なページにリダイレクトするので、RedirectFromLoginPage を利用してみましょう。</span><span class="sxs-lookup"><span data-stu-id="9f768-315">Since we want to log in the user and redirect them to the appropriate page, let's use RedirectFromLoginPage.</span></span> <span data-ttu-id="9f768-316">更新ログイン ボタンのクリック イベント ハンドラー、2 つのコメントが付けられた TODO 行を次のコード行に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="9f768-316">Update the LoginButton's Click event handler, replacing the two commented TODO lines with the following line of code:</span></span>

<span data-ttu-id="9f768-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span><span class="sxs-lookup"><span data-stu-id="9f768-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span></span>

<span data-ttu-id="9f768-318">フォーム認証チケットのユーザー名 テキスト ボックスのテキストのプロパティを使用して、フォーム認証チケットを作成するときに*username*パラメーター、および RememberMe チェックのチェック状態、 *persistCookie*パラメーター。</span><span class="sxs-lookup"><span data-stu-id="9f768-318">When creating the forms authentication ticket we use the UserName TextBox's Text property for the forms authentication ticket *username* parameter, and the checked state of the RememberMe CheckBox for the *persistCookie* parameter.</span></span>

<span data-ttu-id="9f768-319">ログイン ページをテストするには、ブラウザーで、参照してください。</span><span class="sxs-lookup"><span data-stu-id="9f768-319">To test the login page, visit it in a browser.</span></span> <span data-ttu-id="9f768-320">まず「いいえ」のユーザー名と「発生」のパスワードなどの無効な資格情報を入力します。</span><span class="sxs-lookup"><span data-stu-id="9f768-320">Start by entering invalid credentials, such as a username of "Nope" and a password of "wrong".</span></span> <span data-ttu-id="9f768-321">[ログイン] ボタンをクリックするとポストバックが発生し、InvalidCredentialsMessage ラベルが表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-321">Upon clicking the Login button a postback will occur and the InvalidCredentialsMessage Label will be displayed.</span></span>


<span data-ttu-id="9f768-322">[![InvalidCredentialsMessage ラベルが表示されるときに入力する資格情報が無効](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-322">[![The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span></span>

<span data-ttu-id="9f768-323">**図 10**:「InvalidCredentialsMessage ラベルが表示されるときに入力する資格情報が無効 ([フルサイズ イメージを表示するに、をクリックして](an-overview-of-forms-authentication-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-323">**Figure 10**: The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image26.png))</span></span>


<span data-ttu-id="9f768-324">次に、有効な資格情報を入力し、[ログイン] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="9f768-324">Next, enter valid credentials and click the Login button.</span></span> <span data-ttu-id="9f768-325">ポストバックのフォーム認証チケットが発生すると、この時間が作成され、Default.aspx に自動的にリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="9f768-325">This time when the postback occurs a forms authentication ticket is created and you are automatically redirected back to Default.aspx.</span></span> <span data-ttu-id="9f768-326">この時点でにログインが、web サイト現在ログオン中を示すために視覚的な手掛かりはありません。</span><span class="sxs-lookup"><span data-stu-id="9f768-326">At this point you have logged in to the website, although there are no visual cues to indicate that you are currently logged in.</span></span> <span data-ttu-id="9f768-327">プログラムによって、ユーザーかどうかを確認する方法がわかりますが、手順 4. でまたはないだけでなく、ページにアクセスしたユーザーを識別する方法が記録されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-327">In Step 4 we will see how to programmatically determine whether a user is logged in or not as well as how to identify the user visiting the page.</span></span>

<span data-ttu-id="9f768-328">手順 5 では、web サイトからユーザーをログインするための手法を調べます。</span><span class="sxs-lookup"><span data-stu-id="9f768-328">Step 5 examines techniques for logging a user out of the website.</span></span>

### <a name="securing-the-login-page"></a><span data-ttu-id="9f768-329">ログイン ページのセキュリティ保護</span><span class="sxs-lookup"><span data-stu-id="9f768-329">Securing the Login Page</span></span>

<span data-ttu-id="9f768-330">Web サーバーにインターネット経由で自分のパスワードを含む資格情報が転送されるときに、ユーザーは自分の資格情報を入力し、ログイン ページのフォームを送信する、*プレーン テキスト*です。</span><span class="sxs-lookup"><span data-stu-id="9f768-330">When the user enters her credentials and submits the login page form, the credentials – including her password – are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="9f768-331">つまり、ハッカーによるネットワーク トラフィックを調べるには、ユーザー名とパスワードを確認できます。</span><span class="sxs-lookup"><span data-stu-id="9f768-331">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="9f768-332">これを回避するのにを使用して、ネットワーク トラフィックを暗号化するために不可欠[セキュリティで保護されたソケット レイヤー (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-332">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="9f768-333">これにより、web サーバーによって受信されるまでは、ブラウザーを離脱時から資格情報 (だけでなく、全体のページの HTML マークアップ) が暗号化されています。</span><span class="sxs-lookup"><span data-stu-id="9f768-333">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>

<span data-ttu-id="9f768-334">Web サイトに機密情報が含まれている場合を除き、ここで、ユーザーのパスワードはそれ以外の場合、送信されますプレーン テキストでネットワーク経由でのログイン ページで、他のページで SSL を使用する必要はだけです。</span><span class="sxs-lookup"><span data-stu-id="9f768-334">Unless your website contains sensitive information, you will only need to use SSL on the login page and on other pages where the user's password would otherwise be sent over the wire in plain text.</span></span> <span data-ttu-id="9f768-335">以降、既定では、これは両方暗号化およびデジタル署名 (改ざんを防ぐため)、フォーム認証チケットのセキュリティ保護について心配する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="9f768-335">You do not need to worry about securing the forms authentication ticket since, by default, it is both encrypted and digitally signed (to prevent tampering).</span></span> <span data-ttu-id="9f768-336">フォーム認証チケットのセキュリティの詳細については、以下のチュートリアルに表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-336">A more thorough discussion on forms authentication ticket security is presented in the following tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="9f768-337">SSL を使用する財務や医療の多くの web サイトが構成されている*すべて*ページにアクセスできるユーザーを認証します。</span><span class="sxs-lookup"><span data-stu-id="9f768-337">Many financial and medical websites are configured to use SSL on *all* pages accessible to authenticated users.</span></span> <span data-ttu-id="9f768-338">このような web サイトを構築する場合は、フォーム認証チケットがセキュリティで保護された接続を介して転送のみをフォーム認証システムを構成できます。</span><span class="sxs-lookup"><span data-stu-id="9f768-338">If you are building such a website you can configure the forms authentication system so that the forms authentication ticket is only transmitted over a secure connection.</span></span> <span data-ttu-id="9f768-339">次のチュートリアルでは、さまざまなフォーム認証の構成オプションで注目は*[フォーム認証の構成と高度なトピック](forms-authentication-configuration-and-advanced-topics-cs.md)*です。</span><span class="sxs-lookup"><span data-stu-id="9f768-339">We will look at the various forms authentication configuration options in the next tutorial, *[Forms Authentication Configuration and Advanced Topics](forms-authentication-configuration-and-advanced-topics-cs.md)*.</span></span>


## <a name="step-4-detecting-authenticated-visitors-and-determining-their-identity"></a><span data-ttu-id="9f768-340">手順 4: 認証されたユーザーを検出して、自身の Id を決定します。</span><span class="sxs-lookup"><span data-stu-id="9f768-340">Step 4: Detecting Authenticated Visitors and Determining Their Identity</span></span>

<span data-ttu-id="9f768-341">この時点で、フォーム認証を有効になり、基本的なログイン ページを作成おが、おまだおできますを特定する方法、ユーザーが認証済みまたは匿名かどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="9f768-341">At this point we have enabled forms authentication and created a rudimentary login page, but we have yet to examine how we can determine whether a user is authenticated or anonymous.</span></span> <span data-ttu-id="9f768-342">特定のシナリオでは、さまざまなデータや、認証済みまたは匿名ユーザーがページにアクセスしているかどうかに応じて、情報を表示お必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-342">In certain scenarios we may wish to display different data or information depending on whether an authenticated or anonymous user is visiting the page.</span></span> <span data-ttu-id="9f768-343">さらに、いわゆるいただくために、認証されたユーザーの id を把握します。</span><span class="sxs-lookup"><span data-stu-id="9f768-343">Moreover, we oftentimes need to know the identity of the authenticated user.</span></span>

<span data-ttu-id="9f768-344">これらの手法を説明するために既存の Default.aspx ページを拡張してみましょう。</span><span class="sxs-lookup"><span data-stu-id="9f768-344">Let's augment the existing Default.aspx page to illustrate these techniques.</span></span> <span data-ttu-id="9f768-345">Default.aspx で、1 つの名前付き AuthenticatedMessagePanel と別の名前付き AnonymousMessagePanel の 2 つのパネル コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-345">In Default.aspx add two Panel controls, one named AuthenticatedMessagePanel and another named AnonymousMessagePanel.</span></span> <span data-ttu-id="9f768-346">最初のパネルで WelcomeBackMessage をという名前のラベル コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-346">Add a Label control named WelcomeBackMessage in the first Panel.</span></span> <span data-ttu-id="9f768-347">2 番目のパネルのハイパーリンク コントロールを追加、ログ内に""にそのテキスト プロパティとその NavigateUrl プロパティを設定"~/Login.aspx"です。</span><span class="sxs-lookup"><span data-stu-id="9f768-347">In the second Panel add a HyperLink control, set its Text property to "Log In" and its NavigateUrl property to "~/Login.aspx".</span></span> <span data-ttu-id="9f768-348">この時点で Default.aspx の宣言型マークアップは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="9f768-348">At this point the declarative markup for Default.aspx should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample6.aspx)]

<span data-ttu-id="9f768-349">ここまでで推察が、認証された利用者と匿名の訪問者を AnonymousMessagePanel だけに AuthenticatedMessagePanel だけを表示するという考え方です。</span><span class="sxs-lookup"><span data-stu-id="9f768-349">As you have probably guessed by now, the idea here is to display just the AuthenticatedMessagePanel to authenticated visitors and just the AnonymousMessagePanel to anonymous visitors.</span></span> <span data-ttu-id="9f768-350">これを実現するには、ユーザーがログインしているかどうかどうかに応じて、これらのパネルの表示プロパティを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-350">To accomplish this we need to set these Panels' Visible properties depending on whether the user is logged in or not.</span></span>

<span data-ttu-id="9f768-351">[Request.IsAuthenticated プロパティ](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx)要求が認証されているかどうかを示すブール値を返します。</span><span class="sxs-lookup"><span data-stu-id="9f768-351">The [Request.IsAuthenticated property](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx) returns a Boolean value indicating whether the request has been authenticated.</span></span> <span data-ttu-id="9f768-352">ページに次のコードを入力\_イベント ハンドラーのコードを読み込みます。</span><span class="sxs-lookup"><span data-stu-id="9f768-352">Enter the following code into the Page\_Load event handler code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample7.cs)]

<span data-ttu-id="9f768-353">配置でこのコードでは、ブラウザーを使って Default.aspx を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9f768-353">With this code in place, visit Default.aspx through a browser.</span></span> <span data-ttu-id="9f768-354">ログインがまだある、想定されるので、ログイン ページへのリンクが表示されます (図 11 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="9f768-354">Assuming that you have yet to log in, you will see a link to the login page (see Figure 11).</span></span> <span data-ttu-id="9f768-355">このリンクをクリックし、サイトにログインします。</span><span class="sxs-lookup"><span data-stu-id="9f768-355">Click this link and log in to the site.</span></span> <span data-ttu-id="9f768-356">手順 3 で説明したとおり、資格情報を入力した後にする返されますが、Default.aspx に、この時間、ページは、「ようこそ戻る!」を示しています。</span><span class="sxs-lookup"><span data-stu-id="9f768-356">As we saw in Step 3, after entering your credentials you will be returned to Default.aspx, but this time the page shows the "Welcome back!"</span></span> <span data-ttu-id="9f768-357">メッセージ (図 12 を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="9f768-357">message (see Figure 12).</span></span>


![オフィスを訪れた匿名で、ログのリンクが表示される場合](an-overview-of-forms-authentication-cs/_static/image27.png)

<span data-ttu-id="9f768-359">**図 11**: ときにオフィスを訪れた匿名で、ログのリンクが表示されます</span><span class="sxs-lookup"><span data-stu-id="9f768-359">**Figure 11**: When Visiting Anonymously, a Log In Link is Displayed</span></span>


![認証されたユーザーが示すように、](an-overview-of-forms-authentication-cs/_static/image28.png)

<span data-ttu-id="9f768-361">**図 12**: 認証されたユーザーは、「ようこそ背面!」で表示されます</span><span class="sxs-lookup"><span data-stu-id="9f768-361">**Figure 12**: Authenticated Users are Shown the "Welcome back!"</span></span> <span data-ttu-id="9f768-362">メッセージ</span><span class="sxs-lookup"><span data-stu-id="9f768-362">Message</span></span>


<span data-ttu-id="9f768-363">使用して、現在ログオンしているユーザーの id を決定できます、 [HttpContext オブジェクト](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)の[ユーザー プロパティ](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-363">We can determine the currently logged on user's identity via the [HttpContext object](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [User property](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx).</span></span> <span data-ttu-id="9f768-364">HttpContext オブジェクトは、現在の要求に関する情報を表し、他のユーザー間では、応答、要求、およびセッションとしてこのような一般的な ASP.NET オブジェクトのホームです。</span><span class="sxs-lookup"><span data-stu-id="9f768-364">The HttpContext object represents information about the current request, and is the home for such common ASP.NET objects as Response, Request, and Session, among others.</span></span> <span data-ttu-id="9f768-365">ユーザー定義プロパティは、現在の HTTP 要求と実装のセキュリティ コンテキストを表す、 [IPrincipal インターフェイス](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-365">The User property represents the security context of the current HTTP request and implements the [IPrincipal interface](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx).</span></span>

<span data-ttu-id="9f768-366">ユーザー定義プロパティは、FormsAuthenticationModule で設定されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-366">The User property is set by the FormsAuthenticationModule.</span></span> <span data-ttu-id="9f768-367">具体的には、FormsAuthenticationModule には、受信要求のフォーム認証チケットが検出されると、その新しい GenericPrincipal オブジェクトを作成し、ユーザーのプロパティに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="9f768-367">Specifically, when the FormsAuthenticationModule finds a forms authentication ticket in the incoming request, it creates a new GenericPrincipal object and assigns it to the User property.</span></span>

<span data-ttu-id="9f768-368">(GenericPrincipal) などのプリンシパルのオブジェクトは、ユーザーの id とが所属するロールに関する情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="9f768-368">Principal objects (like GenericPrincipal) provide information on the user's identity and the roles to which they belong.</span></span> <span data-ttu-id="9f768-369">IPrincipal インターフェイスでは、2 つのメンバーを定義します。</span><span class="sxs-lookup"><span data-stu-id="9f768-369">The IPrincipal interface defines two members:</span></span>

- <span data-ttu-id="9f768-370">[IsInRole (*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) – プリンシパルが、指定したロールに属しているかを示すブール値を返すメソッド。</span><span class="sxs-lookup"><span data-stu-id="9f768-370">[IsInRole(*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) – a method that returns a Boolean value indicating if the principal belongs to the specified role.</span></span>
- <span data-ttu-id="9f768-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) – を実装するオブジェクトを返すプロパティ、 [IIdentity インターフェイス](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) – a property that returns an object that implements the [IIdentity interface](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx).</span></span> <span data-ttu-id="9f768-372">IIdentity インターフェイス定義の 3 つのプロパティ: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx)、 [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx)、および[名前](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-372">The IIdentity interface defines three properties: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx), [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx), and [Name](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx).</span></span>

<span data-ttu-id="9f768-373">次のコードを使用して現在のユーザーの名前お判断できます。</span><span class="sxs-lookup"><span data-stu-id="9f768-373">We can determine the name of the current visitor using the following code:</span></span>

<span data-ttu-id="9f768-374">string currentUsersName = User.Identity.Name;</span><span class="sxs-lookup"><span data-stu-id="9f768-374">string currentUsersName = User.Identity.Name;</span></span>

<span data-ttu-id="9f768-375">フォーム認証の使用時に、 [FormsIdentity オブジェクト](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx)GenericPrincipal の Identity プロパティを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-375">When using forms authentication, a [FormsIdentity object](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx) is created for the GenericPrincipal's Identity property.</span></span> <span data-ttu-id="9f768-376">FormsIdentity クラス常に文字列を返します、"Forms"、AuthenticationType プロパティとその IsAuthenticated プロパティを true にします。</span><span class="sxs-lookup"><span data-stu-id="9f768-376">The FormsIdentity class always returns the string "Forms" for its AuthenticationType property and true for its IsAuthenticated property.</span></span> <span data-ttu-id="9f768-377">Name プロパティでは、フォーム認証チケットを作成するときに指定されたユーザー名を返します。</span><span class="sxs-lookup"><span data-stu-id="9f768-377">The Name property returns the username specified when creating the forms authentication ticket.</span></span> <span data-ttu-id="9f768-378">FormsIdentity にはだけでなく、これら 3 つのプロパティには、基になる認証チケットを使用してへのアクセスが含まれています、[プロパティのチケット](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-378">In addition to these three properties, FormsIdentity includes access to the underlying authentication ticket via its [Ticket property](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx).</span></span> <span data-ttu-id="9f768-379">Ticket プロパティが型のオブジェクトを返します[所属](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx)、これは有効期限、IsPersistent、IssueDate、名などのプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="9f768-379">The Ticket property returns an object of type [FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx), which has properties like Expiration, IsPersistent, IssueDate, Name, and so on.</span></span>

<span data-ttu-id="9f768-380">対処離れた設定されている重要な点、 *username* 、FormsAuthentication.GetAuthCookie で指定されたパラメーター (*username*、 *persistCookie*)、FormsAuthentication.SetAuthCookie (*username*、 *persistCookie*)、および FormsAuthentication.RedirectFromLoginPage (*username*、 *persistCookie*) メソッドが User.Identity.Name によって返されるのと同じ値です。</span><span class="sxs-lookup"><span data-stu-id="9f768-380">The important point to take away here is that the *username* parameter specified in the FormsAuthentication.GetAuthCookie(*username*, *persistCookie*), FormsAuthentication.SetAuthCookie(*username*, *persistCookie*), and FormsAuthentication.RedirectFromLoginPage(*username*, *persistCookie*) methods is the same value returned by User.Identity.Name.</span></span> <span data-ttu-id="9f768-381">さらに、これらのメソッドによって作成された認証チケットは//新しい一般プリンシパル オブジェクトにキャストする、FormsIdentity し Ticket プロパティにアクセスして使用します。</span><span class="sxs-lookup"><span data-stu-id="9f768-381">Moreover, the authentication ticket created by these methods is available by casting User.Identity to a FormsIdentity object and then accessing the Ticket property:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample8.cs)]

<span data-ttu-id="9f768-382">Default.aspx で個人用に設定された複数のメッセージを提供してみましょう。</span><span class="sxs-lookup"><span data-stu-id="9f768-382">Let's provide a more personalized message in Default.aspx.</span></span> <span data-ttu-id="9f768-383">ページを更新\_WelcomeBackMessage ラベルのテキスト プロパティには、文字列が割り当てられているように、イベント ハンドラーを読み込む"こそ*username*!"</span><span class="sxs-lookup"><span data-stu-id="9f768-383">Update the Page\_Load event handler so that the WelcomeBackMessage Label's Text property is assigned the string "Welcome back, *username*!"</span></span>

<span data-ttu-id="9f768-384">WelcomeBackMessage.Text = "Welcome back, " + User.Identity.Name + "!";</span><span class="sxs-lookup"><span data-stu-id="9f768-384">WelcomeBackMessage.Text = "Welcome back, " + User.Identity.Name + "!";</span></span>

<span data-ttu-id="9f768-385">図 13 は、(Scott のユーザーとしてログイン) の場合、この変更の効果を示しています。</span><span class="sxs-lookup"><span data-stu-id="9f768-385">Figure 13 shows the effect of this modification (when logging in as user Scott).</span></span>


![ウェルカム メッセージが含まれています、現在ログオンしているユーザーの名前で](an-overview-of-forms-authentication-cs/_static/image29.png)

<span data-ttu-id="9f768-387">**図 13**: ウェルカム メッセージが含まれています、現在ログオンしているユーザーの名前で</span><span class="sxs-lookup"><span data-stu-id="9f768-387">**Figure 13**: The Welcome Message Includes the Currently Logged In User's Name</span></span>


### <a name="using-the-loginview-and-loginname-controls"></a><span data-ttu-id="9f768-388">LoginView および LoginName コントロールの使用</span><span class="sxs-lookup"><span data-stu-id="9f768-388">Using the LoginView and LoginName Controls</span></span>

<span data-ttu-id="9f768-389">一般的な要件は、認証および匿名ユーザーに異なるコンテンツを表示します。そのため、現在ログオンしているユーザーの名前を表示されています。</span><span class="sxs-lookup"><span data-stu-id="9f768-389">Displaying different content to authenticated and anonymous users is a common requirement; so is displaying the name of the currently logged on user.</span></span> <span data-ttu-id="9f768-390">そのため、ASP.NET には、1 行のコードを記述する必要はありませんが、図 13 に示すように同じ機能を提供する 2 つの Web コントロールが含まれます。</span><span class="sxs-lookup"><span data-stu-id="9f768-390">For that reason, ASP.NET includes two Web controls that provide the same functionality shown in Figure 13, but without the need to write a single line of code.</span></span>

<span data-ttu-id="9f768-391">[LoginView コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx)テンプレートに基づく Web コントロールを容易に認証および匿名ユーザーに別のデータを表示するものです。</span><span class="sxs-lookup"><span data-stu-id="9f768-391">The [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) is a template-based Web control that makes it easy to display different data to authenticated and anonymous users.</span></span> <span data-ttu-id="9f768-392">LoginView には、2 つの定義済みテンプレートが含まれています。</span><span class="sxs-lookup"><span data-stu-id="9f768-392">The LoginView includes two predefined templates:</span></span>

- <span data-ttu-id="9f768-393">AnonymousTemplate – このテンプレートに追加されたすべてのマークアップは匿名ユーザーにのみ表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-393">AnonymousTemplate – any markup added to this template is only displayed to anonymous visitors.</span></span>
- <span data-ttu-id="9f768-394">LoggedInTemplate – このテンプレートのマークアップが認証されたユーザーにのみ表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-394">LoggedInTemplate – this template's markup is shown only to authenticated users.</span></span>

<span data-ttu-id="9f768-395">サイトのマスター ページ、Site.master LoginView コントロールを追加してみましょう。</span><span class="sxs-lookup"><span data-stu-id="9f768-395">Let's add the LoginView control to our site's master page, Site.master.</span></span> <span data-ttu-id="9f768-396">LoginView コントロールだけを追加するではなく両方新しい ContentPlaceHolder コントロールを追加してみましょう。 ただし、し、その新しい ContentPlaceHolder 内にある LoginView コントロールを配置します。</span><span class="sxs-lookup"><span data-stu-id="9f768-396">Rather than adding just the LoginView control, though, let's add both a new ContentPlaceHolder control and then put the LoginView control within that new ContentPlaceHolder.</span></span> <span data-ttu-id="9f768-397">この判断に論理的根拠は、間もなく明白になります。</span><span class="sxs-lookup"><span data-stu-id="9f768-397">The rationale for this decision will become apparent shortly.</span></span>

> [!NOTE]
> <span data-ttu-id="9f768-398">LoginView コントロールは、AnonymousTemplate と LoggedInTemplate だけでなく、ロール固有のテンプレートを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="9f768-398">In addition to the AnonymousTemplate and LoggedInTemplate, the LoginView control can include role-specific templates.</span></span> <span data-ttu-id="9f768-399">ロール固有のテンプレートは、指定されたロールに属しているユーザーにのみ、マークアップを表示します。</span><span class="sxs-lookup"><span data-stu-id="9f768-399">Role-specific templates show markup only to those users that belong to a specified role.</span></span> <span data-ttu-id="9f768-400">今後のチュートリアルで LoginView コントロールの役割に基づいた機能を見ていきます。</span><span class="sxs-lookup"><span data-stu-id="9f768-400">We will examine the role-based features of the LoginView control in a future tutorial.</span></span>


<span data-ttu-id="9f768-401">ナビゲーション内で、マスター ページに LoginContent を名前付きプレース ホルダーを追加することによって開始&lt;div&gt;要素。</span><span class="sxs-lookup"><span data-stu-id="9f768-401">Start by adding a ContentPlaceHolder named LoginContent into the master page within the navigation &lt;div&gt; element.</span></span> <span data-ttu-id="9f768-402">ツールボックスから、ソース ビューでは、結果として得られるマークアップを配置する ContentPlaceHolder コントロールをドラッグするだけのすぐ上、"TODO: メニューがここに挿入しています..."</span><span class="sxs-lookup"><span data-stu-id="9f768-402">You can simply drag a ContentPlaceHolder control from the Toolbox onto the Source view, placing the resulting markup right above the "TODO: Menu will go here…"</span></span> <span data-ttu-id="9f768-403">text.</span><span class="sxs-lookup"><span data-stu-id="9f768-403">text.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample9.aspx)]

<span data-ttu-id="9f768-404">次に、LoginContent ContentPlaceHolder 内 LoginView コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-404">Next, add a LoginView control within the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="9f768-405">マスター ページの ContentPlaceHolder のコントロールに配置しているコンテンツと見なされます*既定のコンテンツ*ContentPlaceHolder のです。</span><span class="sxs-lookup"><span data-stu-id="9f768-405">Content placed into the master page's ContentPlaceHolder controls are considered *default content* for the ContentPlaceHolder.</span></span> <span data-ttu-id="9f768-406">つまり、このマスター ページを使用する ASP.NET ページは各 ContentPlaceHolder を各自のコンテンツを指定するか、マスター ページの既定のコンテンツを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="9f768-406">That is, ASP.NET pages that use this master page can specify their own content for each ContentPlaceHolder or use the master page's default content.</span></span>

<span data-ttu-id="9f768-407">LoginView、およびその他のログインに関連するコントロールはツールボックスの [ログイン] タブにあります。</span><span class="sxs-lookup"><span data-stu-id="9f768-407">The LoginView and other login-related controls are located in the Toolbox's Login tab.</span></span>


![LoginView コントロールがツールボックスで](an-overview-of-forms-authentication-cs/_static/image30.png)

<span data-ttu-id="9f768-409">**図 14**: ツールボックスに LoginView コントロール</span><span class="sxs-lookup"><span data-stu-id="9f768-409">**Figure 14**: The LoginView Control in the Toolbox</span></span>


<span data-ttu-id="9f768-410">次に、2 つ追加&lt;ブラジル/&gt; LoginView コントロールの直後後、ただしもまだ、ContentPlaceHolder 内にある要素。</span><span class="sxs-lookup"><span data-stu-id="9f768-410">Next, add two &lt;br /&gt; elements immediately after the LoginView control, but still within the ContentPlaceHolder.</span></span> <span data-ttu-id="9f768-411">この時点では、ナビゲーション&lt;div&gt;要素のマークアップは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="9f768-411">At this point, the navigation &lt;div&gt; element's markup should look like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample10.aspx)]

<span data-ttu-id="9f768-412">デザイナーまたは宣言型マークアップから LoginView のテンプレートを定義することができます。</span><span class="sxs-lookup"><span data-stu-id="9f768-412">The LoginView's templates can be defined from the Designer or the declarative markup.</span></span> <span data-ttu-id="9f768-413">Visual Studio のデザイナーからは、ドロップダウン リストで構成されているテンプレートの一覧を表示する LoginView のスマート タグを展開します。</span><span class="sxs-lookup"><span data-stu-id="9f768-413">From Visual Studio's Designer, expand the LoginView's smart tag, which lists the configured templates in a drop-down list.</span></span> <span data-ttu-id="9f768-414">型のテキストに「こんにちは, よそ者」AnonymousTemplate; に次に、ハイパーリンク コントロールを追加し、「ログに」プロパティのテキストと NavigateUrl プロパティを設定し、"~/Login.aspx"、それぞれします。</span><span class="sxs-lookup"><span data-stu-id="9f768-414">Type in the text "Hello, stranger" into the AnonymousTemplate; next, add a HyperLink control and set its Text and NavigateUrl properties to "Log In" and "~/Login.aspx", respectively.</span></span>

<span data-ttu-id="9f768-415">AnonymousTemplate を構成した後、LoggedInTemplate に切り替えるし、テキスト、「ようこそ戻る」を入力します。</span><span class="sxs-lookup"><span data-stu-id="9f768-415">After configuring the AnonymousTemplate, switch to the LoggedInTemplate and enter the text, "Welcome back, ".</span></span> <span data-ttu-id="9f768-416">LoginName コントロールをツールボックスから「の開始 元に戻す」テキストの直後に配置すること、LoggedInTemplate をドラッグします。</span><span class="sxs-lookup"><span data-stu-id="9f768-416">Then drag a LoginName control from the Toolbox into the LoggedInTemplate, placing it immediately after the "Welcome back, " text.</span></span> <span data-ttu-id="9f768-417">[LoginName コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx)、名前として意味、現在ログインしているユーザーの名前を表示します。</span><span class="sxs-lookup"><span data-stu-id="9f768-417">The [LoginName control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx), as its name implies, displays the name of the currently logged in user.</span></span> <span data-ttu-id="9f768-418">内部的には、ログイン名コントロールだけでは出力 User.Identity.Name プロパティ</span><span class="sxs-lookup"><span data-stu-id="9f768-418">Internally, the LoginName control simply outputs the User.Identity.Name property</span></span>

<span data-ttu-id="9f768-419">LoginView のテンプレートへの追加を行った後、マークアップを次のようになります。</span><span class="sxs-lookup"><span data-stu-id="9f768-419">After making these additions to the LoginView's templates, the markup should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample11.aspx)]

<span data-ttu-id="9f768-420">Site.master マスター ページにこの追加当社の web サイト内の各ページに、ユーザーが認証されるかどうかに応じて異なるメッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-420">With this addition to the Site.master master page, each page in our website will display a different message depending on whether the user is authenticated.</span></span> <span data-ttu-id="9f768-421">図 15 は、ユーザー Jisun ブラウザーからアクセスしたときに、Default.aspx ページを示しています。</span><span class="sxs-lookup"><span data-stu-id="9f768-421">Figure 15 shows the Default.aspx page when visited through a browser by user Jisun.</span></span> <span data-ttu-id="9f768-422">「、お帰り Jisun」メッセージが 2 回繰り返されます。 コンテンツ (パネル コントロールとプログラム ロジック) 経由で領域 (経由で追加したばかり LoginView コントロール) の左側に、マスター ページのナビゲーション セクションに 2 回、Default.aspx の中に 2 回です。</span><span class="sxs-lookup"><span data-stu-id="9f768-422">The "Welcome back, Jisun" message is repeated twice: once in the master page's navigation section on the left (via the LoginView control we just added) and once in the Default.aspx's content area (via Panel controls and programmatic logic).</span></span>


![LoginView コントロールが表示されます。](an-overview-of-forms-authentication-cs/_static/image31.png)

<span data-ttu-id="9f768-424">**図 15**:「LoginView コントロールが表示されます「、お帰り Jisun」。</span><span class="sxs-lookup"><span data-stu-id="9f768-424">**Figure 15**: The LoginView Control Displays "Welcome back, Jisun."</span></span>


<span data-ttu-id="9f768-425">マスター ページに、LoginView を追加したのでは、すべてのページについては、サイトに表示できます。</span><span class="sxs-lookup"><span data-stu-id="9f768-425">Because we added the LoginView to the master page, it can appear in every page on our site.</span></span> <span data-ttu-id="9f768-426">ただし、ある可能性があります web ページをしたくありませんこのメッセージを表示します。</span><span class="sxs-lookup"><span data-stu-id="9f768-426">However, there may be web pages where we don't want to show this message.</span></span> <span data-ttu-id="9f768-427">このような 1 つのページは、ログイン ページ、ログイン ページへのリンクがある場所ように見えるためです。</span><span class="sxs-lookup"><span data-stu-id="9f768-427">One such page is the login page, since a link to the login page seems out of place there.</span></span> <span data-ttu-id="9f768-428">マスター ページ プレース ホルダーに LoginView コントロールを配置してから、コンテンツ ページでこの既定のマークアップをオーバーライドおできます。</span><span class="sxs-lookup"><span data-stu-id="9f768-428">Since we placed the LoginView control in a ContentPlaceHolder in the master page, we can override this default markup in our content page.</span></span> <span data-ttu-id="9f768-429">Login.aspx を開き、デザイナーに移動します。</span><span class="sxs-lookup"><span data-stu-id="9f768-429">Open Login.aspx and go to the Designer.</span></span> <span data-ttu-id="9f768-430">コンテンツ コントロールを明示的に定義されてはいないためマスター ページで LoginContent ContentPlaceHolder の Login.aspx でログイン ページは、この ContentPlaceHolder のマスター ページの既定のマークアップが表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-430">Since we have not explicitly defined a Content control in Login.aspx for the LoginContent ContentPlaceHolder in the master page, the login page will show the master page's default markup for this ContentPlaceHolder.</span></span> <span data-ttu-id="9f768-431">を介して表示できるこのデザイナー – LoginContent ContentPlaceHolder は、既定のマークアップ (LoginView コントロール) を示しています。</span><span class="sxs-lookup"><span data-stu-id="9f768-431">You can see this through the Designer – the LoginContent ContentPlaceHolder shows the default markup (the LoginView control).</span></span>


<span data-ttu-id="9f768-432">[![マスター ページの LoginContent ContentPlaceHolder のログイン ページがコンテンツにある既定値を表示します。](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-432">[![The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span></span>

<span data-ttu-id="9f768-433">**図 16**: マスター ページの LoginContent ContentPlaceHolder のコンテンツの既定のログイン ページに表示 ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-433">**Figure 16**: The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image34.png))</span></span>


<span data-ttu-id="9f768-434">LoginContent ContentPlaceHolder の既定のマークアップをオーバーライドするには、デザイナー内の領域でを右クリックし、コンテキスト メニューからカスタム コンテンツの作成オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="9f768-434">To override the default markup for the LoginContent ContentPlaceHolder, simply right-click on the region in the Designer and choose the Create Custom Content option from the context menu.</span></span> <span data-ttu-id="9f768-435">(Visual Studio 2008、ContentPlaceHolder の使用が含まれる場合、スマート タグを選択した場合、同じオプションを提供します)。新しいコンテンツ コントロールをページのマークアップとそれによって追加のカスタム コンテンツをこのページを定義することができます。</span><span class="sxs-lookup"><span data-stu-id="9f768-435">(When using Visual Studio 2008 the ContentPlaceHolder includes a smart tag that, when selected, offers the same option.) This adds a new Content control to the page's markup and thereby allows us to define custom content for this page.</span></span> <span data-ttu-id="9f768-436">など、「ログインしてください」、ここでは、カスタム メッセージを追加することも、ここだけ空白のままにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="9f768-436">You could add a custom message here, such as "Please log in…", but let's just leave this blank.</span></span>

> [!NOTE]
> <span data-ttu-id="9f768-437">Visual Studio 2005 で、カスタム コンテンツを作成する、空、ASP.NET ページ内のコントロールのコンテンツします。</span><span class="sxs-lookup"><span data-stu-id="9f768-437">In Visual Studio 2005, creating custom content creates an empty Content control in the ASP.NET page.</span></span> <span data-ttu-id="9f768-438">Visual Studio 2008 でただし、カスタム コンテンツを作成するコピー マスター ページの既定のコンテンツを新しく作成されたコンテンツ コントロールにします。</span><span class="sxs-lookup"><span data-stu-id="9f768-438">In Visual Studio 2008, however, creating custom content copies the master page's default content into the newly created Content control.</span></span> <span data-ttu-id="9f768-439">Visual Studio 2008 を使用している場合、新しいコンテンツ コントロールを作成した後を確認してください、マスター ページから経由でコピーされた内容をクリアするには</span><span class="sxs-lookup"><span data-stu-id="9f768-439">If you are using Visual Studio 2008, then, after creating the new Content control make sure to clear out the content copied over from the master page.</span></span>


<span data-ttu-id="9f768-440">図 17 では、この変更を行った後、ブラウザーからアクセスしたときの Login.aspx ページを示します。</span><span class="sxs-lookup"><span data-stu-id="9f768-440">Figure 17 shows the Login.aspx page when visited from a browser after making this change.</span></span> <span data-ttu-id="9f768-441">なし「こんにちは, よそ者」はまたは"こそ*username*"左側のナビゲーションでメッセージ&lt;div&gt; Default.aspx にアクセスする場合は、します。</span><span class="sxs-lookup"><span data-stu-id="9f768-441">Note that there is no "Hello, stranger" or "Welcome back, *username*" message in the left navigation &lt;div&gt; as there is when visiting Default.aspx.</span></span>


<span data-ttu-id="9f768-442">[![ログイン ページには、既定 LoginContent ContentPlaceHolder のマークアップが非表示になります](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-442">[![The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span></span>

<span data-ttu-id="9f768-443">**図 17**: ログイン ページには、既定の LoginContent ContentPlaceHolder のマークアップが非表示になります ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-443">**Figure 17**: The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image37.png))</span></span>


## <a name="step-5-logging-out"></a><span data-ttu-id="9f768-444">手順 5: ログアウトしています</span><span class="sxs-lookup"><span data-stu-id="9f768-444">Step 5: Logging Out</span></span>

<span data-ttu-id="9f768-445">手順 3 でについて説明しました、サイトへのユーザーのログインのログイン ページの作成、おまだユーザーがログアウトする方法を参照してください。内のユーザーがログインするためのメソッドに加えて、FormsAuthentication クラスも用意されています、 [SignOut メソッド](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-445">In Step 3 we looked at building a login page to log a user in to the site, but we have yet to see how to log a user out. In addition to methods for logging a user in, the FormsAuthentication class also provides a [SignOut method](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx).</span></span> <span data-ttu-id="9f768-446">SignOut メソッドには、フォーム認証チケットは、これにより、サイト外のユーザーのログ記録だけを破棄します。</span><span class="sxs-lookup"><span data-stu-id="9f768-446">The SignOut method simply destroys the forms authentication ticket, thereby logging the user out of the site.</span></span>

<span data-ttu-id="9f768-447">ログアウト リンクは、このような一般的な機能を提供するその ASP.NET には、ユーザーがログアウトに特化したコントロールが含まれています。[ログイン状態コントロール](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx)"Login"LinkButton またはユーザーの認証の状態に基づき、「ログアウト」LinkButton のいずれかが表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-447">Offering a log out link is such a common feature that ASP.NET includes a control specifically designed to log a user out. The [LoginStatus control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx) displays either a "Login" LinkButton or a "Logout" LinkButton, depending on the user's authentication status.</span></span> <span data-ttu-id="9f768-448">「ログアウト」LinkButton が認証されたユーザーに表示されますが、匿名ユーザーは、"Login"LinkButton が表示されます。</span><span class="sxs-lookup"><span data-stu-id="9f768-448">A "Login" LinkButton is rendered for anonymous users, whereas a "Logout" LinkButton is displayed to authenticated users.</span></span> <span data-ttu-id="9f768-449">ログイン状態のを通して"Login"および「ログアウト」あるテキストを設定できる LoginText および LogoutText プロパティです。</span><span class="sxs-lookup"><span data-stu-id="9f768-449">The text for the "Login" and "Logout" LinkButtons can be configured via the LoginStatus's LoginText and LogoutText properties.</span></span>

<span data-ttu-id="9f768-450">「ログイン」LinkButton がクリックすると、ログイン ページにリダイレクトが発行元となる、ポストバックが発生します。</span><span class="sxs-lookup"><span data-stu-id="9f768-450">Clicking the "Login" LinkButton causes a postback, from which a redirect is issued to the login page.</span></span> <span data-ttu-id="9f768-451">「ログアウト」LinkButton をクリックし、FormsAuthentication.SignOff メソッドを呼び出すため、ログイン状態コントロール、ページに、ユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="9f768-451">Clicking the "Logout" LinkButton causes the LoginStatus control to invoke the FormsAuthentication.SignOff method and then redirects the user to a page.</span></span> <span data-ttu-id="9f768-452">ログオンしているページは LogoutAction プロパティは、次の 3 つの値のいずれかに割り当てることができますに依存する無効なユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="9f768-452">The page the logged off user is redirected to depends on the LogoutAction property, which can be assigned to one of the three following values:</span></span>

- <span data-ttu-id="9f768-453">更新-既定値です。訪問しただけのページに、ユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="9f768-453">Refresh – the default; redirects the user to the page they were just visiting.</span></span> <span data-ttu-id="9f768-454">訪問しただけのページが、FormsAuthenticationModule が自動的には、匿名ユーザーは、許可しない場合は、ログイン ページに、ユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="9f768-454">If the page they were just visiting does not allow anonymous users, then the FormsAuthenticationModule will automatically redirect the user to the login page.</span></span>

<span data-ttu-id="9f768-455">ここで、リダイレクトが実行される理由について調べる必要があります。</span><span class="sxs-lookup"><span data-stu-id="9f768-455">You may be curious as to why a redirect is performed here.</span></span> <span data-ttu-id="9f768-456">場合は、ユーザーが、同じページ上に残る理由の明示的なリダイレクトに必要ですか?</span><span class="sxs-lookup"><span data-stu-id="9f768-456">If the user wants to remain on the same page, why the need for the explicit redirect?</span></span> <span data-ttu-id="9f768-457">「ログオフ」LinkButton がクリックされたときに、ユーザーがあるフォーム認証チケットのクッキー コレクションのためです。</span><span class="sxs-lookup"><span data-stu-id="9f768-457">The reason is because when the "Logoff" LinkButton is clicked, the user still has the forms authentication ticket in their cookies collection.</span></span> <span data-ttu-id="9f768-458">そのため、認証された要求のポストバック要求です。</span><span class="sxs-lookup"><span data-stu-id="9f768-458">Consequently, the postback request is an authenticated request.</span></span> <span data-ttu-id="9f768-459">ログイン状態コントロールが SignOut メソッドを呼び出しています。 しかし、FormsAuthenticationModule がユーザーを認証した後の動作をします。</span><span class="sxs-lookup"><span data-stu-id="9f768-459">The LoginStatus control calls the SignOut method, but that happens after the FormsAuthenticationModule has authenticated the user.</span></span> <span data-ttu-id="9f768-460">そのため、明示的なリダイレクトは、ページを再要求するブラウザーをによりします。</span><span class="sxs-lookup"><span data-stu-id="9f768-460">Therefore, an explicit redirect causes the browser to re-request the page.</span></span> <span data-ttu-id="9f768-461">ブラウザー ページを再要求するまでに、フォーム認証チケットが削除され、そのため、受信要求は匿名です。</span><span class="sxs-lookup"><span data-stu-id="9f768-461">By the time the browser re-requests the page, the forms authentication ticket has been removed and therefore the incoming request is anonymous.</span></span>

- <span data-ttu-id="9f768-462">リダイレクト – ユーザーは、ログイン状態の LogoutPageUrl プロパティで指定された URL にリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="9f768-462">Redirect – the user is redirected to the URL specified by the LoginStatus's LogoutPageUrl property.</span></span>
- <span data-ttu-id="9f768-463">RedirectToLoginPage – ユーザーは、ログイン ページにリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="9f768-463">RedirectToLoginPage – the user is redirected to the login page.</span></span>

<span data-ttu-id="9f768-464">みましょうマスター ページにログイン状態コントロールを追加し署名したことを確認するメッセージを表示するページにユーザーに送信するリダイレクト オプションを使用するように構成します。まず Logout.aspx をという名前のルート ディレクトリでページを作成します。</span><span class="sxs-lookup"><span data-stu-id="9f768-464">Let's add a LoginStatus control to the master page and configure it to use the Redirect option to send the user to a page that displays a message confirming that they have been signed out. Start by creating a page in the root directory named Logout.aspx.</span></span> <span data-ttu-id="9f768-465">このページを関連付ける Site.master マスター ページを忘れないでください。</span><span class="sxs-lookup"><span data-stu-id="9f768-465">Don't forget to associate this page with the Site.master master page.</span></span> <span data-ttu-id="9f768-466">次に、出力が記録されたことをユーザーに説明するページのマークアップにメッセージを入力します。</span><span class="sxs-lookup"><span data-stu-id="9f768-466">Next, enter a message in the page's markup explaining to the user that they have been logged out.</span></span>

<span data-ttu-id="9f768-467">次に、Site.master マスター ページに戻り、LoginContent ContentPlaceHolder で、LoginView 下にあるログイン状態コントロールを追加します。</span><span class="sxs-lookup"><span data-stu-id="9f768-467">Next, return to the Site.master master page and add a LoginStatus control beneath the LoginView in the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="9f768-468">リダイレクトするログイン状態コントロールの LogoutAction プロパティとその LogoutPageUrl プロパティを設定"~/Logout.aspx"です。</span><span class="sxs-lookup"><span data-stu-id="9f768-468">Set the LoginStatus control's LogoutAction property to Redirect and its LogoutPageUrl property to "~/Logout.aspx".</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample12.aspx)]

<span data-ttu-id="9f768-469">LoginView コントロールできないところで、ログイン状態があるため、匿名と認証の両方のユーザーに表示されますが、[ok] ため、"Login"や「ログアウト」LinkButton、ログイン状態が正しく表示します。</span><span class="sxs-lookup"><span data-stu-id="9f768-469">Since the LoginStatus is outside of the LoginView control, it will appear for both anonymous and authenticated users, but that's OK because the LoginStatus will correctly display a "Login" or "Logout" LinkButton.</span></span> <span data-ttu-id="9f768-470">ログイン状態コントロールの追加により、AnonymousTemplate でハイパーリンク「ログに」は余分なので、これを削除します。</span><span class="sxs-lookup"><span data-stu-id="9f768-470">With the addition of the LoginStatus control, the "Log In" HyperLink in the AnonymousTemplate is superfluous, so remove it.</span></span>

<span data-ttu-id="9f768-471">図 18 Jisun を訪問したとき、Default.aspx を示しています。</span><span class="sxs-lookup"><span data-stu-id="9f768-471">Figure 18 shows Default.aspx when Jisun visits.</span></span> <span data-ttu-id="9f768-472">左の列が「、お帰り Jisun」ログアウトへのリンクと共に、メッセージを表示することに注意してください。ログアウト LinkButton をクリックするとポストバックを発生させるをシステムから Jisun を署名し、自分を Logout.aspx にリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="9f768-472">Note that the left column displays the message, "Welcome back, Jisun" along with a link to log out. Clicking the log out LinkButton causes a postback, signs Jisun out of the system, and then redirects her to Logout.aspx.</span></span> <span data-ttu-id="9f768-473">図 19 に示す Jisun Logout.aspx に達した時点で彼女署名済みおよび匿名であるためです。</span><span class="sxs-lookup"><span data-stu-id="9f768-473">As Figure 19 shows, by the time Jisun reaches Logout.aspx she has already been signed out and is therefore anonymous.</span></span> <span data-ttu-id="9f768-474">左側の列がテキストを表示するため、「ようこそよそ者」と、ログイン ページへのリンク。</span><span class="sxs-lookup"><span data-stu-id="9f768-474">Consequently, the left column shows the text "Welcome, stranger" and a link to the login page.</span></span>


<span data-ttu-id="9f768-475">[![Default.aspx Shows](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-475">[![Default.aspx Shows](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span></span>

<span data-ttu-id="9f768-476">**図 18**: Default.aspx を示しています「、お帰り Jisun」、「ログアウト」LinkButton と共に ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-476">**Figure 18**: Default.aspx Shows "Welcome Back, Jisun" Along with a "Logout" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image40.png))</span></span>


<span data-ttu-id="9f768-477">[![Logout.aspx Shows](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="9f768-477">[![Logout.aspx Shows](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span></span>

<span data-ttu-id="9f768-478">**図 19**: Logout.aspx を示しています「ようこそ、よそ者」、"Login"LinkButton と共に ([フルサイズのイメージを表示するをクリックして](an-overview-of-forms-authentication-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="9f768-478">**Figure 19**: Logout.aspx Shows "Welcome, stranger" Along with a "Login" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image43.png))</span></span>


> [!NOTE]
> <span data-ttu-id="9f768-479">I は、(同じように手順 4. で Login.aspx 用)、マスター ページの LoginContent ContentPlaceHolder を非表示にする Logout.aspx ページをカスタマイズすることを勧めします。</span><span class="sxs-lookup"><span data-stu-id="9f768-479">I encourage you to customize the Logout.aspx page to hide the master page's LoginContent ContentPlaceHolder (like we did for Login.aspx in Step 4).</span></span> <span data-ttu-id="9f768-480">"Login"LinkButton がログイン状態コントロールによって表示されるためです (1 の下に「こんにちは, よそ者」) ReturnUrl querystring パラメーターの現在の URL を渡してログイン ページに、ユーザーに送信します。</span><span class="sxs-lookup"><span data-stu-id="9f768-480">The reason is because the "Login" LinkButton rendered by the LoginStatus control (the one beneath "Hello, stranger") sends the user to the login page passing the current URL in the ReturnUrl querystring parameter.</span></span> <span data-ttu-id="9f768-481">つまりがログアウトしたユーザーには、このログイン状態の"Login"LinkButton とし、ログがクリックするは、Logout.aspx で、簡単にユーザーが混乱する可能性がありますに、リダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="9f768-481">In short, if a user who has logged out clicks this LoginStatus's "Login" LinkButton, and then logs in, they will be redirected back to Logout.aspx, which could easily confuse the user.</span></span>


## <a name="summary"></a><span data-ttu-id="9f768-482">まとめ</span><span class="sxs-lookup"><span data-stu-id="9f768-482">Summary</span></span>

<span data-ttu-id="9f768-483">このチュートリアルでは、フォーム認証ワークフローの検証の使用を開始をし、ASP.NET アプリケーションでフォーム認証を実装するためになっています。</span><span class="sxs-lookup"><span data-stu-id="9f768-483">In this tutorial we started with an examination of the forms authentication workflow and then turned to implementing forms authentication in an ASP.NET application.</span></span> <span data-ttu-id="9f768-484">フォーム認証の 2 つの役割を持つ、FormsAuthenticationModule で電源が入って: フォーム認証チケットに基づくユーザーを識別し、承認されていないユーザーをログイン ページにリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="9f768-484">Forms authentication is powered by the FormsAuthenticationModule, which has two responsibilities: identifying users based on their forms authentication ticket, and redirecting unauthorized users to the login page.</span></span>

<span data-ttu-id="9f768-485">.NET Framework の FormsAuthentication クラスには、作成、検査、およびフォーム認証チケットを削除するためのメソッドが含まれています。</span><span class="sxs-lookup"><span data-stu-id="9f768-485">The .NET Framework's FormsAuthentication class includes methods for creating, inspecting, and removing forms authentication tickets.</span></span> <span data-ttu-id="9f768-486">Request.IsAuthenticated プロパティとユーザー オブジェクトを要求が認証されたかどうかと、ユーザーの身元に関する情報を決定するその他のプログラムによるサポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="9f768-486">The Request.IsAuthenticated property and User object provide additional programmatic support for determining whether a request is authenticated and information about the user's identity.</span></span> <span data-ttu-id="9f768-487">ログインに関連する多くの一般的なタスクを実行するため、コードのない方法を開発者に提供 LoginView、ログイン状態、および LoginName Web コントロールがあります。</span><span class="sxs-lookup"><span data-stu-id="9f768-487">There are also the LoginView, LoginStatus, and LoginName Web controls, which give developers a quick, code-free way for performing many common login-related tasks.</span></span> <span data-ttu-id="9f768-488">今後のチュートリアルでは、これらおよび他のログインに関連する Web コントロールで詳しくを考察はします。</span><span class="sxs-lookup"><span data-stu-id="9f768-488">We will examine these and other login-related Web controls in greater detail in future tutorials.</span></span>

<span data-ttu-id="9f768-489">このチュートリアルでは、フォーム認証の大まかな概要を提供します。</span><span class="sxs-lookup"><span data-stu-id="9f768-489">This tutorial provided a cursory overview of forms authentication.</span></span> <span data-ttu-id="9f768-490">おまたはしていないさまざまな構成オプションを調べ、どの cookie なしフォーム認証チケットの動作を見て ASP.NET がフォーム認証チケットの内容を保護する方法を調査します。</span><span class="sxs-lookup"><span data-stu-id="9f768-490">We did not examine the assorted configuration options, look at how cookieless forms authentication tickets work, or explore how ASP.NET protects the contents of the forms authentication ticket.</span></span> <span data-ttu-id="9f768-491">これらのトピックと詳細を説明します、[次のチュートリアル](forms-authentication-configuration-and-advanced-topics-cs.md)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-491">We will discuss these topics and more in the [next tutorial](forms-authentication-configuration-and-advanced-topics-cs.md).</span></span>

<span data-ttu-id="9f768-492">満足プログラミング!</span><span class="sxs-lookup"><span data-stu-id="9f768-492">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="9f768-493">関連項目</span><span class="sxs-lookup"><span data-stu-id="9f768-493">Further Reading</span></span>

<span data-ttu-id="9f768-494">このチュートリアルで説明したトピックの詳細については、次の情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9f768-494">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="9f768-495">Iis 6 と iis 7 のセキュリティの変更</span><span class="sxs-lookup"><span data-stu-id="9f768-495">Changes Between IIS6 and IIS7 Security</span></span>](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/Changes-between-IIS6-and-IIS7-Security)
- [<span data-ttu-id="9f768-496">ログインの ASP.NET コントロール</span><span class="sxs-lookup"><span data-stu-id="9f768-496">Login ASP.NET Controls</span></span>](https://msdn.microsoft.com/library/d51ttbhx.aspx)
- <span data-ttu-id="9f768-497">[プロフェッショナル向けの ASP.NET 2.0 セキュリティ、メンバーシップ、およびロール管理](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html)(ISBN: 978-0-7645-9698-8)</span><span class="sxs-lookup"><span data-stu-id="9f768-497">[Professional ASP.NET 2.0 Security, Membership, and Role Management](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span></span>
- [<span data-ttu-id="9f768-498">`<authentication>`要素</span><span class="sxs-lookup"><span data-stu-id="9f768-498">The `<authentication>` Element</span></span>](https://msdn.microsoft.com/library/532aee0e.aspx)
- [<span data-ttu-id="9f768-499">`<forms>`要素`<authentication>`</span><span class="sxs-lookup"><span data-stu-id="9f768-499">The `<forms>` Element for `<authentication>`</span></span>](https://msdn.microsoft.com/library/1d3t3c61.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="9f768-500">このチュートリアルに含まれるトピックに関するビデオ トレーニング</span><span class="sxs-lookup"><span data-stu-id="9f768-500">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="9f768-501">ASP.NET で基本フォーム認証を使用する</span><span class="sxs-lookup"><span data-stu-id="9f768-501">Using Basic Forms Authentication in ASP.NET</span></span>](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md)

## <a name="about-the-author"></a><span data-ttu-id="9f768-502">作成者について</span><span class="sxs-lookup"><span data-stu-id="9f768-502">About the Author</span></span>

<span data-ttu-id="9f768-503">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)、7 つ受け取りますブックとの創設者の作成者[4GuysFromRolla.com](http://www.4guysfromrolla.com)、1998 年からマイクロソフトの Web テクノロジで取り組んできました。</span><span class="sxs-lookup"><span data-stu-id="9f768-503">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9f768-504">Scott は、コンサルタント、トレーナー、ライターとして機能します。</span><span class="sxs-lookup"><span data-stu-id="9f768-504">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9f768-505">最新の著書[ *Sam 学べる自分で ASP.NET 2.0 が 24 時間以内に*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-505">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9f768-506">彼に到達できる[ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)彼のブログを使用して含まれているのか[http://ScottOnWriting.NET](http://ScottOnWriting.NET)です。</span><span class="sxs-lookup"><span data-stu-id="9f768-506">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9f768-507">特別に感謝しています.</span><span class="sxs-lookup"><span data-stu-id="9f768-507">Special Thanks To…</span></span>

<span data-ttu-id="9f768-508">このチュートリアルの系列は既に多くの便利なレビュー担当者によって確認済みです。</span><span class="sxs-lookup"><span data-stu-id="9f768-508">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9f768-509">このチュートリアルのレビュー担当者の潜在顧客は、このチュートリアルの多くの便利なレビュー担当者によってレビュー済みの系列をでした。</span><span class="sxs-lookup"><span data-stu-id="9f768-509">Lead reviewer for this tutorial was This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9f768-510">このチュートリアルの潜在顧客レビュー担当者には、Alicja Maziarz、John Suru Teresa マーフィーなどがあります。</span><span class="sxs-lookup"><span data-stu-id="9f768-510">Lead reviewers for this tutorial include Alicja Maziarz, John Suru, and Teresa Murphy.</span></span> <span data-ttu-id="9f768-511">今後、MSDN の記事を確認することに関心のあるですか。</span><span class="sxs-lookup"><span data-stu-id="9f768-511">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9f768-512">場合は、ドロップ me 一度に 1 行ずつ[mitchell@4GuysFromRolla.comです。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9f768-512">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="9f768-513">[前へ](security-basics-and-asp-net-support-cs.md)
[次へ](forms-authentication-configuration-and-advanced-topics-cs.md)</span><span class="sxs-lookup"><span data-stu-id="9f768-513">[Previous](security-basics-and-asp-net-support-cs.md)
[Next](forms-authentication-configuration-and-advanced-topics-cs.md)</span></span>
