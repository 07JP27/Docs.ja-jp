---
uid: web-pages/overview/ui-layouts-and-themes/9-working-with-images
title: ASP.NET Web Pages (Razor) サイトに画像の操作 |Microsoft ドキュメント
author: tfitzmac
description: この章で説明する追加、表示、およびイメージを操作する方法 (サイズ変更、反転、およびウォーターマークの追加)、web サイトにします。
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2014
ms.topic: article
ms.assetid: 778c4e58-4372-4d25-bab9-aec4a8d8e38d
ms.technology: dotnet-webpages
ms.prod: .net-framework
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/9-working-with-images
msc.type: authoredcontent
ms.openlocfilehash: 74838dd364a43f3f4c966c1417d0f0b2cc242f28
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/10/2017
---
<a name="working-with-images-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="3ab4c-103">ASP.NET Web Pages (Razor) サイトに画像の操作</span><span class="sxs-lookup"><span data-stu-id="3ab4c-103">Working with Images in an ASP.NET Web Pages (Razor) Site</span></span>
====================
<span data-ttu-id="3ab4c-104">によって[Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="3ab4c-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="3ab4c-105">この記事は、追加、表示、およびイメージを操作する方法を示します (サイズ変更、反転、およびウォーターマークの追加) の ASP.NET Web Pages (Razor) web サイトです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-105">This article shows you how to add, display, and manipulate images (resize, flip, and add watermarks) in an ASP.NET Web Pages (Razor) website.</span></span>
> 
> <span data-ttu-id="3ab4c-106">学習する内容。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="3ab4c-107">イメージをページに動的に追加する方法。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-107">How to add an image to a page dynamically.</span></span>
> - <span data-ttu-id="3ab4c-108">ユーザー イメージをアップロードできるようにする方法。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-108">How to let users upload an image.</span></span>
> - <span data-ttu-id="3ab4c-109">イメージのサイズを変更する方法。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-109">How to resize an image.</span></span>
> - <span data-ttu-id="3ab4c-110">反転するか、またはイメージを回転する方法です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-110">How to flip or rotate an image.</span></span>
> - <span data-ttu-id="3ab4c-111">ウォーターマーク イメージに追加する方法。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-111">How to add a watermark to an image.</span></span>
> - <span data-ttu-id="3ab4c-112">ウォーターマークとしてイメージを使用する方法。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-112">How to use an image as a watermark.</span></span>
> 
> <span data-ttu-id="3ab4c-113">これらは、ASP.NET のアーティクルで導入された機能をプログラミングします。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="3ab4c-114">`WebImage`ヘルパー。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-114">The `WebImage` helper.</span></span>
> - <span data-ttu-id="3ab4c-115">`Path`パスとファイル名を操作するのに便利なメソッドを提供するオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-115">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="3ab4c-116">このチュートリアルで使用されているソフトウェアのバージョン</span><span class="sxs-lookup"><span data-stu-id="3ab4c-116">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="3ab4c-117">ASP.NET Web Pages (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="3ab4c-117">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="3ab4c-118">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="3ab4c-118">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="3ab4c-119">このチュートリアルは、WebMatrix 3 でも動作します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-119">This tutorial also works with WebMatrix 3.</span></span>


<a id="Adding_an_Image"></a>
## <a name="adding-an-image-to-a-web-page-dynamically"></a><span data-ttu-id="3ab4c-120">Web ページにイメージを動的に追加します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-120">Adding an Image to a Web Page Dynamically</span></span>

<span data-ttu-id="3ab4c-121">Web サイトの開発中は、web サイトに、個々 のページにイメージを追加することができます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-121">You can add images to your website and to individual pages while you're developing the website.</span></span> <span data-ttu-id="3ab4c-122">ユーザー プロファイル写真を追加するそのようなタスクに役立つ可能性のあるイメージをアップロードすることもできます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-122">You can also let users upload images, which might be useful for tasks like letting them add a profile photo.</span></span>

<span data-ttu-id="3ab4c-123">HTML を使用するイメージとは、サイトで既に使用可能なページに表示する場合は、`<img>`次のような要素。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-123">If an image is already available on your site and you just want to display it on a page, you use an HTML `<img>` element like this:</span></span>

[!code-html[Main](9-working-with-images/samples/sample1.html)]

<span data-ttu-id="3ab4c-124">イメージを動的に表示できるようにする必要がありますただし、場合によっては、& #8212 です。つまり、わからない場合、ページまで表示するには、どのようなイメージを実行しています。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-124">Sometimes, though, you need to be able to display images dynamically &#8212; that is, you don't know what image to display until the page is running.</span></span>

<span data-ttu-id="3ab4c-125">このセクションの手順では、ユーザーがイメージ名の一覧からイメージのファイル名を指定して実行時にイメージを表示する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-125">The procedure in this section shows how to display an image on the fly where users specify the image file name from a list of image names.</span></span> <span data-ttu-id="3ab4c-126">を、ドロップダウン リストから、イメージの名前を選択して、ページを送信すると、選択したイメージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-126">They select the name of the image from a drop-down list, and when they submit the page, the image they selected is displayed.</span></span>

<span data-ttu-id="3ab4c-127">![[イメージ]] (9-working-with-images/_static/image1.jpg "ch9images 1.jpg")</span><span class="sxs-lookup"><span data-stu-id="3ab4c-127">![[image]](9-working-with-images/_static/image1.jpg "ch9images-1.jpg")</span></span>

1. <span data-ttu-id="3ab4c-128">WebMatrix では、新しい web サイトを作成します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-128">In WebMatrix, create a new website.</span></span>
2. <span data-ttu-id="3ab4c-129">という名前の新しいページを追加*DynamicImage.cshtml*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-129">Add a new page named *DynamicImage.cshtml*.</span></span>
3. <span data-ttu-id="3ab4c-130">Web サイトのルート フォルダーに新しいフォルダーを追加し、名前*イメージ*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-130">In the root folder of the website, add a new folder and name it *images*.</span></span>
4. <span data-ttu-id="3ab4c-131">次の 4 つのイメージを追加、*イメージ*作成したフォルダーです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-131">Add four images to the *images* folder you just created.</span></span> <span data-ttu-id="3ab4c-132">(イメージがあるためには、便利なは、それらをページに適合する必要があります)。イメージの名前を変更*Photo1.jpg*、 *Photo2.jpg*、 *Photo3.jpg*、および*Photo4.jpg*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-132">(Any images you have handy will do, but they should fit onto a page.) Rename the images *Photo1.jpg*, *Photo2.jpg*, *Photo3.jpg*, and *Photo4.jpg*.</span></span> <span data-ttu-id="3ab4c-133">(使用しない*Photo4.jpg*これには、プロシージャ、テーブルを使用して、記事の後半)。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-133">(You won't use *Photo4.jpg* in this procedure, but you'll use it later in the article.)</span></span>
5. <span data-ttu-id="3ab4c-134">4 つのイメージでは読み取り専用でをマークされていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-134">Verify that the four images are not marked as read-only.</span></span>
6. <span data-ttu-id="3ab4c-135">ページで、既存のコンテンツを次のように置き換えます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-135">Replace the existing content in the page with the following:</span></span>

    [!code-cshtml[Main](9-working-with-images/samples/sample2.cshtml)]

    <span data-ttu-id="3ab4c-136">ページの本文がドロップダウン リスト (、`<select>`要素) という`photoChoice`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-136">The body of the page has a drop-down list (a `<select>` element) that's named `photoChoice`.</span></span> <span data-ttu-id="3ab4c-137">リストが 3 つのオプション、および`value`各リストのオプションの属性に格納されているイメージの 1 つの名前が指定されて、*イメージ*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-137">The list has three options, and the `value` attribute of each list option has the name of one of the images that you put in the *images* folder.</span></span> <span data-ttu-id="3ab4c-138">一覧でのようなわかりやすい名前を選択して、ユーザーは基本的に、&quot;フォト 1&quot;、しを渡しますが、 *.jpg*ページが送信されるときに、ファイル名。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-138">Essentially, the list lets the user select a friendly name like &quot;Photo 1&quot;, and it then passes the *.jpg* file name when the page is submitted.</span></span>

    <span data-ttu-id="3ab4c-139">コードから取得できます (つまり、イメージ ファイル名) のユーザーの選択リストを読み取って`Request["photoChoice"]`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-139">In the code, you can get the user's selection (in other words, the image file name) from the list by reading `Request["photoChoice"]`.</span></span> <span data-ttu-id="3ab4c-140">まずがあるかどうか、選択範囲で参照してください。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-140">You first see if there's a selection at all.</span></span> <span data-ttu-id="3ab4c-141">ある場合、イメージの場合、フォルダーの名前と、ユーザーのイメージのファイル名で構成されるイメージのパスを構築します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-141">If there is, you construct a path for the image that consists of the name of the folder for the images and the user's image file name.</span></span> <span data-ttu-id="3ab4c-142">(パスを作成しようとしましたでは nothing を使用する必要があるかどうか`Request["photoChoice"]`エラーが発生したとします)。これは、結果は、次のように相対パスになります。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-142">(If you tried to construct a path but there was nothing in `Request["photoChoice"]`, you'd get an error.) This results in a relative path like this:</span></span>

    <span data-ttu-id="3ab4c-143">*イメージ/Photo1.jpg*</span><span class="sxs-lookup"><span data-stu-id="3ab4c-143">*images/Photo1.jpg*</span></span>

    <span data-ttu-id="3ab4c-144">パスがという名前の変数に格納されている`imagePath`必要があるページの後半。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-144">The path is stored in variable named `imagePath` that you'll need later in the page.</span></span>

    <span data-ttu-id="3ab4c-145">本文にも、`<img>`ユーザーが取得されたイメージを表示するための要素です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-145">In the body, there's also an `<img>` element that's used to display the image that the user picked.</span></span> <span data-ttu-id="3ab4c-146">`src`属性は、静的な要素を表示するための作業と同じようにファイル名または URL に設定されていません。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-146">The `src` attribute isn't set to a file name or URL, like you'd do to display a static element.</span></span> <span data-ttu-id="3ab4c-147">代わりに設定されている`@imagePath`コードで設定したパスからその値を取得ことを意味します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-147">Instead, it's set to `@imagePath`, meaning that it gets its value from the path you set in code.</span></span>

    <span data-ttu-id="3ab4c-148">ページを実行する最初の時間は、画像がない表示するには、ユーザーには、何も選択していないためです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-148">The first time that the page runs, though, there's no image to display, because the user hasn't selected anything.</span></span> <span data-ttu-id="3ab4c-149">これは通常からといって、`src`属性は空にして、イメージが赤いとして示されます&quot;x&quot; (または、どのブラウザーが、イメージが見つからない場合)。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-149">This would normally mean that the `src` attribute would be empty and the image would show up as a red &quot;x&quot; (or whatever the browser renders when it can't find an image).</span></span> <span data-ttu-id="3ab4c-150">これを回避するには、配置する、`<img>`内の要素、`if`を調べ、ブロックするかどうか、`imagePath`変数が含まれるものです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-150">To prevent this, you put the `<img>` element in an `if` block that tests to see whether the `imagePath` variable has anything in it.</span></span> <span data-ttu-id="3ab4c-151">ユーザーが、選択を行った場合`imagePath`パスが含まれています。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-151">If the user made a selection, `imagePath` contains the path.</span></span> <span data-ttu-id="3ab4c-152">ユーザーは、イメージを選択していないか、これが初めての場合、ページが表示されたら場合、`<img>`要素は表示もされません。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-152">If the user didn't pick an image or if this is the first time the page is displayed, the `<img>` element isn't even rendered.</span></span>
7. <span data-ttu-id="3ab4c-153">ファイルを保存し、ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-153">Save the file and run the page in a browser.</span></span> <span data-ttu-id="3ab4c-154">(ページが選択されて、必ず、**ファイル**ワークスペースを実行する前にします)。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-154">(Make sure the page is selected in the **Files** workspace before you run it.)</span></span>
8. <span data-ttu-id="3ab4c-155">ドロップダウン リストからイメージを選択し、をクリックして**サンプル イメージ**です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-155">Select an image from the drop-down list and then click **Sample Image**.</span></span> <span data-ttu-id="3ab4c-156">さまざまな選択肢ごとに異なるイメージが表示されることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-156">Make sure that you see different images for different choices.</span></span>

<a id="Uploading_an_Image"></a>
## <a name="uploading-an-image"></a><span data-ttu-id="3ab4c-157">イメージをアップロードします。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-157">Uploading an Image</span></span>

<span data-ttu-id="3ab4c-158">前の例は、イメージを動的に表示する方法を示しましたが、web サイトに存在したイメージでのみ機能しました。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-158">The previous example showed you how to display an image dynamically, but it worked only with images that were already on your website.</span></span> <span data-ttu-id="3ab4c-159">この手順では、ユーザーがページに表示されるイメージをアップロードできるようにする方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-159">This procedure shows how to let users upload an image, which is then displayed on the page.</span></span> <span data-ttu-id="3ab4c-160">ASP.NET を使用して、実行時にイメージを操作することができます、`WebImage`ヘルパーで、作成、操作、および画像を保存できるメソッドがあります。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-160">In ASP.NET, you can manipulate images on the fly using the `WebImage` helper, which has methods that let you create, manipulate, and save images.</span></span> <span data-ttu-id="3ab4c-161">`WebImage`ヘルパーは、すべて共通 web イメージ ファイルの種類を含むをサポートしている *.jpg*、 *.png*、および *.bmp*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-161">The `WebImage` helper supports all the common web image file types, including *.jpg*, *.png*, and *.bmp*.</span></span> <span data-ttu-id="3ab4c-162">この記事全体で使用する *.jpg*が、イメージはイメージの種類のいずれかで使用できます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-162">Throughout this article, you'll use *.jpg* images, but you can use any of the image types.</span></span>

<span data-ttu-id="3ab4c-163">![[イメージ]] (9-working-with-images/_static/image2.jpg "ch9images 2.jpg")</span><span class="sxs-lookup"><span data-stu-id="3ab4c-163">![[image]](9-working-with-images/_static/image2.jpg "ch9images-2.jpg")</span></span>

1. <span data-ttu-id="3ab4c-164">新しいページを追加し、名前を付けます*UploadImage.cshtml*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-164">Add a new page and name it *UploadImage.cshtml*.</span></span>
2. <span data-ttu-id="3ab4c-165">ページで、既存のコンテンツを次のように置き換えます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-165">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample3.cshtml)]

    <span data-ttu-id="3ab4c-166">テキストの本文には、`<input type="file">`要素は、アップロードするファイルを選択できます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-166">The body of the text has an `<input type="file">` element, which lets users select a file to upload.</span></span> <span data-ttu-id="3ab4c-167">クリックすると**送信**、フォームと共に選択、ファイルを送信します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-167">When they click **Submit**, the file they picked is submitted along with the form.</span></span>

    <span data-ttu-id="3ab4c-168">アップロードしたイメージを取得するには、使用して、`WebImage`ヘルパーに渡し、あらゆる種類のイメージを操作するための便利なメソッドを持つ。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-168">To get the uploaded image, you use the `WebImage` helper, which has all sorts of useful methods for working with images.</span></span> <span data-ttu-id="3ab4c-169">具体的を使用する`WebImage.GetImageFromRequest`(存在する場合) にアップロードされたイメージを取得し、という名前の変数に格納する`photo`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-169">Specifically, you use `WebImage.GetImageFromRequest` to get the uploaded image (if any) and store it in a variable named `photo`.</span></span>

    <span data-ttu-id="3ab4c-170">この例では、作業の多くでは、取得およびファイル名とパス名を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-170">A lot of the work in this example involves getting and setting file and path names.</span></span> <span data-ttu-id="3ab4c-171">この問題は、ユーザーがアップロードされると、イメージの名前 (と名前のみ) を取得し、どこで、イメージを格納する新しいパスを作成することです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-171">The issue is that you want to get the name (and just the name) of the image that the user uploaded, and then create a new path for where you're going to store the image.</span></span> <span data-ttu-id="3ab4c-172">ユーザーは、同じ名前を持つ複数のイメージをアップロード可能性がある可能性があります、ため余分なコードのビットを使用する一意の名前を作成し、ユーザーが既存の画像を上書きしないことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-172">Because users could potentially upload multiple images that have the same name, you use a bit of extra code to create unique names and make sure that users don't overwrite existing pictures.</span></span>

    <span data-ttu-id="3ab4c-173">イメージ実際にアップロードされている場合 (テスト`if (photo != null)`) からイメージのイメージの名前を取得する`FileName`プロパティです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-173">If an image actually has been uploaded (the test `if (photo != null)`), you get the image name from the image's `FileName` property.</span></span> <span data-ttu-id="3ab4c-174">ユーザーが、イメージをアップロードする`FileName`ユーザーのコンピューターからのパスを含む、ユーザーの元名が含まれています。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-174">When the user uploads the image, `FileName` contains the user's original name, which includes the path from the user's computer.</span></span> <span data-ttu-id="3ab4c-175">これは、次のようになります可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-175">It might look like this:</span></span>

    <span data-ttu-id="3ab4c-176">*C:\Users\Joe\Pictures\SamplePhoto1.jpg*</span><span class="sxs-lookup"><span data-stu-id="3ab4c-176">*C:\Users\Joe\Pictures\SamplePhoto1.jpg*</span></span>

    <span data-ttu-id="3ab4c-177">そのすべてのパス情報をただしたくない & #8212 です。実際のファイル名をするだけ (*SamplePhoto1.jpg*)。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-177">You don't want all that path information, though &#8212; you just want the actual file name (*SamplePhoto1.jpg*).</span></span> <span data-ttu-id="3ab4c-178">パスからファイルだけを除去するを使用して、`Path.GetFileName`メソッドは、次のようにします。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-178">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](9-working-with-images/samples/sample4.cs)]

    <span data-ttu-id="3ab4c-179">元の名前に GUID を追加することによって新しい一意のファイル名を作成します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-179">You then create a new unique file name by adding a GUID to the original name.</span></span> <span data-ttu-id="3ab4c-180">(詳細については、Guid は、次を参照してください[に関する Guid](#SB_AboutGUIDs)この記事で後述します。)。イメージの保存に使用できる、完全なパスを作成します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-180">(For more about GUIDs, see [About GUIDs](#SB_AboutGUIDs) later in this article.) Then you construct a complete path that you can use to save the image.</span></span> <span data-ttu-id="3ab4c-181">保存パスで構成された、新しいファイル名、フォルダー (イメージ)、および現在の web サイトの場所。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-181">The save path is made up of the new file name, the folder (images), and the current website location.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3ab4c-182">コード内のファイルを保存するために、*イメージ*フォルダー、アプリケーション必要がある読み取り/書き込みそのフォルダーのアクセスを許可します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-182">In order for your code to save files in the *images* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="3ab4c-183">開発用コンピューターでこの問題はありません通常です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-183">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="3ab4c-184">ただし、ホスティング プロバイダーの web サーバーにサイトを発行するときは、これらのアクセス許可を明示的に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-184">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="3ab4c-185">ホスティング プロバイダーのサーバーでこのコードを実行し、エラーが発生する場合にこれらのアクセス許可を設定する方法を見つけて、ホスティング プロバイダーに確認します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-185">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

    <span data-ttu-id="3ab4c-186">最後に、保存を渡すへのパス、`Save`のメソッド、`WebImage`ヘルパー。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-186">Finally, you pass the save path to the `Save` method of the `WebImage` helper.</span></span> <span data-ttu-id="3ab4c-187">これは、新しい名前でアップロードされたイメージを格納します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-187">This stores the uploaded image under its new name.</span></span> <span data-ttu-id="3ab4c-188">Save メソッドは、次のようになります:`photo.Save(@"~\" + imagePath)`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-188">The save method looks like this: `photo.Save(@"~\" + imagePath)`.</span></span> <span data-ttu-id="3ab4c-189">完全なパスが追加されます`@"~\"`、これは、現在の web サイトの場所。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-189">The complete path is appended to `@"~\"`, which is the current website location.</span></span> <span data-ttu-id="3ab4c-190">(については、`~`演算子を参照してください[Introduction to ASP.NET Web プログラミング構文を使用して、Razor](https://go.microsoft.com/fwlink/?LinkId=202890#ID_WorkingWithFileAndFolderPaths))。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-190">(For information about the `~` operator, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="3ab4c-191">前の例では、ページの本文に含まれる、`<img>`イメージを表示する要素。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-191">As in the previous example, the body of the page contains an `<img>` element to display the image.</span></span> <span data-ttu-id="3ab4c-192">場合`imagePath`が設定されている、`<img>`要素が表示されると、その`src`属性に設定されている、`imagePath`値。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-192">If `imagePath` has been set, the `<img>` element is rendered and its `src` attribute is set to the `imagePath` value.</span></span>
3. <span data-ttu-id="3ab4c-193">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-193">Run the page in a browser.</span></span>
4. <span data-ttu-id="3ab4c-194">イメージをアップロードし、ページに表示されるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-194">Upload an image and make sure it's displayed in the page.</span></span>
5. <span data-ttu-id="3ab4c-195">サイトで開く、*イメージ*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-195">In your site, open the *images* folder.</span></span> <span data-ttu-id="3ab4c-196">ファイルの名前が次のように、新しいファイルを追加されていることを参照してください。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-196">You see that a new file has been added whose file name looks something like this::</span></span> 

    <span data-ttu-id="3ab4c-197">*45ea4527-7ddd-4965-b9ca-c6444982b342\_MyPhoto.png*</span><span class="sxs-lookup"><span data-stu-id="3ab4c-197">*45ea4527-7ddd-4965-b9ca-c6444982b342\_MyPhoto.png*</span></span>

    <span data-ttu-id="3ab4c-198">これは、名前にプレフィックスの GUID でアップロードしたイメージです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-198">This is the image that you uploaded with a GUID prefixed to the name.</span></span> <span data-ttu-id="3ab4c-199">(独自ファイル別の GUID を持つし、おそらくは名前とは異なるもの*MyPhoto.png*)。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-199">(Your own file will have a different GUID and probably is named something different than *MyPhoto.png*.)</span></span>

> [!TIP] 
> 
> <a id="SB_AboutGUIDs"></a>
> ### <a name="about-guids"></a><span data-ttu-id="3ab4c-200">Guid は</span><span class="sxs-lookup"><span data-stu-id="3ab4c-200">About GUIDs</span></span>
> 
> <span data-ttu-id="3ab4c-201">GUID (グローバルに一意の ID) は、次のような形式で表示される通常識別子:`936DA01F-9ABD-4d9d-80C7-02AF85C822A8`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-201">A GUID (globally-unique ID) is an identifier that's usually rendered in a format like this: `936DA01F-9ABD-4d9d-80C7-02AF85C822A8`.</span></span> <span data-ttu-id="3ab4c-202">数字と文字 (A ~ F) から、GUID ごとに異なりますが、それらはすべて 8-4-4-4-12 文字のグループを使用するパターン。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-202">The numbers and letters (from A-F) differ for each GUID, but they all follow the pattern of using groups of 8-4-4-4-12 characters.</span></span> <span data-ttu-id="3ab4c-203">(技術的には、GUID は 16 バイト/128 ビット数) です。GUID が必要なときは、GUID を生成する専用のコードを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-203">(Technically, a GUID is a 16-byte/128-bit number.) When you need a GUID, you can call specialized code that generates a GUID for you.</span></span> <span data-ttu-id="3ab4c-204">Guid の考え方は膨大な数のサイズとの違い (3.4 x 10<sup>38</sup>) し、生成するためのアルゴリズム、結果の数が事実上保証の種類のいずれかを指定します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-204">The idea behind GUIDs is that between the enormous size of the number (3.4 x 10<sup>38</sup>) and the algorithm for generating it, the resulting number is virtually guaranteed to be one of a kind.</span></span> <span data-ttu-id="3ab4c-205">したがって Guid は、名前を生成するものと同じ名前を 2 回使用しないことを保証する必要があります良い方法です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-205">GUIDs therefore are a good way to generate names for things when you must guarantee that you won't use the same name twice.</span></span> <span data-ttu-id="3ab4c-206">という欠点は、名前がコードでのみ使用されるときに使用される傾向があるために、Guid でユーザー フレンドリ、特にをいないことをもちろんです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-206">The downside, of course, is that GUIDs aren't particularly user friendly, so they tend to be used when the name is used only in code.</span></span>


<a id="Resizing_an_Image"></a>
## <a name="resizing-an-image"></a><span data-ttu-id="3ab4c-207">イメージのサイズ変更</span><span class="sxs-lookup"><span data-stu-id="3ab4c-207">Resizing an Image</span></span>

<span data-ttu-id="3ab4c-208">Web サイトがユーザーからのイメージを受け入れる場合は、表示、保存したりする前に、イメージのサイズを変更することができます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-208">If your website accepts images from a user, you might want to resize the images before you display or save them.</span></span> <span data-ttu-id="3ab4c-209">もう一度使用することができます、`WebImage`このヘルパー。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-209">You can again use the `WebImage` helper for this.</span></span>

<span data-ttu-id="3ab4c-210">この手順では、サムネイルを作成し、web サイトの縮小版および元のイメージを保存するアップロードされたイメージのサイズを変更する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-210">This procedure shows how to resize an uploaded image to create a thumbnail and then save the thumbnail and original image in the website.</span></span> <span data-ttu-id="3ab4c-211">ページのサムネイルを表示し、ハイパーリンクを使用して、フルサイズのイメージにユーザーをリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-211">You display the thumbnail on the page and use a hyperlink to redirect users to the full-sized image.</span></span>

<span data-ttu-id="3ab4c-212">![[イメージ]] (9-working-with-images/_static/image3.jpg "ch9images 3.jpg")</span><span class="sxs-lookup"><span data-stu-id="3ab4c-212">![[image]](9-working-with-images/_static/image3.jpg "ch9images-3.jpg")</span></span>

1. <span data-ttu-id="3ab4c-213">という名前の新しいページを追加*Thumbnail.cshtml*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-213">Add a new page named *Thumbnail.cshtml*.</span></span>
2. <span data-ttu-id="3ab4c-214">*イメージ*フォルダー、という名前のサブフォルダーを作成する*親指*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-214">In the *images* folder, create a subfolder named *thumbs*.</span></span>
3. <span data-ttu-id="3ab4c-215">ページで、既存のコンテンツを次のように置き換えます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-215">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample5.cshtml)]

    <span data-ttu-id="3ab4c-216">このコードは、前の例のコードに似ています。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-216">This code is similar to the code from the previous example.</span></span> <span data-ttu-id="3ab4c-217">違いは、このコードのイメージは、2 回、1 回正常に保存して、サムネイル、イメージのコピーを作成した後に 1 回です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-217">The difference is that this code saves the image twice, once normally and once after you create a thumbnail copy of the image.</span></span> <span data-ttu-id="3ab4c-218">まず、アップロードされたイメージを取得し、保存、*イメージ*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-218">First you get the uploaded image and save it in the *images* folder.</span></span> <span data-ttu-id="3ab4c-219">サムネイル イメージの新しいパスを作成します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-219">You then construct a new path for the thumbnail image.</span></span> <span data-ttu-id="3ab4c-220">サムネイルを実際に作成するを呼び出す、`WebImage`ヘルパーの`Resize`60 によって 60 ピクセル イメージを作成するメソッド。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-220">To actually create the thumbnail, you call the `WebImage` helper's `Resize` method to create a 60-pixel by 60-pixel image.</span></span> <span data-ttu-id="3ab4c-221">この例では、縦横比を維持する方法と (この場合、新しいサイズが実際には、画像を拡大) に拡大されてから、イメージを防止する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-221">The example shows how you preserve the aspect ratio and how you can prevent the image from being enlarged (in case the new size would actually make the image larger).</span></span> <span data-ttu-id="3ab4c-222">サイズを変更したイメージを保存し、*親指*サブフォルダーです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-222">The resized image is then saved in the *thumbs* subfolder.</span></span>

    <span data-ttu-id="3ab4c-223">同一のマークアップの最後に、使用する`<img>`、動的な要素`src`条件付きでイメージを表示する前の例で示した属性。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-223">At the end of the markup, you use the same `<img>` element with the dynamic `src` attribute that you've seen in the previous examples to conditionally show the image.</span></span> <span data-ttu-id="3ab4c-224">この場合、サムネイルを表示します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-224">In this case, you display the thumbnail.</span></span> <span data-ttu-id="3ab4c-225">使用することも、`<a>`大きなバージョンのイメージへのハイパーリンクを作成する要素。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-225">You also use an `<a>` element to create a hyperlink to the big version of the image.</span></span> <span data-ttu-id="3ab4c-226">同様、`src`の属性、`<img>`要素を設定する、`href`の属性、`<a>`要素は動的に`imagePath`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-226">As with the `src` attribute of the `<img>` element, you set the `href` attribute of the `<a>` element dynamically to whatever is in `imagePath`.</span></span> <span data-ttu-id="3ab4c-227">Url パスを操作できることを確認に合格する`imagePath`を`Html.AttributeEncode`メソッドで、パス内の予約文字を URL で [ok] は、文字に変換します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-227">To make sure that the path can work as a URL, you pass `imagePath` to the `Html.AttributeEncode` method, which converts reserved characters in the path to characters that are ok in a URL.</span></span>
4. <span data-ttu-id="3ab4c-228">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-228">Run the page in a browser.</span></span>
5. <span data-ttu-id="3ab4c-229">写真をアップロードし、サムネイルが表示されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-229">Upload a photo and verify that the thumbnail is shown.</span></span>
6. <span data-ttu-id="3ab4c-230">サムネイルをクリックして、フルサイズの画像を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-230">Click the thumbnail to see the full-size image.</span></span>
7. <span data-ttu-id="3ab4c-231">*イメージ*と*イメージ/親指*、新しいファイルが追加されたことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-231">In the *images* and *images/thumbs*, note that new files have been added.</span></span>

<a id="Rotating_and_Flipping"></a>
## <a name="rotating-and-flipping-an-image"></a><span data-ttu-id="3ab4c-232">回転とイメージの回転</span><span class="sxs-lookup"><span data-stu-id="3ab4c-232">Rotating and Flipping an Image</span></span>

<span data-ttu-id="3ab4c-233">`WebImage`ヘルパーすることもできます反転と回転イメージ。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-233">The `WebImage` helper also lets you flip and rotate images.</span></span> <span data-ttu-id="3ab4c-234">この手順では、サーバーから取得して、イメージ、イメージを上下 (垂直方向に反転、保存し、ページに反転イメージを表示する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-234">This procedure shows how to get an image from the server, flip the image upside down (vertically), save it, and then display the flipped image on the page.</span></span> <span data-ttu-id="3ab4c-235">この例では、サーバーに既にあるファイルを使用しているだけ (*Photo2.jpg*)。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-235">In this example, you're just using a file you already have on the server (*Photo2.jpg*).</span></span> <span data-ttu-id="3ab4c-236">実際のアプリケーションでは、前の例で行ったように、動的に取得する名前を持つイメージを反転させるは可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-236">In a real application, you'd probably flip an image whose name you get dynamically, like you did in previous examples.</span></span>

<span data-ttu-id="3ab4c-237">![[イメージ]] (9-working-with-images/_static/image4.jpg "ch9images 4.jpg")</span><span class="sxs-lookup"><span data-stu-id="3ab4c-237">![[image]](9-working-with-images/_static/image4.jpg "ch9images-4.jpg")</span></span>

1. <span data-ttu-id="3ab4c-238">という名前の新しいページを追加*FlipImage.cshtml*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-238">Add a new page named *FlipImage.cshtml*.</span></span>
2. <span data-ttu-id="3ab4c-239">ページで、既存のコンテンツを次のように置き換えます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-239">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample6.cshtml)]

    <span data-ttu-id="3ab4c-240">コードを使用して、`WebImage`サーバーからイメージを取得するためのヘルパー。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-240">The code uses the `WebImage` helper to get an image from the server.</span></span> <span data-ttu-id="3ab4c-241">前の例で、イメージを保存するために使用される同じ手法を使用するイメージへのパスを作成してを使用して、イメージを作成するときにそのパスを渡す`WebImage`:</span><span class="sxs-lookup"><span data-stu-id="3ab4c-241">You create the path to the image using the same technique you used in earlier examples for saving images, and you pass that path when you create an image using `WebImage`:</span></span>

    [!code-javascript[Main](9-working-with-images/samples/sample7.js)]

    <span data-ttu-id="3ab4c-242">イメージが見つかった場合は、新しいパスとファイル名、前の例で行ったようを作成します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-242">If an image is found, you construct a new path and file name, like you did in earlier examples.</span></span> <span data-ttu-id="3ab4c-243">呼び出すのイメージを反転するのには、`FlipVertical`メソッド、および、もう一度画像を保存します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-243">To flip the image, you call the `FlipVertical` method, and then you save the image again.</span></span>

    <span data-ttu-id="3ab4c-244">使用して、イメージが再度表示 ページで、`<img>`を持つ要素、`src`属性に設定`imagePath`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-244">The image is again displayed on the page by using the `<img>` element with the `src` attribute set to `imagePath`.</span></span>
3. <span data-ttu-id="3ab4c-245">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-245">Run the page in a browser.</span></span> <span data-ttu-id="3ab4c-246">画像を*Photo2.jpg*上下逆に表示されます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-246">The image for *Photo2.jpg* is shown upside down.</span></span>
4. <span data-ttu-id="3ab4c-247">ページを更新またはイメージが反転した右側をもう一度を表示するには、もう一度ページを要求します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-247">Refresh the page or request the page again to see the image is flipped right side up again.</span></span>

<span data-ttu-id="3ab4c-248">イメージを回転するには、呼び出し元ではなく点を除いて、同じコードを使用、`FlipVertical`または`FlipHorizontal`、呼び出す`RotateLeft`または`RotateRight`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-248">To rotate an image, you use the same code, except that instead of calling the `FlipVertical` or `FlipHorizontal`, you call `RotateLeft` or `RotateRight`.</span></span>

<a id="Adding_a_Watermark"></a>
## <a name="adding-a-watermark-to-an-image"></a><span data-ttu-id="3ab4c-249">ウォーターマークは、イメージへの追加</span><span class="sxs-lookup"><span data-stu-id="3ab4c-249">Adding a Watermark to an Image</span></span>

<span data-ttu-id="3ab4c-250">Web サイトにイメージを追加するときに保存したり、ページ上に表示する前に、イメージに透かしを追加する場合があります。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-250">When you add images to your website, you might want to add a watermark to the image before you save it or display it on a page.</span></span> <span data-ttu-id="3ab4c-251">ユーザーは、著作権情報をイメージに追加するか、ビジネス名を提供する多くの場合、ウォーターマークを使用します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-251">People often use watermarks to add copyright information to an image or to advertise their business name.</span></span>

<span data-ttu-id="3ab4c-252">![[イメージ]] (9-working-with-images/_static/image5.jpg "ch9images 5.jpg")</span><span class="sxs-lookup"><span data-stu-id="3ab4c-252">![[image]](9-working-with-images/_static/image5.jpg "ch9images-5.jpg")</span></span>

1. <span data-ttu-id="3ab4c-253">という名前の新しいページを追加*Watermark.cshtml*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-253">Add a new page named *Watermark.cshtml*.</span></span>
2. <span data-ttu-id="3ab4c-254">ページで、既存のコンテンツを次のように置き換えます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-254">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample8.cshtml)]

    <span data-ttu-id="3ab4c-255">このコードは、コードのように、 *FlipImage.cshtml*から前のページ (使用時間がこれが、 *Photo3.jpg*ファイル)。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-255">This code is like the code in the *FlipImage.cshtml* page from earlier (although this time it uses the *Photo3.jpg* file).</span></span> <span data-ttu-id="3ab4c-256">呼び出すウォーターマークを追加する、`WebImage`ヘルパーの`AddTextWatermark`メソッド、イメージを保存する前にします。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-256">To add the watermark, you call the `WebImage` helper's `AddTextWatermark` method before you save the image.</span></span> <span data-ttu-id="3ab4c-257">呼び出しで`AddTextWatermark`、テキストを渡す&quot;マイ ウォーターマーク&quot;、黄、フォントの色を設定および arial フォント ファミリを設定します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-257">In the call to `AddTextWatermark`, you pass the text &quot;My Watermark&quot;, set the font color to yellow, and set the font family to Arial.</span></span> <span data-ttu-id="3ab4c-258">(ここでは、表示されませんが、`WebImage`ヘルパーでは不透明度、フォント ファミリとフォント サイズ、およびウォーターマーク テキストの位置を指定することもできます)。イメージを保存すると、読み取り専用にする必要がありますできません。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-258">(Although it's not shown here, the `WebImage` helper also lets you specify opacity, font family and font size, and the position of the watermark text.) When you save the image it must not be read-only.</span></span>

    <span data-ttu-id="3ab4c-259">使用して、イメージが、ページに表示される前に説明したよう、 `<img>` src 属性を持つ要素に設定`@imagePath`です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-259">As you've seen before, the image is displayed on the page by using the `<img>` element with the src attribute set to `@imagePath`.</span></span>
3. <span data-ttu-id="3ab4c-260">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-260">Run the page in a browser.</span></span> <span data-ttu-id="3ab4c-261">画像の右下隅には、"My Watermark"のテキストに注意してください。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-261">Notice the text "My Watermark" at the bottom-right corner of the image.</span></span>

<a id="Using_an_Image_as_a_Watermark"></a>
## <a name="using-an-image-as-a-watermark"></a><span data-ttu-id="3ab4c-262">ウォーターマークとしてイメージを使用します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-262">Using an Image As a Watermark</span></span>

<span data-ttu-id="3ab4c-263">透かしのテキストではなく、別のイメージを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-263">Instead of using text for a watermark, you can use another image.</span></span> <span data-ttu-id="3ab4c-264">ユーザーは、透かしとして会社のロゴのようにイメージを使用することがあります。 または著作権情報のテキストではなくウォーターマークの画像を使用します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-264">People sometimes use images like a company logo as a watermark, or they use a watermark image instead of text for copyright information.</span></span>

<span data-ttu-id="3ab4c-265">![[イメージ]] (9-working-with-images/_static/image6.jpg "ch9images 6.jpg")</span><span class="sxs-lookup"><span data-stu-id="3ab4c-265">![[image]](9-working-with-images/_static/image6.jpg "ch9images-6.jpg")</span></span>

1. <span data-ttu-id="3ab4c-266">という名前の新しいページを追加*ImageWatermark.cshtml*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-266">Add a new page named *ImageWatermark.cshtml*.</span></span>
2. <span data-ttu-id="3ab4c-267">イメージの追加、*イメージ*フォルダーのロゴとして使用して、イメージの名前を変更できます*MyCompanyLogo.jpg*です。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-267">Add an image to the *images* folder that you can use as a logo, and rename the image *MyCompanyLogo.jpg*.</span></span> <span data-ttu-id="3ab4c-268">このイメージは、表示されていることが明確に 20 ピクセル、高さ、幅 80 ピクセルに設定されているときにイメージを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-268">This image should be an image that you can see clearly when it's set to 80 pixels wide and 20 pixels high.</span></span>
3. <span data-ttu-id="3ab4c-269">ページで、既存のコンテンツを次のように置き換えます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-269">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample9.cshtml)]

    <span data-ttu-id="3ab4c-270">これは、前の例からのコードに別のバリエーションです。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-270">This is another variation on the code from earlier examples.</span></span> <span data-ttu-id="3ab4c-271">この例を呼び出す`AddImageWatermark`ウォーターマークのイメージをターゲットのイメージに追加する (*Photo3.jpg*) イメージを保存する前にします。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-271">In this case, you call `AddImageWatermark` to add the watermark image to the target image (*Photo3.jpg*) before you save the image.</span></span> <span data-ttu-id="3ab4c-272">呼び出すと`AddImageWatermark`、80 ピクセルを 20 ピクセル、高さ、幅を設定します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-272">When you call `AddImageWatermark`, you set its width to 80 pixels and the height to 20 pixels.</span></span> <span data-ttu-id="3ab4c-273">*MyCompanyLogo.jpg*イメージが水平方向に中央に配置され、ターゲットのイメージの下部にある垂直方向に揃えます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-273">The *MyCompanyLogo.jpg* image is horizontally aligned in the center and vertically aligned at the bottom of the target image.</span></span> <span data-ttu-id="3ab4c-274">不透明度が 100% に設定されているし、10 ピクセルに余白が設定されています。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-274">The opacity is set to 100% and the padding is set to 10 pixels.</span></span> <span data-ttu-id="3ab4c-275">ウォーターマーク イメージが、ターゲットのイメージよりも大きい場合は、何も起こりません。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-275">If the watermark image is bigger than the target image, nothing will happen.</span></span> <span data-ttu-id="3ab4c-276">ウォーターマーク イメージが、ターゲットのイメージよりも大きい、ゼロに透かしの画像の埋め込みを設定すると、レベルのウォーターマークは無視されます。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-276">If the watermark image is bigger than the target image and you set the padding for the image watermark to zero, the watermark is ignored.</span></span>

    <span data-ttu-id="3ab4c-277">使用してイメージを表示する前に、として、`<img>`要素と、動的な`src`属性。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-277">As before, you display the image using the `<img>` element and a dynamic `src` attribute.</span></span>
4. <span data-ttu-id="3ab4c-278">ブラウザーでページを実行します。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-278">Run the page in a browser.</span></span> <span data-ttu-id="3ab4c-279">ウォーターマーク イメージが画像の下に表示されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="3ab4c-279">Notice that the watermark image appears at the bottom of the main image.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="3ab4c-280">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="3ab4c-280">Additional Resources</span></span>


[<span data-ttu-id="3ab4c-281">ASP.NET Web Pages サイトでファイルの操作</span><span class="sxs-lookup"><span data-stu-id="3ab4c-281">Working with Files in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202896)

[<span data-ttu-id="3ab4c-282">ASP.NET Web ページの Razor 構文を使用するプログラミングの概要</span><span class="sxs-lookup"><span data-stu-id="3ab4c-282">Introduction to ASP.NET Web Pages Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=251587)
