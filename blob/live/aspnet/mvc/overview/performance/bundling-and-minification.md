---
uid: mvc/overview/performance/bundling-and-minification
title: "バンドルと縮小 |Microsoft ドキュメント"
author: Rick-Anderson
description: "2 つの手法のバンドルと縮小要求読み込み時間を向上させるために ASP.NET 4.5 で使用することができます。 バンドルと縮小 reducin して読み込み時間が向上しています."
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/23/2012
ms.topic: article
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: e83be2446ef1e3ff1275d06d5b743fb5b9444a6a
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/10/2017
---
<a name="bundling-and-minification"></a><span data-ttu-id="c4ef7-104">バンドルと縮小</span><span class="sxs-lookup"><span data-stu-id="c4ef7-104">Bundling and Minification</span></span>
====================
<span data-ttu-id="c4ef7-105">によって[Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="c4ef7-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="c4ef7-106">2 つの手法のバンドルと縮小要求読み込み時間を向上させるために ASP.NET 4.5 で使用することができます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="c4ef7-107">バンドルと縮小サーバーへの要求の数が減り、要求されたアセット (CSS および JavaScript を使用します。) などのサイズを小さくして読み込み時間を向上させます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>


<span data-ttu-id="c4ef7-108">現在の主なブラウザーのほとんどの数を制限する[同時接続](http://www.browserscope.org/?category=network)ごとに 6 個の各ホスト名です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="c4ef7-109">つまり、6 つの要求が処理中に、ホスト上のアセットの追加の要求はブラウザーによってキューすることです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="c4ef7-110">次の図では、IE F12 開発者ツール ネットワーク タブは、サンプル アプリケーションのバージョン情報の表示に必要な資産のタイミングを示します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="c4ef7-112">グレーのバーは、6 つの接続の制限を待機しているブラウザーによって、要求がキューに置かれた時刻を表示します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="c4ef7-113">黄色のバーは、最初のバイトまで要求時間、要求を送信し、サーバーからの最初の応答の受信にかかった時間は、します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="c4ef7-114">青いバーは、サーバーからの応答データを受信するのにかかる時間を表示します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="c4ef7-115">詳細なタイミング情報を取得する資産をダブルクリックすることができます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="c4ef7-116">たとえば、次の図は読み込みのタイミングの詳細を示しています。、 */Scripts/MyScripts/JavaScript6.js*ファイル。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="c4ef7-117">上記の図に示す、**開始**イベント、どのにより、ブラウザーのため、要求がキューに時間が同時接続の数を制限します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="c4ef7-118">ここでは、要求はキューに置か 46 (ミリ秒) の別の要求が完了するを待っています。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="c4ef7-119">バンドル化</span><span class="sxs-lookup"><span data-stu-id="c4ef7-119">Bundling</span></span>

<span data-ttu-id="c4ef7-120">バンドル化とは、簡単に結合または 1 つのファイルを複数のファイルをバンドルする ASP.NET 4.5 での新機能です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="c4ef7-121">CSS、JavaScript、およびその他のバンドルを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="c4ef7-122">ファイル数を減らしてでは、少数の HTTP 要求をするには、最初のページ読み込みのパフォーマンスを向上できますを意味します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="c4ef7-123">次の図は、この時点でバンドルと縮小が有効になっているが、以前は、表示されているバージョン情報ビューの同じタイミング ビューを示します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="c4ef7-124">縮小</span><span class="sxs-lookup"><span data-stu-id="c4ef7-124">Minification</span></span>

<span data-ttu-id="c4ef7-125">縮小では、さまざまなスクリプトまたは不要な空白文字とコメントを削除して、1 文字に変数名を短くなど、css を別のコードの最適化を実行します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="c4ef7-126">次の JavaScript 関数を検討してください。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="c4ef7-127">縮小、後に、関数は、次に縮小されます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="c4ef7-128">コメントと不要な空白文字を削除するだけでなく、次のパラメーターと変数の名前が変更された (切り捨て) には、次のように。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="c4ef7-129">**翻訳元**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-129">**Original**</span></span> | <span data-ttu-id="c4ef7-130">**名前変更**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="c4ef7-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="c4ef7-131">imageTagAndImageID</span></span> | n |
| <span data-ttu-id="c4ef7-132">イメージ コンテキスト</span><span class="sxs-lookup"><span data-stu-id="c4ef7-132">imageContext</span></span> | <span data-ttu-id="c4ef7-133">t</span><span class="sxs-lookup"><span data-stu-id="c4ef7-133">t</span></span> |
| <span data-ttu-id="c4ef7-134">imageElement</span><span class="sxs-lookup"><span data-stu-id="c4ef7-134">imageElement</span></span> | <span data-ttu-id="c4ef7-135">i</span><span class="sxs-lookup"><span data-stu-id="c4ef7-135">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="c4ef7-136">バンドルの影響と縮小</span><span class="sxs-lookup"><span data-stu-id="c4ef7-136">Impact of Bundling and Minification</span></span>

<span data-ttu-id="c4ef7-137">次の表は、すべてのアセットを個別に一覧表示して、サンプル プログラムのバンドルと縮小 (B/M) を使用してのいくつかの重要な違いを示します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-137">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="c4ef7-138">**B/M を使用します。**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-138">**Using B/M**</span></span> | <span data-ttu-id="c4ef7-139">**B/M なし**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-139">**Without B/M**</span></span> | <span data-ttu-id="c4ef7-140">**変更**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-140">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="c4ef7-141">**ファイルの要求**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-141">**File Requests**</span></span> | <span data-ttu-id="c4ef7-142">9</span><span class="sxs-lookup"><span data-stu-id="c4ef7-142">9</span></span> | <span data-ttu-id="c4ef7-143">34</span><span class="sxs-lookup"><span data-stu-id="c4ef7-143">34</span></span> | <span data-ttu-id="c4ef7-144">256%</span><span class="sxs-lookup"><span data-stu-id="c4ef7-144">256%</span></span> |
| <span data-ttu-id="c4ef7-145">**サポート技術情報の送信**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-145">**KB Sent**</span></span> | <span data-ttu-id="c4ef7-146">3.26</span><span class="sxs-lookup"><span data-stu-id="c4ef7-146">3.26</span></span> | <span data-ttu-id="c4ef7-147">11.92</span><span class="sxs-lookup"><span data-stu-id="c4ef7-147">11.92</span></span> | <span data-ttu-id="c4ef7-148">266%</span><span class="sxs-lookup"><span data-stu-id="c4ef7-148">266%</span></span> |
| <span data-ttu-id="c4ef7-149">**KB 受信**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-149">**KB Received**</span></span> | <span data-ttu-id="c4ef7-150">388.51</span><span class="sxs-lookup"><span data-stu-id="c4ef7-150">388.51</span></span> | <span data-ttu-id="c4ef7-151">530</span><span class="sxs-lookup"><span data-stu-id="c4ef7-151">530</span></span> | <span data-ttu-id="c4ef7-152">36%</span><span class="sxs-lookup"><span data-stu-id="c4ef7-152">36%</span></span> |
| <span data-ttu-id="c4ef7-153">**読み込み時間**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-153">**Load Time**</span></span> | <span data-ttu-id="c4ef7-154">510 MS</span><span class="sxs-lookup"><span data-stu-id="c4ef7-154">510 MS</span></span> | <span data-ttu-id="c4ef7-155">780 MS</span><span class="sxs-lookup"><span data-stu-id="c4ef7-155">780 MS</span></span> | <span data-ttu-id="c4ef7-156">53%</span><span class="sxs-lookup"><span data-stu-id="c4ef7-156">53%</span></span> |

<span data-ttu-id="c4ef7-157">送信されたバイト数には、ブラウザーは要求に適用される HTTP ヘッダーを非常に冗長のバンドルを大幅に軽減が必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-157">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="c4ef7-158">受信したバイト数の削減がためサイズの大きなファイル (*Scripts\jquery-ui-1.8.11.min.js*と*Scripts\jquery-1.7.1.min.js*) 縮小は既にです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-158">The received bytes reduction is not as large because the largest files (*Scripts\jquery-ui-1.8.11.min.js* and *Scripts\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="c4ef7-159">注: 使用するサンプル プログラムでタイミング、 [Fiddler](http://www.fiddler2.com/fiddler2/)低速なネットワークをシミュレートするツールです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-159">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="c4ef7-160">(、Fiddler から**ルール**メニューの **パフォーマンス**し**モデム スピードのシミュレート**)。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-160">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="c4ef7-161">デバッグとバンドルおよび JavaScript の縮小</span><span class="sxs-lookup"><span data-stu-id="c4ef7-161">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="c4ef7-162">簡単に開発環境で、JavaScript のデバッグ (ここで、 [compilation 要素](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)で、 *Web.config*に設定されているファイル`debug="true"`)、JavaScript ファイルが組み込まれていないため、または縮小します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-162">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="c4ef7-163">JavaScript ファイルのバンドルし、縮小の場所は、リリース ビルドをデバッグすることもできます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-163">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="c4ef7-164">IE F12 開発者ツールを使用して、次のアプローチを使用して縮小されたバンドルに含まれる JavaScript 関数をデバッグします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-164">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="c4ef7-165">選択、**スクリプト**タブをクリックし、**デバッグを開始**ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-165">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="c4ef7-166">[アセット] ボタンを使用してデバッグする JavaScript 関数を含むバンドルを選択します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-166">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="c4ef7-167">JavaScript の縮小を書式設定を選択して、**構成ボタン**![](bundling-and-minification/_static/image5.png)を選択し**形式 JavaScript**です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-167">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="c4ef7-168">**検索スクリプト**t 入力ボックス、デバッグする関数の名前を選択します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-168">In the **Search Scrip** t input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="c4ef7-169">次の図の**AddAltToImg**で入力した、**検索スクリプト**t 入力ボックス。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-169">In the following image, **AddAltToImg** was entered in the **Search Scrip** t input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="c4ef7-170">F12 開発者ツールでのデバッグの詳細については、MSDN の記事を参照してください。 [JavaScript エラーのデバッグに F12 開発者ツールを使用して](https://msdn.microsoft.com/en-us/library/ie/gg699336(v=vs.85).aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-170">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/en-us/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="c4ef7-171">制御バンドルと縮小</span><span class="sxs-lookup"><span data-stu-id="c4ef7-171">Controlling Bundling and Minification</span></span>

<span data-ttu-id="c4ef7-172">バンドルし縮小が有効か無効でデバッグ属性の値を設定して、 [compilation 要素](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)で、 *Web.config*ファイル。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-172">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="c4ef7-173">次の XML で`debug`はこれを true に設定するバンドルと縮小が無効になっています。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-173">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="c4ef7-174">バンドルと縮小を有効にするには設定、`debug`値を"false"です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-174">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="c4ef7-175">オーバーライドすることができます、 *Web.config*による設定、`EnableOptimizations`プロパティを`BundleTable`クラスです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-175">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="c4ef7-176">次のコードは、バンドルと縮小を有効にしのすべての設定を上書き、 *Web.config*ファイル。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-176">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="c4ef7-177">しない限り、`EnableOptimizations`は`true`またはデバッグ属性、 [compilation 要素](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)で、 *Web.config*に設定されているファイル`false`ファイルはバンドルまたは縮小されません。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-177">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="c4ef7-178">さらに、.min バージョンのファイルは使用されませんが、完全なデバッグ バージョンが選択されます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-178">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="c4ef7-179">`EnableOptimizations`デバッグの属性をオーバーライドします、 [compilation 要素](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)で、 *Web.config*ファイル</span><span class="sxs-lookup"><span data-stu-id="c4ef7-179">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)  in the *Web.config* file</span></span>


## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="c4ef7-180">バンドルを使用して ASP.NET Web フォームと Web ページの縮小</span><span class="sxs-lookup"><span data-stu-id="c4ef7-180">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="c4ef7-181">Web ページは、ブログ エントリを参照してください。 [Web 最適化 Web Pages サイトを追加する](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-181">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="c4ef7-182">Web フォーム、ブログ記事を参照してください。[バンドルを追加すると Web フォームに縮小](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-182">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="c4ef7-183">バンドルを使用して、ASP.NET MVC での縮小</span><span class="sxs-lookup"><span data-stu-id="c4ef7-183">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="c4ef7-184">このセクションの内容をバンドルを確認するプロジェクトと縮小 ASP.NET MVC を作成します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-184">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="c4ef7-185">という名前の新しい ASP.NET MVC インターネット プロジェクトを最初に、作成**MvcBM**の既定値のいずれかを変更することがなくです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-185">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="c4ef7-186">開く、*アプリ\_Start\BundleConfig.cs*ファイルを確認、`RegisterBundles`メソッドを作成し、登録し、バンドルを構成するために使用します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-186">Open the *App\_Start\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="c4ef7-187">次のコードの一部を示しています、`RegisterBundles`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-187">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="c4ef7-188">上記のコードでは、という名前の新しい JavaScript バンドル*~/bundles/jquery*適切なすべてが含まれている (デバッグまたはが縮小する*。vsdoc*) 内のファイル、*スクリプト*ワイルドカード文字列"~/Scripts/jquery-{バージョン} .js"に一致するフォルダーです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-188">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="c4ef7-189">ASP.NET MVC 4 では、つまり、デバッグ構成では、ファイル*jquery 1.7.1.js*バンドルに追加されます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-189">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="c4ef7-190">構成では、リリース、 *jquery 1.7.1.min.js*追加されます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-190">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="c4ef7-191">バンドルのフレームワークにはなどのいくつかの一般的な規則が次に示します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-191">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="c4ef7-192">"FileX.min.js"と"FileX.js"が存在する場合は、".min"リリースのファイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-192">Selecting ".min" file for release when "FileX.min.js" and "FileX.js" exist.</span></span>
- <span data-ttu-id="c4ef7-193">デバッグ用の非".min"バージョンを選択します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-193">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="c4ef7-194">無視しています"-vsdoc"IntelliSense でのみ使用されるファイル (jquery-1.7.1-vsdoc.js) などです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-194">Ignoring "-vsdoc" files (such as jquery-1.7.1-vsdoc.js), which are used only by IntelliSense.</span></span>

<span data-ttu-id="c4ef7-195">`{version}` JQuery の適切なバージョン jQuery バンドルを自動的に作成に使用前に示したワイルドカードに一致する、*スクリプト*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-195">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="c4ef7-196">この例ではワイルドカードを使用すると、次の利点があります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-196">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="c4ef7-197">NuGet を使用してバンドルの前のコードまたはページの表示での jQuery 参照を変更することがなく jQuery の新しいバージョンに更新できます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-197">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="c4ef7-198">自動的に選択、フル バージョンのデバッグ構成とリリース".min"バージョンを作成します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-198">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="c4ef7-199">CDN を使用します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-199">Using a CDN</span></span>

 <span data-ttu-id="c4ef7-200">次のコードは、ローカルの jQuery バンドルを CDN jQuery バンドルに置き換えます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-200">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="c4ef7-201">上記のコードで jQuery からの要求が CDN のリリースでモードと jQuery のデバッグ バージョンはフェッチされてからローカルでデバッグ モードで中にします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-201">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="c4ef7-202">CDN を使用する場合、CDN 要求が失敗した場合にフォールバック メカニズムが必要です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-202">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="c4ef7-203">次のマークアップは、jQuery は CDN 失敗要求に追加レイアウト ファイルはスクリプトの末尾からフラグメントします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-203">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="c4ef7-204">バンドルを作成します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-204">Creating a Bundle</span></span>

<span data-ttu-id="c4ef7-205">[バンドル](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx)クラス`Include`メソッドは各文字列がリソースへの仮想パスをここでは、文字列の配列を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-205">The [Bundle](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="c4ef7-206">次のコードで RegisterBundles メソッドから、*アプリ\_Start\BundleConfig.cs*ファイルは、複数のファイルは、バンドルに追加を示しています。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-206">The following code from the RegisterBundles method in the *App\_Start\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="c4ef7-207">[バンドル](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx)クラス`IncludeDirectory`ディレクトリ (および必要に応じてすべてのサブディレクトリ) 内の指定された検索パターンに一致するすべてのファイルを追加するメソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-207">The [Bundle](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="c4ef7-208">[バンドル](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx)クラス`IncludeDirectory`API を次に示します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-208">The [Bundle](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="c4ef7-209">Render メソッドを使用して、ビューで参照されるバンドル ( `Styles.Render` CSS のおよび`Scripts.Render`JavaScript 用)。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-209">Bundles are referenced in views using the Render method, ( `Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="c4ef7-210">次のマークアップ、 *\shared\\_Layout.cshtml*ファイルは、既定の ASP.NET インターネット プロジェクトのビューで CSS および JavaScript のバンドルを参照する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-210">The following markup from the *Views\Shared\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="c4ef7-211">Render メソッドは、コードの 1 つの行で複数のバンドルを追加するために、文字列の配列を受け取ることがわかります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-211">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="c4ef7-212">アセットを参照するために必要な HTML を作成する Render メソッドを使用する場合は一般にします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-212">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="c4ef7-213">使用することができます、`Url`マークアップのアセットを参照するために必要な資産への URL を生成する方法です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-213">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="c4ef7-214">新しい HTML5 を使用すると想定[async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async)属性。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-214">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="c4ef7-215">次のコードは、modernizr を使用して参照する方法を示します、`Url`メソッドです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-215">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="c4ef7-216">使用して、"\*"ファイルを選択するワイルドカード文字</span><span class="sxs-lookup"><span data-stu-id="c4ef7-216">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="c4ef7-217">指定された仮想パス、`Include`のメソッドと、検索パターン、`IncludeDirectory`メソッドには、いずれかを指定できる"\*"プレフィックスまたは最後のパス セグメント内にサフィックスとしてワイルドカード文字です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-217">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="c4ef7-218">検索文字列では大文字小文字を区別します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-218">The search string is case insensitive.</span></span> <span data-ttu-id="c4ef7-219">`IncludeDirectory`メソッドには、オプションのサブディレクトリを検索します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-219">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="c4ef7-220">次の JavaScript ファイルでは、プロジェクトを考慮してください。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-220">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="c4ef7-221">*Scripts\Common\AddAltToImg.js*</span><span class="sxs-lookup"><span data-stu-id="c4ef7-221">*Scripts\Common\AddAltToImg.js*</span></span>
- <span data-ttu-id="c4ef7-222">*Scripts\Common\ToggleDiv.js*</span><span class="sxs-lookup"><span data-stu-id="c4ef7-222">*Scripts\Common\ToggleDiv.js*</span></span>
- <span data-ttu-id="c4ef7-223">*Scripts\Common\ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="c4ef7-223">*Scripts\Common\ToggleImg.js*</span></span>
- <span data-ttu-id="c4ef7-224">*Scripts\Common\Sub1\ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="c4ef7-224">*Scripts\Common\Sub1\ToggleLinks.js*</span></span>

![dir imag](bundling-and-minification/_static/image7.png)

<span data-ttu-id="c4ef7-226">次の表のように、ワイルドカードを使用してバンドルに追加されたファイルを示しています。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-226">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="c4ef7-227">**Call**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-227">**Call**</span></span> | <span data-ttu-id="c4ef7-228">**ファイルを追加するか、例外が発生しました**</span><span class="sxs-lookup"><span data-stu-id="c4ef7-228">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="c4ef7-229">含まれます ("~/Scripts/Common/\*.js")</span><span class="sxs-lookup"><span data-stu-id="c4ef7-229">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="c4ef7-230">*AddAltToImg.js、ToggleDiv.js、ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="c4ef7-230">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="c4ef7-231">含まれます ("~/Scripts/Common/T\*.js")</span><span class="sxs-lookup"><span data-stu-id="c4ef7-231">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="c4ef7-232">無効なパターンの例外。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-232">Invalid pattern exception.</span></span> <span data-ttu-id="c4ef7-233">ワイルドカード文字はプレフィックスまたはサフィックスにのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-233">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="c4ef7-234">含まれます ("~/Scripts/Common/\*og\*")。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-234">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="c4ef7-235">無効なパターンの例外。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-235">Invalid pattern exception.</span></span> <span data-ttu-id="c4ef7-236">1 つだけのワイルドカード文字を許可します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-236">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="c4ef7-237">"が含まれます ("~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="c4ef7-237">"Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="c4ef7-238">*ToggleDiv.js、ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="c4ef7-238">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="c4ef7-239">"が含まれます ("~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="c4ef7-239">"Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="c4ef7-240">無効なパターンの例外。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-240">Invalid pattern exception.</span></span> <span data-ttu-id="c4ef7-241">純粋なワイルドカード セグメントが正しくありません。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-241">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="c4ef7-242">IncludeDirectory ("~/Scripts/Common"、"T\*")</span><span class="sxs-lookup"><span data-stu-id="c4ef7-242">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="c4ef7-243">*ToggleDiv.js、ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="c4ef7-243">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="c4ef7-244">IncludeDirectory ("~/Scripts/Common"、"T\*"は true、)</span><span class="sxs-lookup"><span data-stu-id="c4ef7-244">IncludeDirectory("~/Scripts/Common", "T\*",true)</span></span> | <span data-ttu-id="c4ef7-245">*ToggleDiv.js、ToggleImg.js、ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="c4ef7-245">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span></span> |

<span data-ttu-id="c4ef7-246">バンドルに各ファイルを明示的に追加することをお勧め一般に、次のようなファイルの読み込みのワイルドカード経由で。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-246">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="c4ef7-247">既定ではワイルドカード スクリプトを追加して、これは通常たくない、アルファベット順に読み込みます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-247">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="c4ef7-248">CSS および JavaScript ファイルは頻繁に (アルファベット以外の) 特定の順序で追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-248">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="c4ef7-249">このリスクを軽減するには、カスタムの追加を[IBundleOrderer](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer(VS.110).aspx)の実装が各ファイルは、以下のエラーが発生しやすいを明示的に追加します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-249">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="c4ef7-250">たとえば、変更する必要がありますが、将来のフォルダーに新しいアセットを追加する可能性があります、 [IBundleOrderer](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer(VS.110).aspx)実装します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-250">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="c4ef7-251">読み込みワイルド カードを使用してディレクトリに追加されるビューの特定のファイルは、そのバンドルを参照しているすべてのビューに含めることができます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-251">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="c4ef7-252">バンドルには、ビューの特定のスクリプトを追加する場合、バンドルを参照している他のビューに JavaScript エラーが発生した可能性があります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-252">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="c4ef7-253">その他のファイルがインポートされる CSS ファイルは、2 回読み込まれているインポートされたファイルで発生します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-253">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="c4ef7-254">たとえば、次のコードは、ほとんどの 2 回読み込んで jQuery UI のテーマの CSS ファイルをバンドルを作成します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-254">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

 <span data-ttu-id="c4ef7-255">ワイルド カード セレクター"\*.css"では、フォルダー内の各 CSS ファイル内を含め、 *Content\themes\base\jquery.ui.all.css*ファイル。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-255">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\themes\base\jquery.ui.all.css* file.</span></span> <span data-ttu-id="c4ef7-256">*Jquery.ui.all.css*ファイルは他の CSS ファイルをインポートします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-256">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="c4ef7-257">バンドルのキャッシュ</span><span class="sxs-lookup"><span data-stu-id="c4ef7-257">Bundle Caching</span></span>

<span data-ttu-id="c4ef7-258">バンドルは、バンドルが作成された時点から 1 年間の有効期限が切れる HTTP ヘッダーを設定します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-258">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="c4ef7-259">前に表示したページ、IE がバンドルの条件付き要求を行わない Fiddler 表示に移動する場合はありません、バンドルの IE から HTTP GET 要求およびサーバーからの HTTP 304 応答はありません。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-259">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="c4ef7-260">(各バンドルの HTTP 304 応答に結果として得られる) F5 キーを持つ各バンドルの条件付き要求を行い、IE を強制することができます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-260">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="c4ef7-261">使用して完全更新を強制できます ^ f5 キーを押して (各バンドルの HTTP 200 の応答に結果として得られる)。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-261">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="c4ef7-262">次の図は、**キャッシュ**Fiddler 応答 ウィンドウのタブ。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-262">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![fiddler キャッシュ イメージ](bundling-and-minification/_static/image8.png)

<span data-ttu-id="c4ef7-264">要求</span><span class="sxs-lookup"><span data-stu-id="c4ef7-264">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="c4ef7-265">バンドルは**AllMyScripts**クエリ文字列のペアを格納および**v = r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-265">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="c4ef7-266">クエリ文字列**v**トークンの一意の識別子のキャッシュに使用されている値を持ちます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-266">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="c4ef7-267">ASP.NET アプリケーションが要求は、バンドルに変化がない限り、 **AllMyScripts**このトークンを使用してバンドルします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-267">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="c4ef7-268">バンドル内のファイルが変更された場合、ASP.NET optimization フレームワークにはバンドルのブラウザーの要求が、最新のバンドルを取得するを確保し、新しいトークンが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-268">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="c4ef7-269">IE9 F12 開発者ツールを実行して以前に読み込まれたページに移動すると、IE 誤って表示各バンドルおよび HTTP 304 を返すサーバーに対する条件付きの GET 要求。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-269">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="c4ef7-270">IE9 のブログ エントリで条件付き要求が行われたかどうかの問題が理由を読み取ることができる[Cdn を使用して、Web サイト パフォーマンスを向上させる Expires](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-270">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="c4ef7-271">小さい、CoffeeScript、SCSS、バンドルを Sass です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-271">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="c4ef7-272">バンドルと縮小フレームワークなど、中間言語を処理するメカニズムを提供する[SCSS](http://sass-lang.com/)、 [Sass](http://sass-lang.com/)、[小さい](http://www.dotlesscss.org/)または[Coffeescript](http://coffeescript.org/)、結果として得られるバンドルへの縮小などの変換を適用するとします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-272">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="c4ef7-273">たとえば、追加する[*.less](http://www.dotlesscss.org/) MVC 4 プロジェクトにファイルを。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-273">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="c4ef7-274">小さいコンテンツ用のフォルダーを作成します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-274">Create a folder for your LESS content.</span></span> <span data-ttu-id="c4ef7-275">次の例では、 *Content\MyLess*フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-275">The following example uses the *Content\MyLess* folder.</span></span>
2. <span data-ttu-id="c4ef7-276">追加、 [*.less](http://www.dotlesscss.org/) NuGet パッケージ**ドットなし**をプロジェクトにします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-276">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="c4ef7-277">![NuGet ドットなしのインストール](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="c4ef7-277">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="c4ef7-278">実装するクラスを追加、 [IBundleTransform](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundletransform(VS.110).aspx)インターフェイスです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-278">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="c4ef7-279">*.Less トランス フォームをプロジェクトに次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-279">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="c4ef7-280">小さいファイルのバンドルを作成、`LessTransform`と[CssMinify](https://msdn.microsoft.com/en-us/library/system.web.optimization.cssminify(VS.110).aspx)を変換します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-280">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/en-us/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="c4ef7-281">次のコードを追加、`RegisterBundles`メソッドで、*アプリ\_Start\BundleConfig.cs*ファイル。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-281">Add the following code to the `RegisterBundles` method in the *App\_Start\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="c4ef7-282">小さいバンドルを参照している任意のビューには、次のコードを追加します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-282">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="c4ef7-283">バンドルの考慮事項</span><span class="sxs-lookup"><span data-stu-id="c4ef7-283">Bundle Considerations</span></span>

<span data-ttu-id="c4ef7-284">バンドルを作成するときに実行する適切な規則は、バンドル名のプレフィックスとして「バンドル」を含めるにです。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-284">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="c4ef7-285">こうと、可能な限り[ルーティングの競合](https://forums.asp.net/post/5012037.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-285">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="c4ef7-286">バンドル内の 1 つのファイルを更新すると後、は、バンドルのクエリ文字列パラメーターの新しいトークンが生成され、完全バンドルが、次回クライアントが、バンドルを含むページを要求をダウンロードする必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-286">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="c4ef7-287">従来のマークアップが個別に各アセットが含まれる場合、変更されたファイルのみをダウンロードするとします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-287">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="c4ef7-288">頻繁に変更される資産のバンドルのよい候補になりましていない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-288">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="c4ef7-289">バンドルと縮小、主に、最初のページ要求の読み込み時間を向上します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-289">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="c4ef7-290">ブラウザー キャッシュ資産 (JavaScript、CSS、および画像) で web ページが要求されると後、同じページを要求するときに、バンドルと縮小すると、すべてのパフォーマンスが向上が提供するされませんやページは、同じサイトの同じアセットを要求するようにします。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-290">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="c4ef7-291">設定しない場合、ヘッダー、資産を正しく有効期限が切れるとバンドルと縮小を使用しない場合、ブラウザーの鮮度ヒューリスティックとしてマークされます資産古い数日後とブラウザー資産ごとの検証要求が必要です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-291">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="c4ef7-292">この例では、バンドルと縮小は、最初のページ要求の後に、パフォーマンスが向上を提供します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-292">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="c4ef7-293">詳細については、ブログを参照してください。 [Cdn を使用して、Web サイト パフォーマンスを向上させる Expires](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-293">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="c4ef7-294">使用してすべてのホスト名ごとに 6 つの同時接続のブラウザーの制限事項を軽減することができます、 [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-294">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="c4ef7-295">CDN が別のホスト名、ホスティング サイトよりであるために、CDN からの資産の要求は、ホスティング環境に 6 つの同時接続数の制限としてはカウントされません。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-295">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="c4ef7-296">CDN には、一般的なパッケージのキャッシュおよびエッジ キャッシュの利点も提供できます。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-296">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="c4ef7-297">バンドルを必要とするページでパーティション分割する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-297">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="c4ef7-298">たとえば、既定のインターネット アプリケーションの ASP.NET MVC テンプレートを作成 jQuery 検証バンドル jQuery と区別します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-298">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="c4ef7-299">値を投稿しないで、作成される既定のビューが入力があるないため、検証のバンドルは記述していません。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-299">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="c4ef7-300">`System.Web.Optimization` System.Web.Optimization.DLL で名前空間の実装です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-300">The `System.Web.Optimization` namespace is implemented in System.Web.Optimization.DLL.</span></span> <span data-ttu-id="c4ef7-301">活用し WebGrease ライブラリ (WebGrease.dll) のサイズ縮小機能 Antlr3.Runtime.dll を使用します。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-301">It leverages the WebGrease library (WebGrease.dll) for minification capabilities, which in turn uses Antlr3.Runtime.dll.</span></span>

<span data-ttu-id="c4ef7-302">*クイック投稿を行うし、リンクを共有する Twitter を使用します。マイ Twitter のハンドルが*:[@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="c4ef7-302">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="c4ef7-303">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="c4ef7-303">Additional Resources</span></span>

- <span data-ttu-id="c4ef7-304">ビデオ:[バンドル化と最適化](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing)によって[Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="c4ef7-304">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="c4ef7-305">[最適化の Web サイトに追加する、Web ページ](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-305">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="c4ef7-306">[追加するバンドルと縮小 Web フォームを](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="c4ef7-306">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="c4ef7-307">[バンドルのパフォーマンスに及ぼす影響と Web サイトの参照に縮小](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx)によって[佐藤さん F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen)[@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="c4ef7-307">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="c4ef7-308">[Cdn を使用して Web サイトのパフォーマンスを向上させるために有効期限が切れると](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx)Rick anderson[@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="c4ef7-308">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="c4ef7-309">RTT (ラウンドト リップ時間) を最小限に抑える</span><span class="sxs-lookup"><span data-stu-id="c4ef7-309">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="c4ef7-310">貢献者</span><span class="sxs-lookup"><span data-stu-id="c4ef7-310">Contributors</span></span>

- <span data-ttu-id="c4ef7-311">最後にハオ トリム</span><span class="sxs-lookup"><span data-stu-id="c4ef7-311">Hao Kung</span></span>
- [<span data-ttu-id="c4ef7-312">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="c4ef7-312">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="c4ef7-313">Diana LaRose</span><span class="sxs-lookup"><span data-stu-id="c4ef7-313">Diana LaRose</span></span>
